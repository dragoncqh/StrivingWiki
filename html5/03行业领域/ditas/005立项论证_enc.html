<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"6d29ab6b2f265f97b06bf00ba23602511dbe688442f9fde2cc27f7716ed79d26dd107748f90c1abe4e319c6c055b864f26739a91c0973b0142864b515b63ad58bbe744faf72f69a3585e19bc4bb1bbab408f9b1f4c89b267543b0febcf2b9dca81344f081f3404128be44ee778cfe62d88514aca680b5abfffb5e6b7e9b284bb3b8f6ae735683cae9a0d5ae8c9ca6ae7ec5eb5c816d2e5ee5b3f753534166bceb5b750bb81216512f25e89471478f758472418afe7cc250d93888056b7f62c0dd915df34eb46e490311c9df9a69a4a0e89577c399595e24292e159b70dac7b39470302b2ced99266009f3cae2bf31abeaf1cdfbf293ac590ecd5c47e94904f26f71ba3c7ab986552e71879d23625a786e68d262a958359ed0654e5e53f923a37ae2f06eb1023ff3ff4a71f935b5378ad0bf863a825a26831da7d358401c54de4042b5f157616d2a0fd326ffcda848d7af2413c166458197243f7226b49fa6fd0d10a8de2057089a73547d676dc6612ec2c9078c57340187b4876584a133521c73f3949e452164529c9c2f1c4b4537a651ccac71f26406364709469d87166e6bd31a2c84e87318d2d3494f18fe03b81966db71d349a2c834a250c96949224a53a83768454680b6fd4429f526c24e9d532bcebda42f109f7d38fb08e45cf854829efe584015227989e690f3da46b48970a4047a5a6e03450ac73fba146108e435670215fa4f994e069f74b241ff3ddded8eeefc7641e6a044ebbc82670674ac835d702388aafd13cd9ebeb22a638a6d7b9ff8e4673aab3e843fd65d597602dd378cb66500295b10b1555809bd3dda5217b42d6fdcc40bda4e9d0119750cb4789683ee71e42bd66e68d39f9096e3368ac7b504938baa8868674e8f6730d01f743d65d609cecb5a80f50ef26954880d2e8704727e6e8efb99c4d5980168a25470ea3fe011cf9e36de5f31c3dae3e7aa9e256fb06c4f9f0f85a62e520c43b4c0d18bc8c2e632f666a0e55602abda8ac58bfcf08ce14bf7be0fdc9abdd09657ab2eabf1e3549b453dcdba03fc5b21acdf2885c42d3c56198aee84ef3edd04864acaf534b9afa6de37dfdb92cbaac5afa311e90b8cdaa2cd8c3a3775c45e5b67540ce39f426719800722584733c2bcf7b37527521b7d7614b170e0fa636a45cb67f540347e6f59eb8d29ac4dc0f6f512fe9a01391324b22f1d5cb387abc8301814436ba350ff80e5a6fc49d4675d90faf5700ee9e0a3a5157fb58a14b6b234db30f6589486585a427a87dbe040a6b51fce3ac920b33f57e2a5b40ae1a3969527fdb9bde947c99d90040ef7fd8484547973948f3b26e186b42d76a4b4a568a3ea7768b8cd02dc47790c73e2b21bb019669f61aec17f511f16a86b8965e2279046929a8a1795103d7010e9abd6c7c961580f4954b8a7fec5d5bff15ca44b3daba0f4f91f387eea184fdba4e36ecd8c1be0f88a5a8c343398161e68acad51f93fce3579e2fd49bc1895cdbbf7d65c5547d3d51931bfc1d831953b756fb31ee458d183eee6ce9917041b393db92ea7b4456f0bc557f8ac8634da6161026d810e4b8a739e900a1f5cb67a21002493f54ef650c46f38044a2eee385703fa75b490613e592df851df2fe569b644f5272c279c770fb2f87ebcd6cca2e516be24d9599b82ead4b0afa59c03d707ca35ab487748c40ec2f943d06e9e4ca10db54622a586cdeefbf030582d0bcdcf8223fc83e521d5cd7acdc1cd8ccb9c1d6ccfedf112835df686b5f8cd0f306b3a0c82086b8413bacc177fa98abe8c693c4182cd26afcb0b08c336f266746d57cdf9d7455d2279437bae6260eaefd7ca7a5fc0550ceacaef6176f7b2936e24ec1a81f7c528c57f3d1335da55d854beceac20e5ebb332d4c3340ed8e2ef85a4215d32afb8ec7d5370b428ffe73cdff6a27a57a3a7dcc23dd1a121f6e01153e0e27af479837c67eca7719f860940bf8265d897cc0b5e4b29da727c183adf62b7016e67f8a15e9c9366c6cb3926ea5ddd66cb1be2a0b71c5459c2d4c466d989b2ed18f3cb79f451ac0e963a0da62e0d782cd5d06f5edf0aee03077faa44f9b075717be5fe52bd7756af0c77249df09eff550c5be403b29364ba58db0e66f68b496cdeeb09cce858ccfe9c12ec30c2c0f519ac38715fc711ff42f55ea0d8a513f154cebbef97c9fba769c4b88ee718d01564181ea053028161722026b26fe6f0d25b6fe7689c17bc3b67b4c27e841ee5b6ead0d4f4fdd988eda2be8868ca4af8f82d692ffcb3f294febb0ebc7e28fea46a4d0790810d6b10eec801e57d0fcd3c94aa9e1afbd784c21f72ad8e3c9656c3234f92e5712927e0aa63b79a12200f84435dc6bc3764d4131644eddfff3d0dd191e551ac04f831939216c67e76c1c10c7b93041d1565470e45279c6302760650e36d34860f14b86bb43304defecd81b53840c6b45932470e8675d3fd8cdd9061301206a91eebb14904baae59a1c0da9f6959e7e555976641733a1d305def942dde3c614e279275ce7b3111d31cc9875a99774f024d29b12c4b35d03d4653c2f675925849fe8d394bf8b7b788964e2e6fe928952f0e9cd061115e7b42e0c70baa50251ef69700de1884ef5ed168e1c6fc8f8ca42679f3c312fb8e199bf2333446ccecc4f829061ed1df7a454db5b4f1347fe24f7dd990706880d0f95b9f8718d861a696f5ced8e5c527ee522f42c190c9bb9cd9566abc0090fb170c6586f0a447e503e96109ff66de34f70a16b9c53cb4a04ab44c91cb27b3b2c91dcfb14c85439f7a7adea52dc8837c4e69b77ddd9a2af36d0006983a4358cf1606229bd0c8bf194b1c8432a73c61531dc67e8a9b5c87bd3985f4bdbdde3f7fb3898e9b774bae235da86c8b1a6b8bc06126245a39629fe7309f97c3bd9af27fd099552c62c6a907067723096f955a1b2452cb48c38c3b791bff68c18a549b29008640074eb4d0225c95c63850b892c218365b5d4500c6c626278d8ef70ae7ffb37e49ad3f3822ab616b095e19f485bc822becf8ab845beebf089ed6c156959e329bf3a2bcbd82c1fa949c0aecb3bd42ae44d02ad8427563edba2c26f8f059f2b16f0f18d361ff5d60d1c288c019ce06494289a7d5b4e29970ac6e0f831ee8a0d188ca58732ad50f4e167a6848462fbb0b0e1520a6e59c77f59d2b570f8fae4dabf5cc10a01e28f56f19b612d5af5fa5509a583357c7ab5c581429315d19331321432168452456870b7c96346d524b8d26606d16c324bcf6805dc1187f63891ef2d84942f5832e104c679eee11bca9633301f14406114d305df549e8eff05be8a6ef7c36a4b051c9088024c3ecb43df48a9ab0b5e447ed091de9c7166258b7caed14496122ab2a3b063723a2f4c28e00b58682901b666861d3bcdf1cc419d64fb384f29159a2b3a16715aa42387f9b794ac084e182f835849dfb87a9ff426ff1e946fe1282af31df6ba2694ee7b19115d27a2cd0d78c2d7a3510b5a52d080101497619cd9bd2c5a85fd6f83b936e632fc76ffe18d71934fa1c061d1afd07a4175e0c746002bbfd07bbf25f509db472602d4dbb8d9bfd9b341c31f2f0beb70141f85c7f586bf40556d2ca365116b86dd4a597663658ae09ef6cb03c472a0de9af96599183e1200d687bfbd16f423e13e3e7e2d38b457edd4b81d241d26f8cdebe8262975f354ff755ff5a84150b2c8ef0739d1554dd6a920c2bbb9cfc31dec7b42ecd4173a2b26c3f170a8abbde61a19596eefe546a8d34d9f32dfcb252020c157efcae5c1987e4ec93b9e53bc41a3c1b4ffeed65f5b043a28121e43d06cf4880920fe0606a7c4417da97cf8fe6aa928faefc1ff826bf15d2fcaac8b2ddffbd9a60c518234d2b1f7a218ebfc05268a81fb564af9786eb03f508159285a94400a0bdd8ca5442e2668241023e81a166eea2d92376e7c79103c39d94e78255a4d6de2a69798c7ea57a60795bdd58cb1ab5bf5d4a855d68e92d8d1239498739aa49dba288c8cb38d154be54e2e72dc807ac3d61ee2e953834aaeebe097746c6369254201a4083b6d8252721f052854a99e4de79de79137c43f964f4e8f47b9aa7168ebb045d56d93dbde896549c5aa64edf146129638216e7616a5d1064a9efdc2f0adf6ad8621036f52ad3be971b07a0d65b3fb3fa1f9d0d6ddff16efa7527e37276fa9867923ba3f6b46951ce7e004d510e77d690a2f4b028ed55e0d6d99adea7fdb365f79b9bf4236ee1a0ebd9417024eabce0cb7a7f54b1244d3195a6608f0f3e42e6d8224e636a122933e4b77c1f959143394325e4d1fe1a16c943af59c6d4bbe182d4f78e6897a09e021a360e187543578caffa043877fb43c43d1b14766a41e15d8cd977f65b560a25f52250f5e9ce014a436910d5fe174d9ada1a5a3edccd7ae3771a39546493507165bd015e67cc778353d496378fb0df014ad39711551579352dfa3c3288fd4978d29f128c79e1c7890a7eeaac7cca89508dafb39a0075843da90c3cce7bf56007e3295a76a12c27658cf9ec6545f07b83d31a6c8d256e8a22cd21cae0a907833e4e8a5e7b7ad37d762cd8951d000133631f4087b87462685452a87a796d511503188b5abb77ed8184b94d8a003e616ab91fa156d70711d6295b685ebb1cefe80e2e071276cddfcdea7a60e4baef0b32e79177596a98957c3e26f830055f653d490df39af6df7587aefcc6deb6d149f24d0e96f7f5b1e9f05473fdfbba5f24f8a6e18ec0d203dee855eb9b5d95b3df49cfabf469201ff3b312466b9793aeaf6931b08437ac2dc42ce1c19596421824b02e3293bfd32818a2bd1e1b409294300a460fca2ef4be0caf7f92f356e2df1044b4b16694a8631e1ba278d48d8d63a171b376e9feb6d5ff18bc4df54fdbef355b4fcd398cace82ee685e34f440fdd91926906598111ae126f3659a8152cc3930a789b7025dfa064271dc838b8e6714fbfb28d0dcbdfd51aab6dcb96026b9f250ffe580fb48365e7b5246fb624e2ffaaea4484ce566a77e069979808c6d486735cdd43c0c038f08825156f2094b3b915b32e7dfca54e0d7c1a9cd14a91d316de9d24adda3fe4cd45507197286355ad5e07743dc3600a9848a325b7a199d06d1bebe82f2b6e6f0f1e8f9b140bd227b2cbca75910f9939f9af32bf0ff4a49b3d8be92759f0fd1e658c5c6023e86884c09d6636f13b8d3686a5cc08659ba4fc25ac29dfec2b7d82dc8c7fc55693db899716ccc0d4c40a72857c71528680f9dd0005d5486bacb802d606cfe7399e3a1919ae7c9861fb5c0fa193a7db16baad305fe749f2b7f25c932d7c7f255f80fda3aba9a34103cd452d4fffc869e7fbe28122981ddd84f2ed8f9ad3b7818f1a39048df8218b3b66f1991d2e7fa4c8fe7338b8a51c7c2c62140ae56e17d2d681c5592e491e840aaf5131ed40ffea6ae180f4ed47f61b6eb053df2a5e92cd10a593fdedc66426af2507204cba43b27303a4a826ba6ae4f0ed5026badf2ed21b1a13b75c5611dc70ebeb12ab2de772bf7ec12c2e8bd67ff09c40356edc5aa2f67e8bc3efea730d1fb21c7875a4b09f79f35cc748763e88f27fe1619037366edaacfaaad9c2f4a40b74e3551d722fdd8d29987fa508699260bfd001e1c1b0d1ea4ff940f803104e906e44d50b23c22efc62d1fb0db628760b7fd9d4eb7f1f9fd58c65a5269c37773f6524acd6ff3f36e865682aca54b3cb3596423674fd640357bb1ac5b2d0f66b99ace1ef9d3e555fd556f7613f7d03d7b7ce9fa70ef0a26716d40a1234d1ce48202c0accda248b9ba98e1b68565a9fee0dddc35b7b7983b4cc911b05bb708a9072adb5a0bfee63dd5585c7b41fc2ae937e7cec2b8d0bd4043aed2300ff754ec131035b8e87558054983b85711106dc16a171ff08774f30a7dd1a6dbab164732c82724d8fb9a9ee7a5d2ff637c2ea1f17d75df35eef4b84e47a619f43ecf15849d48fb840b32bbf0e128b4cb6c2d30cff9412c5e2748a5992393196127eb2577df73b484a9475421499870132ae77121a23baeaae00551e96d2746fd674915ca35e2967853ffa5983a6cb30992f4fb747058d15d157728cc8a9639c3e61f304d1a4d462f60d4f614e3cd65cc5e3d7558b3a16a90b73840e3ca184a56813f198032e645de6ec9facee3506b2282cb89262bd4d917938e15a55b7d53471626d5a8dd97cf925b557ff5e4cdf680e1ea35fbc54e66f452a550741542dc0b6e32fd53ec8de127d4ed4f016df28935cffedf6fb14b1aa3626f1b93e27fc5a537b0c710ebd4d3d7294d53d0878da5209cdde466b5b0d00eb911e57c0a895b5e8e0e91c35a9570cca2ca0a5ed831d0c03a36707c28e798b359dea07e0d896050958f36f3b7f05aa9955e204d729dd16e6668a8ba5874f60ee75b625f5c23567a16fd853fcd2999dc9243d5d6d52b7421fac716cf28802aa6ec78be0cf1f5907c964c72eb6358eb9afebde6d647c8bfaa79dff591d6b56af861bd906edcceec639c0ce9f8caf6fcf79625a34a74de516a556e65a53bd9c08e496c603996f7db45c21d5d5d2a33f0513aac22f31753841a99c71f49c6e407dcd7f13d7cbb6f3af35efb2aa0022deb22d12d85c36cb6cd36a8a679abfce96f417b6548fc7a2c6573d3c77cb02aad32526e0d0d007e43a3015358d9762af3450ec5aa40223157ec058a28de119a91757fa1c35f52dccbc14001d0920b7d85967f4e4aad6fd351ae4181dcbc1ab28a2e64d68c708fb25b9473cbb84585e4ec153d5c46ad851b79e52da59cb7e219bbd02e2b35d7d1cdb25e4219af1150b6d54fed61a74c735fd8df7d340cc46e5b4c2ce0c35dee09a26ef2e56538e4159902d789e23646d03df2f06d7b399e6d115ac4385b9b17856be7d468324ece1d21417d74a821555b1f4507f09d0ed270347de2e3c85f2f99b730e8713021cf468c6758fab36132d7f0fcc7c12f15ae6fab0514182cc902ebbb500fe46358df5fa6e47bfb152e13eb9d18fbb635d4ef0b39e1ea32dc81a122ae1392a0c6c688b337b746fcf67fb48e912309cea55bd9b469d7e122fe9386b2fe9903672fb881614d091cfcbee760564040cbfa4e7480dbea72c5777dc4d2f560234365c4b865b6cb48c5e305642b5b4104a9840e6595b96cdd10e612ca261635664bbc831da0a3f71348a971c16c1de3045ea24e667ab3834b1473ff010659a3b8aee90e9f6273e081c2afc4383b6589d2c93351e819fa6a820281c70df03075d8c8be76a0275c08c6f7ffc2ca00fec0ceb803910254b7a66a2ca154ba6ca4d93e6ba90a11cefda60b431f071b348ef06ef294036df8745d7d085f719e9773dd6680d86cbe761f0fc9301c5c42e437c5b8ea559acbbfedf683aebf1a6da92b466478824c1d49225963dae341735cd7cfc0add5da221fb163b1370a48382d467d2b30227fb7c542595390e7252c255d4a748a1286aa3f6bd0a03c3adbab5d90a59d2d31b8064b5fc079601f6c5aa663048dd4addf824bee0513ec605727793f8c4d10024f181effab175a589c7ef74a022b4922785995b037ac924dda4421cdc2d5b4364018d3550f2e457a76f2a5e17cf699fb4630a3374d4abf436fe324e8df152a86741b8ac6237dc4ed0e4e6570e9c0d92f8855e2a073dab4b0ee2f00435e6ae95ef122dd99f10598314d7939e67f70bc02851ef8865d164a550c57fbcc461e3b58b966f05ace353a7d5114a76880a9893799963ff6db361be103bbab2bc33fb14b07362a020fe6f59e0b8e5b60ab03fabce6868815aa923feafbbbec23e9ef547699cf9bce27023e3eccf818628da6fc45d7d3fc34947695d7aaaef08a11ece61c2b38bac891c6c40bec9937553999ab34b2c1e6f701d207586c6837db8270d06eb7ae3b08b4da78c3678ed6c8acc54962adb7e3198dbe109c8f5cdfe83d3f0831e56fc7710e4e08f3f54f179ebc8ade0461a64e0a754cea6d6bdff89c9bb68a83a0a6a4fddac9fbdbeb809d5ced7481af3c06ce71bc8209d1278938e5e9a81b6ec52377915bfdcbefc49a561b4584621bb5e6e049012edadfcbfd736d0ebe1797cb8fb5785ef79c9037ec8a8b5034cd4fa8fce06f4fc8f40da7c89a4c9ea1e068b66b77a157a7c360958a64ac3ae7bcf8ee74c59399890245599ec62953163bf4f43d03dca2f483506aae787755b8e9486448fb7e5a826c8044c1da07672763010cec2befab968071c2096ca98dd7bd5ebb01ef65f3f2b8b61639535897e68d19741c1910e431480b7e09175eeedcf35cb434c46cdac079217e7f20c7c1e5625829aa07d3d5016f4c9c073807bfc00c3d4c136e5d46dda36d44c91694940c87e2b90d051c679a8eef65992550e529a8a9cf9edd0b406679d8b0c4f716da1dd7bb61af806ec4773dfc7ee1a7d68280407514abfe15398ef3bedfe9b884eff8c711b3bea5d0aff4efcc99c8ada0616ed6a410c3da7468d78dcfb5da74756aa2f9437b86428a9716b51820313d0a169849a98d76e3a0eac033fa33e979c4a2a28f705f97b2ebf01acd348f91395b73bb4f86c1d399348929a54dad833197b139eb2f5e63e3ea08960f2b3fea6831d3546f92e9246f7ae4c0b4fc5312626adca60fd414d5a763769a8aaac45f5730b324d5554ceb856a3b8b2b6a0f83077733d85e35bd9d6258f1fb325bac86beb5b8f9d3644f4b7a77e6e97149c6386f867928185ef138149c15141fa68e269fa3b6ec76dba17b1a3a2703a23c44135cb158a8c1aa788d054e2abe042a163763b356a5d9eefdeef4ae6c47f82414e1b6fbe00f16a800048314734da2ca70e9f1e9308391febc5dbe5d814a5eb9e3d9ac265168edcaa5301e82ba225de7d3247b3f893aa29459bbdc12fdf39150090119ce361eb6ad7563a574b22925f783fac4709140beaede530343ad6e053a3e9fac027b80b291768308a7fce8f2e4dbe068ee55a9a880233dcc4cb58582278037d12cf831079ef8aa527e8b743b1e09338e980cd15a51624c0c133cf2a87a4e16be40ad4da5973a17897c870e30ab66c14ec17e04abdd1d9387c66bd0d94a851b46547ac2f1bcb7602d1e594a603ac65a04a89c9068a37dd2078348f8d54607a5abb658fbf9d87198cbe1033a4589ff9abb51bf3edf3dd506e50972081f07f953f7cc239b388293ee530f4683686afb0f1a72c9a64aed1cd035408f3d5a66b8f6307ec4069015c606c3afd1941ed8c41e7c8d31b8af92155ee154744149c09487b89b34fed7a3c77a871e07519aadc657fb6f939a74be5f716be4484641aa990d53828cfa846dc17e59e70e937a1ee7638baf6d2a513b15cfb82effcf74ed6e4d9206f165385077c391f8bf026ae931ac2ff71c0c4c896aa70dc0df7a93e97d5b07aae96bb46ea38ecc60adf95f648bf4d1895688126686ff7c25fa98542ca9da45481de82d9c01f9dbf3850b97ec13ffd309ce6de1033571641957787b0265f8d5499e05013065a6db1eabfd20e49ea6eb60016fc3b943ed54b957f5bf7cb54ccee45f2236c56e7cdbc47fa97b5523069eca7b43bf5ff36860979942a2ed815b6aa5b2240ee333e2391f633af4f757abb0b7f3f3c4a5a60e7ae1331d548952d2d34c29b95a14a2b3d0e6fefb9395b13349ed7f448c33a1a76122c5061f7119b6a01eb996b71c40565d842f7fdea6bfd047c11af3905c1fd742b9b036f4dfa7a4913e88f7f3d7d5099c66dceafed42a22356c17bac607bc86978d56e0febbb06d0ea57fcf62a61f9698f5c37f77a5eaefc7e34a250acd37496ad804778243bc6c6e26a41c80b67efeefcb652368be908c6f431f29238e28d3ef9ebcf704a40e5bfb8f5356cfd21e4041b33d070cfe589401f7fdb917e610dc47afc92f7c7124a60d2f7bf738f57770ae6a67b93ae5aba161faa05cfff850e260b1966d5192d05dcaab9995e395dddca3ed541aba0f5aef76bd8588e4e1d71c971f219aadaa8b3349d52952c2c9869fee7236df853711c135152681633a6d3293ef31a8f54234f52890a3d95927287c41ae7beda4bfa3b061e18dd884939f3248972833f14950c3c01d3ed9c5a2b9ae88aa9c284400a185d055475c0e50847c496e687a35dbf146d1cb28e7218a92c1e769ba0b9be2689f4447ddb8803f64c8ceb967cdc4d27c2264da5397f99e7d4ce3ff3028a8624154ef0d09429650b1d0c1f1cdbda2aaca2f8b44e33381885e977c34e6ec10667e3fe0c9188b821a6fa10d094e286a6cc81816d074fd35f20d651ff89900fc15fb1dbe2c92e5c461d418efa503bfac7703636ae3daaf3d457518b932cab44e664b8528958f5ef30a33d6a0e3a2cb50718cbdfe5e92536efa871d87aca277b0a211355cce20d42c6eebc1b35878e1e4867b8f310570613b18ed0391b1eb23f4d0a1772448fceb5aff3e921353e183ef286946b4c447f289059adae2e0119c210435f9fec0b966e08e9a78801740517115dd783fefe8c6d20ba221eec66ec19fa07a0c0bc1c883a3ee2df3042b59d1febf0356cc47c65cb551eebe846afa0046d1c1d4ff8b0a47772f1d9888449f920d0b1730983872d867b94d3e98ddb0b70e313f126eba7b7e74cdcf6a8024ae7ddbed9c5ad24339e113650201d563842f2cdbe2e5c9b703cd9731bcc08f546cda680472c968e37c6198860cd68bb0a7cbbfe1e6995a7597659a526a337c098f785c57ba1a24c054fdd8a7a1e53c3437567f0453f4d99a458e3cebf88447c3d9e54c7339972e90fe4d167266912089d6ba4b2c2a54f0fc7629f1a7b30c688510e4400f00e5d85fdec9be40fd7eee6d52e4b9973e7edd4e1885ce0b42443e4dca8ce8472fe79394110bb36e11b02770079b33397ffaa2e502e3a0b6c586c71941b9956b26b17eafc44b82578cb7dac00f93ac81b3d0e528baed03c17e70c3bd449427a15d25ff70b5481d7a9a29b8cb81cc209947bb4c228ad9ee9c6f9ef7db831848ad960ed08728c5f829d45dccfb8a0a88f4753afe12f211be6de9c39f0690763ebbb588d2b042884b827facd1b07364400b05a8278dcc9ecc40b7de0e45ca3ccfb1dedc0fc67f4931dc3f2e8f8ec3d3a7d0d4cd7f8a6e5e6dc564c11610d35e33d32ecffca26b23ea0e51d259481e0e193f36cbe56fa0d8a1cc6bce87c20937c7759d5e662b9345f7f1e04cb636e20bb2d2d15deef99b0fef928651e648cdb92828b83c8a8fc41de640077741f315119fd5152e745c6abcad9bd0ce5ec52d75f951ff7ebc954a5c19db28f1369f3cab2aa02241a65534dd1231206ba72cb176953cfac6b1cc0ead5073062d37de9b300bf5bac0788fcb31f508607d5ff1ee3e31b713f3459c732ec74e199c3120be6cc14a465a87b8b3ef1a7b5e99d8f7e0b4732da95e6630b0f380782e24a3944b27409495dcc2c1a38e9a4d3b0390d9cc4485f39c98a2fa8423a131a56c66c829cdb9c93fba2beed8b5975aaba33c16d0077f0b24c320bf68e9452862926c49e9f20e3419aaccdbf4f21fa7c2322ad4ef1d728c2692fab3a33988471d14430b5f77e5620e6f126519b05f2d09edd16a202b0bbde02f43419e87721a83531887525ae03e5495e8a7179fa9238f7a07506040c4cd9fc0a6fb1e9682b4ca50d004bd6e6ef6f3ed473af730b19bbb5a9f4f2d419f949638cc3fbd1db688a5c9925c9a1cf004ab83998112d905c4363cc8c489090c92c582d33063e223f7575d8384f4b62bad375c80815e5d95d0c7e741d6c48640d40cf756bb03de10413d5cd7061ab4c7a0a46a5a624336d07ba5229842e44b7730760fb1492a826f2526b964cbc350ab44784f27d5d29c54f43d0428c03e723634e49c0b5ee7587456c548013de47f2c1124a56de374be32045ec211d33ef2d1975c37fb13a188c9e24d8e3ea5afbf64ab92e5d3b3526bc5743fa71f23e560e77aecb5ac1780e1a42006bfa776eb7864da7cc8436bf9c16a506889eed8f4cd781d497f4c8e75cefb92e266cc5b1c7ce3ad50e1647547433ef7a4ebb2c7ab267d1b0db346f6d6335e174783cfd35a60e2940461b68049c132ff0b40bb0898466ecb14b22cf812788b1f6466919283ad62eda03a2f62f39fc85bf88bd3ea9ae16e97d77499e4126b0a3414942aba7f59f887636da30f43bd7177e9a49fdaa813976ab40d960eebede0fc733674496527337a4b8a2bac7f6cfc1104c3ea19ee5412ade23447b75d33f3e567f75646fb27976df331f2a6509e94431a0dd753d0f5336700af2fdc9eec1fbdf6b3b5ec7c0379261a4a9bc697d34f5f3ef195d71991cb2d30ed9476d9fa27a3fd7c23c2c3cb05e2809546402a4089fbac1f7bbc259fcb5eabd09edbce1bcf0b9796b55c00812a444b78e8236dca51423b180bfd996f57c296e4b7df9acdf5fc3690fa87f84b25d7af35200414ad38d077901f3850fa207391421f3627c15bdb4dfc9b461f7b15a5b0f2c160ac16cf3a3392ed8a1246e3202c92829c860ea797bf9e82ecd9dfff38e28307b873d185fde4b16a35e37bb479bef8b0fa945a8421b38a5bf021a7b3ef25789fe4843d618c2cbd8522d1770328d0530ebb36fb83e841b4789c338f2ba66110010112ce5605ab12c0a91bb9843b98c7c1a5dd0d139a7c506e9c41e0f3fa8346044436ae5770161a5259364b5c193c58f6bffc2bef4be871d444a3707b3e66dfa45d09707afd4e7a1d6fe6faecb69ab277c7e379492db96477108c1a2229d13401911c27a7036a6d99f679b60d81ca19f105eb00fb91bb16a8d1bff457838f13ef796da9d5bcc803f7ad2aeca72b6bacd0328916b9e19a627f8569ad3fc44b7a62e35d50c935c2d1c627e920ebec15dd4c0d2dbeee7f13a99ad1a2b837662b3a2b5c9f2e6d38e26dbebc8bec4e428d72a3cbaab6b65943304590d9649046988d1427e7e5e3260944bb1c823a167be5ac98080f32e9e1fbed32c6d0c02488d6aebe66ab820ec41da776e2be23d8cb2ce78077f2115ee8891ed40c2bee9740d260ea579f5b268915aac8d592399831e0b5eb15bbf7313424c2923726e54bc936b36278df02d052b05df0ebc044ec9a0cfcb935cff6890201598587532042b59ca2cc9438edd649122b67f6ff0839c47fef3c689eac8ed23f2d5801eb8ae2bc173ec88b7af612ce5bd5e809c2a4bd8cf468c04c7bd78ae02db311913563cde2c433334a27d3a7955b5d631a642b6956c42c3ba9fda98348230a8137274d09059113750dce65facbcbae8d4e4da1c1556cb6bbe4994f9b3ef0a8e12515d5763e0abcdf12a8652053b26dec74fee20815910e3f41cb07495ade1358e518f887158f8eeac881d4867f38df653e9574b4639e43406be80f7b614f03155dd9d085d20cc96daac85ec37d2cd85d6beb6ea21f6df57efcafe838b90aac747851d57a270e12a1386b0e8b897a56bf9dd277f98b9d639c9dd5178151de043f2898d9a0fb0e16846ef253f28af8190af1b140aebf17c3f212abf003eabdf3e898a752495428818e417754166aa949c5c2c31e4b9c589542649a7583fad7c275b23a7ca213f786bf106eb18c6b3e431ec8abaf821753700d4dec231af947a69443edda281e468b1694a84b6462fbdcc3db8fbb150bb8520c7039a91326092a45bbe6f55d2faab193b75238657f2b024504e6f43a235daaf451c56d2bb257623884a478e6f99f270c78ed64a3d34f009d9a53264394d7544ed333741103c69d0efe53507e0ded91b09e2ff831685fd555a4fffccb466fc65e84660ffd5fedb445c356e478bce00bbe8c3ff976479113e2afca7d2b69695c0e062c1814e08ce26eaa98e429ec018a5d4938368087fef318f1c00cd5ae800d50d83c117c4b7af83bd2813e46dcc6a57133b6b51e2ca50e6a17814115292dbb5fcc8f92f85f722004f408042611f2e103477ec66b970954e9cbbe6edc3d7dd11c518ff1f1da2d9e5d792d44ca2c7d2bcde666d485d73dcc91cc779788f530807f02aaef8a5de7559e4f7e291de64a77e399ea21eb6c8029f717e411d6b4142570da68a9d3e630b4d21c2df7a76d370fcb934e4621df1bae5b9077df27620aae8cfdb1885a4981246e8e367ec7c04247ae516fc2baf0cd8cc5569738b2d8c495f31ab28e93d5e54f95e2b988466757795dbb48ae897b5e4152119ad8dfc4595d1c7e3e779bc50d5bb9ec181dd1ae5f36b75acd5ccbeb3ccd0369248c4b49c2805b09f261311dd66857d781f3e20cfb6c0f00934135863202f8b6929694a23eac9c2376daa16c175c53e9d83a64e1c880364123e7007f675549c235bb8cb6e5f7db35a40ba865b278e8e9588cd771df4e04c927855fe36d8941cab98739a6e5408a4241d7f1780cb26fcce1348e419b72e7e232f664548113d8c0553a1b4708ca2d11fd16240a9825d8ec2d7a0950eefcc4e02f1c49f9d9521f4cba52d098f32a75eb26bafa3f57a3b4bffa16af7ff47d352294185a7ca3f76cc5ef19fa34e53e25303a7849661ebaa432b144f6a71bcd1f1f83b9fac079e6cb9ebd22468937bbae6be5422c93d26000e95138ca424773665181dab984726b10b088024c6b25c272de247b0d25b2aaff915e7a257048052e72191d0f0cc56854df7436fc38ac6f511e5c488a04ac4adda91ccdb5628a1a1d422a28c4de280070d6332ab36f2d45d820cdef208e2989f64a902fb8421ba9eeb12dcd8a894c417e7e121435b6235d5d4796eed51145b0e91f0c64938f8edcfff109b8c4441d33b544b467baa6229a6cf26d233acb41553aaba8db0d54fdd5cdf8bad6fc0c4915af83e6ca9be5cab4b79b36eb17a4b83bfce5d78907e402b8dc8235eabacec08bb4d7f36a663d6f907a039a05a5c2d223001f98812810e4dff6c79b560828b9a6acffaffaf4f2cc9052268938273b10a63eca42139ee044497b76a9a89d1ae5c8037f47e0dc64161853224bb4f318e8182d7f96ccc57b07aabe713f74e42ed69ec5a9fbca464db0b004a621577ad661ec600701ac92427dd79bf21e6509e8edf8794218fdfeca1d4df1e0543ca0e927c65732dc4483e61e1b6f1c25595c7b80968a63cf685f3025ee841b828a33662ddbc2540e31330630cd613fee65572aa14e148e70b9d63ccb0bdb1c3d4310ab5144042a62a2cca0f8d24cdbd51f99c79d1e3b310630d0a0677f6613fecfb90dd46f5ba60019f12efea95c8cfc05505fbbbc5a39229890d87bc65f717312845ee945ded2edd5421666ee302009c69949d6cfa2270657119d2d0ae2a545a813c483022d7ba2931a62dedc1d68d75a630f15dd334047b433da36d01615265629da4650e3262386d5034c11b65dd351b8159e2322ab4799908bf0be7522ddd3cb343ad7d256646bb5c23865c5c05d784fc4aa33c60bf3a70aad01790bf18c1e3b6bcebd4932b4bcc1a45ed494da2671256cafc04868f0ba709b4b123fb15126d2adf6d1f7fc2da6b19f4ac8af35b7199f7c4cce1b3b73bcd2a604489f44441592d71ad9d80c1a01a64a6f9c71676cb513202d238838147250eedc4f5917cc3d74134e8ae70cd4ee8afd44e1683a3056385ed2713ceff828ab1c4ca05ca4f96771053ef1c9433ffa6356d9a0d6fa2f6079fdd1068bf169857bd02c8280b738fc44e9b2c49872e2197c718fef24ff8554242e3eb64ccf4971e02a78967d11955fafe80c7d3f15a1662296f2450e37a5e6d11a7fe54c36df6e7f9aed5650b788da99953164fbccaf5b3d13ecd966060f20aac7ab2933294d268795fa0a9cae122b2bb629990f9787a409fb74b9c407d5accb75d35aede43bc905e53989debab416d8c5d83903a8884c19b3eaa6f1cf9862b3f69d0a630d12e3c70c9c30a5748c9ab5ff883f1deb8f7b0dd59d7a524fb6205006e0fdb8f3f1bf752f899ce1fef0c764da46a5a5b1e4bf1786cd42b4510580a6a34d89d21f07d99463977ae7532d073cce435c8a16f411ae4070648311c691fb5b5bf13d90b0e58e38e7e46c728d6c1c10969d1134d4f53fc65ba890beb313e709657f1a47deca3551d0c5068c12640049ecb62ecfd9981f7feffa2e2b9c035e606b6b4799cb4300bc5cfd30f1d45e2bb6cb4e93f27d5018c14501c2ab3151447594fb17c8e0ef225c0d5bb3d084f7253076202e86fd9efb9486e28d54fac46fe1ed106ba568fd2fde421c3bba71207d650858d47b73bf9754a9484ebdf3b906754c9f34ed4950ddaebd725c736a7b4cf701e2faf767f35729e31d867140a7a33dfe29c087b6e1b40e1b6de18625e237dd567fe4c1e32e0a1cb0352d4804bd8697fae7bfa1671517063497bcd4fc14d7ff966005dbf6324e5d1bf1f1800ed6856db320bd9d0b114ff8c9e153cd0854d8efd7935eba856782cc9e86c64a85fa6e9e3a3621eb84719bb80eb2cb50252852c6d6b9dbbe55941f4d02633700bc9f54f5378534bf3ac5df316cd6d61c3005aaa95b7164f46855bd8a755bf3040a6f1c97f2c7177f24386f6a3429f09ffe6431851c71c86dbac42c570cbb1bcdc380360b79209a3544b6758821c128aca2e5173561df36e1fa23e15a307aa17c4bee1a486b9c8a01865562959d507d4ff54f00d92937c8739a42aff670f6fe5c40db77c889a7289dbccf120fbec16287c8b228b7dce799f41d7c9dab50c0f0f5fddc243ca8b186fda00a29d793c3973f5761bd9900868019116075a91050f72a19b189b517ddfb546cdbb7aac38fb5aa3ee8ac9361e414318aba2ee247d5eb54c3196ea4682710387f3a41509ef8cd7e08f50efcf60f89ae8628b1c10a7cff688e2f60b263da8c476951c3f750e9bd3fa5e1771b3bcd8d4ff932288e2f8ce8e08db69f7938749d5b338e27e39be4ad20ee61b27bc7d0428ffb8d182463ad5d6eb68da1c7bced46b47f06d258ab6f1db18cd0a9a7ce8a56268cc2444cb85e56afb5600d14548ea8eeaa715da87b82c07301076a0c27e212924d9e77063eb3df487767d5ac5720a1926f9da117ac1ceb05037150925642ace08a0922eba6dc1aaf60fccc2c6989b289c03a52ec6faa2e9afae93cc9f989164a0f2fa8a70f147ab2550c31169e9f68896e94536dcfb6d38274b956ac206f3697b3cbbdbba21d628a6effc79112c3d887851a1f95457ff7f286f39682c333017bcc7487c39ca12ea7a0b860310882de98f087f9f182d9498702c838449d829bc7607b6f86190ff1a01979a8d6614da1b6000ec4d0ee44078fe54e4929d2b6cfc50d5e9140a60ae1a9c978506c6963192e7d55b3a8cca51dd1a723278bf079e4fa585b8234139441bea74e20c0d6bbc270e104c7236ea1665845ea9f104cbf9db981ea503eb751eb6f9b34c26573d71146a5e06fb1e853addf2f124e431ef9b0096d4cd10de7fa7798e9bc7a8b7d83b1c782210d7a3685050e851dcba41cbdb21874f67e672fd9bf17495dc2a7db694582ad6da738c730ae90e8369ff0da54b605692f0af69fba6ad428a20658eab278ea8f219b0d0602519caa5428d4d04f5efb622c6026130cdf58fa26dc52e48e824d88703e4a52132b60bb0f95a20c8b1fbd314b4883ca83d2e1d6c338eefce26207e4dab56fff354c5d76ef09c9d60cb3884c7bc31a0bcf321465d180db265ad7ba7dd4e366d7e9c23c8aabaf92e0ab3a79ba9cb54d8d6671eacfba9575691de6a85525a9b5c899a539ed1a36588a18eaafe61a28e5239f4e1659c273850d01412a7ab64126590ad0a59b7f27d2f4831cfbadf3818dc6ca74d46782d84166ced465535e72b69b5a604684db40583e8ee6945836df6d1d6ee53450ae31620dd3eb6ad95409636531de9df04822293a25de4f0c0148d9308b661e3f15f6525ac16fe99468e949247e27ea72d53a9b9c0f1e7910ae2006e1bd32d7e37667edf8e85ca88b35557296e39590cc3b9984b7be7c5b7d19a9cf76c6ff8ac2b83c7ca57c58badf8f293b7d90a1925de7c75925262e1a0b5040d21825b0f5fd1e21da971679186150b24d051962e30fcdfffa5eddece5b12535b0612b16f02bec530d257d2183bf0d33b74a154255fb41f5af24af8849c158974df02b06ac2e04bca61b2c251fad6b303d04a38012f9764cc872b18fe68f69918c5ad8e10d9a70d903e74268a96c28cb7a99d54bc35b5013f426c0c31638a33bd949aad4ca31530452b0c8456fe12e36d5bd24e8d0e4c594d8b0e34468e6793529f7a181ecf17465ed31bce1392d311d25beea3636b290df6fccc344c762b13712769ab28cfec45440d31d5f4353db9afa5489ec4b4a3b7ea3fdde8979f6af11f0b62dba67847f994506ba30825df4beec2d286126e9323cf9da54dace513294a85b778652049818a1c30817ef63a82bae6a65e781448e30b095db6dfcebc4ddaedc4bda20cc0ddba91c38b6b18fe69473a1b4175afa0711a914bc42176bab000adeb8915931d4a2c67b257c04e02e9bd685860f8a78ec04a7b2ece333083462639c1df6439d9cdda5efb796f7634cba3b2fffeff9de8140f3b57e8b4e52b93ff6cb1c3eaf1ef6512ec424b2adde05dd9957454768f42392abfb2f79d0d41e8da573b4e7597cd7accea87ee3918dafb173763d7f6ab11efab91c6cc26be2db29f3ae75450785a9e7218ac1c6562befdf3829d0bfa05aaad19cb6ed188da513b4be7e7caf675520f0a280fa7148daf3e271e657c0462a9fcefb508f4b6c3318d51f74261008992d698c415e15ee6f41219ad40021a9bef17c2955a14865ad28cee96dd8f3570625895cc0eab31b35f4cf229cb960e626b770d3b196575d4e264b08adba6199e8f964e5fc2e003eb1bd1cc438f667d7e0c27e35da5e3788a7fa53f8c5783f08d36b7d8f7deb71d68caf3b1cf002f2dc28ac62660ab348c9ca65528609163eab29b96b16c20496a04528839c7411929202e11d04e280afb64e22fd52335783708825ff833f7c88d7f0413698adb752b7675f5a4f81161c1da8a028672b27b831a398983bf075724fa67e394983cdf8fc28a81c2a334527c0007eda2a7e790aaa3b2234ecb2782e0b38f83b97b692f934ec23568ce3194b3d581eee4d0fff71b2750c94e02582b5b2450d8313fc39a375f4e6c3e01dd6f03f6129c5119956f5b218f8095259aee0b6c60e81f4e7ff7476c43cddb9f5a485b900be99739bec5487e1707793f0cf1168c558f4eb370f8432b0e66d0b36da299409aab7aba383c6ae4e21b577e75c3b1ec0a4e3f5fd74097ca2d21e5fb0e2f0582f76a8afdad115ed261b30ef042395e4aaa2e25f5f588d81290925f3f8b5c43dd76cbec6789f020c8832899c4bfc7c4e89200e4926283bcd326a4ece1db17a3e5ff7e7746aeeca0be8c1fdab18cf157ef89530728bcfe7756e8438f34d3b9178660912cdee2a505e61c4c301f0f4cd9524750dc8312750bc25aed874999506a962dbd8c3dff02812bf58a2ba9ce73bb2b210545cf772dc3b58a4127d7a482505c6b018788291353483d1cd355849972838bef1af21aa8493ebf637","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"3b65e88fb4aad2a4dfb95b4861d2091a"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
