<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"6201798dc2517cbc87cdb1141ff37a917ea8e01441ff4b513b44a7ab05786fc29f7184fb2a45cbcef7468cfc1ec748e79eadfd2695836b19960afd22775813e1eacc3a232a98e0981d2ea8347fffbd3629caccd2ba80846b6b1cbc97e101363633f3e4cc3e3bf2f3e9fe2a3807c6adf06a7e527e0a42e19f0048d1cfd7b7060a61afa822e7db64289a0c8bf0cb244a264ad7a1eae30a1c298d3541406d088bfb702ebc5b65684b62a21ed065342bdd1e2f2ec43db25bb46ab5ec037f80e90bba7c929cbed4cbb2bfc9dee801064855a90760c8ca46604afec14f3c1c6d2aa55d68daf11d355d784d37f78e761834b083fdac31571f35217f7ae73f2118a39c78f61460feacac874f63133f989287645f0245dd3f5b19534b4a6988f8ff893184943ef7b8070ba82e681b9724878f1cd50078beafc68e901add695721ce325055d3ee821e47f15ab00a1d21821335f26874406d8f35077794c264375083c18fb67f40181fb64c84e11ce814850d8f3ecf06c175a946b3669400b0df5e9fb5b56300043076ae7602db42cdaab96729749f8edb0914ab33e55e5e2852d2954fab63e2a29f6fce4685b1d94e941027539626dd60392aace89bb1cb1661b59f89aef21eb56d499808e483b9fcf2ab1c13e9d150e05b13b5aca4e374fe927d1dcee078511c847ef7064b15dbfbb5abe10332555d203770e41a4766bccc66e182bdbd14a60596eb64ef81dc86bc799501aacda3f50aaa26b30ce5497d7e668217780eac866e5003e8e8965c62f4153a20ca07bb21357f1a59b6a1ce1e47c637aab29a3c33c01303774ad5eae0ebbafcfaecf2f27527d1c0f796f4b9265dfde334393c5a606439ae036b44a21aabc81d4a7fb19c5d247e111306e48ea204011ff6d4bcb5a24afcbe2578e3938fb4da202c97ef25e9c364d63834d6b653e2d317c1bb09ede9dac1db8c5a580ee4e8f553015659eaaabb4f31e9a73899f2c0a77cc6b598cf46d817e9206bc6b8fb72092b81e44c169939570bbe3ae8d39fc8bada538e30552231ef4d284efe86c84413b284afa45554b33fea0b37ada350e32b0f2dacc2d030c4e47aaad740f7ebd02fc8f45317b4daab40676ebbfe207088b48914f94e4c69e6ba3f4d1a54ec8819d02071ca6ce779a07577cd68e3f16b9fb9c74aa58898f2bd30a5542679c7d4326277a01c5fdfc957bb18ac94c20b5aa672e1f684bfeb958711a44ccd51baf4c032ff3d2dafe7eb250664a8b354872b6ed5ceeedb704d15268e4bdb477b2bb53a81160eb491b0c88b6dc97202f2b23b4c6cd29ffef012cc16a31d843fd8f634e897d098ef19b779c854f637b2f86e6df9d6d103064865499ee5e1abfd224d7b06b90e9d6c24a6b6add55dac05fff4f2e453e29e6c92aeb9fffd0902e41b4a2c39f2fb3d7ef4305b4b30f837cfa896bb6ef93482b4c172f75dbdf36878466ca26069d98fd7147cc09d436ff255331e3c854d4238f02a12f2639c51e62592217b97220e3d44243a7d69b3afae1e56ad0abbb88a5782b4e2d2f5f5b1d674fa504a59c7c60eb1fce238f8aff4a90196b662028c3b3eb97fd0501f4ce816b7e18499649c1f8f9eedb9f5d5585ea886510802c23d26301d349bd6f30bf660c5ed4675b217124a20fcd9e9465c7df067105811b9100aaeeec94fa4cce20dea0da37dc02a445c7e539877c0774b2148618b7645b4ab5659f4fcc83ca74497b0c203d21ab87fe7850e55d810b0b72cc9ae7188c7c6fd8b4498044799d4bca7f16190ebaf39b4dd609e0a07ce745af0c1839df528b42fd1663abd60c3e27c73fa270295e2c82021f45324300ad612dac0aaee526cff53343d23c794fe5fc2a512c26dabb60e5d30dccf761c7ba2384fe8af11a379b59e69d97341bf885bc4b7daddffd0e7404627763ec2fe35bbbcc6e38b4e5ea61230b3dbf9fbf1604b75aa25a885ac91270b54d2b4ee56c799d01558881989c37991923b918a65d482f0c2f7bd043d8b09446152e2e9e6c40eab9a5a5cc724f6346cd9da51433600b771e54912aef2902b3cf5cce3f7e69c63791a7f8eb9ecc8873634d7dbc1e3c8580efa3f1fa42fd1b95a9c8063cadec338ff9a9ec7e78d410a46da5a74757b78705b7350724ab2f558d85ec36d1ae00723a3fa976f9166655812340e6a7952d694ddbdb0a38a457fe1080aa59514cf7601314c393fcd2b1f501fd5b016a603047208c513d6c6b3f9c8e2c4850fec68bf2ab58033c12407a2f9f55765b99a2ef6ecab80af3f473f2420134e977b9b26ea6d1afa73fb31336aa67b16d09b3c400ec8bacb7a9bd2603d04c21573f3c36137c2f0d3b2ca8538a564bc2c6e4ec0e4cb30c19c1d55af709c56f83d8b9f3072e089f59a2e856438e08121c6f5c82180f7417bce805d4444a07d9acfae71e17bc79f2361e6fcf4d13317ac8575a93ee7e52e4f53b46f739baeaa98e6c4ffa0c07deed328b02ae129741761a4fa458f4bd255a7f36fe76e64a30e9512b4396f5b044ae0be8d0bd8fbf72efcd63143c44f9b2ea3f03a9e5d31bcbec536acdb508343e743693cdacf1851c623cfbe14d505e0c884d9e1e4cc6f8ac071fa5a892c0a111318529c7ef19b06d800490778cec56ab2e837bde0e365cc3689c5b98db5f5f296cb0f17c731b702d7c5047d2986b725e57779efaf4a10208fec811d91ded801cfec35eac5dd7aef7b42c9a47e9dc1d2a920e194edbc18b97c2f7e737c787ca7c78478e6b468e25c5f36f4def2d8c9f33fa22d9250555e8fdcd8617e1fdfdd51869ec49940e747b27f9ddb8baf964d099148ec75f6e779faffef2bd3e567f677a147e6812ac37552a47ad32b1162a3b49c08e75ff185f6db486e276d03ed81f5961d31359cfc8a164c219cb21b7420529fb16c19226427f11ecdeae0e5dbea112a0c1f5330ac2553cd0fe90a21e198125305f04bfdeefaf0f53c689e602b6f64da8000101f4552d1343b9c19014df8bd475bf2325b6d1a9532edced878e3a54a757c9498c3ffe2e37c5dc1fda3002793b9acbf12f5e1ff8622cf96c831e15a043501cec6f4e119fa9edbedbd2ca2b8d0638013b51f0e7004aaa45e67f6ce4b510cd0e0599c9044a37486ead5444cdcbfbb46114ada5b2c0dce480fe4572a438728617d1879bae6c6aeefa584b47eca0957db71b09fdace2a9286b55a019a30c31a17cf9714078fd9f161f1d2b35f30e94b0347f5047e3ea2e2477393b910f6c12f9918182547215e15d55c580d7e6fa097af6c938714bd01886a54702feb4a06d1f8fd1daa872c986324c1702572f09262d3c5edbd2c38fdc3716493d389b2eacedc98aac2a9824aaa377ff8229a581e209c4e6b3735ca7c4387f882903bee252f8ceec3b59433e7b0b3ecb559c259333d6d6755c354e1550959df3842517e6e9b167ffec8eee5c65d0381baacedbdbcfd900390f51f2c42891f71bb2ee0c006ae20447f456a9e5cb672de49be4b5479173b1b3e749b9e8e31ee15d2d24cbe23f7aeb3c69c08f303ff6aacb87b2ab2bbad636db7125fa1b2a2a8f625e88da535b46d0fa2a4674d9c341c63988c9a68abdef1d2293e95bab27685342b0471c74b028f77cc16ba1235ae4c25b27b5b289a21110f5eb075d211d012227f1d710a7ae9737c1b8d1ff5703f1c5b968c0d78861985eda86b6f69cbc2ba3254ea21f008ea63e84cfdcf83ab365b17be723a4cad6518735ca250daf3f85c397d802d1c69a7296de2ecfdc725d1611ad3c331aaf2b96d20e9377f82f6f204e11bfb6b3b828384aae1b4bc7d4540a420ad7539cd2d8b5d4b403697ca869cdf91e27a0f6989510d20dda53125a0b545c334fd68ccc79c64d12ff658e03b0c4977cf6d0adc35081b859013dc0d9b9dfbcb0390554d8308e0770042f85bcc3771580d928e89f96d895b920de8aeec585550dd1103c1199e5c22449b0625da7de8c6f0e2eec007c7f4a2f736184d99f9f1cc70c6bb4e10a4f79267febe585077ca825dcf96d20dd0cbc19f183236cb2959e80d9cf4221220db130ad153cc8820645bcc9aa60e71851fc3eda3cae2abd2fb1b32d76132935f26f69833246db02e84d82980cfdf094b80cefef013975a569ededd3d206cb3022f32a15d8e7092655b0b298537b2cb9b11a138c1b611db5aa7398279d11cf29f6dd2c2b79a10b161664121a9833d8db60b698ab768c3fd52adf40db3c8143bbcba5c623d5fc4c966683420bf5123a1608ab95fd71081a655a6690b551175b5a6ca14a78a350718c9f9b092f422c4e4783ba589d80babb76f5f89335af7a6396f79688dfb8aef917e7d12e1696d99a754ef5ec0f5cb38d7e2710c1b49b9652f44dcecc595c1ebcd71f1930ef77755bb9120630236a18bb574d542a0e33bc9814685857e8b079bf8fab4301b6f2d28d9f918ac8973976f7e2b6a61a27e6bf222e7f9fbedd4065821ade187d3925ac5622dadb36702d13dc82c837025ec2b026adff8de8f7804d92087bd0c74750d2cd508a19e48d47f7b5ae9c4d8c7cdf092b1713e2cd9f2a21612d41c5679b9b21403af0df7d5614d834aaf9d3e017a3ee002480fe4d98e9b3c84deb5409125268f5fed64f4febd977c73e7b439bfbd7aef66c98ac26639c078188bedbd14e433aefbae6685b44098f23cf11abf4a89862d865e41fbdbbef030794b894267ef8421c250e653967b050b3ae16d06989ed5e46b5505fd8f232e5dc18f8221b71cc5ea589a9bf679fe4e32839ac00f3f3671d5389b1d79fd0b57ee081876167daed7e566975b0968ad815355c3efcb34afd3a9bec9c0f83cd17e920d658dbc2708361820aacd07fca55201b2085184944cb151634d485fb18baf267870bad65cc63c94109a664f2839f867eeba57511ba5d2b88669e08f0ab938e6f1c4c479602e37e9c1787240ef4a6138d7d54fd04737c5c1446c965a14bb27dfa81289578873b870d42e6be34fbb60ca84369787f10ee14accb4f99f65e8ab42615f46bc56d155c00b877d46f904f163d75c60a8e052d4a588bb381c83839f6a0d81ab3ed01ccd1db5a85dee0cc4cf613895345c1e9517cde1169d36b037c0f000985784d7d2b9fc2237b6401f126b54d7e1b3845a609d37f0ce4cd99ed0a132ca0946420a2067212de58b287a5a1f3f6a9160b690a97579ebd08db598b5f0f446a9d5ff97070d9ed8e295f49826f8134311f80fc4e267cb077655f58ecaaa9115c96c000a795d22bf5337f86fbe0e0af25cc0d4bf7622516b4d70f161ca26725fe04161d9e93932f9142655dcf675c734c3c021c9555fbbdc8b010732fc8de17496c0b8d9e11a77f41d72b65820751976e40f312eb8a53de638079e7f2ab42132265bfedb526367a5692964912af4e9f75851b4790d451695a8bd74ac746af48a723d0099d216b9e611db4f819c2e2bcb543ac336b20779ff577c8a9e2fb8b5ab4b280c7af40370f0c84d8ef7fa5ac7c8120931df5ba874a8a6c034d0cc6f3c46d8fddb0bca8b8730e7f98f82d96c823836789870d74005c8c1eb3ce0c35e4a31539a3908448fe2539f1703a92e1aa0179758d0bc466fa5e944e51989c1ba807ebd0b318e6bb6fa081bd73b736091a1db4b6ee86ae758f1409dc82a10e3e66e2280cd0dad854e731b9db594f13fce1482b9a38f335f203207e24fcf3fa262e5680d4035f7491a0d35daf9d19e8c24d69d0f249e4210f534635e7482f8225b066e67fb2443e03b0b72b581fb360459ff8ced9e1e9196c4abe1f93c5f59f5e030bf05a8e584e63374d831babd3bbd8293dfb40ccecd3dafd7aa5968696fafc68d504dc8c2bf006620f519d1364ce29994b5dbbc61f8698b93f482dcd3e7585ed7d796aafedd8d0f6d79e6fd336f357e682d4018626dc7192769d3484b483915a0813a78ef9771a5d8f54be5d773fdef808207f6e87fbdf753ea9fbf526edbc08a83b2d427e8e9686de458ff33ba07b054337fc6e4512f777e7e8e014c0646b272c414dfac7262d959adc5785ad2db3fc859bd782453d8edcbf4be8bfe59ba2f5730ae077d358711e55e456e09401f9da164f229ed81dd71a347b4e982de6e121b681fc49f3bbba5ce82e0751676dfd653560152f64b91af8032d991c581439edba2de7219b700d9a9cf2c5a446744b97736f17ad847e7a3cab33d8e67eb333e3eb67c520215d5bdebe8d2f12c9d83655ba13ce42df27de39bb083144a9cc869595fd0df0f8461d649a6022004b8c1c7e0580a4b7fccb65e5afa33d37be2a58d99ba1a07a13dcf7ef314c3252dcf6e5e1407dec3b2ee9dce19ced0c47dd25363ebf2a70835cceaadbcc3022e83a520baefc3531fc00fd7f88704217458cf8640b5e49dd3a924d1380cca7f304908e822f538d87229abb74017dde424b609b9b9fbb6d1e00f49a627bf79ccfadbf1468a778ac9ca5978ef9bd2b79d923927737e0555001401e8d6adb8e29feee82f04856f1aa2b2881363b9fe4cf0eca7f7bdae24c176d0d8454e043c4e8140e67c89592346e8022d711fb8daad31e3f39892e097f6d29b07cf703dade955c8a5e2e091a024b7cd662f182f8ebd2fe6d99f91b79ac9400ce2d74e546774a9c0e33b278b85afb8fa2b38d35b987a083d365f9dd103dba091d06347f093d2ccae9e8a2f4780c32623d1fe5892010f5a320c11b975bc6b40f361347316e00b2fc94f2d10bcb13d40a478d9fe6c7218f49e2fb9151b6aa6aed63870fd04288e1bb74231e3e358cefe1d35b75bc277b21ae357165706b624e7e5b4941868df07abb1d5e4186bfbfd6c276b9c4db4b475f44c4814648eb9a3a1e8b7d9e52b454138fc68622e64326da31f28f89e5f98cad87a3b659108d93a2971012b876f35c15b424125c3c00cae07fbedd7cc3d4babf7a04de4d0c9d9af286be68b5f0ca29f0fbc76b87a1e9487c6cac083e9383c2a383980c5941c5a661308e4b4c1a899109f4c6bb4493fe4d8ddc3aab93b5a9b5aac79675405dd3d2ee8ff73a74a7f78cc3ab88791742642e75862b62421411f6d046b0ea967624d7144d1e7a94d6964297ffeeea84957262ea502771827581624f2cbf38ae3d481bee990d91b810dd48bb334c99fd7f4bdb364deb081e87a25d1e04bfeca8b8ff6651a3abe9a10add860dc8c7372d967c13b1a5e0fd86ab559f89395f0d461c0432d2e828e36036746d26483bf0ac1defd2bc6e154f7e9bcc590e38fa26f9bf01d5d79e92f1efab29c9b9a177e14e1d07a42c537fb87cdd63dceb32dc42cd2c98ecff50b8fafa17f67e52a2d8f580f97caf649d4aa50f5e7159ee1b76eb0186856a93689b0d4acdcacf1462eee15baf7469aaa88658960217d7da6b10c42bcea391e5ce9b82f43663d1cc8b4f68e382e2c1b539088e6b21d7b9845cc8f13d7dc2d8e832d5f03ad24814e68648943e8b77e47cd52a1b28552280a7404503ab34e8053efa949561a081383804c06ffece1ca4a94722d1b7837a22a74ebfbe25950785635ff64e267c8913c249fe1b816771ead829d19f062883a2e7ab713ff9fbe1f46c91b6dd715f4743ee1913812a27a8a6df98c1e821cf26e395c19235f9aa20bbcf84e1485e97df499ad9ed4032a4ce6fa11927e0aedc4433341c01a190220b59366526c573b8a7569bc1d8eed33271e49b9b0c4d34bc0bbd0c34f846f835f7f52d7a9dc06ad34f2fb91ef8ed5c838b162793cd70f2d62a26e723589321773f34b5cb63a6c5594394796f43e9a873d8414c8db83ba5e7d133ce6f6a1629e32fd0895cdad4854428328d1d3997e854bfd02f51a08496d1fc18c5f47634c46ea631d6952f62438fc0673caf9a01e9ee048789053f43c78bbf992b8c33c927f0b0f3961cd4c077ff4ef7d661e0ae7ea97ddb35e931d8d11ca85e7633a5a6b6dff948b6aa219146a31a1bc197a12528498abc2234817fcdf64e2364533d8bcbc71204d05e8dc58d268a2a70d9853e0b84881176fa81cc36f921a9cb58c63d2337d169b8855a7bac68b7bacdca67e2b25d6365358a90527451da0d0cd4136e6425a5181ad40b336d72e54e12803273d9dc2a2d4c455777ca3a6e789fa74b348eb4af21266066821b72bd2099e44284bd4e6e8c7e2c715fc8cb9e4a24e8a92152c3ce4341e6274c361ab4cbb0fada9d50351541b8e20a5261bdc3aab82000e4305b6bc978f872da68830f8584fa79fb3bc81b1ae3a3cb1cca062a9f1d5f9c432bb06e5c7a5154601910c2cd202cc40c4cf38685a93f8e58b5a2eeaea1de7e41b51addaa57d2aa6d6fd3b8d3139e302c96168056f7c652b68c413c4070e922db3929a11edf3b7891daf8a9b54ec0eadcf1f080d642b723235e0f7176dde2d6340d58537e39ec8c2f926ad848af898b7586e37473ec411f35213059164dd93ba83740073feceab816271aa8ca8aec6edb1a31392f47e70639bb5efa6867a956713e067030336a4f0af7af4a99e2d9763a0b415d1d2ad17ac80acf0053000e60565611875dbf4263e1c9039a934afa9a07f5d3d63722b277f1bedf73ed1e4f0932e5a1b378ad7c714aa8d41ca5f97972b18dd06782c3d22a2dc33e15885c648de2af543619ec55c00728f5c34993b8bde4bbae6a6cf7e48df624443c01d072c0924270b95bfef1ce021f330081975a2a13adc34f7647ed8b83e85e61a6b7a2fcffdcb6233fa9faa66bbb6dbda9d2e36313baaa4adb8651d3ab872421926c2f5fbd38c83015e2a21637c214cf9b56f96bdeeb212f8395077b63b412835be2f8646afad8527579141a13660da9182311864b56cb5ed69e084ee13f224ba7efd969fe06e257a9cd30e19f47a64ec0401c9818c0730b78b801ed48182ee165a67cb105907109922927708039b5d59c3c4bae0cdea374a9a1663cdf29c9ac2cc67efeef5c98cac8767c9ac46a45299951c42c59cd03d10eadd3a25542fb392c8f25cdd5a7a9c0aa1a7066615dea565e70d7088e15d95b620587f73a1daa87ee2495c43c6a3968cb7aebc662b1005eb23b36f49b54d7ff9a03adb30ce9d54da4c3e527cb0d2f68bcc8c52455b8fb52443ee7e47dfdb4c1062d9b9d28bb860ad2fc42d0cf6fe1bda88648c8a6a48d8ffe617043c2b961ca4b3b755d89499db883aaab8b5bbc49c8cf4e43653b9c331d9d9d9d4cdc7bc8f8bcf7c7c2af72eaf97e757fff08e9a51d8ff1f37642a773658c24f96359ce0567c1733a40b4f2fefebb48d07ada2ca12ee3586219f2e03fa2895b9dcdadcb16583f760529f1b576ea9559ca082fafd7cb9c0821a6718a73ca3fbc47b7f47e703a35ceaa70c5a59cde257e64e01c48d4af609a043ebb67f9c0e38ad69a3097920ec3fb58f1363fee7ea792e8b38ddcd7854272ce9afe083057437389acd34cdada9e53d44c18393ea447d0acaef6f29a4e88c48a5ec08c4f52fb2e6c94b7fd8abb9a66d444bcf90bc151aa6f586c9b14c3de2c421a156addd265ca5f99c4bf97ee8dc0b075461da21778af867cd8f91fd72a0f0d6492d73b837a3d11ec050c6f207498f9535b533b65a55164d2747678b1f52eaa264c69bde3bf0aaf652a4c617002713ea2ec161398ce260775990716dd01564ee1a908abb1ab59f023a44a57a2dac42d0db9d9a085b3131fd1b279c1c65bdfab88c53f6aab6e64cb368f701328c2df74134c75c86ed41ea9e9e90c751e596f9e3ca8d482dd9236c9fa55e049161987e44c3f0f890728895d1d74653b170d2d453931bb645b26f3a64b5963bcaa5d399f4423a0f2c87eb00f9b4b73dff6ae4de15696d851105c6c9dbac13129193c16ce70419dd6fe642653b8fba2df5b90ddf3697d863508a164755156c8c7a08c7dccac0ea65055ae1e875f890064cef66da98311396bd5a4ec79e68bbb2ad173c9bb150464b22ad69b3e1c85a230a15c78936a61ec5667a0de873f1ab70c816f5c69882c9b6738aceb947030997145c066c7f47dd207b60758afa06b466a4586b1360958477527f4f1933d9cc80fe6bfe1036838dd042178e6eafcad9b3e82daad270856b4b1a25930fb4ce1012c4ce47f1ab4b3e1863ac2e8c02280349eb96f1c4e4c08251972096751ebb58fc45984c746f93a60f70535727464b155534b6bd9c03341a3c82f950c0b653191fa03de83eba088d247f5d9876c2c7edf3180da19a7bb675fc27c6598ec7dd735b600c0cf38b8da8357a7f261d55b29a1ae39b3f65ca8e085db762b7ad9eb6587a6eda6f9fc23dc7df0373a5009f0211618c69ac6acb00418cadf4fc224148ea4f246d9fc9245bd371f614ac3192f40d7f53675659643154ba79a481c5f1de9f9fce936185c5860e8c3846d6d3661b73a0d3aba5c722e9e766cdf8357d6c1dec27c326eedb719c3854e48f4022c30e5e48dc59633abe9f73d1beea0a037497747214d1772dbf000659204d53198ac1b845fbf4fbaf7b3565c19ee7cae04679a8f52f626a0179b28fc36adbb7282ebc845895a7c07a7cd4ccf27cb96949a85391a20b71bba21b2d480b58152b8a01f7b933197fb0b0d5292ef1810e4328b897e4284b74900a973198cf5ed71335469a2057df3dac2e474e10eda147c947b2a0261e5ab66768f8c61a70d4079480dce686892c61a20abdb0ef9a48d05c89e471dd867acaff0ede3a62fcdaa0255969221b49726dd7e1e6f86a8511b29357ac84d711f3450d8307528278f8106c8cb301d720499d0f6dba4bdea9887bc2471ad72912bb629f92bdead3eccb9b403e165748f60dae5d119a82105cf449a4af35e5aff74dd8d79e64b1b888d667450860ec0f9134304e776e3481e0d090e3513cf2984235d3d939c666a9824bdaf1ec5bfd2862ab885a317d59a7d454d90669a504bf97c7a4d2252e080c021cfafabb1e1f617bef8612fab8df904725575cb66bd7a8f787fc942b2e4ff631d0fa77c63e232e74a83067af472cbe9fabb511c6289cf6b9beec4a87e3b3522a2b568b2b2d4ee1aeb273dd7b21a9074e60ab32c8397e1574fea8156a79eb89ebf49e13da45f2028028273f4392ee0efda5607c76a5c0609ee9f6da2102d8cd74d8cc3463885aa9d4ff628b56504e498caeb61a7a2418e3900536f474d9b75a09557c967df227c797f1b4ae485f667302be370e6c6a9f1f1d7532839ac7d5f8aa61ca63e9304fe8b184d66fe73c56349584878c0f05567193e82446b6588118a22b1bbc43950128ef304aaae5cccc76adbdaed1a8570e05c12cb242e28a4e33896209133de885424c1caae8f5dc1e10be48540f512cf0ba524ef48e3b5344c7aaad3690b3e70773506750abb09d69008caf04d546bac8a6f23d93d4e52584d44e09cbd5939ba76f854417c3a321d95f0e444aec70562a4ed01141e4cfd0b308d1c5516456ccc2ea81d95be0d51073a7d3db14e63cb2d95a7d5c6d3aa1886d32209d3134d62b9a0ea9061c4f7cf1f506b9c1a7380334d856ce3699dc6199724c68bab198d71adb4c06e3bb9710499e4daa2ae0adac65dc9b3eee9fa71f3f3c8a9e2bcb69f8840e99ed909ee4a9002d4e8ff21d0b552ee3effe11f26d8765a3da4d788a091abe488a7d530150249dd8ff12c044528c6d8a4bca9e4f8fd1ac2bab1ffa78f7100288fbf67ca1b6e4022d54bcfb9807faeae884ae883f5cc1d075b61fab6f96831cb1af324e34f67f5f2f693da91aff7f33660a3153e10cb84443d42e182f5b50e4c09943f36a3dfb6ad3660c02437a1802aac3cdeeb5fda813a0182edf5a974fe5bb8b3962fc6a7569ba6d0b9927acd34d469061795b6753c059bad665f4ba450f7aee41c922bfafd04c1482a1f23c6f424d321242219c245218e74c786b60eb196de25e6673ed30eff579502fd991b4451dad8d1405805dc90a7cff6c9d4d364335bef87e76f705364256c6b88c47bacc76688e2f5afc94f4e55f9560771b3c2d2408a9ae3cd1445be1bf0d97b599d2aa655fd95c1a53d783070fc4e1453f64050fbf01e02a5798fc5ff8e0208217ac8c9513694d296e54c3892a7b153d32671e90404dc865a5ccb991170184df615aa01b484b10aaa9560d2070aa8fde0f3ed278c4fc66007d075fad44fbb7f8ddcb66e1917289afe439d2b683bedd68637a7cb63d27f2e1799d3620c4d3aabb6f539d05721e266b63c5a8f37a513f99d713fe89a9cfa97b7d08ed35ecf4d06ef48d8764e486220920712e6e52576560a7034b3c2fb53fd266935f3d0185a125ed6a58fffc54fb1289a9ef4b19dd3e873c74af7ddda625273e0e8659845cf12984261fd9e12fe386172ed1bfc91d2e7cd0c58afab9a3145be7e0e995f70c2c15f1a3f23769a553aabfff79bc371767e6c9d105f4c19204017724db68779efd18cfd19608ede3c739097e48a3e2f6a08ea22e109ea8b9a90aadaeceea7c3c9011b700bf59fbbe29e62c00f82699e1a3dab1f144c3f0a90ad28a47422fef1fbcc4e316960f338748960733e93f769a02a592754ffcba205867e0cc424e3f835103dc0a446d969b81b5299131a93c6b58c79d70c05abb0197d97d4e4f03324a4c80aa67b783a17a2a0ee74b5f2800076cbff2f583e8a7ecafc41c7ae9418e2c63441679693adfd220b9d7c1e332185c01b242f0745cb0434c437db2b203171f0b36c3c019902ea7ae959637d912445291155d24e4df034900c96dd416d70d3f19f358fd3102cf3ec598b835fb4d133a83d257b6f0d596f94e8ff90af392c4614a50f86d488a0e16cffbe06d040f8952507613339e5d999cd4d68bbe32fbc83fab69252f21658a49d2a2ab48b0217e96344ce24423bec695ec4943062247772cfa02c305c3096ae488067b2783fbc7d8946bf68ef8567b48d220a5d69a788df29b07049eada448c503769fed547e3d6e4a301e89482d135f7334b5be54d4a30350303625a04e0ec61d3e17080683421fa0c921f59456cea93814ccdb04c7eb69fcb58a8caac2730282dec653d9293f6be84130c4aa074ffcead5f00e3ccf77eb572944d021406c527d94a37b9782fed39dfb5c93e84f2a812921eaaa2401828ec9566d6473d2afe03924ad9bc0720e98a0df261cdba1c02a61e48a16dcbf927bb57c238dee3da3442e54fbf6445bdc2d542bb015fa586194dcf267ea9b4fa8cf7145d8c4f49fc4d06076a7742a69cbf14aca0c1371481292ba6e676c77452ad09e271429fce61de36e9dc697eb154f85d4dfa50a55ccbcf5aab4b949977cda40f5e831884220ab0eccf7336393b4864cd3966ec69fc0d651157f9879201ef33ab8c060e7bcb115981523bdd8c151c0d2a08632832627b91778f388a2e8c88e8c5cb91dc42bad55f5873f7175e74314e2cca01783025e98017aa3b30f4d7448160b1e5eaf90d9cf6767cad33613a04987afb673bed6437d3601496e39bf38eed4863a22f545e9eee94877a2669dd1d75f65d308e2582cbd7dcd0c5f049ca31c8be1258b8be839a3c91fd716f02c139226e47196c7702a7f741010a87fddf97bc5ed9db4f5e12badfbea8c35d7e90f548a4ba928fc7854543eb393a0f4150482f490a60ce61bbf80febba414da5ce8b8b6c222748d369d1861ae559c71617c221ea43c73aefa7e7870384dcf5252e10b73032403c082adfbd9373257dccafa8cb0014e57299fedd251772ac2d3682fb9095a2b7da3b07ddc4096bd9b54d67d2b2d0c9a7504685711a9e292142ab62337809c4595861617d5cd25157285ba68c1d09b49452663dab604a81330f2157daf1e4e4360c71364e9494204ad7cb27573bac63eef96e0f473bd42b6774e69db9ce337dbfde5c24157fe3c320d3576fc317412f3d30d52aecc0350a936548c3b8b16c1a4272069ed00df414696b429b820aa4fa93ef35b4a68c4bbf933bc2d9a0c28af6eb53d6ed84efba77a87d806b95d68129cf61ccbb28f244893057d002306f2a895cc02f13bd1fa304f7404d004db33448a23e10fb7602e4b9580fd809b973097ebc1fc70e7ec09c506a2bb5d6a3f3f8599fdbbc7c8d17eae7bf419047990189bd35c1eb9f8637240d15e4b61838bd5da1a58263e638da12b6fe34f0eb7b57ed8167c95cc4d022f98493858eb1fa3f002e90d70a1bcda1ddfb4f28cce04b145ce0248eca135e01e2e3248820b32614c820158aaa3496c56d84ab39a0898e95e4b02fa94df1c8b39d5021eeb6490f316d5148ed199679595ae16d51e110e4ee22a55e0b85fbd3671b87ebc419e6694fcb11e8fae7d2e31882df299534823df25efb7246b625f33495e3edc261c4b84ec93c9d170aaf3e0556c05ff7ed2a049cf4edc14cfa88380f6ca0a1a5853beeda758eb772bc8f484daf700ec643c879fdcac2ccff216d5a07b982d78087d98d0a37b064cfc063556baa2070657ec4010689220f924907f60ee25e3217a53950b4d1b9546a544f795a7024a205ec4d40cd00352384d60f7e5383a433c9774b1c32325b9683ba91f574a399b91efa57eda96c910437150f93c65d451d4ee1fcaa4ce8dbfac4f2cf4a8184d74a5fd7b5f2b36df6cd7039c101e9a5edcd6ed50a4a5f60e9ff8f159b60061845563a67fe72a825d1a40ae482c517c639de5de99f2cf341cf33bb184b914c378038a282aa03f9632954f6b6ec265d79d43dd5dd5a32b24fdb17244dac1945f69a7c3aed9555caadb7192a1cd4d85c4961b7389e57be31166cdb3e902d58548c129f1a902d56a50bde44cbe3a49af1bc0db6f57d1bcc00d25ffafbe0793d021694ed186532a76b5d4bc4b0ab97ebfa03cd90c0263f901e03cf013332d5e38032adfaa72cf516881d48dfe10d7f1fb98720a6983e7a6abc47ad117cc7e8e908e3da34247741240826c2205e1ac3649994b2506fd44a485a5df9a45cc7d5340fe00a05c16db429778e168ffa2b82089ec41439514ddf4a90d02873a1f5ad3d9933a6a291ca43d081abc9f146c6c56b9d9ce3fe0b54cafeb45b9c05320dea5ed359a3e2664ab04c0748c82b7778be70062bc945104a82c9849d33493567268b7259384404996bcd8126c1fe505c1d0fb70ff0aa7dee62b06a52928d52fe9455c0ec0cfe48b8495efb3be2f34a216267ceb60bb38bc6bfd27d8177522d27369e8dda328cdbeb97830ea09ba41e98889bcdd058e046bc1761089cfafb1bf8a5fb4f10a3d7c0efdcb94a1d56e8566129fc35c33c1a3ed9d6cc12fa025f336190e4c4aba8906b6339e75844e5556a068ced92829be5ca19f37c69d375d46cdba8804f409ab740a8b09e4946a1c0a5ae7f7438d9d0287a1ea6404e2d035990cd5d2f417d39cc86d4a1e1cf2567fed6c9b918fa1dd496ae285494de59339b49d51f545a3445d5510a6ce1c02a0f1e462fc7bcf17336fcc2d516f53ee2586c331c54c1e5222b6a9bdca2b9cfa8cdfdc35594988c36a4e22d10bd43133b02a67d0ca50e6a62839b3aeb697a6decfc5ec08e22fffd6e1eeaeaa0bb760d1dcba68638c166e4a79d0e881644e78a855b763f9296865895df6f69816d682cc58085227c78589bcb5ed9b5151dbb40e9ff12bc90955cc72f2a50b443e2260ece7a89007cbb56f4761ca63e5a6e83d76f6b5d6dee5c4abe94d8235b7a95118792990000523c4f7989ab7fc48ac6bb19cb41161403bb90b73198cdcc81f69a9e7448c6fcdb5b43cb369c3bff797d7654282bc3a94a00512ff7e12b36472fd16e3f23a5dabea2e154f952ced573aa0887aaad01e768e9728c301ee706a2712673670ff310765572993e22fe1b251770fa227a7001b86485185511fdc535dedcc8327318c01262d405dae51403d8f09b3e81a561a78c03639488a2040c1ff1b6f6bbb5866aa41c53949a87d5d69671442033473f4938d8f62c3cf054e86cf1474a027e896260aef5baa7c122444b94b1b9d3fa6554fd0d209d8a4fdcfb6a3a66ec056980ef0bc57b3e4265e65279cccc3add7afb3fb7c4474f689611069b4c70a4881000a19d828a73bca89ca35367dd22c384cf8863e125d1b66b1f3664bcd12b28f8b44c06a77a6683d8270d2d177b381214529b2f047fdf0342f7902f92d71f7d71adf2a201bd77561aa9536660af7f74eaa431ff39b0b71ea2bccd6ad1510f8c8c0451b58473bf6b1fbf2f77bb9b7909b52eedd2f83e069f1a9c4ca150e97e8a669b85d7abcc5c9aabff35c3eac8edeb26f1ce547d483cc8dde8ca3428a9c189ca8de2a97c4796205697c54e5f87057855ddae31465952b2f95d190bee410361047cb441641248fe173fa17392ae545e42f1fb732f7abf9fa279da1f5a208669667d33b34d07188a46cbc29276336667dd7cfa8c7cc672175e8e4367c63f8cfb80f777cb71ec3a54eb8ecb4100ba4eb201ad72e333362ad2564146c241779915fb91a530ce0527fd3b899be8348ed1232de963f1bc563f3d05155de4eae3f8fef0405c93f6471d2aad3a2501f363dd98dc0dcc681920805925d9a8b83212da597dcb17befc3ad1a52f7f11a2b4636efec221adbfbb2ac7681187855f382628c4aa49a12f78da201f242fdefe79a19b6daf520658ce4448b676e63fb42072e09a784c62b76fee5336caf8ba93e33c58161f10bc0fad99ebcc6f816c43ccbcaafba45442e46395102ffd8af181dc277cf75665163e3eb7475419f55c0166f15c46a04221daecc9d84549171de2fa336e4435fb696d0f07a0183ee3fba1a04924129453fd1f759cda4b6f84a894238734e9bc644777ea79b024ac63fcee0e37d62563f6c447109652acf0ce0dd676b16fa7deef5ddf56cc366e9d41ff88ee2c38df48fb455d084d8d42462868f45fe8a560eaef862a3af29f831bcfeca38b64bfa8ff6f2b7653e0545820a93dbbd556d231531c84ed32d3f293506ee198ae5f4d7d4c28f9dfcfae957c76cd57f4cc983947260793049b16e9624250abd21b6a2da9f202ff14dcb48ef9e62ffb6649ef0a0c3883b35995d254daeedfc6d300824ded0b0238d5a3a2426b14d97b13a10a1376dcaae3e54f48101a24fc28d7913045a958161fbe98f41b526b43e0948c00ff6fa7adb319ea3a33a54d5bcb327c1d6ecbea5ba029b98438aa676e83d098f4256f4de4eb8f500a75b9fdf33f9afb2a736afdfc1141a4c7b06f32b2529635dd4f8fb54240547c918f54bc3c336d4cc189d040e66947548bb7960aa052006ea30e5cd961f67e5dee958bfa77ea8470ea1ea03abfa0eae84f906b1071fbc6a1031a118f24592afc9ca7c857e19a65b6e0af68963c699de8744874a6343d814cd4747803bd62209d9d9e0b2d95f9be14e87b5db9866be560a70912cc3f52f510f253c4af213c53ef7cfc27c8aa32462d612c0742ec2d256253d28f6aafe5b0ebbeb05aef3dce93eb0e7a5d380a08b710b1973f5878da03173790a2b68fd43ad29ec5b28d27eb69db790f80c2c463e228fe9b5c2d19392855a2ee720b1f2365c73ff4b4ce0b228ee633a0addfb6277acd5772ebb38d879ab7ce517f39c9c8a00e6f58dcc490b9ba6a0447f1ea8c3ea38fd7319aa2181cab55e63fbf5d2fba083865db834a81df15652a16ca8f91b9c3e248488b2e2087a19a820bc3a7b1261ff5e7d52d2eb3663c5ac9ec8aaa9c742ad9e22af53b01a2e14fbb4187834a638cf576e58f79b559f256b7f6476efad6e19fba43ef4ce96a4fea42d6b6246d56884b2ddb541c8d59dae91165bc4d8edf671a35485b2743dd1c7965f86e46b268dbb11bb391d5a15e63f4750686f199ae6cd2b5973a715e548d6bb32c954775d803c55ca5590bb67c642d082fb7aa72fda9c993b45c141efab5b1db463f2b132f563d052c3353c9ac81274397f47f53c619a919b31ade093d9a57aac2913f06ddfbcfe48664c232efbcb1587f159515c015d7f35170484f77509e4dfeb63acaf0721decbfe50124652ec7644cee1ea615146bff645276865c1aab34a8287c95ebfea2241cf11f1936ed738e3b55fb0e56fd348bf4cf5724071ebd8372f1ebabad5c619fea57d231c7f7545ad5f6bfd13bfcfded890f2d3bb7cbc2a3bd77205e24cf085a7f8708cdf1c45fcda790f9bcd48c75fd3a015d87e798f280f87c3bad3abe006697d28341d309a6219e66a1e429a9f9abc79bdd3cf4708fb34d71abfba21f576cba770d94e3b0738e21154a34c866ff1a4993ec0c0afde94f2287cb1a2090fd35f1b4dbb1d39cab2c04263a44b7d376cea494cc44784e51c2211732e90b9f2379e8dbae80e1c7c7f049c94de1a120746579fb05f1701cd0cdf5356c960e10d77f7fb5f154415b6b36b46f2f7cb58f11fe96bfa96a84a998ba4ca54fbd7fa124b59f85a43578b79047485ac37009e5df693fbf271c8dfcb24f6f7c811da936fbbe042f084a5c72ed9fe67c3b217506df06a7835eb2e85f29d6ca13e252a168bfc4a33b9ef240089346ddba84efd937aa57758cb0eed66f9762ff0bdce04e704f7fea68c33baadd543816b9075a6456496b275ef8417d93c96f94f5856f7e55d22559f38665d8859b0e62716a2b0829e6c63c4795afd738d55167c64169acf862a9cc69b05f90e7e3198dc783aa9a7df76613b21c37b7f0aa734124a750cc9889956ec37527a9d21a4f47f6008903494f54856d6be1f1e146fb009a1b5ce97965de9b8fae208e9ba54a8a7bc4cc29ca9b76ec60bb753943385245eea9b1e940ffe1b023630f0302117f310ee3f0218760d40761257d32d6b3de41c6ecebed142d10438821303805d7287a73f4f3f21e7ce459b1eee06e61b6b2a93c8414b8b91bfaa236aec67591564dd6fab162575d7b296d5c68b5e4f24524aa2ed03aee1468f56f5376cdd7a3c0cc68c4a017ab41c4b0bca4d4910dd45d1d0160e786b286cbae305d1324bb70ca155aa5f1cdab301343215d4dffa7dab0af3ab896d463bebb7b92d6da6536f636d6d90c42011e57989bb0e87a779dbca6f2023b5c41e0f43de37b3cc3b5b9658cf900553ac8544db83e3930074aa344e360b3f99ad7174ffa2d4afcaecde4b1e4f2a5bb1f74ad41cfd13143fd138a356b06595945b25f50f3c58f8a5497f9b74682878bf107f697d1cca138813f0764d5a0532ce2d3c6659e1deb6c52b18abf644bad5a4e3790f63a66ddedc36ddc6f5ec3119519c4f84c63cb44d25f2efeef95105416ffb15e0619de8406cc7bffd3ba5704a78ec44116f8f5a2b025fa16c2c25a0c3abdd866062cd8b55278f7d62df4e91407f21ee10c6220660942fafdb111cbf4fef0c566d5efbcefd237c910c6d69432319489a50f6db47f47a05774ac66f5df93d233f9dd44dabefed4b1d42ca56d99c5ae4ffcd958ea551b55c13136fba51a4037792be9b519d4c02858a36d09a14dc1c387fc719cba1a6a68585fc105cc26bf8f0bb238766f612a008fa7de4d5d54270a1eb470b66fd7cdb70cc2326b9379d82a10a46793bdce6515b432d511050137a8a4764d7782fd660e90c6a47ecbaec29fe993e45f966eb6609a842fe606ebd0527f6139e51af9c062f01c39a352e3e52bd5f03e1dc261b4ca19f6756d44e7d15ac5377a12ae901b540df03fc4f398abe95a5a90e5353dde1092d96c65ac832f6ca8c6d0e9c787711d4f52b396c942cee83d1e47fdaa495906c","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"fe727b3ec2446f3e9140a7a09442f679"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
