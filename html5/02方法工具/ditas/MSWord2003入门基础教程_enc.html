<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"7cad751a95141e9dca9813966e6eaad5cdd9093b6102791ff02cf86afaa6ad2051ab0417bbf908eaf54b0cdf03f0f7ee6b7915a60356667540f709c752b0da35c996e9837bf0d370766ca4735994376a3c17c4ff4e5ce19100662d2d1e526aa259c1d2155c3b647d4dfde646f78228542616f4a060f9a7fcb49427eeecda5ac442855193d71f3b0de37e39e0ece0c2c4f8528140e1f9d669689385e3871800cfb541a7deb603945ade2c719a9b5ae13c7c66444a2f6808203e923ed9a39341af1fc5cadf20edefa86b5b623f1ca3bcfda65e49f012c858d34cadf6f24fb238ad995b7561d1051875cb7402177092ee114c2c88513a3d1c467bac23fe4948cd08346aaacfb6f43c3240c244a4841a1ec0fdf25e26abd6df264a80fba05a43dc7bc96231ebece6425f61f360468752f4495f9a89732572573dcc913c390d2180f6bfed020c32c575847a1eb55146cc0c1dfa9b48c5323295d9a117e1275ae9e38143ce41c78eabc58abb868d97e5e90296c47ffdc169b7959db9d2bea67a0098d64f0bc3801a4283f3af7b86339487a46b53c71fa0a220b653983ab2859bf09f6488e30f416a07aa61faf1857a47ea8ed995e80a5a47326e10ea30f9dac99d55f1c90482697a2ea172d0a381d8fc3012eb22eccd169993e3710a6ff3d2917520968c20734d17e674171e32a097928fe9be472e15620452b55a81f73eb6327087b6ac32b2a9617a4c40c2c9c8f7dcc3e595582a8a1813e18e0f1517e8bdbfdef754b1abf7fdcc7394a693812b33839230897e6fc9a0c6f5e5b4ecbcd74b1e21ed81ca5445777a9a844e2fd626e2907114f6c9e21e717cacd127b4de2500357d7f7d0d195ff89b8fe8f15c09f0d5b97b132fe6be9187c5a5e0bcf9b19251fbeaabdd052a255b58d26bbc4b7ee2ad5e93c541f424d3c38d7092879e0fa3f449a43e009cb34088fae8bf4ca06fc938884ec8606643a252dc0b27c6d1b37a3bd43ab8727a5397166c76b902893958ad84bd2222009cf52795a3c8d9d63777f560583d8cb944f7be5ff8aa96401f8c82b246d2e8af1646bed70348e8504b11ceeec7eafe928bdcababd0820aa7f118a23602635187c738bce6da87bb8f56763e5cf2c0b4a4408a1062b656fa39d47ca796d2dbd2ec9c8761b5fdd0ac7f1d54e283d2b8cb479b3c429597a56f3cfb5b3572e5d85748c35ca8faaea7be04093ea39c84fd57aea9fc42a20bfa09272bb6c4a67c73e7ef2cb5d0ad171fbbb881ea2d224d0236f8f2f20c659bfc0d2ca249bdf1676f4c7b953229c2630011bccda490927900a332f2d10d778e7d5a8c01948566c2d52180cd40b6a16e9bc1a869e8d39683d8235d41833405e6e95c9394182418b4ee1ddfb2f8445ee3678a14bd92f3abcfc47d6f742df05bff811f4703d91e1ec6215aa3fcc3335b1d3b91e1d08609d12919828c9beb848130c3521aeea768e4059738a4fba76f66008bc249102e976dce3c53455957b3e59886d27abbc9719d406a2a5b87bf63e1d75d3164c329138c7cd1ae38b080d1d6c2fbbd2c44cca8271a1378497aae4c7037f9bff4dfd15393c27bf78fcb2db98b21da4475b68364e0484ffdddc731b0204664c24beb50485ce6b7a9383a7dce0b10d242dab9f45575f13c45d5c1af8e8d132c93de9758c8da9abc84cf982d69deaf98ecdc0fcb872b6d6b9b4133993290d850d165a1112864e2ded24b731071f4a8c079a799097179d3b4eff4fdfa6c2fa80f9132aefa9ecb57a62c8cfcbf83c3970c7e46f7a617be99a0be94de25a4389edae3772e914e6af6dee2b7c8c4c1f3a7514a58e4b0ba856832bbcc68724f2498b92c7cce68e6dcb467674095b510f39e3706d26f8bca309064804306a024d9a4cdfa33e2b07cdb13fe5bfd901e2efe3f5f4b9734bf7ea7f1a5dcb22122f8b1ab14763af3fdb4f5129c56a0ec5994422f1038662605fdd16211a09b9fa2967eed9ab256e498e3e90599021604f830f27715b5797227484fa02a75c6d9965b10f280c7a4d588b345c7c9d4452a31cc4bf1708d5070d656e0702a3808b3c2d69bfd6ab14707a0f0edb4ec1ce2abbe33a91d86262968f6b21f10c80ac2f057fd66f5e349e84686a544176c96e182b5dfec6725d7c0851caf55c3c08807cc6b3d42715aecccbbaee57ab521097619f2c961840428d89b382c67ff531cdcd1aafb415d3d768798b637275a5a62a4cb1324e56e5440f20c63d10dc3bf925f5e0e45f2444d44b54f896a0f6b0096b2af630caa0641dffb2bd521ec25c0ae44e75c50d31a1f70361795c8cb323fc23b72c2ee557e94ebe2fe94d5ba761ba9b47a2720171c0dd263e76374564a08ff965e71ec6fd194648fd4933baf50b8cbcbb4392b6e1b005e1820f59c0317fcd958e7a4e19dd886a581b7b709e64a494d02f34c0d7e0784ff6c753e700fa3d40066f6b19966e42b4c021462a79b00bc7a364254c66f70a8b2413480f943c1104285d919d3569cfe40d5d3656ca41039413fcc3a06860353b3f3c202699303c9c4dee18821e5cecc399ccdb24125a2a483197f61b8bae04a4f93a8aebd31efa18297d1669f3f4dacf8c993b7c8679cadf4bcb94fb0e5f1a228e8311155b8c1e612659a00d0e184a32fab9ac1bad49eafef063a13550800cec89df42efe6d3c9eb4dc9f7dad7aef798ce6e0470e46d38d27ee04ccf4ec63677fdfdaef76127072099e5444d4afb11b62bab5e816e01769cf89b239f981fdaf49cb9e4ac9c1dd6dc5212a5a4d41bd467902bb779ec54ee8a508ffce94eb77fcfd8b95e8bbba7264cedeb876c8c07116484d9c92c5ede3ac739499f02bab8271fd3ec87f46d6d91043be1fe147b781dcf9a30b042d675fb7d4135c344c14e4f720a3baf3f791c9683dbb17e5c88b7617889ca8877d5879f59b702d8b62dc603de52f2277dbd7cb8aed4e74a3b1340f8418a5cf8ae452b473e2a0570681a8b1cb226bb69a02ac035d1f4e496bddaed7216c4ae13849404127cea1ebcde3e473f1ef6aa12f0621cf37eb05a113b0c512f6b3ba5e9786f513979abf9246fc7d37bd6f03f61d295cb2faaf6068b172272d9aa5be9593c41be2fa3a739afd87f67527705b8f3d1877522051b6a811f0395379f1220d5eb7f558777caca78947913e6d744f0ccd3054888a274a2ea8f502d216924259b5dbf3d796f60e3e1fa3265f7fa8adb7cf5e91ed50ff89645a9afc59db5b9910d4e3efa42cab94d9aea6c2450ae057ef7e733c42191bb73dc9965dea9020248839d15140d2c01489e1a2662de784df109a84498d66845a27c0dbd7e7b5bd92f4ca63b4299282ded0df05bd52dcce0e6501c70132a1d2982a66156cced57045cb0c51c3632aabb1548941731bc9f184516e4b769b8c2ed6cc7f66c2d50c7514874dbd89c682d2aec89c4faa968e211386e43df5f36c80a25ae2feb330b11db3e7c2dd08b771b3f28b754af7f110c97491c9f58d30a6b47e9a1aeebb63ab397565e266e8426b8537f6cf400820f79a10931929756cc03730b6c15f06cef425c1477a9b5c22ef3500a9e1bd9902bc2d0b0762afa57bfbf2caad460542666e7f99ffc65d4337974f3249ef5f6f3274ad88aaca3be6d1bdb342b685c84173162437fccc6a8b63c1a193a76a488758fb95563dd00240dc7d3ff1470443a6e105210ca97fbdf30401f80561885e22dd49697e0daf7f894bd3a079c3c16ea0674357a0f178d609b0d8ae223cd8c403ce9c3eda46472ab49b822db23548d62b9a10250284d3ecafac6d19ad181e176e216885543edbf0fc9baab500e1541c244a26e61c7a43a3e75445402c243f037fdcd35964c0242603b059aacbd07c29b030c971ec89d478014f4c220d8d15ab283904f858d2c0ee29bc94731a409062506049658d20a00edeb7e747156bed503e17021c6abba907d6a05f48e8ffa05d6d7b456a3f86b21a93ff2aaed9eef0541ad9eb91f33d599b66b1288181de9192b1654a0eef6602b776d524821084e6236842317ba39215cb0141228216787395a71016341491549f5ffdbf28efbe8fb8e63d42b7aa9832f46f3bbf129174d5d375174c5d9c0d957a45c13dd5952a22f92c3fc65e03ab814fd5cae6fa152d8d159de3196c1c6d5afb81b41c7facb6cc7345975b4d78d23403c57e828f31fb74e59b81ba401dea95c46d51c4f9554bc97cfe251bea4a16703de21b9975217263c806e5822adfff650b401a16e402a61cc4592fdf061e88771f836ced9667a94c0102d9422ab50601668a88ba74081c0ed9326bb5a9f4d8eeb6f445d77ce46d5ac5a17beaa79f4316c53885d113875de19107e2833a8dcf012d474fb9f3e58d82f48ce3fadf247d9a704474fca4bf1fce6524fe447fede4eb9504509473e782d80a2f92961f96d45624031dbf51cd2fa6cb33dcd2802a46d18d424511e7ee20bdd9dde722778b4893b7fda37c2bb69d8cb5f6defec015efc015d20d54f6229f29f6c92a8e380eaa5959fc798b61aa1d208bf371569aee1b891ee7ce5cacdc0dbd611f99152e8da7126196af86f39370634c70a3f1bd9959322b6c5c359717f7e3364542f7f9bbb788baf74a1e3d52506283c042bf333c32aef259df44dda6ed5e71530a7399f75eba182f88161eecc5e39d6faabd72f0df6e29b30f6ccdc417f301ddfeb3902bb4f8d4fe47c2cc277412f9b1d9869ea7e7164bab4bb306f5a6b8199e01c184e8f13989df5098e556c15f4cd0122bfaefb74a22401a99817cc6bc5ed84b24d99f1775cc370e668ed759d29860a1f81733b4047720b2816ef6b273c39e27d864074ab090a46400233d43bdbf16fde4f422671051c3349d5edc7742d55795a91cc0f2c000ce6a90593d86458356b81bf6ee615f357d2adacaa09f0b1d1169773c584e67ebc24f948e13c9017d22b25a1bf94150dee68712d3f134324957c477d6b77c3075ff10ac8a45e6927127408c01e2b5f8e552ab7ce8e721e3eb71c98dab37fddbc41c90f443edae1eb7d1cd84ea2bd87c5b6783dfd936998bec2d15ce8651a7c5795bebe36ae07e9836ab20af001e983becd7bfab7b5a5faca1645c81e189625f50d4f524423b663d0ec1ba3eca908bc5701074510f95e816e7d861c9dd49650eda82a87e39e72f0996350a4ea73e6e886753da2e50c03ead94976d2263b05725bce3ca9a8343d37763e1cd665806d00d27c5b7db13add84083bf0e900c2d8c9d50e8c0d318598937b9c4571e77c5d5d8ee4aa9a8cc2f8ae4203e3b2e47ddd23e2eefe18a6debd5e571743d12053c6b0b8c5a165983a1026b9e8eede5cbe8b4982f929f3330dc429a99214c1be0d5ed07afe965b550a210d005f8db58f9787240a6db48dbccbbaf4c4f4b66c111befc7a1bee307225864af4a00212469b86ed9d37ba1eea83839901d38badccee4436a396a0960c4f269c0acdecc60204f0e318d89a36b426ec4bc7769dd9c67067cc05e8db883e1216e79cc2931550fde50492e02886425b515cbc95a41397b1774ae8745e294a9109ede99a43b603655e4a6a72fe77d3d1006a9b7b7da8b4e006bd05b5b1d84d12f0a45e866fd40074977e02b2313f40ff6e3b51e77fcd8658eb7ea056d8ac6f56d0c9229672b3b9202a1e36790004d5f868c39418d3ed1be84a26a84e600eb03bf80913785aa972579ecdd656172c9707befefe4e5cc9d2bf09b16d840b19c545cbc3de85a80c16c9289aa81f5f3815120572d255c7e2cddd389a741cd3804719a69db07e59970901a679cf4e69eef036c7933628dddb3b717aeac96f92d92333313f100f5a3cd8f47b01bcea5e37b25dcca65586d4614654c60b35446f2aa3ae3057ec16996edad37bf4f92eaa49828afd5a7ed76221e9959e10951a8ba6c4ce06834f1e7185054f08e16a564c66d6ae0b127a252ead3d83d5444fe8d5706aea4d08b1bd41409991416e6da38d661984d5a5294c2cb674dc8a6c48192613084367a4d70abfa2832c1656ffca6ab9df9081b6e3e5f2e739289abe914fa5f3812d48b8f77c03171921467c2f151b08309be7343f4a39c043f87061b82eb8034e98a4bf995af6041b6722294d017510ed296eecbce45257a108322717ed6ef3a7665441180db8bd041dae09c42d15ee983d7d5cb952b1c682b7b3cf4b4ab17b6ada85232cd12e90f1b265863be14a4f8b18e38ce21b8defc05770951070e6756bc0886d61fb2b21c457c9be8837a727730a0b5a4b3cdab2aad1791317611707603070f765168afec1d999d3b6a93a4fbeffbc6fca1031574e4c98cb58306607bcd1d00e44af3f2a9ca9a567dfe53cb245b1301dd54483f319ae8defd6df89d15d2e1190a209094efac1d11479c2b69fee16d823cc4035ca40ece1db0f3aa499c1dea38e86eb33342043e762da82159ca654b1bb38c02874b52c10792ca943e4d0d0ba7cb72d9848455186c0b24a56907693cbe0cfbf1848b3278c1f403ad58b2161125fc0759435b40429bf98c0bada5ccfc81c48f1c9dae2979830e3d011e396ed75bfe7d56c0059932aed2fb1b0eb3e4d539a348b69445b239520e7fe2b26a7da17a2da53dcef8d2a4bcc9896341b418dfa799da36fc730c35dd2467a58915c0ae9e54b47090b94604328ae7b4f90bd87171ac0cc3117f17f9f4d27d26db347f442cc954bcfa030e7ea6cc39063b354531656a4b392b01566b91704625869cb496bd9a0a57d5d839780e2596ed10059aba084954351316f0c3842281f67dcf960456361c0dad625e03d09e00f704615cb7d7fcf70bc3861dfb9bffd26483f51689341353f7782e56683d0c61eab42abc978d7f75c4f04d4d892a0cf738e259e6c2bdf28d9b5779b86ce9e996e8ebc477886c9531e494fc5b6238b9054f8fbd3e9106693dae7334d33d0aa2bd69f7b2dbba2d03e8a084cae3138c9bae8ab2c3dee5172a0916461e6b1a47fa0e0db799563ddafee9e50a3138759e3893c7971566571d09e2b347e415b082df2614d48d9a1b06a606465e69202f10af5c5073b4b01c21db550bd0bd63e7a2d2535ac62e80c7d8bacc202b9ac2f017e3ab5082fdabd796f3d9eb1804294f8fffbc63afed7dc4bc289e01ced72099020f612827092c667ab5263d0ce05227ba8bcb9444395c4d106735edf9727c2e4324b7a0bda103748b13f9be6cdf3ffec66de1584300e31111c3e27ba1ff8c0e85b627d2962cb1c79b3fa18c7a4f99a5670882e9cbce12f7f243c743d986a94b16eb7ca07e2e2a882bb4af6068c1151276f8e4efceeb9ce8fe79e394ec8af4e8b06af05315bd18080206d2c4bedf258218d20202a6d6d7ba7f49819ec245de5f147ae8c17ec30f9b38ed0e1a70478f16aa35d29c40af9db6e12576e269bb2972b0417b17386dd7ecc341827b23fba8bb363106b1df870f9a7fed064fee43973c56a3fc3e0a1b766401b262a637542c1cf217be33198bc6614b84a537d2e74f205280d6018c070c5cf3a6dd7ed9bdc030b8787e1010b0046b2ee3bf83b8648565f124c12fa73aa6e11b96cee2afcf2370f33c6431d6258d8eeaa605e9b4057d402c58818ea0b111994b8783f5b521993d194c95b8c39911a602309dab002695b77a64c5eaa8879bf02d8ab12c13fc7a1ff94a3873d1c14613d3fd2851a61d5475c3bbeb2eeb32d3d62d123f00d462b20bfd071d4af323ae2391a241b80eefc77ef7cddd22c8eb26b86bdd0e0df12d194be63f9199484cc4bb386cda854df86aa36c5974fda0960c23687d6028ef3a355bb638584046a64b4d9f8291204be2c7f55b3899e805edf23b38f06b8b7fa440c62cb2684cd243ace3acf949137210f893d60e579433aaf82efefcd29c59c9da57d190a3d75a937ace18e00313ff098ec45de08796734442aa6a70976c9ce95eee5aeda5ed6920c9877234f27c34b9d903da0109c5706d5fb52a5e5f18900dc43b79496a1801c70821b850c6eeda0d986b94107baab7876cf8a79228854b2ea0be414488f87c54c61f3bb13effcdcfe366645497d8bec43e0b03f8f47e8f5d263fefe3260cd1ead0c7fc024fc1e056310931d86ebe64700e81f5cef13966f835cfb003d5e9eac6fb585f0e51fb0d10062eda5fec81905676ba411ac81337ad8a34bce367e5609645b35f95e13a3dcb9a751783a770acc6d64625e32d76d0c250ab074b6aefe5f5f262704122ab7539ee24bfb6a723b7e7dddfb240ea8afebaf1a95701c6f90c77d64bd7895cdd1ab5ed208d59176a746ee575659cbc6e0758673bc73b4c22c2ffd0d8a9d8755f197351628bb43f5027fbb946d10d7d40f109cc09c84105177766a6e07d2a953c826573f83b41f07f7edfed5f748bc9b1fb1a39d0a3a835df22bab4ea7dda6626c32970f30b93daaad43569a49a42dff8294e9dd4ed75330661c2745e5d265818e0d2975b0adda16f93e4b1ef2ef49a2c87941bc501c113f7115c89269a4f41b7362c15eb50ba23ee179cab3525a3d1a75fa46489f78bf4c3251379188716a1e593a08c0f1fd018d59205e47ffcf03e01c3fdf16115a65a2872fc9fe2c270332c4840f5082b08dad111069e59c2244b8b95b05ec7f380fd799ab28688b0dca82e07d117e30a70892b063d7b21ebd39be99422c7cacaf0dd229c082c9b03acd6f8b65db616d1d69dea2a735c48c42560a0bd4b27c46474b1be303c80331948e6b244d2c4333dde0dcec856ece971c97b232f4e2bba67f2d7f88758682c8475f659a859072b70c0a4832c43687f848ac8a277d9622412fbeea2162f7d1dff5696c4cf69870a88a8b40cef707d83a95fd8791bb5bdcb931a44a3e484f6a25222c218ebe2282095951c0830e4f30c14b7246c9a01be90c6526a685a0defc579066a2ba026825b4aa8a32e72c4932d4006d562f6610a2cfa72611785fd1f52c0c2fc6afad22ee8351d74e67c8f61fac02552ca5d55492bb77e3ecfc04883e38f1185943c4ea47764b0af6a1806ceef353c73a05f663b7eeddcdea8b29525ed127a084eb7030a3244e38e6ce4f577f91098cf531e7b63f33d3244ca2f62cf2bb3e997f5041fa5faf4a233eb79579841447605ca01683ee88f5bf9b18091c5693b3180acd168c3be90c7ff312d2a5faaed25f8a8c8a2389c83a7f68e52174bb5079dc9c3d80ee9a0b113412e6e3811013171f64558ce57b451b1398b9497a8d69c2dd45aff716d179112c0cd2876010334a2e27e3cc2e7879907c815efe8b271432eb5dfe8c90b875f53c633c159fb3cc9916f04534f28d69d5c872e112104f996535e1a8528810cead6f3eec378ca75693ccca5ba814b21f667f86c0a4097039f2436565feaa7d33f53191d0cded7d792fb96b7a9a911deb0d207643a66ecf546126955c7a7005ffcc6e97101219f7a37646bc6d3e08c37b5bc2e5dafea63bf63586ac5667f1f5b0c8ad8492bb4e72892180279f7d14a5c69a608b3af3833bf1d1f4d97e286fb91beeb77b2a36562f28c0e62377faa87d8a6b10cb0552efd02570f835ed04060203afe160f504b638e75b472d9ea02e043df632162f2c32c0cd36c9d8294c652780d0afe0cb59ea08abdaf07c1f8d1493ca57a18477b46d296dfe012c85d45788dc2e0dfdd5bc0d0cf649623e8e4dc9fc78cff77073a3c26742a14049cf207662c95438fe5668f0f5dcee57186d002bc338fd66b657342851ae8e02b3af2102c4580bd6f56942a9e38c001289ab4eb464d5a2f3afa1f7a302e74c711c0c3a14194d3c10de0960f854534cd954faad51245f3c3121a4a20b7218b7b1a7bf7624c23f15b096d29d20dcc02dc200c157298d9dbea18c29e965e957d9cb68cda5570dd87aacf456d1d2e0f4404e05841f33ed5994a4b75897b2cd5a8acbc64f936c18287fa7df9fec6e6daadac624ba245ff1c97212a0091c22879f3c9ce3e1b84b93e256ca85b3991762271099c004a3ebe607750bbf38354bc814921b6b2cdfcc9024d05b2c98397ad950d29a34caefcfd94eacd4d5b067d398c5c5599f20e2434d7aa37ad5732186ec55b0de2cf4d23a89eacf084f7078dcfacee1ed4981897bdee9cfbd663e8af726c678bb373c481ac8ef5d837596393dd24a1b09ce82eb74c10d68751ffe330b27639bc08363cad2b7dce3e34917e1945cf892e567e78a385edabfa71baf055a8916fe7b9fb57f8e7ea89359a4ac4e539d24842226f34a51a9a5d0f0fa8546fd9e238e967475514fa07e8377887b8b31fe886a94fe0a6fbd3000f163a60a0b3a578337cc2d5d4ca0fbf3e1cf060fcbd4d71aa8544e86ffc129c7102c2d2ef36fa6ca06817c1805f7dfc9c9902fd9a75ed83e612cc778653d5941b53cbfbe115a6b22b9faa1ae495fe58717b0f09054cdfcf4cff372b73745f04c6663bcf3d7782d7b3a1d4cbbb81b2eeb76056fe41fc97b99746df553221240827600711d182486b95356189180c25337f0ace5d7afbf5d86a115015c0601f1373a4739666a862503d5567f6451348ae12a21829fdf035e44f379bf3fea8e6ebc6974622095856dc3273026260ce94f30006fd9b9ae4d9f5440874cc4aa64eccd7a70a85516fb02a69ac33d25c95184404873165fd42da60c44519d83120639ce8300e335240e87ae0b4527e8f64c180fac7b8b601ac4b67791c4f0b089a9e525e5e8a8482d132b4617afab93aa53c518e44a7f15bff94d00db531b2f0d897588a12913cc7b3046a78f04143966b002a0fce83df946169f00c7f988f05e8a03ca2283ba06ea8feb169e666547998eb80dd691bd038edb49d5577d3103b1f997e1143ff376a59474f252be8ded1a6559c4197bf8f9045c0fbd66c0d1da39be2bb511942284abbe9691fe3e7b30632006919dcddaaec155a35d34406ab6a9b865642ee11188657e8a81f86ec8d53739466387788ba5e702492450d4f568efaf666d61f52c3ab737548aaee013f2d693267373d089a8e5235cec7a80c86c4e8eb9baf7bf2dc72a3a6b5326d6a40512cb225bab91b143349611ab955ba6a3ecf7c5d3c1fb1074c9cf8c4266d2a1a49e936f05520bb60440227c1bf8ba09ae576298b769500349332a63fd68dffd202dd86f798410cb226e6f3bd8b48c2925b736186774c267e7f4caaaca20497ffa4b82ed99e6f445abdcdff1a46151527798eacc9125e82d6750e661b8c28c24b1a32f441e8541f747c84d01a2c5a66ea98bb77bc1fed112af1a7d9091f905f00102709910423cf4231bf0147773fa01662fabc838d3c412dd99a8cbe0a1b315143995e4e33230ea89ba35f1cdf0bf3e8c0b9e40dc601b4ad65ec030554d1f1892be41d9578a8c1f489dab7a43153839eabbd5c34ee01da31cdea42f565aa0ba7c13fc96aef84082bb6eaacd6e1a18b13850812b7b75af31461e22985158e0336c9d883790212525930319fa14c6109211008ceae89e915ed94ea274f6701609001c2db590b4f4a32c4ae1d85dfae6e2f9284ba2e335d6e6891a94c261cae2524e53897db9398fc9fe4a440a7b78f01da58b5834fbaa22d2fc9a7192d96c126e8700a22c11357ba8827219b50886cda3914b48606350d52be5f91b6d7174332054895a861f80eda1fe8834609a5164b6e3bfafd00da972f0e70f04e734ec3526bb9de93de969e018a0a8a50d0655424456c946b744b42b7bd6f49a737dd18b5665560e41f3be08b869bff380b178a2ed87a9c94754af8a645e7fdb7bb5e33e4fb795d7b3a2b82d2221fb208ea162feaab072f38a18b8a1c523016c3e031856899eaa81ee1f7d3fc6d76b11df818606dfe4754976916bb24c87b114797ffb14be51d8e42dbf40095e98e968bebbe44431f506a11f923f14ac721005dba123be7b9ab46f711a00ad6434d3c66adb76f42aedf601eec23c21a481e52d3e5ff85590100890c82761d9fc0ccd6c80b84a580153c2c0beb8eae12919afd66ff3e564f1b9e3becb6af1975b340eb4e1b134b091ac6f53810a4fce8825a36ea6e950888f335d6e03d70028f54dc70aee37ea5f405e6dddb4882f1c3eb24fa887e46c54786812af77f4256451d81bc06a4b9c3a13827023f0d6431b6aaeb295cd4edb4af9fc768860992bee38e40e18d43f2c293703652acf7d9ea47333d729f253038d24fedb324ad83052aec2c3bc09b5fb4a810554eb62a9f2e222eadfc5ff7bd49f4dd210cf66aa96cf0414cc4359e0b4d0a3c0f8222fcf296e4305f916a9ff77adfe32f516e056c322230aaa05c5339ba6b6074ce915bea69ff4ac30e3e059c8300bfdb41f653752edfd874a7327f18f953e01f53effc393c500d63f56c3e2a552b215b73ff9bc8d1357fcae2862b543880c97ffe4615e050a8d5f52e19bc3869d4493702166802422aec0afd54c2f5bbbc4284696ad9292f0a27c94e64bfa34d2fc8266079693900aff42e66f137c442f436f408383e636dae44a2306419cee80e19554a712fc2c66e407e317bcc3b296234f7b0238a4a61302347b45d3b54cffabcabc188690f1571ca07499440d52f136e941b08365f898f9763f66afd7d7e400425ce38acf18824f0df5ef6bdb4c59e3d619320e18172d6dc30ac60280a72cd202ce463485b087eac218462a54f1423f826ffeb30f60093cbd547982ae5a6603b165c8988ac5d65074422203ce736f80e61e1e0925392940854f80ab9cece9ff1a3a4df4100c5d62120c41ff0362858654ca3d838002875278d75eb70a444ddee796e00c3c71378c9d0dc887af14a7b24213ee42485a6a3219bc0b3eb0f9a8dd7b144285e425c7bf6f37c68d6bf03a5c9377eff06d374878097e4d29145abd2e727ba0e7480ed0548383d78182ae368cba803b2803ff1196278bafd0f587c40dffd913de53ece9485eacddfc920bba0005747fbcbcc1987186a4dd0943f6ff283091d6e7ee5bcaddccf638ed90fc26239e32c5d88b24adf5c0001dfabb65eb193a819eff7f2f476fa972a0119b01b308fa0791eba95566295da892c079974d128180859195b87e8f338211b8b37fc8de97bf26a9ae4abec2bab0bed37dcb25845a532edb98622dd9c698c24fe9b2961b536c54a322b3173504f3818a4459dcd43ffe2f699d90c9d6c84210b44ddf417178426539f6d8dae6dd87b0492ee1c7260b58b91c57b6fb4523f709045d57d974587352bdc4a51b9124cff8f87fc4cd6ae83805c0b4336a66133ab3873ebe0cd1a20fba2a077e33dfb234bda34ef7eb10661d381d2478d010eeecfe71acae5131e20ec21fa3166bd32f95e0a94c8ce1fb01a14eb613aced878c054ba38e94c9e619b99393c4c650f6008d770d2792b7e1f16d182b2fbfbab139254c49d2d2d685a9cb446b131287a038d63b29bd4daba0693ae6b34adcde945f67604bc4402223eb0fe80cab25cd3961e8ca414e8ae5b25993dd47dbed20b45eb8fab8569002130d873d2bc8534ce3da01d21f5ab5b7052cb900cfc14dbfaef39139c45f0abe0ca1024055725ea0eaa1c7627f2b386b1f01fa22efa06f9b2d4d8bc32538daa51f23ba62fae8f6d4818be955e8c57f9708d8eebd36c1de4a8455c541d04a8cfde4360362455ed1fbcd827edaceca4d28e2f64f65df50de81d7139cb03f9a8873350830eca93f594f51cb6a41e0ddb25efcf83086b30f7d0ef618fecce3e68e80c7cc9bae931800b7e8969c04d0af4ddf99a0b08a2a628186f65ad6f64b828678698b33382ce864f4e2971a987989c614831d8f849d16d0ddd9a579cda34872574aab3c945538144c131e611cb9c3f2ee567618a23030593aa034db5992ce9646fea45b98cf4b06db352aaefed7617f0499a384f33a5313b6c2bcec8c24c60ae8e531c446829db0a21c34b0d908fba724f1b9834fbfa2096fe68968472a2ed09d0b7ca96324ebc2f6489ff10341f80fef2a4bc30d3d6f499c27f6e858c9f7ae99bed5a77cc7e8807eab59938f64517a1f8d01a18fd96c9306dc5fa72095852e951ee971dec21de99b3afafe083b9f4a3f11187110dd6d6e0d6a759ff031282c9ef70435ab687e9178e82dcf82caf2f006056d6fa292b9bbb5321a4fc2fae87812bd06945d2ebd337f0ac9a919cd6aa1d798151321debf77b2e59018faf7f9a1698f6a8e871b80fdd38048a3162553d7cad5ca3ddb79a575a635493b1fb56743fcf8ca0747dd3508289e8da146cd5c3e0922777a6bc43473ecf20cd56cd0af512bd7658ee45063212999f7bea1bbda1845e23b2a64d9a285eb7161a6b437e554a04ac436a8b1b7766c675e19318e33dd9a26997ef18c5e8157b1878d6784a1b5f94610e7a4643c298505cdec9fb081d7a2661d7d816a8185d22529e02f9f6113c0acca9352988fb60ec2edefafea89ebef61df7851d78f434f4442a5035afd31124b17b4f1babc690932d9f2eb2c42fa804442a2ddebd548a5c78c0426cf8f4b848359882817278203400638e68505242c92393b8e7064f2cbdf83951d12152e1f406e0195d87d20f51f758c7e92bbf06260a7b9d6e2cfa2b5eefcc436dd71b771facb6bd2013decf65b068b56589e7a8cbad93c705207a1708d4ec23de2c4422a86c8e9c59f50ac146052b506870996a0da4d22072b2b7a03b8ddb8de167242d894eeb7cf05669e63c620c13dc70d8a99b1fe4de00d75bb159ff1ec6ceb19617e46e879a4c3d943c242e4c0dd08e8e8f8efc9efb5f7259e6c05df7f6d1395b3278ea1b9f4ad2e53be30bfaf3770bb60e08e92fcd39e2f99aaa7613ac29e63f3f10d2fd9c07d4c118f7fbe5ea2415d17ba0e66127a82a67971ea2faf7eb496cacc8f958505f5b16a1aa36e1ae5bc98a99b5f9f13a7ecaf2822d4f1de12a7587f62322dce9b43423ef73c97d76292079b455599cf381050a3316789cbfc6d9a7455f0db8e95cc3a4d3b629859a7457c5b25565c879e25e53e698123b7b1992a52ecd943e5f93ba5dc413d11bd1cab86941270ac3a89cb37a6bad7f94d6a340e307366ddc59c31c1fffe1a8772243ec3e4ce526b682a35d409461328cf812b77b01add3b9db6b6fe12a2031748bc6017383f321742e9539bd16505089bf0b4befcd86e84c5b17fb388f8573508c1e5d51b3d061082836942798442aadc65fa7b273e175e1b492772b9a2e8b32e7b04c4e30ae3466efd70493c195ea4f07f908d60caedabeddb290ad2565c80f7c20074683fdec88122204033f1b65688742758e8e71783a2ed5ab52cd2fbf974963b8fbe4aa4391c149945c90a1c529d89a3284c174850ff8db3fb38f3eb6dd54675c0fe9f8557cb0c08dbc33c84fe07dd92fed57c23aada020ef1c376b8fa6dcb1a3505c0082fed01165918cbfaf10514b3085801868e88e8f7a5c6eff6060f47d7dfd5778b0a2d1cb78e055e7287f56f5c728a785c6353e2bd36c188b179f8a4f7c002fe9fc2f0c52fc2ff544ca7b3b29204d7b0113449f5fdc9207877c33d7845d67b4f46f8bd7d4f1e56f3b3ecd2b7d24361c4f4c5535be2aa4bf31d887532b8ec1191987e986fa32e99811800cf7f866f78e348e6da7020b5cc36b1920e0f81a5d5ff378cbca2fc9b79e9ec7b79b40c8899d687636fa19f83c391389c0132ef1fc4737906a7da07e2149e10ab621cbac24c87984c2ba73787d18eb707884edaf8fdac8a02c2fbb8a16c411276cce5c5a3a8916f17aa4167f26d51d24bceb619f98a78b9cd15a3a94e73ac8338e13424ab1edc8979007a67df1284414d0f93b279dee918286bde05e4f1802a7686c6c71e1abdf18a788405aa5fbc06d8e2fc599e96abfd8baa3d9da2996414e1a762a2a3e11c63fe775203f17d5dbed3b99f0c9c9dc6c06db34ac7db1936f45118eeeae8f92532414432c4a87d398672e295c750ee7fe20ce80a0f1ac51e0efc9690121a7787d915949b137144a751a5b6c4ee104a06fd7f938274099e74f75dba7266f04308f9435da78313f9209b53fdf05fe3d4da742ba81a1ce1f51d2665701eece78a02d76e004462e7f0796856f87f0648721ebdeff63dd5f60e29eda939f754768a65aa36517710bb68a32d8b8eb6964ca36b3194e7378170f5b0049c7296295036c142cd52ab6e3d2a45d493761dd51072d5c552beccd724edf9a7aca9f8100d236c4ad40303a1e0661a3341f2b321d719818560dc48bf0051108074c6d5a5773e275cb17e6d105cba2ba254c212a5a0d6864c5ebda987eb9e0659c39b87d4dcc61b38d025f37ec2b5fa966534c8a3e012220d997f19eb0df3d00732cc36f71ca6d69cdc9142bd967fcb2926ee708309a3cace0473f473d2d1735c9e0f3cbb55fece00ef3f2e233beefecb9ab5f2ceaa73548ae42628d32bc73e1ade03bb9af6444bd3a239ea50717056c2662165a161da851478cd8f950cb57ca32a1d52f48b31359651a57d7e6f017894e58ade2ef4d797b84b7d0e02b616b8adc516c3fb4fcf222f531ebca7b77b3e9e652d85c54206092b3715921250edd39f83ba4e21fdc009b7626e823259f95a3658a1293c7ccfa3f7928bbfbd1e7f58f5e31f77e92f0d2cb2fd757bf26caf97eb8ce35833229ffdd020661450625d1ce2bdfac57a6315f3b3b80607ba2f1990a38b38cf1dff1734f55e1d07ed50eac4df0857ae7ea435ecb2ae5ce00abf0443703f93f5e1c5fa6ad7e403f5c97cfd17cc3097edddacbe8c6a37fa560e912e99b56cf24ea2528ab528be209f2622b5eb0dc3fcf2bb045552ea40a16ac76144d9980311315d77404f0086254820de4bd269c94d0ffca9855da2cbf940874d451e547f685114894264a449cb5622f590861b8c79278519662a5abcf34d165a2d8b02f7c4f5b20c15a51cfaf2e4712576c7c26a12736777ff918a7325750d01c1328b0a3a21c870ebcef506580de45e206dab3108fb607a72474512c395bca7083d7f6c509b6a536541dde0205ec6f63328f572e8fbb11e441ac0d5382cdf3e35d161151b2c0643cbc8a6db1774b558281c191b786c4b6eb87edf3aa4476ff1e6fd51e774bbd4f2be9b476cca2070576fcf5ab394aa100e862806d023e60239563b8a88129ad2ada5f94dbf9af4a219b01cee999b1fc61c6d784871e5581e507bd16597ca1501c9c4d954b894ca285af1ba92d4c211d7915075169899f1f39f9408d96377e42d51d87e4a6e2147141b848362d08b2c728265e0a1605c9ea072e1d9df8c1b5fc1566417f3c4509e465573736668e62ad566f128fcd36ad134ca8a63e15ae583890e19ffee2fc228a0a42392364990641a35606dbaa88de981acb21fe6056f72a7707414cf9605927d3ef518caf572328f6b64482b02b6fbd1aacbd16bc66096bf479d991bf6accfbc6412c54612f499fdc4e2317b3579080b04a000aa0dda5b9113489cf2822c2bdd5dc625881bb986c1500c298cdf02caa3556d0c8a330b303c61dae3cfbf4f3a0e1b1a3f0b2e2a696c0ce19e69a58d7cb083bb9d4f123f487bf55c6d5e6626cdf3d423d6a987b38048d962c393c51bc9c5aef4e3da365b7281f7775808c4238b0295b2b95d9392402e4030d7bd89e841428c9cdb4b42ca178670d0cade5a87bf7b987b4a8ecceb7ba1e509fe3fa056e51f91665b573d0935049efb4e9a9f070e136a262629b4d0ddcf41dadf44964751cbb5354617f71cccb42a9dca019aebe7de7971839da571e469b2a6d8920f2a0d983a59a50e7802aaee63bf6c2187b9f3dd910aa12cc643ef735d547dbbdf1993a5e5fbff7ac06fdda36bbd578df5a595bc9318a99c574d6f84a9030c45216194fe2428265d25c5fbd5b3e34a0fc22f36cc4373316046ef4c107822f7ea48d5c3099215f39d24e2e665d53898d9bf05e6fc1802c793a5b63112bd91627a1ff81d0db41e4c89e1da7cd90d9a337ac7d9ab01ddb60aa99e6fba7f5042fbf98bcf1bf34681d48e74b22bd2720119c1d916a65d5749ca90d7755d08b1ce3e052e22324a3d6fad48a27ff294e305937963df915a2c27c6c422d751c16ca4512221e35ce48b8476e8e256dca62a7b6be6ad3884d1e34b27aa3c50e4a69a1c19444f6b39963e273502108defccf1d10d6f8c7ed3a7b81e1d3ce0d43d5c504b67eaff8a74e26e8448df869d86615664fdcdf69369a623ea6c66eb87cb5b1cb27febdb0cf7823171dc3ea9593a9d03835ab80b59ed872a630c521d0870988d9ec644ba9de9c50ea4162f43c9cbaef7539c0072dd2ce311388d7ae1a0b64b1a708d93caef07d00a73b93f89310035830c2a78c5f821f01085cf3369e86da101c4c35fb4f155a1e27d8320f412bf17cb96cc24ca30f19e96137fd1f3b7883ba728aa14f0fdab0162d5903e0361f999055818bee693a0a9cc0cb6e4d363344e27812cdfcb65531e94e8189d9398a251","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"e51cb6d05ed027db058edc159e71b81e"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
