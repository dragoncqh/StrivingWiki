<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"37a6e25d3f0e4a7faad7d036064991cf623bb0516f39fe6eeb645dd82a5ddf1a7c79b3421cdb0f1b85832460fd9256d95ccd1b7741a3a79033e6397f3a2b6e02a1b800f826ed88aaf27ba09dcc796a28c2559ebd5ac5c2a2b0d6418a541a4fbf1211a8ca0cc59f2dbb2c370459f7aa565c10e984de3700870b59bc2a455e2af493fe5de8a9e65bef59e9cb65ca8f85caf8a87722202ff7a951cf86244ea54768f55447d980f77bdfad83dce3ee2f57aca9a01ae36fd2dce959fc4230e79009e2dd90394e629014652abaff13427d9421f6c2382c8a30920faef4b479e07999f6c3c8ab3d15f64f1e1006aa2445b02a37895672c18183df02894a0674bfda232ce6920d57936978ddcbe01a44a27055e37efb3630644225ca909336a63b24740da047aca38282fcfdcf828738099d2722e446805a97cacffe8000aaa270044ad8eeb5528cb45856a49a2ab67feab6f6af3f78142af523050e8c2c19f543bf527ff4c4b1cbe53cfd1fa4786d116f7dd82de6e73dc4a90a76cee2ef798a1d564d3784a8d73dd13154595762de1fde2e7fcea7cae441992f7bdc5488c6cd03c90954a9658f51c7c5a66b9b0f70a43803230f58be361b4602898c999f78f9b63628c56a49cdddf81bc932fd4eeedfa29c96ce0f57a228a83b972f122cc8a4393d6c5985523d1eb3802aae78fa4452dd276b15514634849e9a6eafb6dbfb7550c93819b08edb3ee028ca1cd0afa41ae34fdea0e29f18909944c4d24a964cfe0b69f0d517281fd6b96c175163017f19fdb1db15f4004d31063e0472c6b322d7f55cf3210990b4bcc3895bfa70907dd4a27826cb0a04b86c1c017cf27a7171bde3172b557531f051f1377a43df3396fb92fd09d54ca5e6248f91e161842b6a12f583666f822ede6a82c12dfdcc169b81b7f0909c3a962fb564da524bb638ea1ef6bb650a066576dbe9413b9e5d2b6e7a5a6a2e035ea813464569be49ed2a1bca16206a8deaa344eef385cdad0406920c2a90f3ef6818f1ae6851bf4ffaf3d5de5a401515c23e19890b4612e9ceed1e92673a1244757c68e78459665243a2b7dce5b0cc995995d4a979371ad0cca2ca4dcadbc4f81878a01a95920752e8f73c8a5dbf9bfe25eb5790df6dae3889bf2c34cda22803d603c4598b52b0a781acd7434459b013760b94029553c489975a14fc62ca62c12d87d0bfd6f780c9f73b0c21da8dc9dd5c19a647adc5cd6b5e7b5bf58e68ca83a052674ebc7ce9df01cdc3bdee5dc7f96c6d4f9bd851419a3a85c2d8d1ab1bb7413740ecb00a81f775d65d79b1ff7f5cb0d581f42e0673a47ab31c0eb2c531f7037ac28b39dc85d7dd732fae44ac0b2897db40b0060a91ef3cd386ea4020a6da79655fd06281572e688df8273c57e8ddf67a46e8eab49386912af734bad4cf0b3541524e041d3733a4dde8080b3e061c60c513d2780b4e1126b4ac88ad21270e449e26cf6e3ab3227bd1aa9c97d37a17c2d0fe1231f8c6a098880b77d0eae3e3b1fa0d53023384056b4c43326771c4fb49bb7a56d626beee5ae985025dcfdea78ca2f7121767d2e520ce761a687faa1f52e587b7702b504916a0c282d4a3f09e4543c0dfbd90ab37c6d5c317484a6aa0540bcba56aadbd4a7e4099539a25e7db97a7349dd533e0ce9c3cf12f2b83978a7fbdc3dfac1c46778a4ce77be42a5cac1b61ed1e5d66037651c1afcc23d43068ab7e2a7796062e0743c2ad1e8ecd5b39bc7c4facd9cb1999682f185fe54727d8ac23c6d6eca65afb9e42b50681c7417f20dcb6a1f139089b656976dd7a101b88fc27d951c8ca2e2555ef33624d326e980a421cdfea60d847a1008452c943c0f63d245e06ed53882d747744f0298f922f087ef9ab8e0127400b8bbcf301fb30ff30f91ce447fdf2d9640b10fc3131f7ee97d282d2f479ca4562726ae3b901c795a983ab84f54701a492b1a619ed1c68f421293f9c80344a8941286c1cefbffdc239fb3ee2ca956236ff6332bb851be6f73e4e172c3adc9c78f45dd6fee33ae158c5128d4a89c4d3fbe34b811966b3ef6bc24bb76ea104fc3db940d83f3857e9335a5b4789c921809b235ebfef845f153d36be59dac617fa41854474bca71b4dae0f5ca3a1c52d47ac939a1daf3c52ab299760d538cd526db33e2c478eacc47c5c54a7795a88a3d9b6f0f17fcc08e05f41c87e6d090329c39032a2a71a234e1d9ae0fe7c4ddff7247258b6a7852a9b31b8952d1e023d2cab23d0aa5142df579a683fc2329cde5a4e71d58e40a45c20d70cbf8f39ed7d28cda0a76aa207515593ec020ed82513d7e6c1ca0fc888cbb1145e43e226cfebe8cc272a5e4251840a23e346a7c8865c8c07e041d75fb958ef37177f318f9b2e994c13251b5a5fe8478839d7722db96b3794d6f13eea8389b50d389c8bda85be5b90a59987339e8d0410fbc05b82856d50a4f5bcedf3579dad6422e37d590030646f47b7e09b05ec3bf4cfd278ef8fe3e326f32a3a0550783e6bc5a00c22dd29137a764246a1b0fe38089e79f134066efc126dca091026a7b6b3dc947d8ef25a0bb4b7d48c3f3bdb09695b27be28e7779a603ae4f2e45b38f83f410dd272c10ec1c2f741914a3a1c9645027f79196dc5be8dc96316f637fa2e392f6f5d6e434aed89c1f0c696c289e590a219b57bc4212b2ea31629dd9a5e9b18b06b0f41e9157ba1c57373da4add1d668aaa377d46f5c08e23e1337f0b931ec82e907e31cfd5c0650b3d7a92f114bcd04a00464bfdd150c6d2a017e230cbce8dcc92cc5b0c31617e1d40504a831bc42ac975acc328306eed7f25db166b53ba0f9cb836e0ce6176b58a83316442c46c1f86fe744d93bd390d9b81e8dc647d479dcf33a942f0dec1298758e831be9e78e4a5781e858ae9a19d63c2c9e221bff934d53915881a0d85cea5e47118641f6d5c3e46251951cf34b7b6a329e08da7c643b6f8f9f6797c54af722ca628157a37f112eab0ebba2f23bf86fc487433ead2da140c850de0affac4dfb8c5b0bff7386f3b688ac85f3760c84a3f39e0d170a5c96fc94fc023ff3337c9953b30959748d34de1fbb0b61c1cbd2d16de52e84045efbcd2a57be8acc67bb5318f9e480084b6875614291e3d0cd599f07a7ecaf2d46f441a3d27b81b29b920dc4af87c1789f63c1b8d671be867c76a63b42379892d10295deb21807846c1306f66ef049311ecec6ea54fe54e6032f50d4850f127067f8f09707dd75b00670372d180705df18e9f546d839cf78d320ee43886b132bc782dd9fd4011905f1c965d077b3a62e4839c9a1e3d04ca80d103ae3925cdecd286b31546f4affb14ea9cba2763f69bd9d3c1166b0bbcc39e0f87c701b1430eeb5e0ab9c65bf4f803e86c85b5e26e5609b810715314698cf8d059781a2ac85549b63d62db56467ba8ffeb6e04be6805df0db5046fd7ffcacba63be18839dadff719b6f247f73465f7cf92a62b7c7241b0b2f42460fd809d309b5396fffb5e514a96cbc8897c2384259f36ff4405e89cb9128ece98e4721f02b0dfc35081ffb8d0f8cc8d86d654c8b368b26dfd79dadc205ef211645de9d189dd7beba36730f6c096a175ddba88e1afacca9eae2fc5b470336f347a32f97c6be43f03baf43f7e260268f6ad6e4ac1b781ff593fb92d0beac92b0ab75d242b0a77099d8c8e455964a9b6214538193b27720873bce2621b23d9be84679a584150976c2d9ff57f81cc5f1b45d044d7ecb48f8458cd75bd2f8a13a776c377f0a09f2179f30ee4120e23dbc1c1519bc900a00687834cff8416303a1c84fcf4660aaf6b4dbd88a790d7cb119816f6e7a984797b5ac47f9a691ebc80c40197e1909f9d9eb0fcaf3979926df20f59475060d66bafbebeff406ed195d6d0cd6b0b2d6efe2fcd2ae017b9281b54dbb810be198112262035dc8602f1e5d3d26a27878a50a022d6adb348724544f55349500bd38dff04ca343b5532a55f5577f84e9f26b6f6cfdfe1d6fc435fc81223d7e3da0c81d4de03545a9105ba1a584562e297f466165f611c8e9226a6daa2fe907b236c6481908e41d97cb44dcb344a0513bbac693b4c57453964b042c88eb0f910b53b50e01811097f7a0f841acbd821ebd3dd09f305db47dcdf132d0794e57d6b92610761e682811428cf2b183863d6045f4a55a4b40646b3ae503c7422d8591af622f92cf9f45e7956605ee77358717a776e8bcc5750393e9bcf4fb276b20fdb4fa2a423b2848c4d684a3851e4e9aa69a178692dfeff4311b36523ee7d6ea84e374fab05010385aa0a86ee71c0977fbf09b21f10b02fe9d56ce45aa38b61b773780bb06bd90aa612d10692cb9b743dbde7e757cc1c89af53adde7235880eece30692c93907a97ad6ff4827f12a9598705a91c729a5d4de0003451da66c16a4d4fcc7676fd535afb85fbdd05a6ec0777d49c241594dc5385d9a540904e70c054bd7d06707391b8e951a4e343434c828e82279af13c914708ec3152920a69aaa4b817c8e8e9cc4299105976f34e0f4262b6dd32ffb905fcb5acb2ad729d6e0feef417e506fec8f49c9661b799bb13f00bf099a7bfb80475c93c957e4a69d19788bd0c4190f7ba4168c17b209a0c59271c97a4f677527e9cd8f7ebf66bddc72d30ebc63d1a37fa48861d357e87088c34e2bd744ecee67d80a3d7da9335240405e035205c469613f2e350e716ff9af6f3d3c40113bb9bec0c273c03f616ac8576f0d8d95168da24a1e55fcf5de696c0f4562a7926c149cfd4ede8db08e3cdd96da9cd87e9fc7cb1de8585d4dfa5450485c081a4cd26e9a5f99fa04671301a60b29136e916b735e1a4075c37d763382c2c71bb69063159ca8b39dd8ac95735aeb98ba74ca63bdb0c8b42fad44b91f1b09c9f0574bc2c12d4e9434f883d2bac0880bace41642a96045434b090dddd77ae10b992098ff6b39f91f9536a78057b9a4aaff4af1997edd82452ab5975dc618422fdfe7f9df55c14e3f5bbed11a7225eca36c1d1f491c24417fcc946e4f2da31fde76835a5a34a7dba13a27166c7d2e82ad0ca980fd3c4a8415ffc166878fd0add1cf546a08249c943e16ecfbe41f0a39d1089c4abbacabf868d366c462e4a6fabace03383319717618f4c613f240f2632e1f40680d94e3861060bc3551f6797fc5ec74712ba186c69a37cdd3778e537def811c854e9f32777b339923b6ba971998427836f555fb0dbd86d7a17846ff8d9963a8e5625ee12ec2f6e645b07cf19c203fd7e02ed2a78bd2f612d7c5c31f309de8189b3298a57f79ea63e2842838072dfd9001b7c42d21a7458c1f15d5689a044d52dd8ef673986d4dcb7bf35d217b4807a68f405eb59f4942e3e15898bd509be362442920118b0d52f680b3b1d4bc0312ed31ff6adff27941caf5fbcfc3a95d967fd9a14d9b264f5541f3b04373a7a14bee960ce8e7006c92a7d195116112fc8348f39a89149d7a7ecc007db34b5c356a0a9e9ef6b10b3dc2471c9a6a7100c8dedcd85a4e4489d22b3a683cdb1b3597677ebcfdcfdd666be0369d6d937db242ca3a20fb710800c01c5150b1b764f31cb1ce21b31fa9469b98918ccd2098bcbeb92259f954ab14c48fb47986f28f7b963ec2e8108dfaf81c43966d12aba53fdf1b13575fb8e58217683d92f1c0269f4ef17c3a554783d4422f96306887cbb47c5ab975286dac69daca197cd03bd7100c444f3adedf73c768f14415246c41924d0d310379567c06cad729862daeaae9b8b370f647553939516d35548cd4af17dff0dc7b2c40514706a31a3817ea62627fbe91ab5a2dc8410a6330be6652712e8237b44a77ee5203fc86ae9dc77e49c75cc6427c3823923d7a958fc08c580bd7cb944a5c0846f5b8be1a5795f6011e5c46ad5b961ac4523eed643a879a4287597f60fdc566a47dad4707022e6d7d0f62dcb2f725925bf22d7d88d7d6fd42660708c02447b5be973c350455e2ec2a7c6b87f47a0fb739ce8923474b4b3731cbee5621747c312592fa7c9d53ca7d07ed3334bd85722726030c43af003d2085c7c396c4065108d6d24fee2d48af62f3a79db5027dd4da8f6a8f791666ffd6233250ef2410329c80e217b23405ca79141540dfb763c3b782b5db485a1116f7027459980d5de9cd6da38eb9cc9e19715fc1de06d7a48b6a76cabd325291b293e8b300d809aed00ba12c887bdd45e7f4795c4cfeea55e9ed16d3d72de49535ba6ae524b320c36de5a917c5733677bb3dfd6b999a6a7355c653b9ae53a7e43a5bf253145fee6c432f3aeaa611fb76a546cc1b1cb22157c5babef85fd1c657c39cbcefccd2c330d0df31a484df1adb67908faf2b3d596905db6caff270e7bb545cc0116cc434e07f3544d73b9307c3e986f2ace25a4bc967940c338ac86f3c03367fd30bb623db767a6883743acb47b9489fdff37ac46c76a6a9f658e7a675b7c22a217334cfa0d8864004dc840c69f471121f8754504fe7f55da4d32a0d9e9e178df3ac9005ea0cbbf0cf41a81d913b68941e1ef84df99c292d8869e4d638c9b36b3aa2c65ec27ad7a237f50ad9719882fdefa158663e21975f3fa93e34a4f8ba86789f4503c4ca0ae9d3f2948dc010f16a7f0f31f8e9fbe84ae7917eae68b02e957908dbefd4d259c0be6deeab099ff21e66f5c7c1e9318755dc8120a4fa670a807fd19e9b7f82bd7aeaaf0c300d5d3fb9f76df926c25e2ad0ca301250a90bcccbe6e02f261206bc99ac6b2f951c5e622ac29cdd8eeb065962f322424838a1fc8ee1aadf879a78b32680851019b7f9de4b9b9aec77eec57fad73e7d847845c2e28b110e1d6e56c53714f60d433db9587f09a60efbff398ee73492161e3a3a74310280f4151e98d3c521ab4c75b551e806a133a09391e138fd8690f79a75a3c0c8fd9a8e6bf7f595d047f7af09741690412859a35eabe9087a8beb1bb7074255876707f1b60a734ed482041e997e424e6b4da7a117f151782913b9e4bee990616f95c3c84b970f7fece5b14cab0a26c37367be2d9340cd44de7ab72cd804818664e41d757376341921cbed6bd42eb51298a6c9700df25166bcbb19147f7f8eeaf6c53133859ca11cf009233d709eb2794cce6e2ddd69817f600e30316236395a169562bffd59d427abc1d15ca1fc4ef8a45350832ad0d7da753a6692fdceef6e9c64002ae83d52404b08a73eb3a3f6c33c3c79f5d718471830904c63ba4c14b8c742b0c0cb2c9a3251c6a2abe127e4caaae7f1898b932cb4daecdb13e8721531acde4c891fd201458c8864f9eb8bcbc68516ce6b83974d6c1295e262b326920e868afcca7d1d07877af2fabfe7260cc1df7982bf258fd11996af756734051793eb43d0142f98fc498cbef62f01fed91b911148019a9b0415dd9ad9b0d149cf6b9a1583db39fb838609430db2f3c55ea84ab080d9d5fc964a5bb42e8162df840fc99c8e9567577f7bd38bdd190b10f23d1cb8d90f2dc701559071a0b4c8e6387c121a28f3effae928dd375394551d4e61c708636c6e799f4cdad4942bee0da19bbcd19dcf7d93134e9a91ec1cb04594aca5c9b549f83889c71ad707956ad05e8349191b2017095c6c92318a92160de1dad95abe90dde82da8b805308635e561dca376067d216656a071b7b5932443ad8868448ea45424b3ece9e445cb3b528f7ef4f79fb4ca937c47b3aa8bdd44ab6b81c95f26cb887aa14302cc3f97a15b54b2fc4e608326d5dacd0d26d5036c931c78ed0332fcb13234138697f59f15c7c1c46847608a49f9c1d33b0fa71f0a4782f4d8f662467c2d7fc0efeefb03cad69d8d933d45773eee99c3b83aa7ecaac8da6404e2392eef839304182ea6a25c8dea1bdbb8689cc7d3267afd6ae15f1bbaf4595e0a75d21016229ff9bd926014bf18c71c2a20e499fc0a4c2a1204044151a05d562ddbc0b7ad6576267d1d122ba61b9235c6a393049a9705968f4cd3cf00eed2359be267388e7e37a66277311c2f0f7dfc8aa2b62d2fb998cc727d20cbbc69bed8d0f87a3e4368fdd5e4c6c0a84972c24926ca51a38475e1f9707dce54ee0628441663edf8cfab2fa015158ba028ae3ac6b5f189744c5c04b0b4a040a144ab6011c643a9618659e61ce5c5e3bae09b459f9e0be86ad89368068416a344150b3ac3d2a98dcceeb6c4f81d2f080a35a944ea8ca10a0f4845d78ed103d5d7a8ea9a6f0f13111d35b9145f86c974a1c18a0eb4e4f6c70e328cc3954c2e312bfeadffb2076aa94f20c56ba641a0434415633ab9f2a0e9450d49373ef53a5aa7644a1069996a9cab3a8d68af86c2d8ef263a84fa1d995e68d12a3626d2ee76a8d4f6fe0639ef4a8d474755965be748288188f479ba015f60cfd56b2ef5515252b6209d9d87751a13d15d9b088c83378bfc6ba8312fad292bdfc03a87a883753a63235fefc65a36bc4772cb8a83daedee6de2f23b16bf3b7b53b68a86b5521bc59107fab71515f9de32e237414d568a16e88e53b1e90a1ab7eb4af940d41de2ae1e840983250799e5b69dba309c624e5f75ad1c71aeb26568bd6040e62b963f217a225005f2a704afe55cd8806ca8e81d32b2a7d3105d19511dfb6d1810c28e4d2a94867faf1921e8c3e86c6c775d872718ff749b0f61fd77f7f70c4f7cd5bec933df759580b778609de806e407dc0428b83bf959a1641a3f523251ea69a23b5e782adb7166142b6286b37182d51bd794d7ca1d5bce09c6366928c01bd92e3f24d52b379ecfbe9de309a1a6adcc1a3cbc5689152f7f294e063ca1e19d8757bc19a0eaf5289f60a52ddd13cac7533e1d90f8a04e4eca1f766f7f4fc5035b2fa8808ac4c7a780fb919a9d56317a3210090697081c0ac9d80b5f58cb6cf430b0a589708b2ed7d75de69a892b9e451663cefd2515b3680e0474a9518f832758778aeb5218ff1698591f9265e684f7beb4f199b1bc96dc913d192b44055f5bc5faf75118b881615e7ef649a9f138e1c5d0282f5a51b415d570b9ec5f08a6b5bd8bbd4eb95b6d9dba9d557c313a83a053dd05b49dfe7e36f265c17affdacc8dbfd765b9da975d2efc137f5796650c17f9de95db7693922ed1aec505d243ec4bbacbce2b931d725697a73d42d448c08ce312e02657fd57ca8af37d8ef0d2ad6641ee9fddb2c8ec63f8f60a16f9b9b830b2bfd181dfbc3829327d6b592d968005a892e4bd17ef8f90a497572a7ffc4e8534cd72ac471f2fe9cc8492728569b8b325ba036b353057d8100bc7f5c95f7e6bed3b73156dc799f37d87bf0feeafbf7466f8fc27aee637076cc0ee1c9ebb82e4e2f94b2b0f551b3037a6f34d2d6fc8612378fd58a7443a230d9be4ada76226aceb17e24630f65ce108649021870d8fc03f67663fbdc41ec7c6f25a15885e166556e527edbb990e0271fe1d0d6ac62af0b21545540d214dc6d05d5d0b9a010f54658ea22e32f1fa42d5c644a671216ac5e7742d04d52e88df1f60d6982cc878a2171a3a0ac35998ac2c532d672b39ac5ace64ea61476de798613c3ec68ea4852cc3ddad456d820ca89de3413411bb5cb5c024e64422c06c0d302183d90a26f5f5c57dfd982da739d173b3cfefb72ed7144c3c4d02153f01f912c21f52944c35d16ee007cbeaf2cf2d67e4ef5de1eb6cd622cff2ecd730fc91acbab5ebb4e740e49f5cc72ce57626183791ede25209689e97f4e645b2b28ded84edea730ba4254a2995181e3d4e351a22c2f343aae2618afad97d183fb1fb793802b584e89148bce499216a67a874ecfcc30561f2b19852744cc864315f420ac7071bea0125c3d19133e51b0677fe3491d3cb4e3d5f3bba5c5093a7d7a5fe02c61d865af5c53c99834467c0f2dac108ba48d12ef9516f2ab939b96d364acfe49d476badd9c35ca4296a25aee5410b3c9b38397f0e78434064114349b06f291cc9b4eca2f62eab9a220c9a5244f9d326446bcdd4445228d6ae7d8e8224ccf7194075d3f857a851a810092d9c828f30d833a1306c5c2271276bcd139480a0c909bd964ab8230b2b22e9dcaacbf0c55376edbb621e1ddb7a3a07e2288f03248f56fda2484744264bffde219fe16e13dbea0e23a5c96fef63e4f985d5d8e3c6b56e938a387279292e8657819d72a2db9234faf3bfe29f95fd5fe3c26cc5c90336baa106ced94da977197f10b7eafa86dd3aebc07957cfda9dff2247e847ea120938bef878337ffc05dbf0073a635d623e52a762d26b400eb043253db9fd06d399c7191c6b961e47cea50c58526cc78dc29eeecee08de8bd0666c1f555742edc1923526d31d1003c19690281152c5364a03fdb84f8dbc7e7f4c2069fb98461f3428fab87681ceb730a78f64c8ac37be03bba28458f09c387d8582c3e36fe50b9b3616b682915ebde0e4bc6f8583af4093095827e346ea6323eac778aca8af83cc1d341bde91afaf17acf587a64627958b961560b875f7770a36f0139ca5127701079d87e5778c74ae83a354a3c9e796ef56468933d8642c3f3427c639cad8a8832c2d42a08b72281d0ca4a91c5307089c67ee786c95ae88ebf70adf19dbb2e5efe788f035c3a9bcc57c80e44c764baf3084b3396b535c12e12554d16d8c5f17424ec02bd684cf19066eb94d85487d605ba5dfb25ced47fd87b7522dbecb71b9537456832481534f3ec0874acc824b04bd19afe61ddea5eb3cb67267d298f5145ec6c02d5b5b67458bd913b732ec7e421bb39fc277498953341f69d2cc77394e0ef57d852315cd4110d22a54bc10cceadd327b46eb55cb574bf88af40ac56742b573981ac345b8f1a0e18091328b0952b2dbfb103aab161f318e7460a9b740734d80c20e122dc5e5a371fefb77f0b64fd00920b3768c4d4031a734ecc48a44db14255602cb8f5b40720d074f6026a9d3b8d406003b9eea6a2b2b5fe6a0baf4b4e882ff885622c6eeabc018e04670adc6917361cd8e69bae3d98aac7eb3462177ea7c64f48257319cc41df4c2913dd206e7a286a0a6206d6ba9b4ad2535beaaf98ca1da25b2ac316bb0e69459f11fbd1a2c7f3ad7afd426dbe0f1c684bde72512d39343025d1f89ed5c3aaad0362b3170621d0e11cf2e2eb202ba329fe5d294cb44d7b88b0dc82ab547cb2ebe94bf4e2048bcf5e15dca1d91721270690dc0a0915be62b1cce79c962a616f68a537f21b87f31c09b38f14aa8a013f7fefa2c0ec97256ed50b2785bd38b128d4da8b89043b81c2be49421dc65fd9acfa28fdfced969b3ba2d8a263f9e208d995e35869bddb07d75df460c65a166f946542c0fc5939f87a077c7da3fac93b692f420b9e3c15de23cc5106068f22a4f1b12ee49a5931dae87a48a3ab78f3e88cd42cc14d93446f79d513c6d32f6efc31566327d96150b90bb32f36a7393c80ae6642d2866fae05242da60d7c027fb09be197e49a17f667a5f8f9a74cf31d57b236965e3e6c7b567c6b882f908beb508841c107218e741a3dc86e4c3c79319620d9546c52b8120e49c485a62ae9333bfa75d22f7328831898e0e1d93f88ec4905210bda75c75775a9864badd520744ddcfdb4b7c6f2d1726595334c3915415737c94d87eafb5e0504e6cb42ff2fc4e90a17538e036abe83d6bf57229613c0988c0daee97b8e1cd6bb19420e50e22b281206e114147ecfb22c8c83e179a4d5c49412e37b2cba530d0ad173af2131c57fc9e5f9f41cf4f180289d799761e294d061694853667232e930d7a21c5f49448e99770defccf75419300bcd532329605d9ebf3194cc9c2d8b2a30858dc7730d31fa67100aa9f67d54af94c418e8ad373ba81909c99ce3b29940eb02c8f602d5ac7747d37b03c665832c9c75ee25ddda5bcbf331a0ecdee736a123f5a5f410725b01033c265f5871cfa8de2ec61a641767f8bbf08771940af533d486aa09bc093944f94fc252853a3b9c7361d21df80fa5b5a692ee57ca275e145d382601afea96e5b602def04d4d2c4d579e4bafb3256ad897b7dd221ce879c8d85e57e366ca453c876f9480b090ce2beb31f07a9663f2d941f309eb1d5228844f4707af34b106c2e461dfd0d84737b807c908bdb4f8e43e54ba019bc0492fa9dc6d4bd7bf1e821e052b64fdf01f16b44cb2251b696f6768ad2a53016505d5960f08d4ca39bc888b4a3af756bd9d79348694d9c4a6719ca070c11d3431747b7d723e76f5dabf9d6e005a82503640f81765547bd205b018c958a3b40bde4fb0e4377764ffb7716a8ea5bb8c72485f7b41ba91e8f9a027da2482cc1499ac8e49e347b2fc64bd17087a987e7ef7934a9b3a447e0b1e8b5872cee214c49d17094dcf2293d85bfa8c145e96628b68d007cd10851c21283cc07bc69ed2735bc82723753e71a6f9abeac9c282dbb91a3cda2ea80c29cde8026d6b413854792e0648da134fddc9adcbff1253a6ba3f1bed62ee90d4709adbf51987e48e014460e2814793c0ae17955fd2d79466bf5db205ba0fb71a0cb8bd49c573d58f9c5c34b6a7279b91fd50e752cbd8a629322e0338587881c2535691dfb891f0841201ba233b8fa157e411f53b53fe9afbba76441ad1fc1e582f7c6aa7b3347a41440a3d9b474d3c641845676f41a473ac2b47a537d961ba512f4835fb46b88bc14fd74c00ec64c6f67f5e0e546767a1c2943d470e86080ba47935e0a19070f5707bf7230ee441834b27b68fa20ce5fd7db492efc7b3b2b6911ff3e94946de3e201ff5f4476d104e0888545c16d803f7466f8ba67c65cfef1500acdf545ac27a93ecf6a74dc66f50740edc37cbe9be979bf575b995932c290d9745348a0ca6d0b33c85eb8077459d94868cb986e238671c66f2108e248ff5b852066fba272421e6b9a7333ece79cacb5dfdd0fdfb1019d0e95be163c3ee34cd8bda42c779a3dbb56fb36fd7fbb1e771c4d9b2aadd22cd58d4258c6f04ff9a6ce23e7f5daa01cd3380752f0b7bf364719107419faae7adc61c979e03cdf853a802ed728cbf0ee2b4aca81b2efa093501613cf6f723b7885ea5a837835ad780cfd60d931f6c292e6a5bf0fb4326741a7da7c3768e0f981fc71a8fc5f5345d82589b244277a3760072be7d3330c16c2dfb5cca244e31ee8f82f373ae618cb3e5182d9af7fb0d2a726f83504463364491b5561ffb9b437f19b1d7312fadc0baebdb30a6eb5e62bdcb51e573797764dd014c63db5350a4ee3ba49738b6831de5f36dc41cfa7a5aa2950bef77528df57a1ab9eab91db149f3859ccfe2dc4f7328301c4f9a89e212a6b8aa143a3da729b0bdbc84027c2c2eae4e42546acbc5e144f1ed2973addd94cde8223a6561c65ded8993be5ac54012c8fa31ef4634e5c4ab131b392543bc717408e18245e4ffafac1ba5db12c303400a1653387176bf3f64318a69e96e76cff2c153873f6853ee3f56e5fb8a73b89cc2a623ff45683a415a01ac06819d7a6e54c2dadcd68fa4cf482accd24b0e2565070d1a422001580a76268cc23b8a6ffdb7a06724426f00774681b2155b37734e3473644e898c44445bf3ade23a9da6c94970c0376fc02db88a41ba9c4e022b7c30a67960913683fd999579328e39a73fc4be968864333cb7219527d39d705d7ebbca56e445e189e8efedce5b70c88fb767f99cb1724fcaf1aaac306b5a0b59eb22b72ad8aef4c4fd2e23a3db262512836f8f27805ecac321706960651d948d573b1f9530c7caf8bea4183f847f351e3bd96aa72210a4352bdd60ae0f9d6fffc2af982a4417959c848140dd529ccb330e84287623c8f309f9744cf11a4d7873514a1c68bc7c779886a838af7bcc02daf8b0e92f61bf82812315f38a22827030a13f274ddc890ee143d03f474a9f2bd580673a43c27ad4bb51ebeafa9c04771508c141fa20d2427531492a0cc16349f1fe8c8264393e29835d2982c1dd0ff115d78d1e9681c37222eb65974bc6b255f08ede33c60c4cdc970e8cc2ec1cd590a93ad0f36c258d78b657e5d21d2d9f38cad0fdea9399b65a8844c40b51a1ce2869761c1a82cb49bbd254c5afa3e3bd796978d6a3924466d485b018c43597c5b3ef49b7e334973c3d12f4dd8932b1604ccc9811be0e38c689e2158babea99ecc32aa54bcb7fef542d46bafb9aa755396a45fa60cfe34b8cf0ff4a7bf23921742c58789964cafd12954e068d2e81e982e87502f60d0a69ce57d603c9a3870418ee0788423a486f72649d9aa6f0be9358b5c5878db8e63003cd8e189e84e744becd9175c3e2eeeec8369ba41c0828bdbbf880f37e96c88beb8e932bf3b165bf03c8bcd0adc45fa2ceb1f63587422afad110485cb14f739b8973d1a4a19239bb8c1c7906452fd104725cf47d981023a1df750993db8cddab0aef2f090adb70d5a38362c1eea0cb66410e6d533e61685436d4cd4d842313d3b04d4d1b24be33fc364ca59748725c45e9177867484635621de3ab01722695a5e209896c3b75068f378084d594137e8f3e9a163e053db923d15ef2b008bf4077aef0e163f8d396c9c06c5df30f73a3aaeb6441e1d47e1586bde3675e6e31fe08df0360fd6e90e32dc396086028b26ea272ba409961d7c91750a9aa1b3887c01df876aab342f938dae4704c8de48088e6d0eeeb80d93629040f1ce6eacfe1bfc7be26b5d3eb71e8f1162b73f93b6daaef1b0288392b6f0e19607be270261bdcf708ae8ada24336d167bdf88748c8fba1bf65998bcf9c6f1989e31842ec199e16498bd5785c3c86ee4f53c9b787ed80e0f8133443ad4ee0ef3a2d2903e1b6bdd6660f5b22545b0035dfd1bda49d34337e4c8c229ff3ee9b906533ba78173161f0a21480761806a0fe989404e0c23fe04ab3c9cc5ddd65bbd45240e24d26ca7237c0a9080db17d0b4ef5962431501df840bf5f82d565107c64d177f25b97c30a8c413465954076153887609166560f3f1d0b4256c188a74e4c60a649e22c74658743bb68c3374dbf1fbd2afe3c6d43d0a17652e572c95de291a721a1037cafc84361c215d1930c908b5f939dc42e5c3e0897e0eef6b304c838b971bf242d12d94ee0cbebafc4190607646a3e27d8d0c7d7e06d6ab49a8bba0c4a86c8f561bfa067851fe043c4a352dc8143c8127c6e87f8daf672cb72dae4ad2f0994a0ff4f9fffa25ed503cf3ae0cbd0d865102005780df00d5d9cd0e8ce3a99b2409b74ab0a312027fe00d66c4539dcb45fa1e30ade3135aef45713a6d96c691a25059761a000d5a47d4808f1ca94567b8b6335f108730fa80f9f5a7d7f7b881d5469ededeb0b384799e668f0a8536de12158cdcadd06d47fef118bd08bbcb9eef4284f21814f79826d1b8c496bba978f731a21b4886702906e3aa760fb65ac907c5514cdda5776e01dfea43446244843f84e979965311f369218b0ea0a1d259a7287aad049fba8f07bdc74b318faf9f7f1781e690de6a5ee210a8c1a895c5f1eec8295d0b1c153c28d0d85d5ce489db4b6d69048940c16950e40e25d68d654f169c5b4cb45d95a178bcf87d40d9d73d44fe2e24aa52310a5da7f7a2abcd98f99aeedb0f6d91b160e67a9a262d4bd4361ba10a00b08589e0de068f061f4569bd89b4bb87cbaf0905ecaade6e8c8bbdf66ace3d56a2cbac37fbbeed71b9b41d3b17ff49267b9bd9018888b8067bc4b1ad35d24f5d711ee70f7083d3e7d9e9583448fae102344268fce43e995e8864779e8b781dac2724fc63e90c11c5cd825c03830697c752e5b7f4d7ad283d49d04e5b0c05ea313e56c90bcc613bbc6cb19558abad97d79380904e4cadc8fda9e786a35526c5ec1aa6ce9de6610c6db4ec2625e4569e9d2498212345d72755262ba556fdb440d34e34b83a7ba068975cbe53557ebb0aff78d0db2a377f40e5248498e74a859869fb94961879984b5e020b80314aec4f168ffbb61a852c1176d98c7ef9d18cf3fec906217a95d1fa2d0c665adb99acf79a7ccab915c0e68ca586a922ae222051c21d4b086d6df548008aa4281c99991b6b9b30b7e79c6d205d6d890e03449c7716300cc1b40079043ae40afca9abc6de1dcc59c25230e3136cf466a6066a9b4f54dee52ac2970e07d7caad53c8ac862bc5bdd530448e7b66c846c40fdbf55ffee3a170298163ebf9d0c6b32a0252d09b5b83ef8f0fe253c08aa70d6a67783372d7016170299a7466c33b994b9831ffda14a780a0b71b9955503fde2cdd8660ec62df408b32ed96d19ebe028c9ba3acea65cd4f5eee1077fb664df1c2d1c373fac9848d0c6117bb73e706fc18cf6d5289a5eb3b02a8c3eed691ca20f04dead25fa5ca104d8af80e452c810b2e91264f45ee5abbdf2dde6aa83209eb93183ea9076ccc719d208803ab2036f92c25f2cb70dbc604177e0ff081eca3541d73dddbbf97c8e418234c87510398aad849331eba5023a078f01da6f2350a2699fb6e139b43712ea07f9c63d0b610dd0371971109f498d9e081f08e83554111f0d6524928a940e04317ac366570808c356e7a70798fe18a41642680c9f356cf6daeeac069f88a1cd679aae498aee44e4aa205f3949ff410a5ac16b3ba40aaf2ee8bfab9097b4918bcd02dea97101265a957a02c8c9b56236bcec076fda1e6198d1aa9601255e339c31878762d7d795f257137cdf5a331acff544da369526f696bc5ef94b849bccdf3eb9d31cac5d3a53013ee23db73426d7b7ed4c89a53c7fc2487e75f1832b879523e743cffdeb1a2fde8ad87bfa4463ae7d35505fcff7aaf70cc41af42047f4f609b3582081a315bffd67fd27bc7621a582799a71894bc78900ef15aa49f3abbb595a53e7b5b103f28eb81363e3d04b0d548e791c0791283167d32eface9a3e767e29f72fb7fe0929f70cb65c3fc343a501c88857c68b2b3a4d7e756338939e1993f6ee442ba416901e88fdcbf0939f7be8aad12a7a1f12a43b8e1a0e7872b1397bf5fb89c66d67c9e4dee079e5b584545934680cd637d05207e099a32684e345c014f6d5e25d88546bd1951403b510567aeb7b7d41d7fd92e9d4b324bcf152252be9a1bb92c6eea385f82513133b538a1a2d6b7378347c2d94300d3e3668139f6e61329e8f83ed221f1ca243a05af682a1e22ef1db007e1511ecc681ef3057a75f9d381afd97bbe742bf5b9b15e6fa8a66722517d5d0570c404885fdcc3e1ebfa1446e10458dd6f90bc4d3ed6eb2fe1bd94848a9ec39ad10e7b3cf0b2289b326b810047abe7165cd15df91edfcda6ddf239ed040a55c11bb0a7899f21a67aba11b4265f0468728fe1615fbe316aff0751c79f527139b8d9cbcdda88b600daafe039a7ac1edc986ec259b35eb4f790f0ea2dc2f443f0336ce3f6a8b099358909320f0ad7bab8c99be77911db13e7b3371caf18d8ef3160c2c30f1d9d2358361b192c792bbf69d49dd44a0d2d8b98b28283807136ad4f2716b7a436edffdd710ee8483801987a2dc7b3fa9d6eb392ecebeebbbc1a0d7c0e33e5af8f2b90c948a4b025a42a655009cc5abd960eca45c0bc2952e7b98d58a842a87c5744ab543d21d59c26b32b44193b89ac578b974de5a4e0fe065b2ed9fdc801675dff75db5eb0e8a46675b616dccf3b91433cdaf22b16632a35ae4a2ba215de6e34db4f5c710b87f44477d8f2b8059ca2d9b72e5a0646f86cc20e3184ceaf555922ad692169b70cc4dc0f3cef18b32dc79bf9f8da6d2a299dd67fdee187acd2c4c02b9f3daecebd07db096668a4b73aa7e03f1c30d6fcb38ad1e6527d5e25b88201d3dd2f5d31ee112af656fecd0f9dbabe0968765d689d1058e9d92ba267741d0e4bb1c1caae2ffb6eb565c280ed069246386bce00aa15eeae9ea4c81814def27eec984f41117f433b0fd7d980f2b5a93f6f1b1d33ee6015e7f90cfe2f34a99dbe7810d0d683cc317b9f67685a13cd23c98696592e3e7aca53dd28539796e82826f6b2abaa590a7a4c0461b09274c8ad20e9a0ad1f1f86ba30510630c8415d82fadbe8acb9afc24100ddd36f770b1387c4f0b7e54efb93b7fd518715ba51956ea37465392ed8b86c0a66c02bdc29454aaa21268ad9ccb40134b2327b638d80cc958fc70ff447e1e32521642d48da70301df2f79872b29956f256759cbdc6e948ddd630f5245d302357869390bd2b53e52805c8a92d7c14988efaba662b38201","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"a04e2aebb4f065114c065b7fbf49759e"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
