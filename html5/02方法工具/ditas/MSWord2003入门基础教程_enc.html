<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"1c3011237467fb1f65c51e83e9e86c4d9fdda10877d837261f97290fd73bf23afd1e960e46e2d0cc2242ce68cd11640e801b6e92ba57ae4237134e55714f8160fe41a856ee84a6b8593bcdca5ea6eb904753c77317564cf914077f833c949541742fcbeb3d086111fa0637cff75ddefde340463a1a988a0d0bf352746df766f2addd7ba30721b604cc96298cb5acb0d70709c5d51e0224806357d56d47cabefe1a8ed446b84135f41193369aca4763d42c95dd766125e221341e9ea1f05ceb6c51e109107ed8b24fffc484b572f9484e04165e2b900de68149a0b25205bc241f90323d0b0d8cbef262623b2da66e7d7038f66996d612bd72ab858d1faf85fe664e21467584f2b58b355f76f9e6e67e28af75cd9ed4a26628e3d36f30612858d3c7936f7d337b298e44209e7f73df74add39448af18e5280db155c1075af48c3753db6ed5b62a009717cda91a5dd8414b2a333b7618d1e98634724517b246f5bfdf838f6fa9231756825e6de3ef11e32923cd4aa247b3c6269c66648d2dbf04098cb2724a2368ca3facdb179cc656321ec657ee19935c08827ed54aaeb81f2a74d970213ce222986a5a7f333088f5d3991a12cb5a2f611605389c8ba86e995032c4d1096b17387407264afcf3128bb901d57357b34bc966545272178de989bb1535249ab18068d25c38aea16184e84c982733e7aeca4fa5a2c45146ddfe94b3d711f1befd6775368ecf820a74b05118f2efeb9b7d421aa7463d33a16c6929d7140c2946782bb68445ac056ad0a579a8d1e5b9c919184ef7fcfa8eed9a2030408f603f5c0a0b3dcf7ce66f8a2fd31fd63907660654c0eed92326a7bd5235e1ae9060f25c2913ee47c490ffde87e97ce2cf6b067b4f634b1832d22f49dc9fd6ec3d0feea7c23010811e4c78ee7e22395bf06678368954d6b82aa20e3c8a61eeb281368f87ea3eeaf7685bfba11c80bbcadf47c63cb2a5f9c818fec31a9dd313d72b544f02b886c492efd7e484e0fcf2cac424fcfb526c70041995924a0460b808042bb13eb06952375fad90f9b67828254ca4de06334b4a911ecda5f5700d4a25f1b617775c936d3f0cf8ea28b144941da19fdaa272188cfd5bad8f2ba662d3e4e55610426733a58cf92652325e592ab7f80edc2694867a9c0646575890d2ecc01184023bdcfd4a212ae485f08bd416517285958b8c22e2c039d913a186837a15f2ce00cebda3783888bf7a8e8e5b3517c0655b008f1ffb9efb83decc4f3e3a70f7e649d1666be29a0d51b64450988e6ebe7641530551bd14732dbc01291effa1bbeb5ad9efc0832920e7cb62d05a233c098c464c5da37b7c445e34b3a4a52901f42ca923b0cc5746a0d95ff2cee254f064f0d67515ad05f33f5bb92d9783997e121014d2cbeadac45731e40de86306a264b7abadf6d69b9372151033ba03c95225a76855d00b978b2e223aec8b20590b70dcf4b6c97b9d2f85781d4378d1e4ca84b7f0a61e98c6ffa868797e70cdcfcd002b1c7d4cb644e50662d6cd7d2ead4e7891c9bf8a467f328f92407bbadce56b0ee4b24718d26eac1b1bc72fa186a2e5c9dbbeeb2a414d306b40ae44264d74b6062f83139f03da18f7e85d164af3dfbf8e6f2462de35e0c3d21955a3d041ed343e9134c5f88b99fa04f57d338d12cfaaf3e0edd90730978eed88218a3f63d790d40da10108f672a67d16936417ab3220b4350e57f68d0d31cb13af34c66e5d4115e308fa749b60458c2b1f111a71f674905f51feaa39a8ff39ebcebc955572591610e651dc8ea4720783a8ad6f3be1c313726534216eb35b132f5a27e3cd2f375b5122fc68a5e13dd40647fe533efa190cd633da3cb7239948bcb11a45d13140406ad2ccd88294e5895109ba191ffa8bc20da1bdf792833bcd1d9e2c436d7b7ba049e1519787d3bb60008ce3dad85955a0b2a3450ff918cf6957e56a98c7e1bf8dc050b0595e1bd0ab5ebafe4799866d3ed12779206dd02dccb1b9c7d19d443fc8b1c36aac3630d38a6039b05f73d3831f32302a762240773f109ffa5101dff738375711251ec6bb64e9bc4f645647a2b38fe2527157d3467f8e35f17754092aaeca139ea9dd89d58ee172d4e21e83365d404ed949e530a03426f61b7cafb22aea5b943dd9907b8548881ef13463be11825bf5978c4a4a092c488b9d937155d92873dbe733ce5bd696fbd43888ccaaa7821e8bf3fb2ebb07a6375bbcff5463dc56116867ff607ea7e33b1b63f8654dcfeabdf587a1ff28897612da4d1ce1057d8ec965adce95d0b438e12de3478e1fdc7c2b8f7397ea6ce919a18156b230219d5c5e67d8c15193d7ffdc64e6f02878ec606d7eb37d8d599583cce4ea172ef0e951dfecc1458627ece29945d335a9c8f32b8af9632965ef1d439e7a906940fcbdcc10fdb5b175081edd078d107b71d77590c2960d422b96f29be86b413cbd9e3d4c283cb7f70c0553abb2d451ad58672610adffbc2fc8a2c658321b4b4f033e7d61e812cf472d42c25851d397e59f3282aaf20e5fe5bedd432650a243974ca131bac370dff521a3df7bcc829f254f38c42952087d7912cad9c2397c49ad555f6b809986f25ab3a378b9f3140f23fc0c452420f792fd9c69f8c771b3dca19e58a2883b2eff7c5d2fe5bb0b220e88f95717b61ad4e3a8749e245df1c7e8ae2e457f662bf21ee7af49e35b4efc141746612e2a42cf0033580b73fc6977c1cc420b738ae25da20f29f91ffdc090125a2c4320eb714f61b5090282a66fcdd8667a97aafa838e5741ff8edd7f625aedc8766f24eff7484692d85d681a1d15bf42af66dbfbf11337b0dc36a5561beb73973892f4c79c34fe223d1def888240bac82867be72b7d10b136fe19d0158714bae695fcde0b32cc63326ff0d70d6d90e4be50c69ecd30915f96f61bce2b55f0a592715088ef04af992fbbe48c11153352f3bc13a44b8c72faf90ca6dfa05123ed89d253f64e7bdcd16e9b8e276a565546bd13377c58eeb111298aba2b9d3446b633c4a1043b746376afc85c0b646781b745da8ecaabd2e415c20d2eace8e710dd36afb83f6c2151a5a86976119bdefbcc48516f9ecf096cd94cd657bfdcb82a680bdb2ee38e1444553b9c5887ec5ff7eca69e6d9c3417343a34a065e520b6351343b8ce007fe031f887726f16fb4f8876301c15fbe8a611ec2d8f9ae2055b1be43d26977c61e5bf050ae458b85a50cae6d5a957ba90276a152301b5d27523aece42f28b73510e2072c8f269937c67260a12b692d038fd3c925b651924c6e9f8639bf433ddbc2d123e20981adfc4fcda65f48e3c7d688940ac3cc044722c95c3f37cfb357e953a45054b0b3be773a2ff2381b8fa8ca5b0024c3491862bdfeae1b946c00607a4e3d75e6b96d06fa22750f96d751db7dc5dfb72c8eac96d48498f0b454471efb942caae7ca34a42af22d849b789df77e0c67f223b9c4aaa4336f859871701c1f56fe7b08378707803598735afdac84c0427be3c38d8003630192552088cf7212c385bb650c14fab829feb922e74d3485626d4de4fc4da30e4ea136b902fe4438a7be8215002324bfb51f7ad8234c25467a6050c0885ac03be5eccab4562c08c8b3cd3604565e3d840beb39676735402d1b9980b3ae7b0f230f5d1ef7dda443b3db86189ae746b7f3c21c7b41cab5a2005109f37de42c2a72e19156d980e69800294101217dbd0c19895c32b42ca1ba5d485ed346effe5a015b072f2b06fba67df0897b9007c090df7d725a371bce205199b4514aae2e44267f641f861e0d69b96522085b4b7bb44d02a6d06ed6f2b82169b2580ab4312c40092596be8959341cc4bf5eb371baf1679adb2705ec71b3ff848be26c02bb222941827c79395102c69d1cb26097d1b9f632e4854c310baf059d464f0c03065e0edd3088d47ac01fbd200a7ea431e9be46b70a0a0b12c1538222b75349278fbf4fc723d160c355fbb7bfaea8eff5399a27247cc89802a2ad54f9cd0eadf360f1f5923bce155ad895ba407d0e1fc493a7e95c357c917761818b5b8f063d18c9a288ebe3719c2a81ce59c7a34ed9980f5480467383504dc003e11ff994976d3a6658a1cb069f08d8107820d01bf769354adf876f41bd312e46ce4976d6670a42e7266333766afc13483ca9c17e8e39bd26cc31058179d3cb7d85b68aa5f1016f0fb8524758b74a2b5e40b698e8869f0b0310e3eff7951976424a57acae87132589ccd2935b77ba21e5de9ba389e854eaded642c108a5694d6a7cf829c06afab6cac70d4d46bd0e27130a630b0c178dfaacc1137b16f2903ceda32fd76824251236d5eb0173ecc2215c66b215241ed0785f0255200a121164e642abb771ebfa358a39bd9a15500969f72b35ee9c76db74ac811391048beedf2e05e722891635d312d48c6d2e5ce02e259d515d1a4104717c5947f524758c1d19937e97be9774c4747665acde7c926d86761d01a0b8e96983b0f07adc7804c914d345e2d011937dc7843d7d5df830edc0a43aad6e90e0994b807929ca03ca7e917892bd26c86f19faaee4f65fe1485d5837049392e3830f289748c25a4d908771ed8a3f0c78c021c0d1854b2d542e780276e8a904309d14c5d76e34789d9179b80f7cb3b876dcf314b5e35f2fbc75624238719fea5fd859a3dfd4c4dd3bdfb3f1bc1567e69b16d5d342c0704c12c0888a68235564e767cdf436fdf33a2e7874cb0b11e902fa15bf999a2857ead4f77543956e1244b7f161768fa40519e385c17c75428a9fa2579168efd758cd928983dc45eb13e913e51142fe6317dfcfd0faea47b59440523ed1766c1ccf2ff8861ed596a323a4792deacef2dbcb9f0b10b27034ba7a7617f864da90bd169e40ec6358454cb1f58cd9076b98896e654d02fef56d1df94fd07a9005a2b9e263aa5c810e0d2ab6025a86cb5cb72ed83e4a1356eccd65fa0e85a251086553512b7dddb31011a9bb1919505e0bf269890ce2b9b2fa7340fd781c187d9fd69b74b76a6c5fc1a0493ee4667fb7d330669fa7337eef78c1aec7624c4b95b6a6c413cbe097590e2d7b32b334a209646e27bcf1682878c97444ac6bf3ade523d2170516e7d4c25a8f9cb1df260d0441e9c92053078e2225d70ef7deae1b8905a6265622a4703d1e1f89bde86db87c3e6623577b688cfa542b4f9607be2034747508f0ebd718b3603f987cdeaa20e8638c1adf1a250a759654b2b5ddbdc044a6510ca1a75e0f87d4d5ac8038e6d94377b14ebc4ff34cde38eb2e0507b9b93426393d8d49f0e3b0829e064fdf4bfc6b6de9cfdecb9e304ceae242c4a2b5cecaad0d963ceebf8a816ed936297893a0cc5895c6b9d0bdf3d165dd50508ff0c9fb9639c5dc69f86373e99ef25e7748d53a950fbee30221451f6feb5996b61090269af54f494e75a7c999ff834754ab29488e8de5663d8de67832a8e893d5892a798689e814d965159dd57c4074fdd19b59b569b9ee6dbb939365f9c6b64e36c0ecb16ef56f92058de2be6f65be936ed1e5ef4af8891c05626cd7488d338907ed6e3cac332f8c1a35536a8592fd400c3183a25269ce99abbe6e3d492e54b957595f0aa375dd6f86165a60bb86284939d60271d90615ac3848d32ceccc4c0741084b7dc85a7450d0f0f4bbc95fa6204808a3ce28dfc468f2106fe075095b4660bfb0115dac9df2608484c0978bc1e8261186d08176f1b6e2c93390fa34ab89ea377663dc2859247cfead8e768337077227d5629d2dba5720ef3deaf4f7d1dd9d9e889c0a970ac047d50fee3e3711ea6fab22eb998dde550dc1c80b0a508770bf52b778f7add2eb2dae019ce958356b6d52dcd6b150644e06f05625ab3a09e84a4061dcbe63f5a29d19512d6e562d3ead5c893108acae3e90ee75f8db89986305f1a57c294d2840001034a4c6bfcdd01340cdb0b33e24daa0e6ad736437bfbd6274bd8b8b7bee4c907ec7a602027b3a11b0d6a6af7647c2c50cec3fd54551a8bd086cbde1cd69b60516e0985f260651f11c1df3a8c6b5667c243aceeb7d2846686e27dc12ae86c2a74638e280ed133d04c008593ee6d2ffbc5a7171ce0a1362118f4d9969931d135baa14e51201691ca068b4d34bb9b50f687be74efeee192428d7b6082049a89646acedd8ea7d7a86812eb58b4cf14874d54202ff36c1a8f0503b9214ed9a7cbbec21cfb00e464b45f47d2f7b51b7659f24d3e3e5e80f8a5df8a1e5e8077ae339b9f04075cffab40ccdf8b8c63f56094e02d82d4bab9c9f62e5d7bcf5384588b63fcb598268dfaef6f2002974a774a9b5b6489e2634b30561f323d6e3f30e38bdd206f7ef86be07600253cd39cab7653abe0fc50db662441b5d034579a279c5fdee3787428458442f2fc3034dc9546ba30ddacfecf0e482d8a2bed46bd060cb1cd2484fd4e0cc0f2800f1844bee0eef44b7177f5062c85939f101ad7f4f52fb853b73a0c7d1f9dd0d5ecf16228ec1af014604f79477d1ab0e9dab3f437f1c09e31bf93279705a2abadc6a230719194956bf6864ccf65f2dfa1d077c45de914947a058503c85769ffb2a3c1802fac9f74096e51d86a58bbad8cdd77cdbcf09ab7e08859b390cf3e8908f30cbb6447a690c0fea69caa6b82201455292dd17bc69c1c190a0a0c4ba8a7e7abbe9a266b7f96045cbf750e45d968d36b1f6df3b04e06e35a72913e36f2166a0299cc534a6b7f4cebcb9f7374d8cf07b0ee43d90fec2214ea0a2c5521bc34a298a37760541ea0e0fc9c46a104a7cccd5dda0d690d6d277ce7ffa3e377eeb8326c46982e37539d67ba3dce78b1c54e6ba6785ff716d629f6d9c34523b42e8d03415718635226d8b8d8b3e0d97f5f36d540926d672139af53614497b968836e9c2add541ca5ef1e26b6b7063f61ece44daf9451eda1e2b9db5c9de3218b44af14df5874d563327efa121ff835503b86e4f590d64b2b83c2912a0d5c1b549445ec8f8986b2398002cf9601f2046ca4b1187d27dce704b324a34e977fc1c56958a3df970fe8f470f337fdc25993c068d4db714fd283d526fd4b67686449c0bb58f816dd0ebdbdeeae812ee94edc473cf612a3cd590d6e539d0d94813ec2a33984826cc5e17787cc36e7d07671da85b620b578ee1acc0652b80378a617bb017b67b861f2b2c2a752ed82336fe08a53261498d792169d773f0d8fd044bf27ed1147de26a6831a2189de6ca5cea8b6e7e23685fec0696616832f19b2281c01b42b0e267b260ec7b0c88e3c356d8edf44672a08e700ae59b4fd18fdcaafb926c8ff11a05687f36c2ba2a88e0b779ffac495ddc99c05361f048c0031cedf4c4ebdf290f63a25dc6351b3d6dd872b3a1c23f414b466fcb5846effb59d5ebf6175150fd03d60757ffcfc03e6cd3051a644fd81849fa05ae5e2013ea2ac004991efcc896d1710dcd535d7d78aff43c35e62cb6558a9fdba2b731107861861880f1f733670a29caea95cd7ed0c6c9287c1da40f4974f7629afcbf77ce9b78510316a78d8db321d39fb7bd4bd05414cf386c0e04babe0ab2479efc27c1ba57a4e08174144905109cdf10cd40b07d9d6e4e715552a417aa31682b94359085a6cc47b7582aa1717fa6c19d9faa18a3621807365939a018fe4ce51054d01c72103880cf81e6d4a37fb5cf560ebca76211e41ba8cf979f51da4ca1470f52e113c9413b25d83c864ad8dd6638e097501b1fd31ecf4a6440d39722d6414bd53e33d27806117e222ff8670d8192c11cd902fd1d6278d7065ab67ce46ac08718f4ad753c7595dcb842ae3428a880229f0a6150c3e7fa12978c95c5f505dec7a5a320745f8792590cc5e11204b9d5a63d01f8de9495a16f6cad796c2222c5ec179e793d2af3c60136bb84c677595392290480bc28ef137af1ea143803103b72c322a9774f38e2ee6529e2a8733680d4b5b743d31cbca7908f66441d369fcc1a25c2c4e601a86afcbd3dc870d917b32b8c08b96c410faecf363b6c3d2f0a0a770e1063d78eb43dc1534322f2dd6c3d0a7d21d6a97aff1800837a2b827fe8df10bd372ef2c3704b3b4aa3480dfc50c006cd88b3d7876ce5950ddfeebf42516210f149b30a2d008ad7be36aa766b586e407eaebca602fb0297e2f7b8d7251c12c4751002cdc3ec76bd40be25c01c3663b5e1f20296e1719bb568570910a6e38c0cdf7947ad54b773afa08da2d76ab4281db36bd0b92da1c882968d4e80e446c8bed3e61ab2451d3f1dd0bb9162cb87ec1c47d2d000d473a2684a7c49c3749ea3de439c312b7a49cea3e26e55abe09755ed6edabdc57df3e589c430cad688e4bbd5f2e4e9c2d3a3e0acfb3a8de49706225f6a04ac8d5d8051e4365f5208463f268b1e0a4d09dcff99bc6b9cc428d203450635eca498e7df39e71a4871e757a050ba326336e796cbbfa54b65605fc3693c2a2c573f9127eb17a4261aaa4773d1798a081e1c7ba0edbfc002e11e8a0fdc3fbf30a5e39c84bceff1fa08c542386cbeff4bc76f154c605ea58dd847cd24be22459ca238e09879a05cb7f6f692db42faa575fcf19097dd57a33416a24668274baf7f66b965532bcd40f35e4781e2d2f5006f2aee5ff337cb514e75100e5733737f4014153e485551bd4e40b442debd3105161213399b76a21813f1b330e64220c54ded8758cabd261e96f0653e7e5e9a6655eca69d7901a861bbf4a095bd75fb84b2ccf232660b957e7ca6cdfae457a2d5e333c267650062f1f212c968b68188a647837d5cbafba335437e3c32d3ae0688ff3da4e80fccd6e9a35b0640d0dddf60cd7acb05e91a1ad046ddbe20f4593aa20d9856f32e324224875a63c2e602cab58528907c5a0d35d60b55a8ac9b403f3b020b086c3b55a6f29882bd1c03dd602e0189cc9341383964c0e00a5db77a23ee94f65e5f7fdc90e9b570c6672ff9644b4615a360fc07352d054d94bac834dc5fe4ee99e36c33b60d76de3c456d42d84a331d53e7cc4705e54a33485c9988247350ab42fca8dcacb20d2eb9d8fcd6695b0f14d6e68856528dc37d3590b2770ccf4fa9257bddf100d20d662b49a70e1cffd4f7b52588342af490d56b488c381a66631b6449c54da43ed281d6694a56aabea407e8b855fd5f353b88da801f563fd321d39d0213c6f103fbd48123bd5dd30d1634273a300fbba4730e209588cceafc0a8dcb087aecce96097472fd026411a1d24613ef66ffe8a8ec1f33fcd43a48d2d1959f668525bb12a671da9cc55b0de35f7f8f5d099a958f84d710133eb22d193d0e2c4d434802d14223a98886d71f7209a8665276a210a45cf75570af31a0f5b1c4efc0e678d4d2ed5a7746d265510e4036f917d86059cf6c6f274e0c39386b42ff6fae2e4032c6b14a22606ef72ed09da494ff0645ec9e75059399dc35470b289c3b7e8a361ad80298ad0f0e8812d534d5c8fff39f478da5cb65b0e3a317264fdbc7b4a79267d4cf1b1d8a7ffe32cc512731b20c9e21c7ed695bcf9e2261fd95c6777ef7ea8509c5b2caf1063e5f34a3520aa1419315fc1c147bc2acbec37c0be17496b268bef98fdf51f656e8a523519e577cf264ca4782df5ef4d0017942e28ef644beeef38839e4e5dc821e796d837160c99b2d5c296031d91facd771d1d034d28717175f5f8cd986d65a4d013419261c27b60f1a3148be3f483b40b4158bf20f98625b6152e0393fdb56cde4b758c093ab5eabd9383bcc29ef6896014745e77865d36d875b06bbd4ce40415f1811091808720273a467a4fb2c4037b447fd96eb9b153ff3d162e63250901225273f5896c8be3d40ccb2650bd6a92c7ba3ce97fd6e1b3b5f685c2ed645a5fa533ce44db86903ae8aa64542388003f015d44b4434505b04256f468b59075f91410804ccce57d61033e2c4a3240d9185f36f0253f964080b6ce5fed30b9a0305f5e68f1c188a4f5186532603f388eaca09f8d95d2241355dbd8728877e67f0f594427e18639805ab33d94344a64db924fb3d5c2438462a93c9df39208fe23e0296e7716284717df0a4ddd4a5c1daae708ec8139085f268c52572c71d75d2f987e8d22b64a7a6e397869d2464b99e1a75b6eb445e78e2fbb344b2068341409cbbcb28711d9aaa0263ae8b9586abcd4dd2b178f8ff7eea3470b91969f7e5e865f79f6d6e036e2959fda71246a731a7cc72a7fd3e487b9b225a7f5d1711ebaa4ae37c825538940cfbae18a1bee2f8b26a92c7def88a7c7457c0b081d87c87e4e28821fd857ffb8295b23cd387838655f14c70c87ddb4afe7248e0724a6a1b5686db3c54a78ef7d062e71ff271346f7d1620963b15a664418ee8f2756e83048a3a266f88d5454756291f5182f44286204547a6c70d54fc93eb7edf8f7e4a24b3c7654f18f80cb09a98a6eb2c37e1f8ef06790fc7ef282dda24690e151d2218322987b2aed498b274b873e8cc933008e50a95e9df8539d8629ee86f67f06b2ff88bd2de16a6cf04b619f167a9099c2f373ae192e81e0bb4688688c7a6e6b46d755a7525a102094edd4a2c6b6972bc05af8c34aca7268c79a69d3916e25a382fae7945baad10f66d50ff886402600eb748b603bf86672775c3d0d1245e62557c9e431fe497fa07f8299d7850086d04939ffe413eda08a1d6c86c8b19322415491d7d76c84838f148e34430350b2c368aba7f4338ebe02848fb1f6458f0600bfd49de9690b95c33b00961a72a215defc2ba9445eccdeaa9b1289d9eda8f77ee5a118ab453c7ea6f238e4d23a3a60c1b233d2a95f8e5d3eb59f3a8b335198c43fc43d85d2b852622c13dd7788a4a23550e1e9e8b4242ca712ec966750c1212cb6316f02612c4731c6eaff3ec1d3441cc4466420240d5158b15ef4ae1cbba45752de85ecf85f2a9095446e1efc382ee3f022132ee5cfe362d59b1a920e901409e953bfb1028b43857c85c9fa80ced429e5db0f1d611cc48bf427ad6e2e4dca23d4e13b31f650ee839fdd2436395c56641e8ded6e1254cbd91ad349e23e74425eb0c7ce7e218fd8065c055ad16aa4899c38a99e7829c3ca4355f2c8115b02bdaec5ab00d6ec4f97fd4ca5533ef10254c2c23e2d8765bb7cb33b1f03771b268aa41f448194b12bf6afd6f23c72bb150304c1b11c5efdbf89ccdb99a1c5b55af3f83d9397597fbf19963e0c05640260ae490b17b62a2c78a0ecb9d9825b009089198757ee53498f1b916d05ae1f7244d42996e003a081e67699e4474fd826f1c911a6eed1bcbcc988fd69db3c9cc28b7572e09e3f21cdcfb8475699537976d6af216e42aa319fdbc33d7a3c35ad63691097d333e4b4226d12318aed4a6c4870f13d43c65684fc5e15c2c4b0230a4907b9e744111e5178ade40197563af27a3b766bfc545d5d597316af39ebad603dcc0c5d2baded1de27e5285b05825694bc57e4b32dab8fc8d8ce6cd4948840c7f40ef9c488c8fa3f7d3b50b9ec9bd067346f5e853993abc654a15f40346a5bcb18dcc91e6ec66384bac51e4df232aa099fefd23964de6ac0aab446f2e1ec9de98b37209b762d6bb0d4d90e293b8f19f525340c8afb460d4b9e1ca64ac3215ef32bece3eca43c2af1637c6f2800d7e8045be3d947b9be47ed11beab8f2bbccbcde644e8ab90cc8deeecd164b1b4d82e800cfcd8536f86298111ec16fc240debb981da64ff7ad7bd6217187382a8b292df9467d3d01bdd2d73a0dbf7e8eb4e11d3f90cc2c18205cb4680f75982e25f01112c3b08ef04ff34d7ef4fa522de62d493e46f886ced79933f43c5d8fb76579f8e419e51a5e345e6ca54ac17db14dc3c80608edef17bc128b7563d46d63667728d447ff119220302c15c1c360a586a5500ca68ad7bf1938e021ac8751a5534096cb7f695aa7998e135308b8068d66a35b62b342c7e56ddafbd70f8c1cc0656bd7813df1ddaaf70edfdafe11307e5c7c33e9b852d1fc35a06c5bfb9c60c66faa78f03c24a4f5d044f902c66eed2604b7e1a3f29a617fb8ee39027f37941cb5b8a327d9556bb6ee248f03d3f0e8ede6080866fdce76b03ddf4f6b1588ee486ebeed5570fae112cffcb1c6aacf724ee59f5220bd028e73db396595390048d51a613036141f091752bd9e529b1cf5930ec36ca89b15876f2ceec484a2aa3d6254e7ad65c77a392509d39e9889dd38df99e18ee0597484a62ecc45c4b25bad34e209f9860395120b1b918c7e271605a4e63c0f90eade723583c2596dc0f9e4ab2c7a9f33bd8c2e964a6b93b2554f66960d95483543474e01b71b0d96a09fab61b24cd3c706a1fbdf9ecd5fac55877576f77a831a4766f8e6f289e10d242595ae8529b2c3b6a0e24ba90306a74a9e5ecfca5f9d795a2d4e242a85b67b208e2d1ca2b689a6f599a343fbc8ee37534113a24996e226e8090ee54a95aed0c009cd87338cbfb2d2e8ea9ca3f7eabb50962a66079c4b5c62c5b5488ef03f9f4e282c4aaacbfaf14741aaf77dd4ba0ffd85fa6fbd40c84e3f4bec311473fbe71b2ebe773b2d2cdb5921d98a340eb69d60860ce3aaa10c28ea05ae6a0213f644c1de8b91e252531066eaf571eeb29c2a44d93d70353d75bd2134b2353aaf13c5436cbe50845936e0937c584a3f781d1cb25fd9ce25d3b82aed1c1c61f7b70402af95d53e26189892064affbc68d93d3c72eed3b13639a391e91dc8e259d42b265f1d70a05409e55699c1fd9046387ec71b124274eabc8cdafeac1700b1192d7b5982e5ffd5ba3510f6ae29a71760e2a56194a40e9f9de8c9d7a9f9f894058db9f8b738d03d359ca203563a0712b2fd675939150b0450cbd0fb29878404ee0580ba306d5d51ccd12dcf049d373a539d059aa294212fe581fd27542025640db37ae2f77e9d22510efca13ca453e11b88e83be67615e276135a793eb85433890db5a7323d9cd9d3e15441c49bbb5f662b13c4eede729ce8cc872c4e987676afae32978fe2f8020e7ed1528edbb9d07b46e79f553d38f28f046b7476d95be38a24742dca8c53a95dcbaf5e20e424679e54143db1438e1ddc4eb2a3bdf31047189e25d028bfcde1a34300cee76fe7fd1cddb24975769acb64aa09907ec538a76b7bcb6547ee1d4255a7234f45dc2fd4fdb6b919643b8e51db9622c999978a50f5f44e3ec25151c7c12935e8f8a43bda386a354b2cc4d83fc2f95a4648c4c744fe061e3b735e8f69d79ae6d8dd5f5a49e56fc7d08ae30825653612a86a6298f2adc7b419adf28e1860540a0602929b7ec4323bcf48dbb02fe9ba9b46c73f107102aa7f106a1b4e6744bf028bcffa83abffdbabd2365299f266533077813149a65ba243c9f6559a0293e18461971dc2b3d31db1f4232faf450eab123421ea78e665dc3d12b46f0f3438291512b5d79e7fea53a463975cb8075bdda97659698aa05ca52c58483e1623b1a0109e5389d0280e2abbbe97911a35dc05c071e8caa53299e8b9ff7e399d3ad350b8cccd3033505ac4fc8962eb2fb9e048da4d1fd19ac4fd70de93b23d83e186b3c5d307060ad16fee78d97fd4acef702a24a8e36897cb263c077fd791417e6a29b24ea0e5945d628f22dcc446491721aa0f68a13e4f6e9c7dd01f687b15055450903907df7d7e3357537d64ff338830dcbd679dc4d991ffe15b2926e3a5156d8cfca1f9bb9dc36d299af93582fb15aaecc28dd158745d7398da180ae1a10fe3959c0b75d188828a8ecef7f57a04851ce4c4e31e9ce89b56d5cd3777caa1a8ce413d97cf4ceff2676b5edf4d70b474846312b1baab8b96b122baec0eedc2b8d7a0d425e7c0149dade438a35f8b62f490bc23130de4fa983b61fa5b54d9070c8c6564aa8c604ab36f8734edc83bb9206d3b626c629da559186b7a913a1de9152d57c05326af7f47c6716183b77230e8111926d7252f4779ba26fbe9b51538858958ef35f0102347ff02ce03b3d02fd721ef96b49d8f2cd2167bfbe194ceb4ed958f5b37b478459a0830e0faf84e12b149f6d52359164e56c1daa72bb18eb645cbdac79f0b0eadddb2d6fc57bf3d1ad36ac010310c7f66770c6e5de5b64f6de538cd632c823012cafb126ffaa9e903a5c42193c1045cbf1622e9effd6c529aeb1ddd6fcaa2f117d4ca6774319926bcbe83e88f118bb8b2a53d7c52dccb5effac60494cf5dcc1e2603d70cae22491c45eb5226cf4f3accdfec155eac6c7a6479e6f726f4e255c7d37c9d6441381a1bc989f6b5bc171e01d6d97e14da129a1843e6fcae23df465db132f91edcd886857b8ca53b1a5afa2f5b32fbeab917677b818ca9323cb043bb1c76d83f7a3d0e5805c7699c0d3a880b828b2cd9561f7165119c7ae96b452158fab71407e1461ffb38e9b737f1244384544f3b7e6aee6f2db9edd7ef9337a4fbdb1fcf4c75f7a21f2300eff25cffb1f0436765e141517779f821e85f1dccae924879373aaf8ea4f89a7e0400002522aa78d7aa7c1c11bb683def8c36d97698791068fcfc4fbf97118d6acda5b1d5e87592dec5a93ebf662ec6e9232506efea8300b26512523820cdae15337483ec1980075770b3e1e61c74fd4eb6904b6822ad0d1fc98c22c4067ff90b2d93ab7cae7420419c0eb60b8a682a299974b8494d527efa1ade540c816497b796ed70fbc3c6c1d49dcc9f658308f4119d70b794a5a0495e800779601fbb0e1a5591140643a9a5fa41119285364c711c9f20b9077a4f862d60415deb64a3a4f4116605fc4b601f5b737919830ec93d04623e4d9868d7f9a03ba4a508b5b39c2fa69f2527acc2601d509850111030506b49c294a7852d5a53c92facead09f825f5eacd12f8b94b64459f40363fb99a84329c4609fc5d7a5fdb10d46284fd1e6ad0e87c5d017177b9721ea00a4ce741b23279087a3195ddbbea989a9d1e2dc3c4de3c2673b50f3c3d7b75bbc42a8bf20b1f8487f2aca826c14202455efe43172fc84036066766bc7946a9a1c4856be48d7874baa5f89bcd56fbac199376ac856eef45daed188cf1eca58deb7b0cf04effb008c62c2c86dab00b5451a933701fefe8ebf97f9d9fdb757484de506746d710ce8a887f7d6431eac581c791a1720d9823d2d30e86e3fbc0451b64496f2b8f57a013104e0241d12684a065a5b3e238e8321b26e739c1961140a35a97243a8e6b5d05f1557fa8f7db2d78c9ca9c2eaa85f9a42b6a7ea173d80e37d8802f3ed7f4fffbad2175eae558477aee4d8f3604a37b5c700913658f28eeddafd7760f02a11aaeefb4adf5cb348b8e212c83fb941f0c431da81c6aa62c4acecbf44fb25384697da30c97459d968e4013f91082de0a8e619eb36231bfbaf5e099ea8fe4db5dec4cacf985c095d8ecb705a60d76eb9866ed763ed15614e28309ea0af969016d92a0c9eddd9879f9ba60462083249d27cb516388e4fa7f603ed34eaf3e6f9b12b24f09ee9867dce78931f305acade088a5b973cd1b167fce7824940d207a5a0cd63b6b87dfb4168c86eaf8d4ec888c00e0a4dcec8d612e113fcf5677b13560531db5fca32139555efcf272407fb6bd5148f87da4f96b26bca393ca5395b7cfa33f5e6bb2efe122e9c2b1ace9f1f8ff9e58597e30b697f6b4cbbf97276eb310541dfbeb42c57a5f54b5d0b131fcf08eab53ad25bf03f44064188bd6fc7c61523da8a446635552b54673d8584e28ebd3821513b6a89ca445cb3bbccdb404084301fc4ffc307ea3098026cabf70fea5d0b619414ef7588c81987c69274c99e957f9a67b5119aa274c55c5b6879690752e380ce9da35b6d0be3b497abab81da3112c034c1194e52a56eea07eaca6b124b6a2b4cc476d452865a4fcb66f66d0c8ac2fa3a2450384f8af5ea55ebe4b212e0f04cb9579f5928b45c64168575f7f4b8b90a8154775f4be227c9de4d29e06987eb7025c343abc3871384819b26809b110d335e14324bb625ebe35816a9f5054e5704a23bcd043317f55d33244250485147ef01c20accef01a03e86bb26acd0638e8b2f199c892ac9f27e1ee812ef144ec4cb4d3fe197c7a8a7219d77a2e4d0f1bd827a111bf7359c248fab59cc5bd87e0507d5654f71e7fc174f7098edac4e992c82dc27edb8bc874e91a2b023e356a7f54202981da27463ecffbac475bcee1fbfb05eb32705840accfc4d62d060b96a83518f7e5de0c919553fd706ca30ade5f776407d3c7da3a249b1706e2434e2838c3c64a8facb5da518b01d075b8886c9b88a8322f5dec5a31ac75711541461a74bd340c154c47d42bbf8335c29eec8950a107bf902777159855157b2be4b7860bb33aaf3e708261a47fbc341db5aa0a3443d749efc891068835c1af1217f02d38789ad510499485f5c481bd788d98c5d3571b2b087a3b104019e6ee005e5738c78e472232562c597c6ae1a6f5f596323924d5729ed27f103d4022dbaa64b0386c708bca8d3c1d0dc9d77e6850c141464d233c14d5cc1fa27b44e0b97488e8982de86cac32258163473f6b512ac251b8c91e16861d795f8f6b35d00133e2461b33a1316032fae163663f7f33f734d5cbcbb03441b5f67b178881696cc9233403261a96624f4b5036b4e50246e3fee2d09a5ff035909f0d85e28de738e24baffe94586412575715ed87b923cdceb221f9fcb3fb8d7fa3b61790a7537f322793f7279ef77b0e410e0a9bd9e9fb8afdae13f08956d23e47961fc9d9a1b3ff03bb7098417f32de8ef017302158b43cebe1024435b119bfca9a34480ea4d56de5501f0c0d1991a2e32f43cef9be40046f147d27e4b1c39aef24d348fa9dffcd79ef3db8b6638d6bb18d5c001ed65cea507e6a40729198890df73685bc36b2914324580b1d989bb4707d6d84955f24f2dd8567b7a2c5e2115b6a62c3a327a039d49a96036c6c221b897e39506c9a8e4aa207df5a7bbdcc82c31cb933964746a9c40074a7bed9d4755f4cc297a03425520869840c365a7e4363c25c4ff938a8ea622883dfc9944d5499c7d4e92adf08aa69b51a2b67fc41765ef1c5bf0dacacbeb64d1ae8ff619a15373a0db9840685f478802bcf29f6d7a72ac986f73b15190a474166037e37d9069422009d4e1e34666ae4dfd43964a4ebb6f2b06526676be6d023b32ac76bbcbfb84b852503374984e7414761fc84d3a76548dd61adc83f3cdec008a59853f3184f576a04c7da290378567f8cf0e543ab95bdc97cfcd9159e3df57ff1293ff1eff4243134b8e7fb42500cac2981e3e027938406f85dabda74310ea9dfb079a2964f166e690b1503090ec2edb2cf857a1fedb6ed75a85591a9a626eedb2e5d76a80fdf8b1db46cdc9ff45f31fbc09a43d3207b5b8d57f80cd2ee08e89cac3f31beb2586517f6f2d69b03272d2f2c7c99dadd59dec3f4bd91ba114ab7f45dcda0ac0030d72ae1b4c72625d80baad0c1e562ede113b91d12babe3b526854f3b577a17f2ef28fe1528dcabba9e9a4d95438ee2b8cc52d91a31ed4719ef47f57a2becc71d062426ddf57d71e0959d54c43c43a5347e4f60d90a7a8b83bc0c6e02b075ac9e8e79d04aa4c7b258ebd0946b003a38a57d3c06e670568fba9f4dbd0626ff2ff0babeac08248d39c8c72e23b7b27547daff43be9b394b2358be4f929165cb947bff1c6ac17d84568a16712c96b5ceb77cc975cb58e667ab09f64a2626d9937ca7d7e391776ef508a6dd7682d2a3c2bfadaeed079f38e6ddb4b71bd8a5df889ba0ca86635836ad1b57a6861ba72986ffc90fbbb6f8ae71cb93c8c3498abc175e408b735d25b5c59bb1fbfc8237d74d53534a720bc2f02d81b3270ae8acad744dea8a4bdccb9e4879e315f9955c6da14971c30d121a02dd9111733161588d009d9588f6198a1e7acd0d971b380fc90de7c9de13adcc17280337cd23789c97eb6612ad6b0fb75328b2b14685744c09dc020f4bad685e04576ac3279fbc6d64285f28a3bd23ad60fa5a7d28f01664b472cb2d552955399f5e780d28ff691b7e15b606085ce027cdfd7cf6b202995df95a1217b199e27d5fc99488fd9c9e257dee0e3ae998a5169b59c3e7b0d299026d8af4cc8097e55eacd8b45f2976310aa60482df72fecf052fd5d4637229a4f8c30f83f2af7a380b6bf4216570807f18f5ba4726bd8f81fe08f2c8c14ea23302a7cc284e6457f1491098321f98ef346510557e184b042d3f7f5efdfd85bd7044edf87e28587218c9a433ba1f204d78f407bf55a3bfc95a5e9afc6ebca7d3c3c944b5d66a193486de840a07347506d69ee048d462d68ab9aae089fe905fdaa8107be18ce751d2e8be37ccb68feaa6afb5101eca40baf974c9ece7265d0a8fce7d0e2b4c11aebb6f823a9d64dc2bbf5b478f538af1","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"db2470865aa068691185dcd60d0115ec"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
