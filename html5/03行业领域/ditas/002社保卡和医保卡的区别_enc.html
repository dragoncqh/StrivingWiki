<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"0aaebb47d24d4955eef113bfd0b940197badf299afd67c752ff18dd22d19066d89bb8c3045c66940a0a8d61ec8bf18fc10c2466c1b4a128838d0df41db8eedbf6ddf752ec07441943d24549fa85a651bf7f64f5acceb56d2bd3a24d0d0629e0b89e8dc7d6212cb05ef53162a08fc2a0e438c6a2c5f74a77236d517c8be3e19c4a6057584c35793ceece448c8d379d8ee271e795537aea9aa57f24ba0f240bb9769683c39effbedd48b4d93fb6e9e380822257a9531a2c2980b0e2eaf99979e4f7cc4fce264b69850383436d12bd73da9e52f9408be4ac245b85117b6b8c8fa90700b92e92b2d1a36a31e7c2e02118c93dece8f13a9f21ff3bf28096c0add2285000f6ab2ce947714a6e949891b33a11659dbb2766bc1e37e44f5e1c4a73f100fa10b5fad896f683920de305eb8739dd53d4e5cc96a80e1174a2e268d13287c4b1cf3673ba7f64c568b1408e4dc63e878be2d7c57695ce96bed4f2f6740cfda68330d4ff56e011d6012516a57825bbb45a50d0b05eca9057e22c7addd76dcc02123b43123302995be926c5f56c8cff7ebaa17342e14678494e6f7f92d513fa75495d15150978c573b09558e9e6b8b0b524db15e8f28c73d98cec28a58a05d8c26c963a439c4a5fc731148841cb48d61d06519e273116b7340948316db757e340405d587f17b6508d54e97a4475a12f7fa96072261746f1e418c3aff13e1ae3455ddfdddbaed2fd8e6ea6a84c9697663b4e5cdd7cd75bafc50d54b47888c8bb2a81cf44d861bf48990630f40943c64a2035f64edce7bb4ed3d1b0ffbb09dd38c70299325ed4aeb5dfd62c4205d4b6b973a948197b43d0676bbf0eadd6042d98af69df4d007fa055f95398e40cfbc03be96ac0c55d24433ee780d476448883d03b4a80cedbd398cb3fb012110fd463130f1a8c0231d7aeb6f0e7627168cae97cb21dea72c38ebfc24b76146071bf0123c5f26fabafb0d30297f07a0ee07fa233ba2f4b3823a66b50b69f9ba157251798494503208a4dc5dcdb16c7fe737727133fb4235230aa49eeb99eae98392b1a560cf1ffd2a35d87d7720cb799f6f2285065ed3d5560156b96f289bf30154254dc4b7bdb932d9e6b2458bfb0e1dbc98c743771b294c8abbe13ad6c1eee510451432b6868c6f3e179de656f797757dbe13a587c7cfd003c6bd529468b909c32f2c5431825db4e1712b05e1bfdef9898602243d54ff34c47b64f6cca3e10839245e7fd88f62a5aa2e9623c8dd1c7f6c020efe450ce832018b5c7f0cf5cae77c307becb35dac6c0ad5f22d21be887c33e5e587c211092d6d45e06b12ac98130ce277b1f0ee3521b7cc6ad5aef1351661fbf624dba9325d3ac23162aadfabb03325aee10cf85dad1e2080be401471d744fe3d7a2f1a1b21ed83f2ae772f3b8d55ca863984abb4799db987b801e5a2958f5fdf226582edfbf5cc3ddc18443db50e72bc5e54287191457eaad877e4edd44d6de4dd2b5fa754d2abc1985be49ce896d19677142fd6f90ce5ed7f841ee553785591f5a12790a02f825b1e47bfd94e37495da27ea37494b397a6003a4b4a3ba2975f804e22bb25de21b5b8efa01525b3a19f3bbfb99dd1b24eb0f6952c5b17e62bf5b6c8451f56e2fca69a3e903598b6503ff8e2f9918d6b01ae7192a5c25429e49304b250e566002937e63cb570421d5ce2aea0307a9c59af600d88dcc8bb61c128c032ff3ac4ec69c66bb303b3b1f2319235cbf62921ba6d04a9afb078d203c04d72b27c8701fbad843a7715cdf654f3cf12b6c83395a7316fbd52477447ed3bf5210195b6d54312ba65fbecca23d1276c54ccbc9dd176398e4ba5fdcab3329ca3eec94d05ec21b21d4e75c6eacf6871b73aec8b55a8573a59a8c8d9992b3df938e363b13bf60abd884bd5305722323921894665e9040cdb35e5dc8cd560e9a377ebda830785681afad655755c6d48e04ab48aa6cbb58995154c0a11fdcd3992b2de6f066318f58c69f2765ba352db3c499a27290492c498de4597b644ce5467dddccc66deba6e7d555ecbac9f7c10f3a62f00f2aa51e2c21ce61d8751268add8fbc42bff7d54c95cb4fb5156845219e625760797cb1c3f255ce63b7d2d69f849d90afcce29059627876b5bd3165503d2cdd127edf4153468b10fbd997711923c4d357b56a2968d308c599e15afa5f71d50121bb7e298e7897949fc1f0276df92e3d0a32f595c116b0d9132e27d894b9d43f947af9ab460dffa71f2114c2d8c3930a59ea0d8b766eac073cf09a0c5b0b9e9a4549c8acd2e6341d33cf2da09c989e6bf29001c4850fb033bfa739988eca96407b306041a655a852198599218111eadfc1847f176030aba7cc7883ab3453da50aaa50739cea04428b340b1d79a3f657b08176f96c847d48a06b1f90af0f032ea6e85e7dc68cbdfae46315edeefaa48eb4d1a130793d4d6076c1e3505724950ebd1ce9b1e2a5c6b96a1ec75c62753ebe23942035b82fb6e28ac9fc49a99c483dc039f672fb1bf564f3366b0d70e33855128c1c56d4898b36dbeb5048b096c9047f26a644870bd4999bc45168c0cc4a25ee525ee180c12f7fdc61d9dd34c7ca58f0dc73a30c8932c0d817508ee843169e5f4bad474d41ad7a20c73f330d6596dab9b21ee99f55f5a0a06c1fbbcdd7bdca0abc49e5849dddeec9e13ccace1aa5f9d16176260754e780c58744f4c3fbae26e0f3b8fe3e1f9b6aacbbe564329360aee76ceebd363424cfd3477b4cd5e992e80d7d3074f60bffa39c1f3cdde7b889e6f66df2ad114f9ff50f367c8c71a65cfc518651bb7de3c8aa95edc19400d51c63a123492785744b04e7fadfa277fa13817836d3824ed71ee05b7f89a337fbf68745b94bfdde7caecb955be03dbf3e1b826ce6303aa28873cc858e29ff66d343fa99633c0b7f68d668100c2dca4ad7999e67476ce39d32d77124faa479c412ca188b69cb69fe625433008a8f6cf9a53c4c9a6036779a1bf492ab4d916d55b3fe34a210ad1459abf2cc30c778a37efe1e15aae78bb1672600aee40e9352ce74a754255e1aa12e6c1e9bd298346863cfc99916d2efa44655bef1296c9e17b6adf8561a9e5ca2ebe7f37435dcf3ea8a752787096a6199a55748ddfef14a471b6b2f80bf9d1490e0c1ae023fb99df83e10e18dcae2c013671229c5eb6f5d3c930904c1b79e202edd4efd804eca89eb9de4c06c623506734c7a9bb30364bc226b13ace3e6bddb0d17ea86925fb950eb84cfdb55ff1a3353b4c894f073725bbf2a33b7ecb6034b06c860d2b791c52718ab3d3461b0d741c1cd71f5c3c3c45da5d4664de4684e402e3db8df927b438fb1dd514545efb937f7851fc1b8e63d238eedc26d7ad99ec308afe1450cea22b9d532143ee28d11817516a9aeda05bfd0c427f786ede42990d62f76b0f4e5af5c9b169c7ce584bc6e5212f4f2365ccaacbb1a408cd17234b6aa1c419f623da3a1d0fa3987acde321bf6847c54e10c01166f4d9b9fcf104c3338f1ca662c9b71a62ab76097c1ed35d2b1c0d13fe1a1ad8159a1118f6db1bc1e73a8d3b41ec20714ca8d7618db5f1f8e12e00d8c2638d4eb19e3160f661e56b76368c225de856b13bf65cebc545418f2791bc40c30d5dc4a2f9a7c063ad9d4b561c2c4a55ffdcf0507f3dc9697bc17778c65d40df646f7fafcaec661f8ebdd385e9217422c9beef47f9949f2fe8d3cf0667babf987f41fb9ca836db8052b1eedd72a606813c86cb40a21b236b1ba77527685d8412c2a818be508a5e83bdcaf6f5d67dde13264c0601692a3db4ca1690fc7638a24bcd4da6cd803438cef79c5663ecf173b19b7b77e1038aa3bf19cfb6dd6f8800b633ac12a06995817147692cbfb6e8c69d4db331217a74fb95387505ea5e5b372edc821b33b409c01e800a0438fb0de528265afa02a9772c64f6fbe9e5af72d141b1a297e73a414e9b7e4999849b4677fa430974d30d05a975c28dbab5090cbae475b98ca207ad7165053a2513dba47b7e7ad0e423018ca01b34168652edeca06819736e73136f64465a0b170fe490e3909728409e802b30fe62d6d3a001c13d5c7632184bba633f54fb553a559199c27c8b3cdc0604406c06894a6da8fe44bb597852066b8522a82b6152a988155e761f83536aa1de2c73a6fca21561cffd5c028f7568cb3d5bc58f44ebfc02982736c8432ae88a16a68b550dff438fc80aeb902b93c8306497570b632ba7d7ce1759bcd89fbb00232fb7771091ec0f17d5e76cff0ae6c26335d3d6dbc8846317692bd4009ada91742decbfa5d68e970dcdb5ce5c5b8a249c1d0e5f4f62d81d48a688661edd71f26d6677525b1f5a4e82bad0fa4b84a203fdd3b0ad61ba87e49de95528344e85076d4620c380e196b7604a1c1bef3ba6d09f5b3f2107f220940b77d203d10ffc49d08c918cc9546690e06369c7e22c1d8cd3f39bc13ee83407d12622c93adc5bbd1a641b109fd3259ee176236694f325d62bcb18b3940dd4011f3af200dfdcc29b29ba3a81ba4de4d270a81d6aea6dd45bed098a0a8071f425762a37102654660e4487ef422085aefdcbcb39e4f37c7666c5401d9164c68d4518e72413296e9e7981ea39d03d7ed5eb0f4e795198578cea86460bcfa05bb107a9396e3583a2fcd1eb036b68636f23044dc324cceeea00b281eeae88b58483b82153a701b00f881ad184b2a767e7460b623cb8793af7c046434541d70254856cc7fc36229ef939d610cf3fb3e658093f3bcf6061a1284943f1176106370c55459aacac799744bda3a637e198477f28b8dbbb73e9c34a51ddbb9afbff6a3d5b5cb5219f067c607f13cf2418f55273cc768f3e089c95a5704cac85bb25839ae372e698732bbeee965f30a73800cd55ea7c2a76678c13c05415854a93f501b51d8cd50a458eef6185445296a4d0230c675207d4013098b896a74dfb29cb9f301e4884b9e1052fa043b0f2830a88df223965048b45976ac9c3eaa3148ba70a2a390a1cfd58b92a88b6057df3366cec72dc9cecf745adcd1908de17f2377f8af60e7e2f55e273d941e3e136a90779f797c68e1fa80d9c22bff05cace0049b2b3886e7fbb62958bdd32b41e5a87444d7514474f4809e44b0d1619265aa532f5dee9e53fa11baec2c90a8cc38027c59d0fe3cc9ac3adb014930e31b3bd5a70aab6af1d49cfdf30290a451887306ac2ecdd3a0de60700a4b3b22b2a20413fbb5732d6f3478bfe72963521512bd19b1fb2168357264d9896bf637f86b0f8fd54371b23c25afe75816e756dfeb9fbb01efaa1892570c973316c975bd31e0a0808472bcde719e1c9ea96df284e697c2d1407cc459f4f00fbb437b8f12cd0ee5acb732795d0f5d35f5230462780595f29ad8d552c30672600a40411fc4cfab9296be283b1dab621a362e3c37b83fd19d0769bedcb8e91bd888110db1bc1e3032bf1cea5e329decf2085e6ebfe333f87c712d58e32eac9c9580e1f241913415f29c7c50fb2af5bf2fe280819523e2771c62edb6bff49ac4459e00ed3983f5fec3563b4cfe174e578f9f8b2c5941e40dc05695380e00b948a5e5b90ca79129b918031ffef5fc8c76f897c3ee88a4cda212c31004fbc6fb1c9252904a2b84c7b2e0987e97363ee50d968acddb64ae37570a9fbb28624b36282938e77ae0f533904757ed44d3564e0980b04e657dc98ea1804aafec0c3b2ab2dcf36243bfd47ec8c13ef0b8a7448a6d0035776e12f48c7f7867f6c9d7166c3bfac36d5b302b48f4ce23a2d15a1ef2c617540fd41e2b6e40288e96635df5c3dc7f52825297a3a6abacb717cff71c6c56e0cc3c06ef68d0c18c8474a5e523318d2e6f0bf68925a59e40d4877a73681eb566b32c2915c70edc11ad7e28ad0e61fba396e0fc64397834b765c4cd0b4b1fdacb960095fdc4896009488224b69711e4072d196bf6feabe7bb9543073e1dbdf3f17f94d59f8128024bb75d639b809d7ffd712ec2e31102fd4c02b5f66cc313fb3beadbe863c912e018ec203d527bfb804ccbf069962003f36786f8a920c27bd99f53d011eef41d1ce0d719652c09308c4057dd09c82f340c5ded073e9ee696140df87bfb33668d859c5ef567fa38a22877c5ce78d46e646c98f5a9ec40b9a7fee3cf28538dbba3b139532d91f79919e0be490fc8dd21d9cd1b759e527bc56d0c398471ef6be3fb2a08732544d127bd5f898fd6a5235f303e3bb32a9b2fefc90c062e54fc667a471d9a78d527ae8e676ec20b574ffc25c6d40d0d9632c9cc5f6f80bb1468589a75601f5efcd9c56ff7674726446bf404bc29ce6d5c8536093e05043e4eedbc95123d0b40b12e10d6ed67c187f69f57ecde9a879d3e584b06d9efb38b2ce8d90d35fa96bfc97dedf99f4642985c207e435c0c12516ba51cdde89dea8e3bf3a2b6dfc3c36cbe72278b10410cf9663845c1bbbac82168b18ef624bacfbfa23b6654178e014b846cf4f2ccd1ab2d7e15ad8dc518fe2799925a99b80a3956b083be022edb4cd267268c47c60e6fd8cd87a99458ae024a9034f4ab839cb82827db57a238a52a3a80ca4f05bbfa650ba9ef7fcbde9fdcfe3c1a7bde3aa7ac254b09f1463bb346a34e6616a4bfeebb00276a2fe27c3944872480664ab4448cfe790ca6a962223cd53567c120c891f71303c454d94779d8a1eb994b59041e0e749900822c390dcd45b29d52f1ed92d72ad61d2bbc958e2945cf99c4d3d2c37f75af912fecd49860b7287660ce157790dd58c9aa1fd4e4b67f107b8e7ab14684055d9154943c27c32bff8896da8a076c2e0dfa3b3f9012d5f77fe981f202d8acabe10bb08ce7b88665825d6a9d98fb38f27875317949cbc39659094a3684ac02835378047c28dbde53eeea2db6c85c6c4126828311536ead1dbc521dabd4cf85f7c7d574888edaa9baa7db42e3751e79412ca2c59d7cc7557655fad7cdc1b19799d1955f6e12fe0575db0cd650095702cecfc2c0f892d9b2c72ae4b688cc8e266b75a626c7c29fcaf6946203cb459ff65f7a13ca7a637e561434ff1a88e58e82e7d84b3a9f31ef6b8f928e404a61727e532fa8a42defec82e34874e6218a861dd36f068fedfa3c4b0e012cebeb29d78843c8c31077c5eb5374810f120af2d23794ef82aedc29444228bdcd8886734b8a803da06649886f7bb82d904670e48e9c1b021e69f38b4ebe0ced9632b2512c83fb89316072eb3c15e530a6ef230d6fb6f3a6333cc5fa47d11e011a9872a8cc387c19172ec214164955ad17d611fd48d35c932695e9b40c2e36eb079167b8ea550c5e8fc6de38ea8357a97088f858b1534ef0bc964104ee7faf547fee15138206ee74357d91bae4802735f50e6f114a0ddc8ef8f6593e158fac54bbb3ae2e856e65fa12c93a95700f4947dc7369381016163f9353843018d19b01566a8921aee842ce6a759bf329e159911767fec7a8d119f86f4031d31f893a22f7a47c5e28ec4f016467f925efff753bbc9af57ba15b230b65aae77a588fde1d25e7a37abd5ebf89bb74a77601355d07d89f2cac4ebebcd53215725f2402c4a80967a09c2a4715612f7e1d62896200987f92e4f5ee6d92a9aadbaa10be45af85c9042e42e8e67ea818e8da6e7f396e7cc65a259c7b7fde90da3f7ee97b400e01c785ab9e171ece2e9575596bf7a4e8cc41a40e2e3243c9a09986421fe69712ef0d47e4a4bde2bcaaff440d30053ec910fcf91a0aafec2d26719daa5daa4762a59bf34f58e956e6adbd997c1b3cdf2f26925381be01a6ec5c18b803fcb73896f226824f77f4ed13b6d5fa7f4e4d776a02a2165e4818c8bfc9ae50e1385d1dca3efebcae02af428da4297adbf5eea2c6e28ebedc69ed5791ecc76098f2a4d088c1cdb55f3dac4fa5557c731de12f547b64c3e0597b8472d07a1338b310a9a092267b7c53c8571f11de6b880191a048d8c9763c658f33daca250780d498468829a1e124e9448dfa365e4b340508342ecb2cf9ba4dce58c196418001f3f9483e7d9ebc58a034525f00e2c75023eb59f4322be746e04635c5d1e948a55cc3afb388fae3150e1fb51af9ea542e8e061e0a2119243e4165d14b22520347dce9c9558715321286cf2e9d10ebda8b7cbc1ad239f88447aca1615e54116b73ed8c2864a0fd6772c552d39e3b1d2a4f0a67b453e6f6ababed723290b4132cc6b9c071919d020704662c77e0c548c91871185eedff3c70c4bdc1801480b09960e452e926753647d6467eb46eb4983fdee8f9a561765228cdee9e777b6661d24614e2239c1ca650124d12e1e10bba72d3de4693faa06a73035c8c5d5e0c7636c791e1c5e9555a25ed52719615c799d3d66d45b68e1f4750e9277637bf5a4bc55ab9ec8ead2f31fa53e5b622da6f0381b5c87c9dbb89a5573eaced2f069b9c7b716dbb5893f42dc400ca437d8855d3e36555349885d97aee473cdeeefaea404005d90befe2396cb41529dc086517e2109c874d30eaf9b839520b41eefda9a1e52102b2b8430f88625f12ce7499a6d27cb030b660cf3cee8231319c485708d8435d72779561e7cb988639b30e6d5d2e543f33eab21583c34a86b1ba725a93755a0bc3d90d73b3fc84134a7d44a4ad80d28494b26d2169b024df179294490458d0d737653dc622f2970fe95c1bbae5718506078bb920ab5b4c45671affb7e0251b8cd3cf90565f7ff16541ec736ed63a46d50c5e045d1f8a35b79f65854cc5febcf1f69d19cc0c6263966eae873d6739a08bda7fbc118b05930f30ed01f4fcde8cf0781842fac18e271085462f604cca923b6ad33ca273c01708213029a435011cf2f23ab1e3dacfb3a229a499eb250f84159e90c9deb8819424b6493b11c0e016b1c3304225b4662cdcdfadff3df95946c97de14623cb89f699e965d79f49bef152de143a63bed4936be6758dcdb087d19047e90f7d9d8bd6066cab3e58364da8d3541b972e0e7d1d2da32c9e5d23455ead6948a4c1479a3d08699b8e9c3eb3a97c59d14357f452d69902483ebce423b3d1c4c64cd3c7bdc6d3b1590cf8d75271fd6fe1408568a8ea31a8425ac2a4350f8e3938963437580974c0fcd3c52dada9db3c3daaf58211c0ff71a257c0be47b6a0dd9d063134a9a4e4b151112768ff507441d1f988e7c6992ba15d9364ac4c7fa8bd746708aadc7e9dc31246542e76775f1094191513b7486e14e9837a467e84b7a741f4a26915211bca55b8b7dbc30b622e41de559ae98d4b42f18a2755c4cd5b7fcffc2e75f60d54c5b0698054c16ea200c7a916239edbdfdadac5dded76f4f7961b01ac61af1ba0c09c63c73d9572ca2c882cdebb102fd5a968ec09d170028641f03a0793b3085f3cb881b02682aadc9edfe12e4ff20c3b2077b4d9c228fa563aaaa52d0abaebfb8e3fbeecfefc22a3dc06da6d0d2c73ba18df99a9f458f46973ad61b387c6146dac37973d8127aac807e7c0783d0c21dfc0ff044c1458c3fcc9f8ef25a633b014213ae6de95121d7048cf8fab0ddb3736ae9e082a08d3b2b57e5994d450a10790ec0640801d291c7cf6d0fdfbca0721f9324ceb81a24a14dd5d037e28130965e98cf9f69a76d94b3d6f34e194f76136b5db5ea81f9511f7e8264c02c14cc1396f7811ea7ece4afdf8fce8d91189481be08741edb729a349727975a8054a8082e84edd210e08f58eb0544a9e3fadeb0688f156bd85de12c7ec47d4a09316b97dda8ba9f4bb97469cf21a7824f6f5834c482d02fdc47b3220890745a6fd244bd6833d58d04ff05054a77c57c66c2a3d453754a50c7a27999b1901e9b4dfd2fda954bcf7e616096b77037b294e781b76dc2fc1eea50a295b43ac3d0c77d4dd7d12e4f6d5556dde613a333a29f2d7179f3981c6be718c894b59ab2838a2df5c271478a4ad5a8aa2a99f99ab5569b8a94789b013315348601febf0a7d2c8e08aec1e33f0da9a9dc0359868a8ce7bff6a0abc85f9bcef7a4fa1283a5b88f40edb5e4ea83a5f34fc56d3a49761f9c2adb52e23c601aafd6d662fd4444da5dcb364d55437558120275f822c22ab250dd47538e1e8e7a47097d80e8bcca4906f984e742ceda42c53a86d756b9e080bb77940371edfef092056b16ea2955045d91166850d5934ef09688806f669004c3fb2957113a637edbf961fd04ca863485468d3c5e0d709cadd4be6c131d915b9c5c1d2ee381fe33962130d038069c24b7f850f606b3536ea137ff1451ec13a4bfc73e391cd4ee290919519f25ba9e4826fa3bede386e9fef8dc8adf12781a1ee8e6088aa6ecd65edd7783d41e78911919ef4ed351914d8403d03d1ef4db3a202014149b968a437b9c8826317ecb13d260ff86a64702bcdc3a88e99e8ed2f930ef31ea08a4ade78755a6ff3fd069ffaa780cc20da8931420235520ca5657ca1e5b69f4b2a0ddf4907a39e0f8c8ad295aee249d77d80c0fbb328b5749a29963c50e1e8262e21b62980cb6028d0510c290200e5890b48639139ebe6d83ad5712e73b22424dfee848140700380a8ef4b180fc2003b8b8bd71f7d22b86847f339d77cc9fa6075b511a30c40a430421ed205f29a96c4d21032347ece8b3eebfa2f81204f0de1a32e08b124053d600a281de5f16415e0720d336c4fb79c7e00f0c3e64d788fae7c372386d14eff81706d71f34bd8eb5ce894d0f8779501aee7440f82707c9e977b3b1e52e76370316fcb3311622f391602f5cea6974e81becd5a9a0b7b1f6a9d55c537169609379594557aa592d0ab599f89495e89f251d06547e4c115e62814c8fc4c6ffc2d8d6cbfc2adaaec6f4f7a5a8bf6589ba9795a832a8163074c57bb55120b875302183abada8a4d1d90f319710e3a777e03c48753b0ddee7154dad3a7a1d09aa485471b9e2e3ca14d0ce9815a076b49916e78a2f052d5532462a8e2e418ea758c0bf6cdc918349038d25ca3bd82bc356fc3c38d60ca9b8619774751e9d1e04a8fd9411d87cb17ef0de6340d48048ef58673687c1974207898a6b9907e666b065973e97848cf05f6da92518d567c41702a865795d61b3f897e723c1954ddf1ef653c7a86222bc972855aad7cff489c03e0209552cf4e9045f2c16ddfb49a4e6c8124de6bd643b21e09f61fb093061e23b7412e8ed9ba2b094613a85bfa3b234936757d8060efe682257dc47e330567bed9cc6e0e08964a0e45095a4c7f7828b20c22bc712eeacb7348d966b44bf1e84d2d2baf3d038a433ed68fcdb991ee12f91545408906e57ad7bdeabb37fd2f251ac6fa39893878fab8e96095d19c0870e7ba9a4c716c86c5c9fefc961f6610ad79a960a413b6b7f7f66acdc51517988e7bae1113f59e2bf527e4a7f5824faf0604ed91d31724ae963957a2690b8645e5447952e1449731c7ba947d3cb6adfdab3f9761663bfc447e2025d6b3e51539d0f38fc104c5965e7d60c4cc3cc399fd478335f7de8d31ba58a64d87e987a2f745c1920564966048c7dc73f2e2c2b2960195dc996687dee3b8c3277adbe9505b8fb6d8b53b4ca114ca151af55587f02e7d84b3f359612c2f856fcc8dd61ebee9867f41baa443ada5cec5e49b18a4f03ed82de64950e5808be15058a7f925af9c7194a5dcd73db019944c7e68729eb7f641088dcf3decb0ff841f42cf4cf97f4454e86f1151d26dd78551331dc0e0de30f7c47e344a3c2b8aa250eb21fb289dc3b5803a15bf407e200528a43a032e1ee2c367a9790efd4008c19ce9b7224bc9b9ec26b36eefc59be1afa04443d47df0525da977c8d8d2b75b1086cb70ef02807b87ddc461811892a1dc9c7c5a96dd08b8a0317c306699b72c8656446227e66ef2322ea432e290ca38bec74f9015c336aee2e8d837369bb02653f301cd99cc13af434946106083587d82053efc37db638828dfd9254931361ff030eec9aa100ea04724f044dc8f54ac530e1eaec6f9a609072e5db44574361d9464f2988e5cb6c858a0aa043a413d4c490ae88b4bf5dec304985c0f8b17ccd2387841e7b8076b1e63507175ce04da002fbab817cc664600da941f4448b940162e6627b22d36574f63e27ea8ebb7925f9aac20a62de59676313505a7b06b4a33eb2ed94ed3cbed7cf6de17eca8f9a7d3eac9de7b2dc704279181a4ce1ec2fc293674f0c942ec985f158616929440c1e19a57b4bf373ca291fcfccac0e1a74c59eed6e46e74c599a3f75a39cb01cda6eb5f1567d2103de5a5f6b2a191eac9070a7b89873a7fd2e8072b2e65f0ee549b43c4071d15dd4aa95bc7d4adea0c6fc9bcbe06dc91f84ca387fefb8a57f00fcca85af541a1221c1e4970ed0eb4b84d1c8656aa900d545546babc754804be1b390963d98c0b12a2546758e89d261e6529d86f07d973288a3b1960aa5989f50ae53aebe3b3bd33a7748c34e6efc29b6830c6e6e75c3f7eb33a2c3b7f9ce414779cd3f010cb639b14d19596669efa7187722545f296b69e6bf148bf517ee6cbf4684deb457ec8a4d8f8588a54cda48b1264d0578d875251c30b79e3446b0c03bc178319823dd220279289f7ba61ff3318e323ed88488de0ad164954af36cfe2ff8c5f2df60d3104e9e2a201ec83343976b2f348fdaa338f5f049e69eedadfc6388c4b26d946a16ee89b3d230f967c8eab3b6fa72d0a89e63113b5bdd906c768c18d6ac062e913ed011663915ddd6046bbb47ca8089d76d46ecc3fbdae93aaa74a732383eb952383fc82fffab462310aae5979d86da7742f2cadb6c70a1ed8827fb3749f03a192cf76a2f47a9298a25799895f41bdbaa58512964ec9db1b58c7a8177f46c622a6c59193d304ba1aaf9cb215fb1383cec32faf49e0e7d9dfad0352004e1864d89669031213fdad89d66ab51d38eda7dd8b9db56b864ec8dd7f1ec423f27f0be7c6a70b9314de0f3ae7fe80f685ef7992bea0e9c48df090295ca4d4304448d68e0a8fd14f00a704e579572fa397e0f6235eec015ae0c54056c80dae0e0795098462b947f1f0c33585741b911881b3ed41f0679185135b737b70c4d5d91063f1a547a860427b1f0b56d150dcc286e94d3aa65c1b7e162bd9118f6e21f9011dd819472453e01c435ad689e047bd6749f51b096284a40a87219ba1ee996f7bbf0d2e0591f64727feed171ce2ec7a7c5aa9d3d7276500012af49b8d836df1fa42e380e0b17e9acf22aeb28ba378dd418499c76bb882ded4ff65e8288ace62c3969c46747a3f1c88e7c4766e747031c408441c3d9f5b17afa71686f7f065b3d33326f86b9542916ecedac67c2dc51386418fd9400b315c9bcca60e0a2aa6282291ab5330f9087f79acd8b0addfa2e8ee9d7dcec69a39b70d3dbf37b57d338a25af5fd8a49f4131c5e15c44bf7411895c3cf067580ab2803f534cc9d19fe1cd92ef0a59d4abc69fd6f848d0b509e8bb5406f0f88cb85d05ceadee71378b5fceac015d5126b5e79ea2641d45d4c178d5473f0ca3edf41f36f97ab3d40793740d124675e115fcb0618714eb126c020fa5e031717261c22dcc73546a052d375d6c99066ba272562ef0de75b5ef4fdc7513a27ad2ca1d30b647d408edf589b4cb110f4ecd16fffeabde682db576c03bc0f0ba3fe980c3cd5e558860eab441fe9dea75f15e6b015c21c74d419d5e1f4a057cf62b105ea0727fa020daf8f51838b70cf0ce0077075d6859833c9bc4da3442f37ddbeabcaa7ffb1c334c0554dae855e1360ecf8b4ff1dfc56fcef42f412200b28162ac094a920bea8789b8fe602beac900ad58113755d9f68e40312108ff58faa849ef98060fbecc5e3a74d30a1e435904eba653fa95c2c67316077279a3627755d324e9e3422aa66dda3e10ffa343b7dc9a880e06a1b1e16b6d98da0be69fe4ccef50129efb5b60a16ccd8f068476a5fd070f6dba1052282d99a55a24699254dbb0e24915b5302b5f924db435976d63fa32bdbe57971ed7bbc300982c8524dd0dff55d39d56549fc0bead96c18e12fe66f6c7a6a266eed8afa1de7a73d64dd57ebf978b34ac02287103f142bd426a32bcdb9203db2053d4766009a6b18b1fefcedc3abf2e89e5e88a28f3c5e1e0620e471a29e891f04a9bd4077b7ec093e598ed158a5c170d0bfec7be96fee33561e07d65f166ab4de1ef3a9c3babf396aa4e793c9ef89a5ad3873eb59dfbfda6f57643898ee6ca7596750c2b0d94efeda9bd770cd9b011a2d2cc4f7bcad49c8729f37b18a9b461b4b80ff09c12f121019a3e34c59269f5830620b5bf17e2fa3e2f71eaab84db6a0d308c4d744f41663f2c974af2777956df99e6da39fa2657c0e8043138aa7ade6bd5f84a5323ed743969f06041d7aec5ba43dc4b5ea96cd75693aa4a692bef4222af8c0fb4e0123046390e4ddb629b67471ead0848c430cabcb597d1340718a297cee7c27a8713215494290cc5ff605aab3f323dce6dfb2b00d06548216d739f357f4eba90a1a26adc604e5bdf60e064de369d91bce5b2a5ed914669c16ca13890e63d829171e82a109624d7aa8451223e960a29b4ebf67e1aefffb5f47e1c8307a6f728a23b8d120d6a7d6bc5a02efcbdfd02daef62406e4c62d86f57ed1bc384a21bcd2a01bd4190350bfa756e5fedf8093c56496034b5e3a9fc5d5b61c11e78d86b7a8783894970db62eb95cadf68e315037225263c618c53f969324a700f1aa439cff44458eeff1d24417d1df5a3e710448dae39780c2983870e1f5370e323e73e3a437d6a26bfb521d199412ca74e8db35040b78bdf177797d770e67789489981b4ab74427b1d155945fa5bf9e00e1b794616e76aecf673cfbe2f1721895fca0826543eccc55c5ec2aa0338e7f3188a18563bd4c1fa938bfcbc7375c6f78f2c1023c443221dfaf79c1875968f91304b593e4b455e87771b4e1614ef6f45c9b9c16da04855d9f63594c072710951cae4ac7fd0b97c85f1dac35ac5bab1070fcc51ed97f1dc859452de0fb61d86b4a7a34b20d3a44c0704678f808dc9e68870632759fbde35367cdd5daa3701b1bc92ffd98831e85965df17c99fe1d232e304beeae2ee5ccf444a90ea389d8ea4799511ba6202c53286c18025eefdb4e6b90f6ac3612356240a2b13039128c9b8e9424d9ab92e156f0b9ae2ddff9c0dac1566b7213cc0b432be87468f4691815874a99c13904e32f25bd4b20470a407f66361a66be53eadc6defc5c74f237e20e7af348d1a8076bf21e9082d09c869622cce5213ad943d0411022ca9c9f813820e49b99cdc4014fbc2626263048ab46811d3a719e62f2513b48d19f37e092bc8455891464860da322ab34c6cf5e5c9ecefd61761cb6c34d62faa78137d38b0e5e96f0fef1dd1ec619082a978581660109ea9534a5ec0b661832188645dc5aec01b10409353267b2f76c8a5aafa057657509668ba85d3dfc9480fa37b885c9535fad4be99b6533133b966570d311403d8f24995b2ebda935791df3cb571024a1023a90aa34b1f850b155ab16fded13e1a7014f4045e897d93b5b8f871c2400107d9ee22a29d4ad8a8788b4d378f479153dd90f2fbcb9d39a0dfa6fcde96b2da09d1a529ceac7cc52d661cbfbe21d73ee5c72769548e332c5c0b49553a0e54bf9f932caed82e374d20939b13472b243813c63cf0d94c7076b4163c8d8a0c139c6e6198013115014ce4445613f7b63db851a2513eb0b764f8971c65f5a7166e31fc1b12e55c82d32f5de3d56e9402b41f34f383482c3869ba1a3a6a7e4cb01bfef7b5de56ee8323db52fdd39f737630fda030202a79254fe626dc14414619d0d6677d5628db45b837693f8f193845e56289a2ac349c9406c2c160087374287c41466fa6ea7a5dc5c711db10b79737e7e6d8888da9104f31ec462c578d121469e4cf4f4a615b985de3aa49da3e01a19a76d3029aed716479cd20db871c30b47d508e019b3e53974994dfd43bba076ef874fdaa6b1a4b1f26002d0121edf2bfc4dc5ecdcb7908e93a9afdf54b39332fd82cde698cc0478dfaefb8f917587c6d705d5c09d6b464c10686aa2e37882597f34074fc0ece0841e646c16b55f267fea3d0ebaaaa2ae851af71dfdd3301ceb35bff469f6f5fcdb8a1eedcc23934147d13366e4d868e104eb7a7e8fbe51464b31989595f2e608b7be33766c1fdcfda44b236784a49e41391e1ca6d988488f64ea4eb1835654996c9eea104a863a8208c377cd18145e6d777d7642de9fdfff5e3670f856acaf5e85658a16c63f37deaf369e23fd0baa5158a255f323261cbfeb2c644a5e01edf0c6d375d9c8859195c12340f10d291b9f84719dd868ce277a39e24114f8dcc6bbbdcadf2705343255e17d6b1ef531b8d14c847bb9415a77a49786a1f4e0624060c0c9e6b100835d58a851d5e36217e4928ba8f7d9d43336e6f152cf59536f12a6aaa110b8c1431f01156617b76cb8e37a042ab2a691d03b1db77d34ed7dd0d1678d8f8db5ae3ead3e86aa85ea515bdc834ce089cc253f7bacb0694006b107a1039d28df2dafe96be8becdbb5f876c22de873d660b9ac7a01e174d347cfc12e10e0bdde4123c61e270b1ee87a2ec9560db49c169d9eaee50e65acf967a824e784416d87286f65e306617cfa1564a913558a69e04dbaa803e546b3dbddc856f905d9cd8506c2a8605386edf5310954d48c0b0ca6bfe308a40611511d9f26ed0ef333044edea9dfe435a4a11489e0a4887343bb5134793f694300401a03171261a457bdca5f184d26a34977b0548f078388d54275f58b33aa3aaca79a9bf78b86be1507b5733ffc72a32cdef0371fe547601d0e9ab4d1613a2c077a3ad9225dd7ce707b242be42c382c76808f148f8bd428d5c2540531d9a0a58b3c18f1ef52dfc7cf1d3029ba35fecf64282e1d1b7cef2e1652ba5d2282e1249cc10f4a417626e52813c683903cc2e06e0736412576f1080846747236659c84e995c912050aa225355feb31983b87b0abd1441db1593c5083e8dd5834e174710ddd41595ecfa5bfb1cd8b4f54499cb75827b3ba002f223a2071522d641183dec53f41ef96b5be94271cecea57db50048618e7492001edd5063b07cf7ca9d2874455f092fff08dd70fa01cc0b4f318c677226de825876dd6368c315b1e7ab4e098960a4c459582e7011e1b9ba86ef18a1e9236de7c631317ab032ec9343d3ad6926b4838362360f58b58c41610b38072e902a86baa9b9927ec1614dd75e3b4f1097575e37e103cc9cd119e9d0162591d437068254f286be9167c04acf9087826741c6e927b7069db9a508320aa9ad5a3b7dfd9c10997423674044106fb9fb38131afecd833ad770953fb1b0162d35cd1cf81e2b966f25d2d2b20ccdd575781ba8e8a2274421f16dd3bf18c140125c80665828a313bb0b7df4cac1f1acf82a7b65f7ec7c96c1c9c87153267aaa26f54703101dec69dddf9672b4f77ceafcf795830511a04e204b0b844e87fe2dc6803c09873a987594af208cd310374e6089809e8be2b3e460d2b05ebde1592d7b6bee8bc5bf40e7f0b7f7c79d879e77f29ff4a77e650ff03a4a6a183c18f4f467fadc5c7009c0663ce2e5435f1e53a17c993136930db5d508c75376174d828169043ca1522461f39906466079f9b195049f85da6e80603d45a43438287014e305d49ea8f2daf967caad5c09bbb481129c727f3594dc14dce55e5b2d531f2e39a8010ad21389ccb8c300d8a34548642924caeca6e1ca08b6c31eb5573d9ccb88306279b4711a4fe9fa7e6f1720e09a7058983214f5fbe51e165a0c52b7a337ac07ad93e15b541cfb8468c4f468e19ba9de41c90487db4bd727dfbf908e6b13d172629cfc633928bfd1c433ab8e3677ccfca6f7f77a423bf27b4f5c3dfa40a942a47bd199f48f90576b46211ab8efa3d6b504156583732006ca99ddea322dca19dda2bb0c096d2016a08bb0fb6e417274e5cf6998b6d8b3aac524d9ba9bb130dff39eff3a2bc0b74167ebd0d130c5258d3f0ec7ab783c038d2daeb3283e95607eba4abe20f1f83cecdebf370270078196305ab0b4f4baf516786c45f4c2ee5d1f10e678caa37d9d46e5e722b7cc656711e162c92d4e916c8ff640b398d1753de7cfc8ebc9c7f9fde7d626c2b0940ed35ebcaa27022c18033f3a366409146646c6098a6f93110403ec633107ac5a85236dff8bc6b2c258e938b8cea665d211b46e42db3c9f4cf8ddabee5d2375fb024bae07a17009d8babb884c7cb232bf0af2226636c72c61fd9dc4bab46d4720c6d4a27d44d52727194e91dd91c954f41702c15ad32105ebe35a2b3cbf001747bc0742880ddebe5ab80c7eba764a2215a92974892cc356c3f8fdcf757d1b6d4bcc5e00898003700a310e46eb1eba86ec5dfe478c017743e5a2e7bf3b73a690ce4a39dce6f819af390f1953b1976150ba188f9e61c36fe74fe04bdfdf3660966c97caeaf1827a1c7dd9cce1c70a7bdf73f7bf61af3c305686a0ee86bc2a9080d3b1199071bb51334124ea62d3c3b5dd2897c04c236dd43518b93ea5a3e17145e965bab935fd9ec1e7b376d5ef228daec373b36b850dd76524f87489d39dce49932ef277aff1845c372ab09a00a3cf9bfa8a2170e4ffc19e251e45f68e46b07192894f2cacc42f02ead48d91784657736e92c7b47f7add87c0ca1c18d13dbade2e2fe6dc1cd4dbac14143d2e7c7630db10dbf53e57fe5ccb8945892a35c8f33280e0c0a53d23e4abf8945441d7320397294ffbb006eaf406a9233fec0623892ec23a74e3c93d9eff6b80da57d77eb1d77b2e107e6e6dbceb8ed2a404505cee64804d559a78dff63c07a054c389fb72b1cd171a415ad13557aa6dc20bdfd098c7b40bfa65e1ebe6d7d095bb9cab5c14231cffbd7d4ca7c85beca0040ec607c657443206c7f0b5f2f9464d0073fe3f3dc6dc17fb4a12745400e4eb5c6ee50fa2204b5aa6a0b8818e0d2b9e89deb540f86934a3747cfb03b0c8d9b80530095e0ccaf259b03441f47a1afc5970cbb9dddcec6cf2df03f76dbe040a1c009261fac7ae6201524f4db8db60720924e8fc13d47f4ac810719d1ba0e8f0b5ef70b6151d18e07d656abfb4b3011e63c3af8ca9f54b5ded8e20155cc35343f3167716a93b05272790b33a66c3318bd50331efad0264a8fd3536968ef9de527ed9da78802c1333511af6b6ac0cf576e8b5089f453abfe56aec4b92a3337d5fdf5644d035fa85d29d6e7a9fe8aa6565c553c8dfee35e81bbcb8ca3341d1af572fd8a20303bd33df99380dd5c90fa873c5c8f0b0855ac0673b6c78d480bc0e53a541913f7a1dc39789eb70f1d9a71fe003b56ae7e0b4415d88e3f5ca8e021f8188fefc1a3174d0dba067f3817e6c7a971700c361540cd7d145e1201bff4ef75256e82440cb61b6506848bbffece7e58143f278594df31d4135c41cee9fcfa49f47fc2ebff6c9919c071abe1acf2de3274c5a13283256e965104eba28db37c5e507182abe2f8c1e8e9df6005da5d270153d6e73d88f954b68c06e61abf25e36d4dfab1307f97dd6a5d727d5ee7cc5d2d2487cc06768cec85fe140eb78514dcb6a58766574a8ab9fcdb597d49c3ecdfee2a6cbdef96f70a82165ada09c76d2e82aa23a31bd0728d2072ae8016ca555df25e8c1bd4aa2a57be9c20131d385872b18496bc784b5befa90775f813b9da5b19554fbd14c71cc2249dbe5e9b9f4e030ae00372a2cc39bfea2ebe0cb2c9b266ad1259cdcd0b817d3565cc118012242a0a1d171084d4a84190ccd617103d6cd07f669228f357e5faed647d969c8bb3077550286dab9079b7ad1b10fdc3b7822e3a72eb379c8c3b79621c14c1088e31eb47997abaa134f49fad4b0c399401c7114ade5374291c179a373f93897a2f44c2b767d47cd8ca2deccb6f4c8f245c62a6e3d61bb058ed55f3f3aa834491f8eb631de9282fd5f93e3236e912974b2111201757851d35f0755dde6ffdd","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"cb4dac17dd2d3b658155eb3f63bb6c40"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
