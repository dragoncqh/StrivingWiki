<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="zh-cn"><head><meta charset="UTF-8"><meta name="copyright" content="(C) 版权 2024"><meta name="generator" content="DITA-OT"><meta name="description" content=""><title>搭建Git for Windows服务器</title><link rel="stylesheet" type="text/css" href="../../commonltr.css">
<link rel="stylesheet" type="text/css" href="../../common-extended.css"></head><body id="搭建GitForWindows服务器-30391810"><main role="main"><article role="article" aria-labelledby="ariaid-title1">
<h1 class="title topictitle1" id="ariaid-title1">搭建Git for Windows服务器</h1>


<div class="body taskbody"><p class="shortdesc"></p>
<section class="section prereq"><p class="p">尽管 Github 不错，但在没有网络，或者不愿意把自己丑陋的代码拿给大家参观的时候，自己搞个 Git Server
还是必须的。在 Windows 上搭建一个 Git&nbsp;服务器端比我想想中的简单，当然，这归功于某些软件确实做的不错。</p><p class="p">在考虑要折腾这个之后，在网上搜了搜，有不少现成的 Git Server 软件，功能不一，需求也不同。但我觉得不需要搞这么复杂，应该&nbsp;SSH&nbsp;Server
+ Git 就好。在 Windows 上跑一个&nbsp;SSH&nbsp;Server 也有很多软件可以帮你，最终我选择了&nbsp;<a class="xref" href="https://www.bitvise.com/ssh-server" target="_blank" rel="external noopener">Bitvise&nbsp;SSH&nbsp;Server</a>。理由嘛，单纯因为它最近有过更新，个人使用免费。</p><p class="p">然后，Server 上也需要安装 Git 软件。因为是 Windows，自然是&nbsp;<a class="xref" href="https://git-for-windows.github.io/" target="_blank" rel="external noopener">Git for
Windows 2.x</a>。以前似乎叫 msysgit 来着。当然 Cygwin 里的 Git 应该也可以，但是我不想碰&nbsp;Cygwin。所以服务起上需要：</p><ul class="ul">
<li class="li"><p class="p">Bitvise&nbsp;SSH&nbsp;Server</p></li>
<li class="li"><p class="p">Git for&nbsp;Windows</p></li>
</ul></section>
<section class="section context"></section>
<section><ol class="ol steps"><li class="li step stepexpand"><span class="ph cmd">安装 Bitvise&nbsp;SSH&nbsp;Server 和 Git 时的选项都很随意，能用就好。Git
不需要特别的配置，甚至都不需要把路径添加到&nbsp;PATH。</span></li><li class="li step stepexpand"><span class="ph cmd">Bitvise&nbsp;SSH&nbsp;Server&nbsp;安装好之后会随系统启动，并且会在右下角添加控制台的图标。双击打开设置窗口。</span>
<div class="itemgroup info"><p class="p"><img class="image" src="../../images/2017-11/Bitvise1.png"></p><p class="p">找到&nbsp;<strong class="ph b">Settings &gt; Open easy settings</strong>，打开它。这里可以设置哪些账户可以登录&nbsp;SSH，可以是
Windows 账户，或者是虚拟账户（Vistual accounts）。所谓的虚拟账户，顾名思义，就是由 Bitvise&nbsp;SSH&nbsp;Server&nbsp;管理的账户。看起来虚拟账户比较简单，我们来新建一个。</p><p class="p">接下来配置这个虚拟账户的属性：</p><ul class="ul">
<li class="li"><p class="p">为其添加密码是非常省事的做法，这样可以不用折腾&nbsp;SSH&nbsp;Key。</p></li>
<li class="li"><p class="p">为了稍微安全一点，&nbsp;<strong class="ph b">Shell access type</strong>&nbsp;选择&nbsp;<strong class="ph b">Git
access only</strong>。</p></li>
<li class="li"><p class="p">Git type&nbsp;自然是&nbsp;<strong class="ph b">msysGit or compatible</strong>。</p></li>
<li class="li"><p class="p"><strong class="ph b">Git binaries directiry</strong>&nbsp;是&nbsp;<strong class="ph b">git-receive-pack.exe</strong>&nbsp;等程序所在的目录，对于我的 Git for win 2.7.2，路径是&nbsp;<strong class="ph b">&lt;path-to-git&gt;\mingw64\bin</strong>。</p></li>
<li class="li"><p class="p">Git repositories root directory&nbsp;是存放 Git&nbsp;项目的路径，随意。</p></li>
</ul><p class="p">设置可以根据需要调整，主要是，如果不是自己用，需要保证安全性。我不在乎，因为我那台&nbsp;PC&nbsp;都没接入互联网。</p><p class="p">最后，在服务器端，Git&nbsp;项目的存放路径下，运行：</p><p class="p"><code class="ph codeph">git init --bare &lt;my_repo_name&gt;</code></p><p class="p">接下来去客户端计算机，就能 clone 或者 push 到这个 repo&nbsp;啦。</p><p class="p">git clone
ssh://&lt;user&gt;@&lt;ip-of-server&gt;/&lt;my_repo_name&gt;</p></div>
</li></ol></section>
<section class="section result"></section>
<section class="example"></section>
<section class="section postreq"></section>
</div>
<nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>父主题：</strong> <a class="link" href="Git.html">Git</a></div></div></nav></article></main></body></html>