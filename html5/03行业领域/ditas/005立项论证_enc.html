<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"af81f77dae74eefe882925d5b1c9b575bfd3ec246ef90ef9b60f29a425c9878ba560b66133319d0255822e8e083e7ee45a1f86031c536d7f1a199cb32d9d077023829ff855b673a411ac77b9922bf0092b43c3498926ad30cb9924be52f747088826b8a09ad6126019600b80532a60c4b9cea812c7a87f40c7b546d535ae4cebe429662f26c29362284b96dcb5a94a46122e9fc80bc85efb99ee833e371e948caf3168dc523fd17310838e242b660a348a9cdddffac5caf8b3ccb408cde74288991b8fd9d4f2ae7ab67db42be1374e32e8310f765d465be0f4f824d7501b3f42b1cb564b1697b549cc3cbd6c068210c63aa75d5c159857b02f7d1a5fc5a0a6be578849a00126d64a012020ecc291be49c321d669171e264a016c7192deadef7b19e77dba885b202b2ff51466f74cf85112e894c9dcdeb6c67eaa3ef77f721d52327aa49e98719ff76d63aa4c23b9f5f48deec837e2052289dbe1a43406e6b45cdbca0a881e47a2de1a5042700df4fc151096f8ee7475d3874f5f12ab45927b050009b04dd7f6fcdb2802c648a72596f04e2477ef97c0c2c96145d88095c5f75b2e88040e6059231e57759646f24d369138c1f3862a8264e7061574bf7a585164b2e93e8a5a877bb947cf1decab990feab785a2fc37bcf4886d53cb09efb0d387074ec99bc3c180f85b4467971abed6e913f7b2186e479040d6c48c7aa128a1eb7838c6d597207b698f18dd76fa6005a4e794444857e9276075ab1b821ba512fc1768fc424aec6a61d0a72deac11f6939e705352f72a75f917c199addec80ccca585896e357b088fd2aec1c716eb5b29ea6a4ab31da80ec7bb6d5c8f1610734da88b97b63c197a4109dad52dbb0a871ddd3227bc7e45133310542bd46dde6eff9fc570768d6e5d5281e6cede0db379a2b23b1536e435c2cd5117e263eeb510eb2beed71afb3d9fd48ea090d5e671171db6efae1b2427c45f7618344ca2e4d61ec5c1ba36857dad0cf759ea793b76fedddf938cd92c020e05ae14311b2a29ed3db0fa48c8a06b277230ac4cdba438ae29ae22fdf580bac772cf3a6f043fd2c5573116a81d735322239c86923616f6b4a2b4e215b4391ee4825fba1deab587b1fbab1425475dd3d8423be7199140223dcf686ab42438bcd279b10e98789bbd972afc67285096af4d9c4b487bcda955577c7fbf1d1dbafdba54bead26a0ef7ffcde834e7ebc5f54fb49ed26ce12190de621bc40727a4270678aaeea2d569d3fa4ccc1a1e027e8c1c245dd82988728b6201feef76b0b4d3d95b2ab6b0b502e2988c5ff5f830f8e066746fa7c1fbc5b34ac305bc18f269c02ef80c9d45b0296e7f1be58be72a3567b0e936da5b41d1bf92ce1d64690693ba09d2a68d61734e5ffca48e422e88efaa9fdbd847310601c425b31347ffabbef00b4d4df52f659473e2e24e2d962bfeb55c3a67ecedb39d2272b0a83705a74c1506f351888432ff255b0af4aebcb80b47437871ea0702b060fb514007a2d2c840afc13f5d1ad93f52e768e2f37e7c83a52d4552a34cca7aba9b9d0f062b90994fd6d680d4d9a74a295b196faa8b4132d52253f0f9e355e9aa77b124ed1db56273a1103a685059cebb164e84e37f7af10cf4dced1be473dd5f31f53dc27d5cf71e81a5736e7c007b14ed070d7797d176b1c2d71490b7ebf316e7f61aec4c701a3b0a0726757410e2509b9668d41a7a55c52339386da02a76a4a015a036a65a9e66b321c4b21b025a53674ebd10b303db958e9af039bf64a216c9ded098e31d29b24fb12073ba5711c5511eeeadd1cb7fe580b488071f6a7f3b59e42d94e02bfca2baa99b95eeaefab06ee34195a8d1bff5764b31ed1a10626844b2427672fc8f65b25253587fadee27eb04b1002a4385837ffc6ab6920db9a64add4410c98c5b01ba8574171d6eab1bba3fbf2867696601e485e5ca5510528bf4d00801b266cac15da358c7f644110f20dee793e81e0b905deb636b8afccc5dc63a779a0afa8cddfb1cf9104691dc8c456bcb64b73aac1c9222215c6ee3b742169b6601810f6b02113eba2a4f358a96cded7825d68a2e506e8f354425c62a44787cd725fa22dc37c245ea3150f8d823e8182993be8c8cebd6388a1a69ff0acd410326b0fff5efef3af94e39e1e68ff004644e8daf937b99e0b3c62ddfb3fd55396240c181d55e51531d75e0eb842be05a267b9a90f2bdeb4f5ea16a596c15b7471d00d3f35382fde3492f34c826f89723a2af6666e196f0f2c798edc4e2d53879009c877e6408ec474afd2a67a4f8fd776a69422cd50a168d33888822a7cb80ceecd770f7f9e9a9c49c9229dee45740398a749d73cac705550bea9584d5176887776519b73c6d0ec3d1798c470a413cb6969e0cd9d64db9201169bc11d3828790c36ebbae547ba521b4f7c5cb0dc84bdde1adf95128bf42f603cfe54b2211855721652c22156ad352aabcabee337fa5a066c38c0cdadf1b2d236f8b2866a6d6d65fdbd4b492b19e102d02d4a50aef1eeabb88aab1c677f982237c07421a3421b113f6deb658c087b4ce28d6bd19c9927771da01ad604fcf6877bb4e6584d8cd023254614ceba10770b2dcb1dd0237a1b40c2445176cd998ec5e3e82b005a43e819d97c9692037287eb943d3651d375fb6af71b1f9caa400aef76dde8c3620704a0f6d892d5bb9ee197926361d44261a33dfdfeedacac66144adb3d3bdf3614ff5fa1ba90eba64f68ad90bec056fcea75e94bcbd4ad7e408c7f10d502d368fbfa36e4498a9377068b601b345c9e810816ab3ea07d295a98191d4372a11562e8d00d13c694c4d39249217c44562f8ac6b24fd3ed16a565c98f1a1a4611375c9ef0c6f4a1f2890620af886cf5f2042170b369682ca2d14b52b171b6d7094021e68aa0d5bf8fab0af1455b564d99d02ce260df10412f851e0076f77d70a1ca0d5725852c0ff3489943a803764d9d2c15d1ad3d2631da8a76bb4685284d7e1121ca361444fa3b671c0e79605a53212d3cb780312afeeb86fb2b8bc3363c69691c3ebb40f7ca8e65f00dd7dd83beb08757c55d45857695131b353ff5f96709ef33e235a3933fa60629d72ca571f92fbc22b97645a3657700cfa12e9740eab2fef40c6f1a620ebe151e23ef1371c3c890f48122bdf10e444a169caccc3089002da138bbe19d46f82dd21d7eb8812043a3408ddc516770b32ada01ca00911e72eb07c3e7cc0d00c85dfd8b0a3c7c7f3526e2fe780f31bb851717e02ae3a98f042293c8d9ef98a27985df4bf4eca7322715adfaaa0a306ebaf1e7237f2392932fed172937274ce06ddca48f163b4c3345324791012afe72d2fd941ac2e44fcc4d7f471b63cd988c74351913a136e5c82be353cbbefcb7a90c8d1cc07221cb7692505e1e20a82a4efa38483ce6f4c85984f268bf9d2bff51fbbe1db8bdf81a9069962069f884f88adddf61c6c097a028ea85a1281e65959386e2311f95b0b5e0096d193d70fb4bc753061da39ee19873ec8bf159dd37e6700ab21b20279233adf0f8e60b691430338b7a861f4d0c57e6a0755c8dd4242875dbded3192eb65c60eec9071a15779644ea4c70054aff1241a76611d292ee8cf25f97bf52137ff29a2d25688cff4a88665bed99923cb2589c78dfa563ac39569ac50066ca8bd3923e575b2206d879d545765628786c135352205b778164eaa7a229ca29c045b2a9ef859bdf2b9df32747f53c8d4b68d653ec8a1f5210900ec91d0454b3e0d0440554f846035deb2277b925749ce535bfb8bf7f7049e1daa8275df43e25309a90392c10176695432cc026d2aa9e33d18f7e28ca9eb26b253c329c728b862de279d877f5f230220ae4d81e9fb3c01873ad7ab8a90d080afae1657823a8030199f9c1f0b2b42d21ea94807d6b445033e5f2cfb3a4686d542a29cf23c110c69651eb7cf606e064d0ff1e95f72509eadb02e4ae80de720fc86e6825c7acaf911aa0bec1738f103f3881c00e7a4c6533e9000bf00e05d03cc3cb81f231d43cbe9a54724f647e7096dfe3c86822618f8bd1da760e9a85b5403b6a063f5bf469727b5fbb62ece0b4a1c5db00fb37ed3ebdd5b035bec08d990e42dbfc2ef925c5b7d0052aef31414120968b4dd7e87efee9ca4af61ad09121debf3b187d60264a9a096766e931eb9f95c1b687e8c60519ba6de7f5fb6dc2b16ca29ead6a88860f0bb3f3e954c7e2c2ac022b95312db091bff381e0be8ab54951b9d3ffd63b3f47b28e7a026153c29fa59ea418aac332881cdc3b3efcdfc16028f9b463948d52622c4847d28bcee3189c40e1f1061b81c97c315aa19472a5de5d2d6b74a4dacbc4bb717f78e19dc2ef17770433ca9d8210ca6e654e6599a6b16897c234c26bc7b7384cf6f7c50cf122099dfbc8f6ca65c460cbe9fdecf71614216e81ae1c6d5f79940a9997684648a13882d59869ad18f805e737a1f3cfc75b00d643611b045233d1102eebb04284d4b8eac7fbf1e3ccecef5f4e8d64fae0534d65e5b8caf0b0d6b17f83a385c92f3a4ae1e345dd2c84c64545a3deb31e0fbec2549eca0129f9353e618291e8d4376758bf24cc65ef26cf187430520e8a6bb124203b75b0f7065a6ab5a40f041bb62eeae59607505ef18c0408c527f85d2deecc5a0e9f0b35a1c7d7c87706e9917a1df160a00ecbeb612980c42e520ed89804f261f4281a9c6f3be26875c40cd257d52cdd4d703915cf44c6bd2ab09aa5d138eec83e7c9b98ce2577ac2ab59c069abe7c5c0ad70b3f0d144514c9699232664a12f5e55eb7d0d7295e6d36c87d4d929847e9d76ee6c2aa6a29bcf5ee397d8090198e18bd8188ce8f9e56cae876a04dd1b3ff1ab378cc39439f52dacd2cf571ca4ca92f41b6928a605604db834c8015bcbddd5278750eef7956c91305da3dc82429172fa2157fbbe71eb36aee2d4c08ad4fb420699ba2f21a2e0224f9b290e3dba52e000687a5dba15de742df20d2f77639a5635adab017399415e27430f8280f6e497c2119a3ea96bd82850daf6fa9d484f54d92b8849248b46703f1ddf02ed10ebd060db64db04353f5cb47cdfe1b3cb640e392626f03fbffc5dfb19ec93329192e200a134f2d40e486b62312555660f27fc16ec75ef1689dca3308f52566d2474a35f0ae2962a3a23eadc4176b277425582cbe8ec5a90da0c9307485473c7b188e0bd2bafeae4b2b9534915cbc17c4a6413272b10d3adedf9f469258f4945ce4e2c64a0b6a06630836739d51045e599f313ededd5d0c2e756a26e3401ea1f9ac8c3288efe499e9376d42100fe5dd401f54d5fe900e868fdad33e9e941539749084b1b2d1e529f9db922e34c0eed0150ac94a45812dafb2c23160476e860f2ed54c525cacb2e9ad6f30a4e29f428fbc0a0336d70aa83934b6825dec12970482611fd8f479b5e26e95b554aeb34ba4d45288a21b99258638d5bc4492ca2e9c15b4d9c0527cc73a0d212c7f7371fe9a7f2e57c15de91c36d3c67800640b8adb4bc28cd73cc9f8dd9d4008b4292a4709e761e6cc37a7b54b23e74e2611f4ce2913226e89a7b0d556416958d3256c0b7cb49d754efc57b5683c420fe745e83d4ff13b070dc5e9c0340593bc612f0eeb53583b9349fcde0f4441b8f92610f9dbe2d3a96b14fe1a62ee1a3aab1fe311518fa5c84ab3b7cc1bdf8a1e2979fdadff6211c4e52961eb72e8b9d254fc5fcd71d786a625b5bb50104c86e01afe3d4f1994753e9c9a47013d1429cef842d7cb379391e4c810f5da9f5427e8758cbe53bf2bd36408f25d6b7c26400e4aa3536194d42838af52dc76c89b9f5f5380a3477cff28f1d5bfb0d9eaf713522759bb1b908c0f28cd7b83fa3839dacf8c240d06679d8f36e494d3f08f9277aefab4943538a23f0cba60d7c1522d7f4b58a0ff84c8c045d0186bb6ab89403aa97bc8b60e4b26366cd97b4d7160245de9ae5254f4ac8221037232feb26173a0455cc55d070704f191aacc07b083a6d6df11a482e4cef68e0fbc048ed8bbc0118f1a78819ab38a80495582b31a57cfa6841d72ae323609d2c2230591c592461e77e6f143c261dfdbe6eef411e1dffedbf6ea3df9548ed7f3b22758ff7f6e17c58d59263242eb92ac04f7f1cd68ba3fb5654e218dbe9cc32513ec8b20e14930576f3c06770259f0a5b92d2cac66a7c36a75820cf55530185c194c7601158cd7d4eb3febb17d55c1bdc9a6a43e7196f0eb6cbfc4dce1a8f42f9f44abaf3c7cd4721010ee71e16bf4489f7e383c87d1b629eb18a9b42cdce367a1d3e741e3a2381f34861a85903df0ac8303266f2c802868aa7718053c9a01ac18bbffa8ac76ebfebc76e2d847b17687374145300c3d612e742830ef314675554a1819db9897b5d8a56fe3b76ebdf7184a021952b1592b14f70cb9950af21953c9e67937c65e4adfc1163eb1ca680a64970fa47ed79a50fca87e7c06d523846b30f48f13a988ecef980128b8e608642e190db949542fdee8de5df5c95d1f318668e6c5586fe369b763d5d20b369031d4ed5ff483c99482afad3667269a044fc67f5af8721977fb6df4da4ea974954d10c8d4effcb4994d5111aee56992ccb182c75b58c3ebddde83221665841f8d74eae9011ca7e6cac55bf7e1bf3fcfa5ee456d37bc9170092ae4904c67f82df6432c94ab700250284e3b7dae96ffe618830a586894ab2e1dff3532cc87378862b011b71c4470388e82d56e924de8fb8f29654ef28bfc911d9e3b57e029a7b60947e9bdef4e9d757c02eaf06be28c4bd68ebc6758b84d8b24dcef8ac27dd12202ba8779cfdf71cfd4a0ffb39205ccae5998cf72861cb505d17179948b9bbe962661fc3f03ed7469f70955c7e26c551f5d0ea65f7e865f2cf0d5b2a85262d5970a34205ca7391558c58509580b3afb5cb93ef202a911630e927bcc84986ead67c8c3f65f897ce6dd837b8b3813e4a3a8a1fd53b8a72d465c315288d7f6e2c232f151db99cf83b99955813c22f7169a36f7c046913badab2752b1fefc3e359979a97990b52c6cb2d95618ed5d2fc3ca910c6996a8180dc78e4f329c983920724d87e06f7421e88facf0fdbea2acc742883e413c8b21c561461a2cd98f2030554b68a7bb18b0a846a7c04e6bd58bb273ce4962a9d4986385c7b16b4240b8e858ef1b714fe7a20a83d878e48f000b71d17cd232ecf1b9649e8fd59e9d6159738a516081a1d8ce8ebac7104be74d804143c639f9e7277e3b88c150b726e0482e81ce640c2b417145be4203ec05cda447a2030c8b81ff9e291fea4899d6fff0b7c6287f0298335354e6b0495d57d30995697f49d1692c4b3f497271f82be7924677a6ebde1ae2b29057f4e0dcfb294f002d7fc8cda0c554126ae8448d155d7df524fe8c6e20e4646485c8906d2c5c9a7bae7afdc4d59fa1ece6c0309e7127b5f7255b111cd5ab1bba9aa6e539e6d00bdf573c9c8d383aa30b44acab90df5ae853e0ddd32af74bd397c3ee313f42fb019d39a9e5475703d7cdd99e1abf4884a9ff2ba017e2b2f9e07b8abaa1be24aa2e8c01fb451d6a1e50eb0358164555f6dde49cfad52d16f690660ce0e95df3734b3d77794597bed7649119ab7ae4dc77cd834a9be2db825fb7aa452f5ce329fe0843432183142f39a28f8333c59807f48ec362a531439faa70f9086ff7e16d941af124430400077fa9e2685a5c1f219a5b3257892742dca2e828efa9724a13455772a936e1fa4323bf01c94a1443e5c05f9a13908fbf1634e8f58a6a3fb630b1aa768aaab96fa65466872911395bf2cfd6247666e9c960d3ac52812d61b4cef280bd4679927f25e88a382d86fe48f0d1f291c17bdadfabfb411e295f423a2469a8c4bf0e616fe7e582e546f847fc461861f40793238be17cc72f0e6e276bc9077235bcb5ccd48b1bd80e7b345ebf22260f1ebd7322564c20319a1e005bf417cd9c44f38618c0d3d1af8cf660ddbc92ab6d7e586f5e5f5232303a64e70c66eb20318ba15ed8de874ff5f4e9d5cd0711382fd3e7f32bd458c00f59e0106cc3674f3ae516810d0b216542b47ba88d6f4940d3eaf03bbe7f3bc7be0d7e282593ccb6f2126c6a5cd2107f7bc9bcb46bab6b156502467a6775ce4a780938a2e19913b48f58a50301f7b061f28d6da60f65d2e1b7d0d9be9ffaa2c2d99b0968574cda5605c2ebb4956e9a57571a957ac7f6193a0744b2f249ed993436ff67aeeb23da45ca9cc3b3453069c4705fc4dd9da3a3c2a3e2516f09a47449fe5f2e9a0a9d2a531ec2291c58638db78e655c4901a041195cf3cc89610b7142cac95bdf14aea0000c0f2e3d74e678407c402bc044ae466741d4a633fb0e627f773a948cbff92b64d5b55d086e101d7589329cc6a6707f24b76d9de236d25ec3adfad0ff58a0fcdb029a78cde4513e1c1405f02b050af74f06beaa12bf732aab220976ca766528e2718b5cd37a725605aaddd36384c00a09767407cb8c68d4c70e0dcb2d87e8b7c7339ebf3036dfc1370f1a6a99e1daf62b8c96ff95f698d5a7cadb41580781f7e0d8dd0809d4adeff9052960a0d16f5576c0b12c8345879c4a05466f814827110357ed4a93431bc6a7bbbc7ef2d5631632025f9d4d811399196a08dcd469871ce5ea0f2ea299be87c7473b4b1e48eb67932ed397f5554478637859dad8e1726b343bd169f4cc21722df30de1a82bfa50bdb5aa967b34d6d288e5216fb36e121135ca120dfe3078511b9db81095114be5ef707bc93566cdb8fe7b7ab5e5eec816214f67d566fb71a403dd2e0ca9711dc5c45b28c9e5875a4b28498d551d231d7aa19928535163105d1ba2f611ed3a5a65f9d18ee1d81afbea7d0d04625bfb795871b1cc8eb1db5cb0549ee598c8c8c338e71c00012ca8ac9f87d173759cd380f69cf46f1880f3a0b532365f5326d137a5e2da438de087e6fd9f2f007639808e73e602b59b8fd88f25f4318e3b137be7340a00e0eceada90ebff60d9d301b9b655aeb93bc8cdf2f264284fa75fa936a4609d3bd32dd1d2f4498ca1c1054e69208b841c0c0387bdf6f3ed71f7c4b69f3ced525b10aa8ee0eef10d59f74cdd2bc4e05ab753684c0f1f980eb0cc04ae0b51bf5193d31bbf4c0227437f4e2944c57c6220d7041122eb171e617ae4c248aa5c5c59dd0986a9dc2be67ad2da2ccb8d87d7b2274806f945be1aa875af483a87fdd4f52eba72d83a4c08656e79323ffdb3674514e18968c2a646c57f0cb9fdcb142c4a294c51b5bbd5b1a849858e0adce0f5508fb3b572c4b5d14a29a5cdde0137d5ced77ca791bf6a5eefaec09b103fe7f471f17c42d2e111c2effd59dc544fb973309bfa8f4761f6aae8d4fce7a186ecfd5dafb76165a35e6003128518c78abe3b2156d47d55a35ec6b8746b08db1c3a078c536b5004fa43e99925e9db68893b8955909cbe71f01dbdb9798e2bc5d0b2b8b4ca122869bd8bdf6ba9faa4d76b4eb7230a950e7fe6c9152500d61a676f38e86a182dae5837ddee337a5694dea3ff5dda8acfd7c95b1b3b6951e2b4943975188e7558e98d03c3a53a99568015065630f0a3fa0805d79ca4d7a9697d2512658f96dd45671944ec5034c9b762b60e8734e9232a3ce36ac1584f6546705339d1e896334590b4ee5b23eab6ce555f1208e9ae23ca146e09ef7dbab938750de6b7acf11621687fc8c2419f8f637114af10c81fa26a75e050c4c7fd1f36252ca147a32a88dd4df79f6c6da096b22f6244e6abedf062597243f78620ce8e1f1551b998988a8b4cd3b97afc4d5a88c8e64a87f3e89e5c2a13cf368164a4075cb36ab64348228e937ae3df983c6071bf196c4f427d46f45a7973f8eb68f24fbce770799fa091116d5b22274072681962752131441269de4af2697a9395588f11649643124fddbf8677334d5ac00685b6fd614173a9c4e7c9205075ee651a8281f6f9af316f773cbd12d92ec2113b8e9e5799f3860c1ed1faa399ad4e9fc953809ffacd5f1ce7211d6d1f484bcbf79775eb8074cd82e139c92e80a055046dd65128fcfe9715926fbf7e3afb8ce1d4e8cb048b04b0b96c7ba997a434fa81bc36420f65f2adfead16c4ddeb7ea539a533be9569414eb9fa5b1f9000f43558867164a7160e3ba3aaa2c05af516bb67d0198cb2b896fa498cd875c7595f21916bcd2debf8ce7739245caee8dcdf9d3489d14c3916cc662c2197678ed3606740838a35c068b92bde356355c762c834f7f43e380f23b8c491dfd93fe67f318e16face11f685b105a53c0c183bc054d10c4480877e1071e9a30872001047186ee3aff3475b227901ecb0b361e06a9122aea72ef621238570ed2d8cf4829e4beb0e2961ba6b5599255f7760e9d7420deb0a088b8600fa3f053e95cfb80be5822615960391d70f91d32d910450730991aed74c6df2ef421446c7b2dd97931557c36e7b83f26711b998d350016346c95d41c274b367422415723e6e2c75e06f53d6573f5aad633fd496932f061ab888577205d7b27521ac2a51fcdaac8332ec656a5eab644732321d00883149ba9035d18550486efd926b7d048db45bad707f14e5100ed47b544c157f60b27e516d08dd5776df5dbd459ee5bc64e9ec253699ca5a0c0bf99a9bdeda1078937be9ebef4fe7430788777642ebe5472f4cd14039c85374a0228e16e0557de87e62a2b1248b6e817dc00a3d14e8ab24de10f812376542e1b11347947d95b595fa38b22312e2d108671067c347fed47bef47e82c702ba09b5d1d571403f53242ae0f7a77148a4289a62cd5f35549a36e836ab5ac074e6b4f9350c5990031522d7abe9c40c078d5f2f5bbc0a734b561b93c99b6c2a94282a42dd58aa3dbd6f07891050ef2428283184a955a357efa90599c4b6f48703d9f37dcf0a37595e5925e15209fcffa50dd7ed8c91910fff3ef542b3a3eaa0b60ddf5da094641f83b5e7f48c2fe0e6ea03d86c376f783c0538abb63a10abe67c25b4fa88a70e4ee004a2d65cd86ba92d4db188b6a3d866c86e1422e0f9a52a41d8ebb993cb719373dca63fe29e1c48b18b745b221c6d42d7f528a8f5b0a2f85d58a3c971d68831cdc57e2e4dab89ab860a7f625d3e7cd3a2b3bc1d56a613598b4fe041a03ddad2d8ba6384a660114a38de50489436ed5d71b8dda8d1dd23b97d2fbfcb51de17fda1b06dccf090b03f1093c0f122a707bb62e4a797c571513e0ba10c6cf5a5f1ea2ef5f94832c4e61f773fb7f3a12711173eb4059aaee8bb92f36e8e5aa2302f6073ced682f4d50f2b1103434a45e12cfd9215ab4115356f1e5b386b485c21fe0b93301943b14bfe66911111c3d929c44df9bc959684e7338fccd1e6b538da1b951e491c19b0b5bcecf05cda0b68370a6cbd4d924914bffb1a08815115f83bfa992db390ef89268bfa5b5494c9a27de8c8c19b335630bcfdefba637b0beee2244c4b6145f92c1baa9ca2b1a0d6499caf7d87e64adb67de6d3a48ba9292b6474d8542ea7fdc464a914f955144a573fce1e3cb8e6b30383e7ad2d3bfdd06ebce3f8b543ef5592a647b94384481ff71681ab6fc567dbece8dc63e8b735245a3f64bc0fe3b75c372b2a74b6b2dd4bf9602ed76229a3ed5256dc2d5b0d8428a41917c218bf30e9b5e657d03e5e8f7fe86369e7a7d6032415bd83e0751a1d8daaf50b4c672941bd3502e4c147396a8e0df72ecd9a31d721c07350029a660d92f8dac865f78a51e03bc9f3ce1d9b720128f907314dd382f8b5017f20debd2c24cb3e7e29726a93873a524762f536e00b2c6c566052cce5d3b39d011d2cb22ef886d0dfe0e8d70ca93b0f18434bfe8bb6e59744f84bf3d5ff043b3d8d471e624597350b2a2f07c533f08beca06a7d7c367c32268c0a2301379bb9ac0784dab1c8f811e885c9d67c2dfb340f6725d8baa88893d2d57d14df0ed60aea77d6e0869bbe36c84a44944961227c3fd993204ed7391d79e34f44e6c927617e4dc13b195e9cf827187006e660283f0627f97ae8afdcf7d04102671fa6ebe6542e1093977deec26374e77253990ca925879b79bebd44d2c3130341b5d67447223411ae29854c04192d0a15ab301b56c1db3446a3724ae9789e8147a4446cd2936625f202ecaa5db8b8f1ebd22883f950c8c6b79f633ed41f15cc65355b259376b7f5706209f5a5fe5de52cf67327f499ce71a8d2cfc0d702121c25e06a0d5a0a227c6d1b399bbef189c439cbccff6b67aaa2af97344213e654a33a5595faf5f1d19ca0d65999a0aa20c3de3ee1ab96a6227b01b69be4afc645cd8edc67f2e475b58082c7de55122ee138b684048177da2e1696a97d3c166a9bad629af1b16f981f4fdc1e93af5b44a36365a58f8ad0c1ce7fc6be95fc5d0b1ab630b594b683cee9d40f97496c7c98d759e5ff1ea826fae3bffdc97c442cbd226396acaf247a211149ca186f7fe81d24b1a9e44b0b46e75dfa837182e08282f57667d060b1a24871b0011b19b963abaaf3eb2a2e339b5721e15335fed7ea1e692f466bd7ec7ecf54c9d85d67041c96988308d5ee3738a83ddb1d9e3b6dd32a6f0058477a7c6e84e8dae06c5f6c532aca10529d82c48ce44998ca1ff50caca220dad4e74508dd8637b6e343afe994d0ddd13a40d4cea2648e2e6daa3ffb3f81c5dbaa6a3eae05378538e1e871a15725b59c2915866521223233d613f13ce9b775360943fe7e68e43074ae71083ae3b43f83569717c1d4a768e6fd32a744e4f7749570e2ae064f3a310aea7f8641a69948146681b28c6109b20a4918b2093471d067f5424b48654aef95c1fb8787dcb48eb9b06bd87f51a2a4b8c102cf886add400615423f1ca43bb6a811c698030ec0f7d87cb7289e27422c469ba85eafd70b5e8e5ec4e0a78821c82fd5edb9f33c941db64df213a2f89b8bc69da4a7c584ff6ea9a3c5e31b04a1630c529ff9ca9be78f0b88f4c9e1d110f2342798f3d0500c6f199a590b00d6f703562edf79b18c2ce8efdd7ce9b40ba17579c16a3b49c0aabc5b961a4026c9b3be948c9e7927ce7d835e886876d5f0c999104b7510884c64cf4d7a7483f65402c93aa47719a5a294bf49779dde362298d512f22bf6e3b8df2b168a53463829850c08ea0358ab111b1bb8a45c11e957df3aabcb37127f4103c2affa8d21f143df90f7f138bb95d6341c1a34b199c84f26ffbf10a15f308177cb32d9deda51f2c97b55cf17b0bc3c7ff7e18662b0aa307a5153efdbf8588a165d3ba0e2e57a6c033200222fec204ad1605b0810e3974a99080e6b4211999647d12fb880594ed70d70ef0467e01405c600ac4f626a7bc07f7941865a8e780c66fb88747a0f021edb7c7e3e34f3dc0b38ea9a9a253d99765b115385306a5672b5bd135048d4b3eac2a744c2f425eb9355feb8dfe1f7295ca8060efb3b8c6fccc6c8163b0d8b01cc27e7ba3ef11fc19398e045af6500259ee8618a8936326a913ab57ae4eff0d4ce50a29ccb14f87fa3176c0d2a8cf5baed9a70677afd4bbe9d4e7b6a1efd5850566b40ecf33ddad321924df02ff8ca3da0cf2cdc387c749d75f37dc25c7542a3c6df64374c457051f57433d6f4cc3b0e375b7b9f270b3497e6ad745ad25d10dbfa6f9a370cf0a89ddb147dbfa0749dd6191193622c883dab58a554a535f3641b4726bb3228cd14ede069623941b32cac0dec4836fa85ac3254dc216f6cbf01976698eccd95412d420d126bc09752074bd2de0d0b74f880b59c155c05c034577bc9f9a78a25711de4a76e2c90b8d562d1d94ec3f273dda9da232dc74307a5129fc0d8ea344036f6365ce3db6783208152981df868a658dd9483f96d2bdeab6d30b890a02718effa8ab9b50ea1d9571f3c1af9994ccd616aec2073c4ea276c924efe0e9bd49a34ed77f088fb607c25f4154e4fadd001aa303758ed061ae41a3128d663221b554ac52201a0be7ea28c6eaf8e56cbb9183a44763f68013299a02c10d5104493691c8d1950da543c5830ec87d3acf9c8713be5724a01db2f357cb45022a29bc7be742f0c87507cd821c9cc091d884684f19483f89bfa0e590cc7471ae682f7dfaa283a21839a16ceb0cd5902ac9946a86cc80cb7d9532ba08e6e3e53725999dfbff564de5be030fb60079794c56d1f79804df4f13fd4f1c949ed094e9ecd7180cc4cfdd89f7655d997c3756a7d78b0ad4e3769be75630e474cd15ba19bb38c11711c311cb2770caf82f837db7643f4239c61cf41f4c4d7b157d69ad305835717c99294443a5dfa86931d079df54767aec9a62066bf981da7f5ad2c3367f2f7d456ec54368d326017d84b772bf971d69e16f292ee8868c2d0941eb2974b322073ef2145f9a81add3f77612aa92183326ba521d943b7eaca9ab8c34bff60a9168a7baf63f8f16e4869d1075881979c1abdea14e090000e3d26dc1614543d849e06851ef4ad209481b20fedd474ee4da363780b96d52a77300060c92e81efe60d8b3484a73ee962aa55efe26d5e3678c1f9de08b78d31ce4e0d88ddb21b70a101285380f03d9eb043adab5becba444f939afc4ac9964d467365cded011c1ec61db494fe3ed80c3139e7dff7cf6b08a9eca610ee3709aa5e713a937fb510937eca930d20cf6f626f2721d903f3388c2ffe28bf6ce0f31d6a5a08b8ccb9ab376e30ab11654282cb695c5b2ed825408c990b7a26dd9a7be34ce9a61f00de72e28582b6be9461b91b02e9477aeaab76a9fbda39b7abf34ac481109097d16b95e4221c05c26830bccb416e3551f9be0024efddcce821c765f828d4a39402b49c9be873fc7bf7a028012d0272ee5c1896f4c5aa910595d04c9d67dda7227b9c030924e896e308f0209fc8b2110298ebc061fe52f6e5c511788c081d9adcd437c80a016a4c4cf5336a49edcef4c80c8f53b6e83384f6a6208779eec08d078f9e98b092d23feec18ec9f73b36d3ef7289f0a13c842af9e7bff3becbcffcec0d2415757f3ee5cbd67f85c58795b9e851e12096ce47d9049dda288678159abcc72a1d4ccd43bb6ecf7822adbbb9c65c4bfeeb03b35a0f17e32ce1eb98c485bc2b634c347cff464f59685e07e62f26a8b78b4f4236b46bd141da6ec597d5b6fde99ff18751fba3920191db36415b1f40fce2bd92856b5ff0d35f54cd0a8d2b7681a13b6b316c01dfded1d3b1fa4b0f6ae02f37c5d711a120a91194613caab090c3016080fb818924a4c332cbc9eb67550daca7ca429d9803d66d8894ef16bf2dcd5515574577cfe9f264cf02b710297f3b6c9a05fd04aea1b28d0132e30d14185335b6ca69b15deffa5743953da8f138f23e83a1ee54af7293ed8bab983b470422cd5df8f794b004e6d7cab8a186eb6ac138e58518bc46a3230383f3a40d8a8198f086fed7b675a9013539b99179a7bbb804425cfa9842ba84e343eecb2b31d38487c3cc0fb6921bc967cdb10b3a62976ee865c7ace74ead2de2705480d2e830df29a993b67d2ef15c2b40bd7634d5707c35b4ba15dae03c0b1f102faeb4b22613b4d13a87961e69146dcf69cdc441af928bd3b2355a339916c03faffdea258aa86e6b22fc7a9138468d9bd50fb8a8af46b3f6318cc234a7141ff76f0b6114718d17173a34ec32912a86d72cec06956bb16b3338636e9d43058ea5615d9854b3fce59aeadff4a26dc70aec0c87b352cc5e1f3969472eb8e99f57900dfd59ab811f5d9879091f29a6200938c372ebb56101367b97ce7a639d56cf1f66e142d16f09e885e2b228d512f3941f6c264b6bf3e0b72bb226cc39e6907281cb8111670960e1ebc58a4bf062a6afd634ad6ab937348741ea6bce2f8e9e25bbd3250d34939b4893875b09d161c53c30667a422ee8f333ce769069238a0c17935385f6b5a381774668a87da88566d0a4e0554337987e362f032881601c9b8db1c71326e83f9fc7794a8dcdcfc9615d034034ee19800b52cea39ff7b01d0ecbd6c6d2d98aadd631cb19a3f0f4f009369728ed7e2540c1c1d64cfbb55ff866f33949ea39bb25c42757bad236aa988d8a1b62837ae7580cd0a0edf07b368f2c8806232c65749fc6eefe4f46c4db6c2a53ad98b4708aa21b25e4e38f9a6b50958c4649bbf3d5d0b5e6357127ca71c4e312a1bb421c140ed7996c3709b06a76ace8ee69d5804fe4fa0a524191374d06a75f94577071022b4176d3020158ee1db25857ad56d71d2bc337e08d105eed7014c3d6b7d2a09ac20809fd57565e6e1e8011a2f1facd554dcd25cdf4aada28138185a512bc43e8b935880cc8d708b5d09f17ffa91ba1da2302c8252b788fc7f53853b73a8b27d6da06df57f883e4e38b0c6762c9f46d9bbcbe38186eb33d6b6f9e0d40f92991daeda9007f73a118f1b041076a648a34e313822cdfb2f2a3ab485a786b850e09e45e7fdcb93d4e2344b34ce8f67b5648f5df9ef39dc0e7ceb692f74b70a39e13f4fc55530a30c237c4ad611803079e684302a646c6b3ad93fc413b83a438bbaa8798315dcc263df3d3ccf4a44a6dab5e77541c1d4fa75a1c09423e897d16f40f68d57d4788c36eda63d307db580de90235508bc579bbfed44de9b5cda4426c7ab2a841f392312ddf341116535acc00c16c74d94a7bbd35d91ca27d7e933139992620208a492b43513dc97eefeb6a3b3fff7f6877012a52a51fe38ed4055906104e2559001e4da5b2e6a2cda7612008afd01e2a43b2b4404823b0fac54c0bca455f3a2f0cf22acadd1feaa462242e12530d9702f30c9aedb99a75bbb071e54a7821f6c21874d1cee829d6234296e082b4240469daa7da98e1405da0bfcac7e1b5f534d8e03058ecfdfd36ce7ee3e46dd0f4ee0b318707baf4f64060d52f85a06b7980762cd6fd7e37eb0b877b70ace39692b8985eb3508071069c15342c820b21eeef5426f85993d2265eb506841529e3b6114dbdd14c6cd703dbdc999e8fc64d65954d41335c813939fe2faeb2f36b81bc29d7057fb1dd59973a0720df4a707628782c040d94f66857343a77bda060a822c4691cf1885d9ffb51b51ae3b2ab68c784c5ff6b1a832c8ff174fc6ac067e5c1755f7350d6303bbc8b0728b66de1a65cd93d206003d8660dc99b32414b426eea40db62fb173d79abd1aa92bbdd69a7f8376fda742d0eb42fa254c17f59ebf096c09572a65d478e5416b311a322aa687c8d14c0d484e1c98c674c1cf846aa2b0f86449f77f030a70868eebdcd6e305ec5487bf59f3afccddf1f351d986d6ba262d72eed8cf0336b0f2f3fac2bc4ee14312c98ed15b160e7b42d03ffb59b71ff75b8edfb8f5b0d9d7281d0c7f4d773f61f0b914bbfbb6451da616323294a92827d14d64fc419fead39fe7b25186d0a6411942c4640ac63d211715cfca05434242da0b1dea2bb881d611bffbdd741a5b4b17e9e272530273d012b1e8b1538c009f4a970916c8fd279148ef1f28dfc48c647a450e839fdaf8637d8c7b3ccf8db5f2891e777dedc79e710e27d7a4bf2b798932ee2a8b6ab2c6d2636688900d1838afa9e25e509e085c100de328b003a927962764830da04a392305382ed73bc15a42c049889f4f38472158a04a7c42e3991a4d620d9b1d92dd2f90bd45ba0234f47031b3476bd19f567dd855adec00c9701328d8fc47b2221f6677f466523c79c7233f322b01095c5d4c006e1106f064bec50db22c87d4434faeb6f45714fe4d745147a24e0d501e8d1af69aa409799f8d96a71d443e0b21ae8b8b1d0f3513ac875bb9da145772d7c0f4ce0529bca77d4f98e61d12b5b107698e9c28dacc8d7e017f641f2c64ba69059fdcf0ea0884b169c2d262a809d99fd8ac9538acfdd77f9323a2aba149eeb6866a39c6d81aad3c74cfb1d33defe94b1bd574286d9d1604e9f355ccb7b9b0eb870a076454c18d5150ea87561e7001ddf7d90df0d8e2171b9bf28eb47c6d2d0a28c87e929e78e041816be1fcd5b8baaeb3bd2ad52093e454b42822d36a78058d5794eafdbe31440d014d52dedd33bdcb4a697c46fc239f4c26a0e890a46f16b91e891b33428b8d08a44e55ee81ab7afaa45b2f3993c8ce01194cf8982534869370ed15bd94ce528bcaa9ae9a4deeb7decbed1a13fbfc9432dab17ed0614b0d1827ab679b5c38923725d85a15f2bd114cfc153e34ecc529b5a7334fea928f2200beab2e1015cd3a8618999fb7ce9efa8711ba37935fa5c9b9b707191e49012f69fbce88a6bcb7ed7ed9d602defaa76a4a4d69b6d45e9e6da43d8dfe71eadca48ceae6963b9327a650bb4cc08e9652e68a7b2cc282d79258d164145352fa3e4324da7ba5d6680f6238fccfd242890811de4c1f61e88fa8e8ea9017c494e652380742721ac3a9ddae667e4f3427749cd97afc9b980d9d09645a43040d4aa27fcca4cd244223e4430a4bf0aee38243d918ebcaeb683dcc9a0226526456e8af41711ca15ed857688e2835416308b67445edccd854e9d2ee3a8e350a20d8c89f552ea3d64074f2a7eed8610551c2dbc760303b812db981c98b5b1b7d7601136cb4d6b762c5e746620c50ce96329127ad6f35ece06e4e925b2eb50bcba4c864c8eba7f67d59e712e0d3c6397912330c5af40951481ccb76684061cd51871de157b039bc263c95619833f12ad02d736d1d6deb08268b204e43e83356686ea4584b8f12d0ded740f6bace692af961715f7e9cd2f071c630613b92298bd64910db40ca011d5b70b28540a4ec1b4ae5df4cec8f2b09751ede5bd00f649c68e6ca4e7e51609a66d4f2d12d40bd491b0f3e777499c90367f157d1ce1920806c258da4cb9bd7df9e2e2cd2257fa98d8df47cbff9c9190f2c7acc741a50a5a882d6b1b152a8f10a64eb0ba59dd54b631b4c9776d25ce7f7020a87f01634c069de6b69df42262a1050bc1ca214f03cc2c0f62aec9d5ca2c364d093e92ff78d8b4d33bfc6b5b090021e8c38537564459e92fd977de3474e2fe4682c503edd425e71072fcc68cd54c2d7425b9363a86f561625b6c3f1e1a9b80eab60617cc122e5c8b20fd25e31d3618e5805493def015700d8235e5c0cf79ba3458ce9b52624f324420956d477f4b3bb42f7c43fa7880b9fdf4451bda8d8411928f5f99c3d1a069d09ff839cd8220e33935cb607c08a3fb4732e74bbef49651a76e6e363d4d2f3710969b0573beb77c8c47f5b9394b8c5d644fc66de526eb4d2176a1fd5bdcb48368eb497885393cb166be79553b57986c80e25348197f89b6023ce27ac38f0b9f058760ff871fbf050ade5731d8e61a59d7c64af576386973bf85c0cfb253b6c5c47ba42566562e0ccb473725d3449587307dbcba2955bd9e4497fd7d9724f2f5286b4c89a052581b095f040b31c1e0c2dd0dd19adea7378fcd47216c30fb0023e22bab6072664398fdd78d2e7a3b90324ed4159a2c2626af763a3b57f1eae129d6bb1344e252e74dd5015c428b2ff04be7702148c302cf7e6e2a8b86cde52353fce","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"e51cb6d05ed027db058edc159e71b81e"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
