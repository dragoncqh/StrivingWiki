<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"62257fcd112205b98abbca66c7af1abc22158ac251c37c2dc46d44731f2ef282ed828007229da1a7302730ec8bde0998d2c87ed563d0da5f72ea6d72edbca6f020e73cac255c83ee6c04498f686da7e8c7d7a0d1daa2fd9c4f5108f7c49d539bfe2707dbb89ddb51a42cd34cf250fa2e732e09faac5edc07541d77ada442507ed84a2aa74e679e6f0983c6c4371d3141fd66861ee1261ef4029b935de8e9546cc28c83e4e57decbd16179594631b41d16b1bee9840ec51c15efaa63855a93e54256182f53c8fa9581d945f1204e30bd6a2e4c90e2d3c2e5c1332f86564c22b6f0dedb3fcc014fdb43c10ed33ac9480c2bb1693fe661b27bd6428e5c66eb43a24e3c72baeee42675809b665bed5a650867fe8c86a40b329c750405a52dbc00c26c2dd3eb493f963eb3f66553f122f721b4f8a38c73f3ad2012e9ace3cf2c4df1b1f86bcd1052e8011067e3e78682d3824410681ffb3ce7026653daf92e13dd8b1ded340ea8e328d981cd025d1f25a75601957d94787bde11471b03b904415bdac164d9e0256bd1b599a8974bf0945a13daa9f8da132eaf309bbbce59d1415d5db32e4c1cb25c9cb9f65ff7dc175b0b2ddb45652667f4a3d33e0e567cc99538bdf26ed2f947c2b8903809a3ff6cc761b3242e0478f8e7fe3ff9dcc26c3b0804e80397770fd708ddcae7af2da1e49ced1bc3007669835c97522a0e4424ce0cdee0ef6cf890b11265dc6e5cf27c3a736a48ade24ed5b30224b9d8db974d927a7d2d91145ac59b702a7d8aac6d386709371a1217d2ec0097af393e36567caf57f2ca2a92139ee2c0a7696f4837ba9bd3166225b7d11b7da5ef7f7bb143bc9140165324618d32997b83ad4268a7fa4222701483b70984bc9fc0bc7d316cc84c40b022d8c98d3d8982cdcb2ae0adc8cfc46f27757dc1fd8201e999608f8a3611d361ccb3f2520a8c34a2df5c1965e64cc75b86f27b742fcb59d3c91f64d2418e51cb4271f286f446dd1265111c263e83f68fe6bb3b9de028257bbe88216daae12101473240bdde7b70b49e553fe3215f770cc9e33f261eec63bbdd67d186093271de4b72a5035eb69dd76ce58b95a14392a2b9d8d65da5e8db5fc91d919920381a36372af8320bc8f9efc3290cc6cd8dcaed6028a79c154d96f596c129bef1ebf79c594467739bfdfaf2e46ec4f233207831048b809d09c5a1ac596ff14916c904d4d7fcf2e3f3f73ad51a8ed8b2bb0ec52af9772d905625486fdd86cf7bb259387938102ee55e4ecb0095a5c8592bf5eb95711e489ad717a635c12ba8a618fbe042d6bc4f82d5b3879eb7a95bbaf201c11b4c15b156dd63d80081709afd8a749aab8492c34a64b18a6310484b838401d58a50754fd1325a7546971bdcc2aade061ed7dac36697e3b6f20b49fde10a6f3cddbf22f22ad7afff8474a024595c1a16651474bcb3fcd0b1fb684443be157f1e4ecb649f5927e123505e3f91b62384a6518e4aa211e735ee4c726cf48629ddb9c4b2ff4bb2aa31b8bb185b2faa20ac3a7c15af8201e57014fe77ca8646678bcd5a137be5034a3995c665db2aa7ab941cf9a0333334f0933742cc7650f564cb1ba33b459dfb32775d9a3f6be5b2974592c0d4db26ea1bf713c85380683da9d8f4b2adb58a107907dc4c9fda381dc8c9578f49a510401721b6fe5c94a8f4b2f72a4267a5f3f055a0b5ad3890aa3eb8b44a3c5be16d86e4d8908c2088aeec509738552fb1ace1d36d93c87b2274064ae91d65a4b0e751dc195cf9c7ceebdd9e9c428a83608cae3fb0daa234b1d4d6c99a50fa6aa46182cf9792df3be7855637bc4725ee1cff21a8231983cbb02681afa8bd4c074b8f57017a98e91c53081fb685f85d5daf2e8d7bdabe3b9d4359752b4d3b207c5420697162f4e1f4b5dacc24d9bae73262748246cd0ab5af3d3071a022f3eadf8165ed3d4423093b018f4f117c3cd8d6571851e3a229541971c1d43ea09e4257eca27807a64010bc1030abea0a65f8c419e842398f9ffa88fe5e7c8eeb2fe71ac61e71ed8caf127249174a3c77a649eb02346e521a1d295902cf977fe85424431b2d31d50f00a1c989f29ec96790748153c320ed0557fc8c60f9a4e647915f9fee589f259b25918baa5c2d05f27d4295f5037202cb6756329a34ce3b062497cd23b93da17220b01a9022191d3607bb9a9d0ac32e638f8458444901ca965012fd59790ab30047880d0d75191c80abe4c9d2543210302e9fbafe7d155b3247e637e73dc6ad48284a1379f7262181ce353410f45f1c52a26e2e903c727e16c4dc91a1e93c8fcd936f0b2b91e968c773e5fe9cdfdb3f66bcaacb770e0d40c75e5b91d6dee4aa92437471de262fce5a886ee4680104e7208102531e502f0fd3bd7054599d6b7e21869286e3e6a612ecb6400788305aefb58c0ba375afbd0d1685fcccebab802fb69a7edeb268f7b740d4e38384244e67caf7c84e6fe2a1c273994f72033b883e969afe2445b956463146e7ac8876fb0b48beacd7ad8cc2f93059c02bb3a29d4216dc79260a25947ea0af5cd396cde6a9ca32d3341916e9f56cc5603eb3c2bca7fd30c5b20eebf17bf0691a12fce27f470f6c18a8041fa4fa9ecc280073f673fa4a0ad403119522491272b1111e7c67ccf5aa35b2dbe4b41612fa3a06a0322591e87f08d2cf2308e9cbc1f30e3d071018265afbdb2bbe970d7eb25be92f7971c5f25c5030906415b3fa4b5921ead6c94f340f08f1035674b31b27f2a4ed52772b2427f1931e5584c036095ca3adb6a5c6319ed50d91edf41bc89c6211dff6c74d42f8c2722fd5d4666be42f21e18918f2c3c892249b7325f9b9adce66a3fd18f2905bff45ba376846da54746740ec123b6bfbed6d0fc8e359758fffb6a5f1311ad6bd95b9dcabb98c9f6315c8215cd3f7b94601b578d9febc4df70885c9fda25982739b9459b84019d00606fcc48fb091e0989673c8923af1a1a65c4f0705d37247300ff1252220fe2ef7a5f1305ee09fa9988e7832cacf808bf9f653f69d711c2653d93750c590befa5a792caa98587f39bab60e2ea629ab798c2f405eaea1262bed338c3d2ec0fa8725fc27118b42f072a603d906a02ed4bc00f423b9f8e6af82d96eb822b85b998fc34e1b0a3aaf291e664226c3690647682c186f59dd6791e338f89abd94151ade6b3bbee40ab9349c266971c1f73e7b1713e780570df8d0e9b62b4fa2c5340ba3f02bc37068af0ae6f8e9b8a6e639098dc10f5f2e4b68b0932432577a874e5f5df16ca7f74beb5ca4c4828bed1da55411ecbaae4bfe1ca02791a87653f5b6e7ddda378a7cc1438eb438eefc6cfb725a7a5a41ba872a504bd4e92d5a0bd7e97b44ec6e0c93c7abdd20bbd63c251019f931d63b87abdccb7958fd2a97e3650584b212277d2b269daa6e57d1ba64189641c9b96ffe3cfeb4c4a108ba15fded3560cb293a3159c4f077632839c857d51b6debceb7f1f79a4bf97324b160d318714490b4f14a9bd6c6bf92b089727f18ceff46c09b2e7366eb68156b23d4254be49607d7c5ac65f991fc23f6436133e9b3944a578e9a591b73f58e1c79157ff2fda01818d0bbfe828e4ba38a9fd37beba5eb56872641c8f80c071011bcfd48c1fa0ec1774c62adec710539eef21ad58c69787ce3885b09d94cec2996aa8cea69fc623218a3273b7139b26906e188fec563e11ce7ed287c06259d4cac6dcc5aa867b42aea824b426eb58513017cb40cd73c72c4006135dbbe77780994904f2e3218cc1a3c48a13fee4d355667de98699af811c257c8a4400dc13169bdfd2528815e49d6a602c2078e91001305cc719dd45e244d74a34fb8b5f7b7df4b820af9c62ddfa7c8e74346d8b438096c51801be1daf53dc261607d454553914114a1ecf27be140fa61caab5bba2a75a7076ba6a394a46430943a062c064832fbf89ffb97d924427f0e51d085d51f5ee947d0bb3e3b11ec18502203a3b122a7c381f79c9737f2c4910e494128e155a7aa3a3acebb8b36bf8404bb43f80d340af0e1249b5f5c81d8f9bdee3265193bdcceb473bd506df22c18dede415c83484fc6a254dc233714379a36d24ef5e9c7a8773d07a2b2f5918968fbd9c4d2a9293d7bd5e4794f4b48220754999376a614cec50e4125b2e13ccc89788fecf96c9cfdb0dd3e4b6676042327f5a036049939553969f53e60cbd4627522dfbc5717abfbae8a27ef9d901cdc0e19a83271b7b5132d6d91f071b267722dc3d0539712e1113d703e809ff849b6642da71371b49d40b1e8f28956f5e44ea05ae19fd0fa643089728c388f730c250855c534fcd0481814800c0964483c1bd5b5fe74ab38ea0621953b15fc5ad2fcdd46445a99ee93b4395dd05afb279d84ed2d8e087e58e7330a15e22091815b0650c6664a90837edf2a4ca50afa13a2c774b6beb13cf33c3da6a9b182077f443e7b908326171d59d43f11724f3b0aff49ea9ec9a8e99c1d9af0166278ca6789b2a1d02a3f27b38fd8a007e186c3de51e84b118a136cff9d9032cffd708cdcb6f6be108b0bd64c892ffd9f217401682948440718511b614af3efde40dc7d5f313973f8687b1a380bce9e6e9b3a218f3c88ca28a4e69ad479a06cd8c2259e350a1af24289595e766c2a38b6ea8b22f393f1cd19cd9d37c69bbcb9efdf6ffb03063d15ef5bd6159d085132e340f403d5bac9b2367c72c3f9b599e0aef445ff3a60831d094b463fc9acf3e6fba9cd66d95965adeb612b482ac3d93ae57fac5c597e65eef01dccd98ed16b1dabfc8c4d7e65225007428259b87699666c3770f45e287bd8624da48d7c860de4ced7d0e8a5873fee51dfb93f24f64e8a7865ce207016afa77a79ad0f4af1906737be47cd1a51295cc387bd12476fc1b84158af4190341ad6839a0300be360b4b8e42d82b9e4a5ad4fa4baef9faa5b927b2a2dfc54e02e0ba066445a8dac985d87cce641b346922079bcb80b077ef88617525a68c25c885e7a0cfe23cd9ac0e66232ec69f8ee4f9be61cbc7025fca0b06a86bf354b1db3202fc8fb91c80b5fcb59a0cd6e5c5dfd9ecabc0a8423e6b8998e0f61500eb1f96b7d2b53c2c80887bfb83ba11c7c0eda6be61611301c12702d14907ab08e7bde9f5690fdfba2b3632a8f031a5f02c38550668a1aaa64dc1424cabda7750f3c5912a404a7ba212be7a90c2d6962828f7fd28fc8a606088831a70c451d07a539a448ad0bcfc178f7ecce43511c38720a5753f79fca4b266c6195c8f7131620d67ff87b22cfd9caaffd329703c825de13dc6c2b9f30816a2f0c335978440c8ddae28f0f16dbd88e7e33ab279396ef99e89ecae62a9a0ad57257f0bbf1dac01054c9048691c255ea5e6a1e9a64b646f849bfeb7882d0a76cb246082e47559e31961c8f0cc122e27a1711a54d3c623b8174bb3b194c47c60e20a67f6ebba4b0caf548945c0092747b5df9a637ec045153b53b9be09324238e5dc1e23f0b9b298491e1c416c49093d1363f905042c7233105b73e3e6ae4ddd605b27497df38a697c070429242bd29c5f4001e6ea53640a33549d71bdcd50b653340edcd75f2395a6acd5b39a1e55bb3b0854816eb98bc83b7f064b59b083199201d00cc6c9f5e2086e797dc0a37a00f17b1af88381ba017b713e76ad02ddf419fca6a152fffce6206c8d814cbff1f57076caa23ee043668ba64687e110220b4366161186b42ccc34e709922b8867251f2af2b95a3e5b735e44321c1d34681ba75b6e49d566ac1e6f1dafa2ca714842368634b20e60e5465513e62494e6e3a9fe2789060d57121026c612b28f3f469eb6eb4e852ee53b049ec832d67fc64d0f38e6131e63ae629bca4517292b48e414b6a74beb6356efc228d5586a1596c0e02ff87044ddb07359c2d7987357bfd740397525c12766c25c79d01710aaba14e3dc51407e132da408c81a526cb2b647486c07a82151b3675c08a97bafeaf49f9e9cd16e70b4c0d0664e2f8e54c8ff5d857fdc2465672871daeeadf8d3d8a84b7542eed06190363d153399512c1487efaf80b970da947da07656a9429fe405f07b9879dd2df1a03b332d3dedf52a267342d7e329553fdb1789f5b1bd284d13811c5b723248ff61e950e49c947c077e3250742e51e06303eb37fe3f1a16bd7716bcd8d7a5f5f5bc6022bff6443ed87c89ca90961b3575b305eb116f3cfb0b4ef2a2d847f627d7a12fc7fa69c1a83e8a9254c028a9f9c93bf17011f0dbd4532112642326ded05c05f53af1db3149a84a51b28ae428edfd09f2a8efb329ac177911c4c89556a9445d54cb0c3875019ecbd06febd07aa261ca9ea1a61d84a53ff170f1187e6a1fbdd544abdc8bb3bc7f3748ebf006c2f5d45f9e864815e784617836b4bfe2c808b4eb42093a26ad57fa0181f9b82e82d3e16086354790cdbaea6cb258089ec2b667e30e23db1bf2322c1abb561807dfed2fdc8f7ba8725fb38a15ac96178808c13c37b90fc18def692def72d2e2aa87c5709d747b6e1a3a14afb3200e4e1b4d0cd637190b51f4938918335755057415742dbe0f3c54f258a367f89add99d7505fe06851e29cf8bba398fde4fb997de4335e2079be1de216f5c7e29e2080c28cfee3f06f589660f48a42f0acb3603909f15c7ac461f22b115aea6b9f1f861f78b2ec308b26bfd0e6f846d3607b3daba28c59f5fc9b4dd195bab970a67ec82c5e2abf79ba7673196b1a74bbf8f48fbc2b782b2cfe9752027dc14e45393c480782c135bcbb68c686448f0fa187c0854ced5aaad09e76c36fcbcc7dbb0867d4ef22aa887c5ea6833f21fd688352bc5c767485b0cd3fae9681e561b6810b3dbf3bf2b2758c8cd918c312e844f95736d53232c4af6afbe3a1cacddae0afe57f313705736ded60d121c2f06ed227a043bd584b260f6c4d6ceadbb1bb67f55c963431998178dee9137ae5da04ad8d1a73d38cb25ca4aa1aa1bd473fd94e383f0945e4670aac67df5356faf87138827d359fcea8da9fe0b834d0cd5bcdbf34c06dfa0ea0d93d951ddff2aa4dfa2f544b978df8f474122d6b9f4ddcac0bcde8ea7c23f643e5e9ec17e309416078c0a122ddad14292fe1878526658feaaf337a8e7d8b406a09fe5927034b3e46ceac3b4411bc3ccc9f93069fbe16852dd68f52b7c072b880b0dc92fb973eaee2059c2bcac2c13b8f0f03a7e3f74f423528ddfad35ea463166aea8adbf78fdf267a63ce20c2e07e636f72f130befc24d2d619c909d4718bc9a2173931020f88b2b50d31b27b9e5b4c19c62d3af4eafeeef6b11cdec9e834522623c4bcb7e6dc76140142b978b19b22c382d805f1925115d8ca7119ac4a350454ec1729238f5c3046d88722044a8a60cf5a59a71e791ba34980b8f15a1c5c751a5ff98e42c55c4c3fe46d8345fe29e60c714cdaf89346e913cb952a8156df47e8ed482c7e0f5051d4bfbeef1d7cccf9b4268248f7681fa09c3a37d342e47dde13f4c0cbf6379967651037bfc23bff46941ceb1ec13d80d29c25e318b61e7b7c718cbc4b41429546686f6a17e34279854d19bde46f749d461d0830cf18e5936e6c455f032519713f482d7e6848b633768285faf4284f8049c3fb5095f15ed7df0febdcf93e65480614f517b52e2f347d384e3ad61edd002115ad32ad25c2f3d3eaccf53d72567ac82f89de00130bbcb3b4be3702d29e85f2dc17642f6195834afe4c16fefd183a4c97018dde1fcbeab8f27d961454c74ef67b7c24c443f0628a3a766a1ba4a74cea663e2258c3a14ff1c5b28743f972f3f634cfd2983f9ea7f3ffd5e72083d215332fbd3536779e1d054cc8e9f3e73715f203fd1fa483805949b5b60ca6daccd7e06bb3618e3b521a9e1895ee25cb405c3b8eec724a23863dfe83aa86af0665cd5acf04000a323eb649b380a6b450c541c41f4fe691b64bfed3a9d5f799b1faa12129f495769f5ee0001f499bb5e4542bf22911c4be780e8bb3c42fde35d6b0e1d2aa43e32563407e7e9444061a2f7707e44f82185bdfa8f42eab674c41dc8e79068ce5912ed03f09623df0581919f361c423e7fe2465252db7b700f5e0d3fe8f21a85c796478974036d407a3db3549d381f3f5658954e8dcba3b35ceaa67db3213b6f05ca149e8849f5ca12165b92fecf82fe9e07bcaaa7319109362f60145b1b71fe5e451aefcb79ae7bc8f3020f382c80f1e0539fdf0705efe30b3bfbca6705fdc2a0167d1eabb1327907789010a5c2178bbd7af8746afce68ee10dbd349a4f6eba1c88ea5942c9fcc13f43bad2c4938231ed335a547f1e2ea3e8fc9f1ed369b5bb51e694d9fa1473e6c8b76d8af75bb505503af8cab5433d2bbcec96bd7b3ade3744c3da0b42b9b077094b02801cf1dea0d4f610ee61c9535c42fab2112f022f4a38aa03fa6661735c95bac83cb4be77ac6f157a7f0dafdf79105fe0f5a232b3c2c6b156f10e254fe602e7cefb2a55b0edd21143f7d93f3fbbe363f6bcf2ad1b9452ef5ce3df74cdd935ee225330deb7d32778443e9b6d14e6e1db3d956c5d494a9ac46f64fdac8364d4077ef35b324cbf57013e498f8445b31987012b103ebde4996c6f42ec548b1d8fe494a2044beadcd1ccd00baf715521a0e141cd1135b11a84c2553c4634eb30793d2c2bfca99594ce1eb30cffef2c0a51936b4a482c81182709aa54a846105ba4e63b997299b280014a2ebc9723b9053d10a23d5ee688333fa7c5b9aaeead6d4fcf172dd812bb261b6725da18692f07a6b36a5fd9d0456ed23050691d07a868891e218cc7d123006f30f9fd6b33908cd92432b733ef9d5b1ec4f78a636282e3830323a86b3485b5f79cebeef2ee667a480ccc1689e3d71ef4597fe15c517413d735e7b07c1049ee856b8f722772c8a2f1e68c25da0e02c175358ceab20fb8a2f7d1d7dd5d4c7f619f2fa7db6656dc20f3113f7822122b4554ebbfe726767bf3400b13bcfa6ce13efd670a053c6dee777f6307fd645b9d24cf58324ea7d02586d415da5d781a9558603c6c7718f8d76644a1eb2dc02cfc88bc78cf03256847e1b71545b9e5488b6dda8f844bc12bc44f2a37b5f863aafe8e0eb8fab603ec2866d6d4a47c1a27ab4abacb168bda54b0eac1363ddb4a6786d4a0fc9303c89bcc8c40a33c492a78880678d453102247b49ec7278129ace6250ed0444f607efcf8f62e6b1719e673315aa9f9291c63a5d2d6a0f4929dac45d4693fb90625ffefbcb4ec919f068dd6871ff6ad2ca33a059c1f1a267f2b8dbf2984b77dfcbbaa451f2e46efa833c0e5fc24ffcec3d4c1d56e611d7cf96e610bbb44cce5de841b77c54c85d305d089c1af3633d4dd703f1cbac325953b1d197a676b65ac207092e2eb5491d86daef57c7af6a9b5d60b7c50f0b84830ba5a822d4d111f86204e5596a04c1ae5370fd37b02de2cf839a38c798d5d8ff765ec5c2e002c9f537de99c4fbde92031ccbf0df9c42ce797a04f9495db3f56e90d53157ffdf645acb74b14073c79df2b1ae7aedbd2cd0504628771f0dd0b4c6b663fd614e4a42636b7e4d2847b1729a3fe1613d7a063949cb78a00a2a52f7599a12db9811a3917b69e572210f7da52acee8a14962c6f2dbef688f304162441cf764ff6e726d31dc34bfa7ee9d861d0f47a26a15b38db7679bd0d69ba2f83fae34a4b92a68fbd056f9f47afe0d0290151e3e58f4693e568f44af4d4d868dd1e0c99bc33421c59a7c211765ac926ee63022d600b2c88d410b08842e046cccc16145d5f845ed9424a45bb615c15a6f090af313a519dd52c9df4c6d375d7f7b22df899fb2dc01a9028a99a088f196a9125fe65a1994cf373bec7d2993dfcae08663a9fdf00c784a684fda4a020b014503f9bf280d5207eec47a22e09a1ca9ef5be0337a9ae9b3f518e6d12a71dd0e87fdbabcc848ab30ef8d76f33f835006369af08228ad3fe9f17d3007259070ad2fc21ebe6556ff29bec8d0bb243c2b3773ecd0823e69ca281a2e2abcffcc350d24ac15047625adadf0955c2f2079abaecc0235b5ff5312308e4603aef237c20d6f73256d012044c668968f6643732b65228c45be8bbc2bb938f0588990e0c3ccae0bdd9ec0edd329863093899b2a2455c3bd851d051e8d830a5d6b2ab73ab04f3e22087bebbf4ae57e75c64c9ed1a459eae49ed3120394af1d7e7b4cb934e356882ae051640410569ca14171026512d3103cbbd59e3c534379011b2e736a8a624aa9aaa3c9ed9d7338dd28929350f374b3bec72b3d2d4a273b93efe444eb52888d98618a31f2cc2f8d601874ac0374a17b2cc78305f8b9c4442dcccc86c3ecc2820b819776e28fb2c0a8a53949531e710ea7076697a3cf5291cbfa810f07e4cd52ca56db08035c3dcfab357f2cb0a5b42d8dd0a48390b9495a20a2de638d151ae997575321cb1c2837a2b39bec73dc13ec27d943873a94846772ee391efcd41e6f5af7c63562c5cf93894d2fd780432e6349d5d136f988ec0dc0e73db055fb1fae58386dab6d24f3ff0cea4856371338689fd90a9a706d0c401295042f2ea515714336cf5ccc1c4b442f3df843a7f534f55e789a090604424693d6b4932a5545e7a1345f15310e54c3e7609c97213f71ccc1e366d007b346cd43cfb1b9725c383a676c2f73d7501d887c42ddeb1d1be928b38c1c964e508e0b3f0bb82d12a0717dea93622095aaa4116832e36ef39b9a6af5e646ec68b83c11d1cebf5e79129373b26376c7146462134a12ae732dc1e66a52371547f98859f819b7e2a288d325c81149c6552f5b39becffb7af7908e78764b387efba049964c79f3905013770b6b15f9f686034e2cccbd97d3f294066b9c5435a03f7cd9a9685b4ef3bf5e206db318a5e531f4bf8f9921326b08900ffaccbaef84f6e8ef45a73bec856c6eefe0823223e9c14f10b41b41b80b09b5b2d005299ccf52a9195fcd4e79f0c45b4dae92fec1ae9e8aeac0efaa0583db4ebe4ab229f9d3ca96c256dc35e50bbf6f116931e6a9d0fb857b4251a361ecca589086e55c66105b71649db78cb1482b97a44ce2e3a9447645a52364774b59f887bf823b354aec34fd2caf2a131d4dcfb540add0aee63efb70d453b0e476a19d94e5d2d82856a779bd91c8cad8e77a24dfa3010d739e0917b07122b13e5e8fa6621056ccad76912994702f0680cc81956e322491385c4bc425e93e41e78760847843dc7c4ed935d1a76b4f62abd505142396ba87c550935dce4aadc6768d09393de2854ad54d39f4323d4165cecbc6a2fbf8ec3d5a465552a5e8bd27d85c462af4273452fe2965fd972feb87bf4181819628032890d780c11c8dd74c5ae3154613c4936c99dbc37af4b410a77be2a6249a4076a90268c479b6a5808771927c32252e4fca144d39edceb498f331ffd59f47becd53b212e36ca2d4306d8b18a23ffc1829c34d0a3b180bb632fc0ff1b02ffd54c4fbcbc24bc9de68d0b8b30925ae99f7d2313663bf316d07a2b9ef1b475342f72b74944f26d078b094e8f38bdde3850f1be686d33990c4d2f55dfc18ec1a1fca8f23d83b284f7b0cfed21e36d47250197b64f572c83b9ae4b138311377b54d83bbd93d0a0df0e81be965f6a71a23979c8a755a0a946e195b854d71caf35af23f3901376302173744ef1c2d21241ce1ab8f18e44c98997cfe9ba91e2a284a096c59b46746e8dd3fb5f078a09a93c9ed6c2c3b91d5ebb73775afe7eca7c53695aba2e83f37fd94953c1351b5515913df8ef37ddec0b9be1e9265d49f8d62e91b6a379d4881f8b01dd5f89dadbab43cf8b7cb043b9d57bff4f0a8e7115a4776141ca976acdd408c6fd6dee6c6c1ba1f56c22f6a7dd391a5238417030bc17a8a35a932d6210f4bf1b5903e5523085f315ed2feff90d357d277f20e9b958b99072645201e202f89c768cf22958a5fc47dfaf16c10b260943e52df437cf66baa8175da87f930845da2b39828f15e7c19459bde0a4f8b593e14e764b910da061d95a68c6622936340e072f3ebcc1d287b5fcf508761ad86e62154e2aa9c9b58f6eeeadf2b02f0d5ea2f42c0b4979111e04bab3403dae9a0f1f7cc6672d36d7c463d8af4d0032663dfafc799b0d1496f16bf9d4c4bc9faefc8c152d630b23a4b0b206f82099f8950a0f9b841f53babe1925a8c1a2870195672d30d835c3e29fe1f05fd37c1e119d31614c899a019d305a710d0c9b62f26116d133261c660c00b45ea3a6dfdbdea42c8b532fd2614e28ee079a1c4fb4d46c8783039700f5bc71cd29fed7d9509645081cd07cdca445fc27d915981920b6a50aea54bcca749eef1a49bcb67977cdb03f7b5895d56fe61ef8417f5eba4a5cb36300cc237e56ab7892f336494d884d117480530b867ee48d807299ddfea9a63001da4dd1dc49881d78e6f860a0ed8f5ff998b603191851d9f7029ad298010199a8a55278f301285ef050ffcf859b898142075a057579d7ac5dfaa25486df36a254dc0a68e2aed55e599ad663ac2dc71fa60b6dff03f34af9fd98bd3ce45289949527dd3ddfc992ba260ab7c72bda8ef0d1b3872228391141d6198944234881745e2948671c2b89cb8c8733f856145f57eb7ce0f9b0d4e530786b3e468787cbab8d33eb31f61ba8a620f9f2c283de760f3c0c39981107dbf3468acedd8483fc385069498a6a1ba402e09e27e87fcb0d4b899a519ce173bb7dc599b0cd1001395617ed846f452b9a618624b64eb31328df739852895edee3c6a1e191533fb7026b0edf1fba5ddea2193a18c80056e83776be42a3ccf4d4ec5b6725e5a6879c3dfe1f6af874e14bf7e027f248eb7416a477f2d82451eb32b118a66069872f691122518f671bcb71e880f9c135cdff3e98a89c79454d12b6648526b2d160f42091d7f1cf0011db2669ccaf2a6777a1c08b04f3a3e250dfa803e14e3128458e198b2d1fab6f840a6c41b599837abba4b7b556f38707d5388cf2cf74468d2b06030b1f0f82acc66db21d072302b695e34ffa77f8c47c19cd59e3b4688d778347b4522d95b8077c1432a19b30e2867ddc6491b53f72f19d78778093f5abb244b5a9eb4738ecd74647504c43cb9161e5384ad259726028eb097c73775204e381cd29b7b29e3f7241e34257ea6ca4460bb310d5c00c52881fd203d4c2ae767a0f025b2fbe2e1bd3e318f3cd66f3a73661056c9e86fbd7893b9c0bc44f458b0cddf3238769d2fb6e4de8e0d4534054946293e92c5472d6158773b503be02206f8d7b0ea8f5a9357d76fac8bf64d92a720ff25d494ac00487b9208a98a6061e1daad2e9df705672eda20b34705e20ee7d3bc0c3427020f3e8c7c3478df4771f866a571cac115ca28a30215e8b631b6c4569c26a82c70ae881747fba52dbc0996c642a10d662583e2192fc777c74dc5f7384b1abcc35c50af2db84dd55c825c02282eca314118e37af615e8a8f4e550fafd475270eb784660ecb0297009236faf0e6cfb04799d0cf7cff4fabd5fd8e351c71c85b3316b635b95bdb565cc8ac978f2c8bac93772db1d7edc49136d6b539677ffdf7cb48c3ab01b346e7cbbb0cf6eb8b3976d00c9a5b02223205082013042a8d357db9511b13bfe429413adc66428cc5362d6981e9f4fee3ccfeeacdb0334f2997237ca0050a7e33507bee5a4f74549054e3baaa7ca702728ddebb159fbfbb912018110417a527affb149d17aeb4dec353b51a74de343634eaa8175868245851bf7efc0f33c5ecc914c66724f05e3faf4335986f4fa0549d790e7724b4f5ce54ee766d16f2bc5c5f4270aed82ba1d26e9e3838c91172dd4e532643789517284f92e857c509f46b5879238c7a6150c6f9174682ceecc9fc12acd86909d1098c4b1e2d2c0fee49c9caad9e05da2c5feee45950efaf5c9968980582a85b35300e06a4557959538643df1a93a1d5bafd3ccb79d963f39a5658153855303d0f291beafee05413d82ade1cbfff9708017298094f1a46f910bb3b25c4df0bf88960bc30e609d14b335ec6f78417eebd78c191e079d44651e46bbe1d261d09a1a16f3563cdf627d40b19d6327c9e47e2cdf4e9b58e324a3624bd7363da75ba00a1163553f87efb59d50fca04cfeeabb16cb6807a71b6cc9e71d56693bfc46fe31772557c80d8bbf15d43d4db4e36b31d05100cc33fefc52b6ea5e86b7593352d73191d990ddfff5f8a70ba3ab30330f08f50d03879c766582a611e48b95477922db542bf150744a33a9e5f5fa87875ede36d87801af016b07b93592ff995b2268c89117142a9188054f3ddadac6dda234a880734712a5034697c0cde08241a5f3ad59aadcc907c4b389fd034cfc02ce9d750d58545aecde92724beede8c67da85ec8f395170450dd7b379f92a3e032e766ddaabf2ea7955dffe654ddb40547d4f18aaa31ff081419f5636f9e0480c8bcb1d7f5473dc51e4e2f323001685c17648c632065754b9572fba95b0315da1dc7f5611674dc3e5393663e55f8ae837924f2b6da705c5122d36df9349186a070450c699668fc5f67f66d289a8d7c0281ce2d465498e4e12f86723aacf143cfa91a884c5905baa06f50a8d166f576475fe0c7f1fa0d75974cc9723b7606e427d466d06c78c9f646661eec2a4b635f7479240aabfe7cae2a8b59225736f80831b4403efe4568f383c6bf2901a717a5e125e6013b28dbcd29ccfae8c0cd1565d47464adc7a222d6d7f082a689432ca57faeecc8dbef02e2c71d77d3ac3a4723daeece367c9a4d4c953c657314323a2ff4a64e57c9a95284cb8a4538fffdca50e5b91afe8f1728c813009b0ebbb789805d4c75ec06678648f16b83908a0a3ad82aaca28ec4e0e14c470baa40ccc8893cbcef9fadd0fa52e332e8e782fd1408d3c71640990de71b95012dc7745903d23bbfd6fda04a34df813f7b661244d4b4e0974fdb91c949cc5f728b3e607127a346e9902b5ea8f1b1c1ae0871eec3a40370331dd3561c94b3054aefc6516f4298828153a6b23f2b319f8cb4938178be09e4776c0e06d82d8a09273553c1aa58fd49ce38dac56fcef0c6f5f0d337ae9a8f79903a60fdc94aecce536a092f50d178e1f7f7918713b1269f63dda8733ae6d1e2f6ef9ed8a9384076452fc225bca2ae29d9d5d24218d7ba6bb833393955f8cd2fc5f5e05a9287b6bfde3c0a421c6c22c6a7e4b558282f88cfeea94a4931f33c828b9fe7891cb74879c920bda6fabfe43be697f468f2ccd9afe593a3a521e463660a1ec9c53d107ec04abd3c6305fbcdffe01e24f7507872deea85bab38d291366f868d02047453ed363ab013d6103f268f07d0940d6f8f9fdd5bd4eb722fda1b419ceb7db7fcd8c610cb7a568ca7be65e03be66f11f10906bee81af5f0da15244b74b48d5636a156716d7c9224a2e519b792b38d76ba80443b10f347d91fd0bbed51a05a18b52173be5c83b0491d44aa30e254e2c5ae55f5f6b26170976c4257463eee4e33157b342526c196cbe6c8308008d8a9649ba0e9b4c2778128cb4d77ad5ae02a3a29d34d23f8c9ddb862f39b1c89384e5c02bdc79fc99e7041269c2d3da97fd838ad062b71605b44a706dce51a237cba5f7cd40e4fa8b538f83bb48211b1b59b19edc73f592ae847aaedbbee2625c4ad177c5cfa3b124aca223237c95109fa0eb3f6a22dc5b93c04e91b445bbc1bdbb47aab7d3e66997ff41e03b26363b02fc4025e1ee6b5cd22900d693eb5c3de3941a0ba381919f093cf46684b784b3ebd76404850d00f7c0f237998caeed8be4e46e30e6c5a52d4b907f351d7e73532b62c0c15b88fbdc621edb6e18948ef11c73d5a05618dab33ac44d7b8ec7890de157ee4a802d6c375fb1f8bb60756dc6f973b2feb9848e44e45bfdc8a4927c9c9c0b11c9f7c6bde26bac1c690e77d49321f170dc0e73e1508272cd00278ebf22b6d6fe18f9db6572e0f5ac47722fe07741b61a95d1df15cf579508feb5a678116963a21c0bfcfe8f9e7d6c906412da47ef0518e72ff8ec763f01b467d9927ca75aaa52cb9ccf1603312cd4e9beea974e472dcedb9a4ecfcf9ee3698341df322df3acc8560e790ec3708838fb18a251e9c2372c433dfd43c17af327e491732928daaa247c9ae91f63a93ba01cd143e976ecc0d71a2274a4c8036968eb8bb59a0130b7195a0a952d1a2c839c6201c77cd04bf02dc2fd534344804c10d66450ae0084ea8aafafdb7874d9e036d9b1f99916fd353d50bcd25939372598de75048c01fafb55a7c07f73754dbef91c09bbb1f8f63b936d289ffae2def13adbf0b35dd2f3d0172e856278df9382b703f6c3dab9c7ca764fd3561ecfd4b4a99a0adb66bcdd1c17eceaa7ab4433c01ee24244ec33d7e0b8efda63b350e7175a4cb0c877c3a54e24e8d7f014b1541b37fa18808df97314aac4c5b3da22d72d06bb8efa03123cee871266c0067ca99e6e9f78d23ef4ae9dbb5b743856291d5b54be68fc1c51ca3987108e5ec8d8c2903e89c85aca53c6e8ac2fd777a93777ab89cf9459d7a6248523e46b46703ad40a1616b3d9425da8ce1afccaec0f283baadb64df40b217df6da816ef2435ed445a6a41f0791524b24b22c88741f5b9d6fe514cb6591530e852af27eac399feaaa4962b8db0a62a899d050a4659599adf2614370969196290e195954eeaf338b80a7aff0ff97c65d1ed145df68baf51e28ec342d6aa0575f5ab2ff58695dbfb7f05327c4e5c2d6960d6a8fb2442682a0c8c84a6eebebb3cd6aebe5977c50dc0d5d4fdd305a66413acfc7e54f64cca0e14764bff3cd4217192554b69d606cbd2c0984ee077b3b78af94ce6a77a42f6cfde07fb4e325ebd9f71c36b0f52e4577f7e4f3b834ab88645cfb4e85e41b7e1c9d34710339675dc4394e9d8911d56c2fffec4a130171e20af310d44c3929cc8f8a45262c9b1f99f721bdaefe3d46d00971688befdb154ada3d14cdb582f303a18fde2b0bf13efd4a04919d8ad17df7f3a6b277609f5af077f9807ff35a1c90f268c03b84e78ff6e5b6dc77b6d6cabab8d7d42a2c70013892ad9c3f4d4944dde6232baa209c4f2a03f6d3440619c2b4913e4c41825dd1ff453448f2167d75c535569c364e2b38dcf06e57a8cfcfb1a65277ce3e350700b99804c03f478ee8e0e03be0119caef1f1ad6b6a65f588788c1eff54cdb70ef2a05b8cb144580d0cd7d67d3a0b92df684a42435a597085e7836f3085bcf8abf797d6745ffe1e9981bfc5c1f68fabe89c6f77cffcbc5c6b6b15eaca318764346ec7f4bfc164ca2d64f876bfb9649f35b7886153c45e09b791999a9a09aa410d962c2b4711fb46f30f58b78f343b05992ecafae52016ebf95bb6bb4a18c767eb2a157c2572121e91f778c6f85e59501fde93077e717cfb66363620049668e3d4d36f7b1034e8e58e9590f149d5e59b17d7b6bb5e446eae0110fe477b26b4f8459d528da4d818e8c040d31c5d4e90a9afa37db1de4e4b4acaf3a185a85ce276080793071aaea6fb638dfb2e7f3e08b7d1fef068ec40e41a45bce5d54a1f34c60bb7d224ff9656e59426f59ea202ec29c30031f09e01e2e7f0c3394c36e2ad5b1e3e928745c999a92365391f4574977b1f3a02290fbfa317fca41d660e7622543ac3f6d8b5acaf3148d594031c6dca2f4b60cb087f4abbb2db95f461166670d930d9b585b2861a077cfc1a7767b5360ddd3ead459b73a66079a56b555d927eaf919cdc16a2d28657362e3c8a4287c00fa8a62a6ad1cf860475ef3a1049baff3613447899c64318eb508885cdb2447b5b909f7c50609a65aaa39c0f0929ebf4cbe1531640a01a788be9063cb6da3e7acd1d9761989a43e80e0aec0cbd1524b8f820338c98bae25de163c2b05b987aa686166f5af165bddc3418fd96eec6223a7662a69d64c6a54dd3511a2c0bc32b9227bd41bf7270f10eb39847749e73c4f98d2e5aee81ca3d6c5c3dc0c96493dfe7009e80789b97f9288b029c0b41f35fd9ec0165ec1284e8c162e1830c226cf6a8c42c1001590cb8bbf9617f957bb469c05f0e4977f6a2ade57d53920fca8776216a84349fa1180d0caacb91c0ef3d1eba7525a8107b0248522753c4eb3cc794b091de2b7708e2641a7362bbc7cea4e2ff2be353bea324805d75c431835fb4939d944eb4de95b432977","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"fe727b3ec2446f3e9140a7a09442f679"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
