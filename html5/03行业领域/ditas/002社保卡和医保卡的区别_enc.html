<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"5c3df56030e0ed9567dd9a24200a73d26a4b1044f5a445e1493660e618956a4fdf6b562623342c882640d97a16c12093e7f98b7d54fee95cc77abf56ce1de1125bde49dde8d08253f4734ffe5eee2a538907464e38c95d98d8d05869cea743ffcc34c48ec83f4b20c3f2ecfa4aee0aefa36696ed08d2ae8932e43f053cdab453797f05099ad08b35af17797830681646b596cb051b0ffeac201cbc1e20b347c6e8c3c48ff03b115e401cfb02b7ca0eae828b1100ad1d18616dbfb33be30fbbcc27113e41a131c3ca569644b5524ae7a58922747c14f95e003c0a5e5e237abacaf173571215867553e4d2668a902ee49f3c4bd31b25f8461de64d5f8a6031cfdbcd610b0cd47c48f484e7369b35c26586b34353210e4351d081356ceff4b77c9d6e24eaa871e37c228b7a6bce0e85e56b1f45bfaa892b4e9b231b4885e446eacc265c4f18ef96ca803f8cf38ca2708abc1b12d13f3cfc33133bc36e3d4ca1326e02350fa3dd76839fca14a8f18f0d72cff99d61fa520cb7a095497bfe7a5760ffd11217c374d1c565648b7c2492a4bf1b1e4cec99f7cd053dc216ad88edf93210ddb34e039cb61c8b6f51154a3884e3eccd34ec926c046bf9ee36bce424d0443996154412eb6157210e960dd45c537feda68ac8933a43313eef692de820c6a7d13055ba885f3f6a8f7cdd642f91af5dc38867ab8ab540f83c5fa4caa2db4782eb7c086023a3bbe39cefe7cc5a0c9831d799c15a6eb00bf3f452bbcf5b57f0fb0a95a02cc30539dd6f1978350aeab799f2a63b34c639390fa4723c8cfd6263e51a1fa900b97de08ad0c1f6bb2c8430a727a3d3109ca44d02a1261445a7764a16560e62a1264081cb5fb2e6a56b8306b4255b8c9b6e4bfa31746d129fb0efcf9de8eb08cd9b67c2700a21b979557610b9c787d1b52ae7a3bcded44921807313e061cd9efb2b09d09fa199ab3bb10e347f3f4f97926e4793e1a7e4dd3bfed836be273c2626fa74847bc22e6cbe14827dc20a0913d5d3ae3bcb71e894b544b24f6a3928d28f7cf8d58c96e643e4e23f24bed3f755fca7aa8376325ecb2b33a56a8c8564e9f523752ba38888002a8cc7b76643129bdf4e1b22a52eac5ac8b7699734f91825f848badb9ca87c8806326feeca017705b0b9901b7a6690c5e45d6ee414cffccdee982a9056c78984f58a6aeb1a5f548f637c5098c0ac458e1a10dbeea67655f3dfb919aee235dee14c502a82a5d93ad9fae2ac5ae219544c856b0a58c3f8632043fff8c88e4baad3f21dabbd809a51b5fb4e907cd0e5fda2e890e95809273f2bc87d516600d98015d55f0ea7ad139ddadd85fd24f4fdb9d66e401efa07c9822e01bf6b4eb954ec598b3107763043ab24686f76d7abc55080b157ac220338b88bc3d4b5e81032df8f50ea3bcb564a1f7de19582b96328bb0ecb3cc04801d1d8313db71cc7ad6472961fb3c4c403e65ce6f51061db585d1641fa4c2c4dbc39e8056e9e82b38015c97309dbae90de0ca2ee56967d7a05c2c7726f430f8d7d58b3b7c6d339b24b43485634c04783e9702813a376e4bf986b5ef0e2159a54750f28dc5589de4b33cb344ea0e793f9c277944f9b61a01fc06330da08a58e222766f650070e0de61372cd024929760a7fe6dd0b68658f2c36863380c045bbd980603dd674c85c8c4e00ec1aa2a071bb001dae61cc79cc779ed6c051aa4cbdbc3e44a334ed2e23a6190e6a807c91634d98e5cdf522df1c514c7fcf6a40d0e25423e5bee6dc1fcceeb51cf7773c9a8243dc7c72aaefc16cd132ac8f41f03f8624dd7e9d69174c9587209ddfe3f400ec2ba4b7139b74cc162dd799d48bc040ed26861d8ce73498c59b5ac8d20f3f93b8d6da38ded754c5233aecf2eef6166568a0cafb856d6052ef40922cd3c9e4efd461d5238acead509c9936b6fbbb8335eb17d93542d5ae99c9634d46e0c63cd4642ce7494d25535272c1e6dea5fd8282159cc018daf7d844e1ec0928eab0476ee8572bfbf119d923020af3e9270f9e9d94741f96da5a037598a4a8c358462994a1dd2f3bc4c918224682eaf7608b7518517733608fffecb19d8601d7de98c9620e32e3261bb9fc949f8b5d2a63f99c0464af7137348704ae5e4915b623605d282a0c3c34d67e55fe60e3ababaeed65bb850c690a288dc308729b1b0c8c463f5fc3865a603a3329267adfaf42cb7e4f5576a065b69d49b6c150de73e6df270949d6c72116ef0471bfd673a8795a8eebb9ed9f3be2556628ca1177df40c721706925175c7e2f926d65e2769d56134466b80131a0c9117e958fff682c9616c1faa63f5b345447e6d94879ce7db0c2c4f7b83ed0e033633f4d9aa196a638fbd1bd56e06221ebd0a94aec27582a80eff85b3be2c4730c965b62af19338d190eed5f77004aa9f47384bd0b88d7f3b1fbb4ce13a34887c1985ae2428712ff33ba88045921e97b173e324d22cc4c7d7465c7756709c5a0e045b2a34028105270a95f9e7683f873916b3e853264359f91c88cafcb05b10dd6d8c665273d0c198892e0ad3d703afb6e005e4edb2b6ac2ee7b04e80e15438eeca44859119fb5486b33f33dcdb6e24b9fdfa4e20db2bfe58921634d7c9d954f46add393afc1ddc074671887a4780198ede94a0ebe872b02e836c2bcae1613f1d7d7b0347bd5e4eda60d9604301eba0c6f21a0eb1f891db58df553ddf84bd905abd280012c332f583b3c5c3303712f6d3f2c476d84c4420c0313b9cedf28c81e0326eaaa287651ecf2571cb2ca1a5ab75555c852d4242ff8fe9d6f58766825124800bc1d15794b2ee283d727162891b60025e0d78ba3fd6be69b16ea4e32b1552cd12eb401808b29d9436ad95c1a57d4c44c127c4e3b3cd26cb89d949fcffa6b2f26e55e0113d2178a6316b0d9a9870513dc9a995236f387fd6b494c8d8c62b12204a22621617d66edc9bfbde04a292240b7c3e4f9522c9904a224615753992b127b120dff4fb2ee0cb5a569d4cb767f5874af1f9566ae0043de619c70c3e1187409337f443d88d44ffcfd26e8cef0862d5f8da001f90fc4764e55800f86ba5c00ac3414a99989263121c4c788e416235071c1de6428f9946c2741b91aa78b8f5e8cd7c8252f24547ac4ff1d92e4630341de6c1c16c539bca2ce06a963572b82ccc1c084cca2ec3d8cda3976bd8a594d3ad328c9fb5e345a6005cdb0e7d5113efe3fe811206dd779cd1af095f99ecc07164b0e7bfbd9424f846f99d4bdc8ee6c733a60acaa628491267692611ad2cb19efbb8a676baa1c54581ccb06ccf57a78e1caa5980554e08b2f46b263eaf222b41a9a66d24c38ce758fefd7a6c824213d3940a82ecf7a9035811fe47c460046bc290af6952fc330e94393c33f61189f6dcd6fa811d9c580f22de7701501919f16a1152bddbd53285d161f71cc6f203338647ca3b363dbdad9c760a39e2f276922908c282a94eb74b9faacb1bd7a68777ec8be6b2d822bb2d69722f7fab5804099fbcd8b84ad0c77a85efed64ab1e83909ca942e38a22e5239ba00279d02c69fc3831ae224f36bce0a0de7067829999177803e8378306ef494093607560dc10ae9c23c0cc78d25e960d6bc888b6d6f17511f77df858343cdc35dab21c07ad2c500a4dbea85825882e68604696ccee381a2dd1c48f5d42fb0b761d2a4655443cc6624647eca49d992970f1d09b774f7ac84a87e050a8fa23245085e3cd5c0539988a3c87f911e6966d2c79239d5679053a0163f4b77cbddb86180b1a9b5cec8b53fa4020b53491d56a94cf0675299c31c7f917a2ae25710092ca41d38a4807feba75270507dc244eb9276164a6723a770b32b8c925c8197b74c5641a25f1dc406c61e56260a7b65ace8bd72bc7c37fa07dd87641b989c9a8c65fdb3fb220bcbfa9e6233c666d54cf358d57ab0c75ecbc18e35e647eb99c9b4bca382b42889cbc4fdc1237235689f6fb5956bb9517ccc2292fcf63a775833dbf74ea8070a31ba83d3b2846ed5432c7638ac662b7a2c153299f170b65ced6e0c5775f7f300ee959032caeaf32b4cc7ee01358d3ee9d3b55afa8307debb8ca6655352997e69f12fc35635ec4fc6a85822093efce2832801392bed7b3ed2e850185587438cd93f86c9a1134f0e8cbdbc6ea8aabc1450642541f70cd28d9dfdcd860d1bdf0d5b02ca061d53aebff572c4489728b6ca87eb0e566c7fff08c89d446440960be51eadf865f47849bb629efd322e07d664e878d74824b59a247f65e486e2f3f01a2cad26d0e232668fb92f53d11aa5107d0561b23f583414dc30b021e8798b2fb9322368a75ea5e1792590d7eb6b47d2250c8b6418fa5c6c48a72c355d3a9809354cd5fce593c63c8390061a2c5e1ef98b11b44809c04bb2a6294b0aab113e1f3203e6487a40a9ad867c508f322315c8f39a9b2d5ebd2601ebf97ead795b2d36719d96e0985359aa66bcf2679f1451e2b59cec6cfb2a9e416e2a7b2b3febd23ac953f2ca6c76bb81b65e6ac5db586f78237e6064c605b3d29398cea540c9034d578b343c844f5bae0081a85e1fbd26aa036496a4335143dcf14460dfe6e9c89e235cc97f36d4cfa189bf8bae3d495637d8d30597665156d41e9ef8da294766f8383345529272242cdf7e3c08cb737438ed2abfe37472897a85e7ca64912ba2e4e5e213ceb20a4fa74da3591ce7885b39633597795ed750bd0a712005ff28d6d0c4f2a9b74a332fcd7b7ffad6ebba8dc7e5c6f7617a6c984ad8a8a024493960257c081d09852c213917c0e3dea7ade3b2ae8ecece6864d3c574299b9063544d451de036191607e7aef66589514bba975b0169100262a25c423c94f62c5526adb3daec5571edd47983b1b7b2312c0bf606274878feea4347ac382590309fffe95ba250b2f4a28da6b2eb25b8563e68b5fcb80990f7632fa903de15991da98755ebcf8c099c929ff92b2cdf5b5deecc1b1661dc2917f55a8c10e7f5a41e4652f96a5b72fefbac2c1ff3494133db2b3928003d640bf0bba4225ec8727559476dcfa69a2fac03a7e950e1bda0550645e5a8d641b24614886ee40a7beefac26d8517e62d6aedbc1e8560f64312a16cceb0b2470a96dea0ab1ba15a5133d166f48e903fc423175586023896a6c2b1702caf8415ef0fdbc9ce139ece7beca1e22356730a9848776fc317c809a657349d000eef5e5f39df9b4b9ec7b5e4b75cb8884b0f90596b2693c93d22212355dce646974d0262a6fd69025ecadb8a19c676482c7c00fa8634bc1f9b16961c5f283a2b18fdfb9b8e683aea1fe582523036eb6bba86eb77680255a13b68d887a7864629e15bf4e3c669905ed8648e392269853a46dd88ea0902fa9de57cdb80fda2965ae53876debbe91d418c727463182296613794fdb4ddbdf47b6aaf66df15ae35fa46986ca5bc3d3ae67456cc01d4a4ffb91c012be0d191dfe78dd12eeab8da8e8900230a2a558b9c6445450ca858fca89e8d8cbd67a4cbd16292a685b260a29ba9bc3e2015e42c1bfc38c82e0e655ec397303cf124cd14290b31fb0edeba8da643a2e3b755c5c8ef97f8a14098d05c9a43c0be7ca75285fec33b5d1bb15398c65e28b88eda652ee637f0ed2ea13cc03c175bb0050d5e55792f28c96e704c0519734df33fb8571a5d9b6515148f699f695a0c2b54adb9b188d4d3d81c17aa6249fc40e2da2ce53c6d3bb81687b9e14904e48603ba574785ecdd314fab76887dcb34ff6adfe6bf74146224b4fe820f7cbdccd58dfe36af8a278a95f40af6bd5707138226889a2073449aff44c6f044e00c9127469d37bd14e617090d140c5abbfccee3181b9fe2167628e05009df3dfe0159c0321d1cdeffb7c8986b8202611b89f8bcd0dadb196b0f4cb6e2ee0ac7cc4a519a71b8bd5b893bf6b9f125452798e7fd276bd748cbf3fc55e3c4e7c6ff57c385c076ede8e972e245b0320364f74e605fe467dc66e435dc226aeaf54f7a8ed0d6142760efc69fa77b496aa93d5796806db12656769767525370238cd684ec7a0904f8a627a11374fd77565c2b9be0175e62a870e7f507e84043501db0979bd78706dfc6149c73231454cb7cd57f5b5a659adc4f78f0afb998f1fc494f1afdd1cda9ea7ce9ea43cec8d80be922016aba96ab0e4f9103f8f414e159ff78897c532ce33703b57c46ecae7966060cc6df0e930e0ab28fddd85d5b246a4ab1593ecf47ba66a2f4602ebf5b3c00e785cd64ddc8e0e6241de54f1bff229a4f98b66c5ab69e8f5aec8cd118e437f507b9218f29233ae9e640364964392d8f49c04fe6b1507d67c8244b926da28b9983a41dd32a1e6f650e5cb467d9c0602e57e5b261631a24d2442d42abe0848af6b9d1585f2055bdaf028988b52add1a121e5dbe77caf5a76e8a22d981a9a0696e621410464a437e2326ad10f72e930f7fe2e8f6e73705cd8d7f3627409734b1458db664de0964ff9a086d35e4907ec0c3b652249c24d2282f8b2f909959bb786826df4f91c1411526e3eca7e3c6ed5062485873fbf09623469bc188705023f97242982904f5017b51b4812417e32d5168e9af539fa7b694c4ec701b90abf1851ccc4da47130e402140dd9d84f6d8f50fb3b5b28f103e2f222ee3c41eea62d4a507eec8b2a0a04631a1cfe401533251c45bce3b6514cc170af53b577da0fd6e1f304205aced9d5b1b67763a57294e9b01ff7aa2cb2512ce0f2e821c6719cefbafec1c82ea538d5da9eae7237dcc6c7ec2bb3ecce73942d54ee4d14cb8ec38b17fa2107df4e59fe0d1408465f9ebc7c7451140c93a46378cf5c03c2086da8db6a127d73ed947e0ce35a76af3598f5a72b30553680a85843238fa118e0e39a0d47022f5901716bcff376bfdca83c850c4023f28ca9165fc9cbceb1035521a5f09e5ce5438acc81bde680db6f26a7e737749ac6a0a108e7c018fa86a88b641096355b2a6cf9a03977d7c40cc9ea269a44e9a43b4666b9cb91c34f9211d1721f631dcef61ceafaa7ab51e7afaa7cd8e2e0b0d7fe57808c034fb5f04066d6fe0cf9deb39d929fd15b6ad73e86cfac64d35ad2525de35965aabfe3bd60581638b2adeb114b461545875177c012850399eb1637d35cd3b9ead164d32949aed978e1898e107a0edc86bfc31af3c5109abb14028bbdbec35375840586a8cf8f774222e4a6cb659e6ae9f20067d613d20cb1511b7bd39e5a3eff937bbfdd97841e2527b92df445e0c8eba6cdfb62ab3190d2ae639eb806b2433433b5805bbb37af1d1a84d39411a3134fd3d16568c77b098f260d9bfb434bb485eaa60631e1e112b48c01e2dc25c1c50fe2959a1e1bee8063a5bc35933e165cd0de623c7e6ab01835a45430844621a306dfcaa8d6ff9c4e1d211845ff4e864f9fbfa840cfeedcf378cd1a4a02d771d1af7dae398b432fb072724fa8251e8ee7b54f153822fca4d2558e95fa3d2449e6da8bfae707641eba2ad92794aad43ec56e3851d8eabddae4e57948621c65b26f37270e55d82927f12746da7279f16223e741394255e8cf158f68d8783a237b0430506891c2e64d856b80043cc37ebb07bf159aa75c58742c6a2364e5238a08a10112ec5625024eb10d95d2b59897969fd1f233e77dddf79bb8a93a063d8739e325020e2195f5dc0f2284be15e8e429083699f6041913b4bec5613d3a82aa1d905994ecf62c420d6186df2cea488393e5ee365bfced238885f7de34943ad1be81d4f538afcc567d148ae37d4f84e51c01b3d76698b689fec1e608f417ca9c997c90e6b6bd5cfdb10fb351e841a5dc23b9e57dfd853989c5829a5b650e17d6762cb422c4370b92cf37fee1be85c949470a730a0ce74298f3c5ff248477a50e75f94771fd623f1ec7b899e36feb1c015356b3684d0d61888f8668f5e16e87f4317db5f9dfd25b44e81458bafde10b6624bd1d4ff26c2d835b7ac1d395e0817af9ba07d8b24529e4a762ea99db8358c9ed5f6d682629072646b5caca42443a9a62d1cf4940ac4dea5b7a4776f8b718144dea5ec2b828387ccf1f7ef3506f4039ebb0677f0bbf320f53e4fbd3bc31b5bb0e7e43da6b56efac22bc844a04a454c44c9037580df36b031dd40f58ea900f8508e5c3974f08ed764593d35bc8dc07e4cd95aadf0e179e3203e3a271019595805f4cd2ec4487849853ecac2e3dcc978469a3a315d9e910e36a594c64429d685799df41a995c32ec64880aa954c8417538f85a3421ee148477f4076fe7fee58aa5ba4d1df50d5842500991f08728a02cf7242e853ecdfc6ccc2dbdd3a7e6c4d9bb0f304498854cb4be69b6a7831b2b09774232d2faa79c8ae1a8dfffb657ef9ce82adb30634b39ed483c1d75714fcf0954566fc79ee77f73d3c01fd44b008db0339a6acde2305050a80397db120aac303808638a6f72579ca5d4b4271a8c01746a247534a7b543d55b7900a73268dc35cbb92b3176b1892b78822d53b5aa35b3d9cea80885f278c2c4e3b42e56d5d9ed8d15867b8b308bf50cc132653fd0af07b449e24c8801781371f92ecdf717b80be20ab94d1e1f27ed31955321a52098f982d5bd3f697ebfe2433b60f1dcb090365155199f45679a4a0fa6ca2f6621cf8fa3bcffbc3f109164cf47a10cdeb9cde3290b5b7d69085c455ab66462b6aa88dbf5c998302463c390a747693e055b53a6ab9be9f01870fc7615550e93633e6478aa414e6b1829024f7906d184d40b5abc96f5755d1616be447cedac83d1aa073ce1c50e02ddc99048588ed2074a9e8e824170528b5ca57eb841ece7e059b594d877be2f5a51594571a05b04c3a2ad40584a70ed228b9b311a4c8696f481cebf8db89ba5e0be6f3c21a6ee99b839fc901b8b4d2ccba708e9a2780005725adb334bb4033416cbb404104fd9f965ff3625179e9f5d35bf0be74cba2860777f3155282117e07831f9756d2e0e3af38f160d4cf0c80aa72182cb45e5864952999d1270242603a5fb5f40d351c7c2d15369e866b57aad6919d318d05f46dd3e13425b54da280c6466250c4ee292028095029bf2f92c2cb3995a52fae4ec5abf017dd16253b2c86864ee6262cef66cc0b32ba1f378ee61e36f15a761f3293943a1d6ff2e3bea4f61948ced94448b74151012ee984caeebc2ad2bd4123a312f7d77d0d66a21e7e977c2154e5b30a37e60b9c7f43307a4ee42440f3e23e9b8e33012e63cbf83239fb31d395b9d2ccf8960d8e5ba91a81af9f4348e1883100669449efbd44b81237528c885a3d38c77008aa1ec850af579724c65557ad6564ec1e0c4632d31e832a587dbb9daefc98abfebc1aaaed1b90ed2353079cace7adb3c49e882db9394ea57e82104909c44f55ec5108fc4da121afbc2ccb78c0c4372e2ef80cdc73e4f37bc4c7d44122e2f53e9b3b688fb77a6d59ce0c1f711f6bf9eab4be0dfceaba0314a7bbe0a6a72569648cd30bbc27ae734410b1d01a6b17a0d771d15c0cbe877dc1a5c6dad2ac5ae8b3c23d7d199f0d351c60e725af7edc4cfe8017c6088fe9581cd808ab128643bafbef04395ffc3883d44e5f5dbe391b1193d9cb045d4b217bc3deeb827ff90c00b534162b8c598a33a18ba6f26cb379cbd839b531498a4b3c61297edc6ea8b6535bcf3842a74d164e731f7d8e187e42586ed6ade3f882061e0d57c0d8c342cddf22aae441df2be5c6935fb1d50a650e2a47a498d9c34c5d48b62778ef223786789d3a40cc5e9e56a248110199b67c015ed24692a809f285650d11d8d483e49851f67aca72cd5f68770c8f127566ec3a6b616f265b7539c17952023792ed45366affee7e841777757d06cb2d66eb6ce9d9aed484a12fe28eba092e593535b5ebf2803c914166ab59e67b5b0110f5be4eea1ddf1e02f4b6dba7f40951ca96aef1de15f0bdea872dbffb766ccf7d8191c437c29f5eea96e8c10a6f791664e2f577bb177e08cd2675535c586cd3236509d34cce4c5246e23dd218aef4ec456a28479ea295dfbeb2d538c6434b9bb20573b3f5d27db4d8ac8c101e466b91380b4b48774acf969360d595a6bc3f94282da970a75259f7e22db3202f79ad9e1e09abeb38790a987a03b41cd1372e2f16b4859ea2e2bed0ab4ffc26e39eabf3647bf76d421e418d07569b83975163edc488b560d7d4e5f868c67146b82341ee6a7b0b7d637114c727d936e30a26482630ab7a51e4ef3a49312207c2009a07af273e71e8aa1f699eb62f099cd45b97c272ef6db3bdf6f9a59c9d8b5b8f87e0b9573015889b27a37992af5668eb3afc22c89c88f7fbf02e36ea7cbbe56ae0671051264680bc0a1a6e7f0cf30173ba39ff24f24e8477e67e1ca4e657cc279695b82a460b1879d873b5399e257a0370fd53f76dcaff7c26f672af9ed5f55969b46a6f4ca30ce4e28b1a1384b9fe75d3c4569ffda25e1dd963f0032d4541b58c3d2e7f81c8f474eb0fb5c34d757eb3feef245d95d5396199dcf57dd37bf396fc92c4decfec8b8fc13927c8c0ee948628a80d86c898c22e3eab46a587a372cc1e77aaa76245a94f862edc2961358802425cb8153727f7a389e52f5c80080e65105608206bd69cfb2b9233a10c8f169e74caf8f80dd22ff514f68f2afec64dce3a65b98fb5df0ac64a3e12815f249a2fcd0d15dd7eed37878b584ffd38e5ae67e153bb0396e942be7b1547eaafc4372338f0d8e9ec6a3af86685db74c2fde421a15fe0557719c10ea113a517d3cfafe81fad841586abceef4cac7c7b02827862dd8674f6795b24d311efa7f38b9d3c107b1b54f68201d5ee92a34af6fd6443e678cf0a663e2ed11f96c0b2f8d0ccfe0e520c2838e616292042dfd5a7522137c0b9d73c2e5eba03e08d9907664cda339c5306372022d418ef7bdebc5de62b6123b5c696dd9ed2c1fa43de9f9381165046bcdde47e1feed87a3144b97ce9c27bbcb87e28d7d8a9d6d2c88b2b687669868cc9376ed5405b7c1aeb8c98a31e4b670e1611cca35941745c98798e3a30eab15a4ad1bfc2cca086865675d5acca58305b08869e5fe6259450cf5d29cff0c28a7f30ed3bdc80950e1f29f42f2b878cde968417a283edaa5666f92ab3d3a60a9878fef63f6ede9b3b88c72258b727a742ac5b023a9a9d377b2163d92caaa239e314dc56df35deb586162c96cd152ea2dc6fb98038d411815fdc38b4be1839fe7d1ff0c6b1e508282480d44cfa57cfe032c601610a36f5e9a1d9103133d86d7250db7c2e725b9b819f8ebd7a12b33d8696089564e2acd7080035ecca4bb84fc6e6f0cac0f7209b4d5a7248eec557d77541e605ae5a8a3c9b9755163b858150b05ea0c5f16c4461e48b408b38b197fc4760ff3ebacd05f0081a78daa3953ac55243c64435d7ea79d41adf0fd38da3fe1233a32322e7c38fe58c45cadecc627b30c0037691ba3422836680daa2720a6374bae3c65ec46f19d66da0139e9b0e84bdd982057a6ad776f861f6d2a37d22577caa7e6951306bea4c4f273988696321d1463c1e0fb670f63370d44d3aea1c8f35fb570b58bed801d19648e2a125b6fe3633eebe9afe2bdc491505eeb229479c071b0e2867e5f300bfae62441a2463811d9d57a8dc1e141445d62d1f6a3d884108ce4f8b2dd97c8edaf2703087b17e0d5b006c13d57e796eda6c3ec0c67512c8ed1fffdf49bbec144caffe33503c68058b62bc04f483c13c0163621724760403a03d89bbc9027a70933e7236b4f200fc0f08ca0b9c2494e86ffffaef92dbbf58aed19b876d10acd71df32b61c811c105dabd280160b68c015955522a8f6b1e164c40e4c6018f8c13f75d7809ef0a2280af199b1b129eac6fd69538b8aed18c2c181d445333c8aac51c6e7120c8842dbdfa39b5043d47b0220ea73f9cb33a948457f61897ac157bba4a8000febc9790e4851b4b3c27e60de6c1a15c92dd9291fd8af9eb2aed5d990046e483fcc6fc7fef48ec3328bdd5452d85db336cfbdc031f733b7000af3a48b8627234de1d92c73b1aff5101ef569c13977de9db25befc0605572bcc370b04f5c3d1e60563dee32623bb7432b1ee447df78fe218e079792cd2e699a6f4b4863e4c3cfe3174c4569453ae9d9115ca1fbe9ccdc7321bccc6459bbf381c3c74d69df09fe293a73d1a29af03dedb750f9db6b5b9656f2b15358d7ac208abd1c9f17f840ad4216adbc988db138615f4cbffa08666fab1bdc38cc852b43521a27ed417f6dbf140feadd599cb582f8a2363c7fc8d5248cd95e19662b8c0b9ef122b0122add8e0c0c8625e4f2a9cf946396df094cf04f71ac5773536792f0f7f9578fa5e6d2b4eaeac271225630ed1e49bf2ec213f6db1f778289ea06f9428e267f1c07d5c031ffe2082e87340439721663e708d7ec52a4ae80ec42ea2aafa62c3f1c1faa7d262638b290a1217b508541ae50f9a51f12edc15c2ed45cb641f3cbaba22b6e0ae0060193010277a421210b9e0e78636d538a4f9d293626d23f9a8e2722cf02277b4b612c8670b3ad140528369744ac2e1d9b509f96a3cc587c53aa8ba6c7889e702a07589f7812b4a7d19cb83102589c641921b79a2f6a95501ceeb7cbd8ab78ce34466ce4d3e6dc54bef2bd2ae5e2471f6cc7a2b5c96f64bbcda892b7b5f2ff9bde8ade4b92a08aab9827c07cd4a105ba2186c388d1c13e6c0f3faf4f480b8e7a9317e68671aba2baeb7a924cf020d0c8c070c2bebd3376b4f4ed5bc348226f130ec61a22629c2cd9e98e4ca9a9f8ee113fe48e58f523666c018acb39de28a6abe02273353947eccd22e9fe3e43fbbc07f7d60d8e14135b8d84ce620ae1ce0ea0c1d3288c48d8a34eebea6f45861347d0d1caae8df609ff340aa148b44c6564f04d67ce696c1be13f3bfa019b4537f26c87447357902a0d32749766c2bee4ac2be0b472024292d38dc92f9674614986acdff857206724fbeb4e04b35d9d41f48ad4e4932c98d4f46c980f439b38a8c39080a502981a647a96433cd686e41a1f1e3f2db0dea0ff6e628076edf347e09db18f25c14197920b1dad2cd44a927751dbce9a872bf6c39daf9df1692c12a5008415724450f03cb3803d0183264ab4f48bd3407af314163aff99e6a83d49a11098253ab818951a1918a775389f2d91fdbbdb8ee4e254447d9a88008a15791ca09f511a2b743b5e0190fc29de0069a634dabd1ac3ac7169d1706eb30e8b9f1bea22a7383678301778fe96661b394e09cc96de87462f2f78c86e55ed9e2c576f6d8474b20e252a93608962927c1ed3ed41c55309b5bc67a94242927b92a0ed2e5cb79aabc1cc830b7dd203f8c1a81aae3d2f1d076450a927488be6e09aa7336325094d0c53c3ec94af95745015bd6fe8c4e15a21dea475d0f97ab9f618c6f9da927dccca41089c7669347f58dd1d9b7ef126510b4a86f9ae2a0534cacb1f172df8400c27506484811fd6f24ff5d37b0261b3e4f97be6e25b6b15b296c82fcaaaf7a0d80e64e2d03ab1e06cb5ed44470bae2b8d6bf9bf33b6e1274a1f82c825948b63c15ba5d7cea9c3740bd77c992e06b5533abd607376983c1ba5c0a63a89ed96cb8f4c75f994fac4f89c35c87935562b21ce62887f1d9c5f985bd6690ef6272a28b1699451610589767d0dce1e6b38aadda922dd23503c9b5c17bd04b45cc8476ed85b5cb6ed59e674de7ced373c569e10bad30f3e132694ea8018131b9b47dbb57e72c68197c81328913be772789e6100a1f5c497e15173dd169f0a3901af9755d7238eab73a5bbde90138c93676f7890434c294030a54d17601ab206798b52c27b50d706d7047bb4aa696d362cbffca3f517c1edbbe6761ed735127b0585a5f2a66a42afda8e48bcc38a2f3caed5a74f6ef859cbb85908f726d510255258e56fe22f37ffe8d6df23398117c939601a0dcb7b5c4c10409bba9b0cce7511e2734f4bc0b9d13435e68d7f1386ee9b57f96bbd4469b29d864e0d7100a9c2731b11ec5f7373471d046e18336e80194ae727ff3d83a98d9989af35d87798282ba60e2aae386305358d8e33e4edea14c3bea85171518527ccfd40eba3e11f85cd097d3d149dd6b05883621480b3742a1ab10fa2914f80f7ef419c67f28ec9ddf3063b42b32832e887fe31a16c77ef2d0940b5c2a3a80932ad05ceecb827c626e386c377f359899ca9035cfd52af667e286ee57cbb323b012c1176203d2bd48ebead090e0918f56f38b2ac65e4ab9d89febd7238445c01b2bd4dfba2ca9c4f368d0cdaa46787fdc001aad2e9af3674147c1a2f24eafc78b0fbbb711138f7d3920f147adb9d8a387d6e42dae4897c457fe0fdd98dc587579cde4bfbfb1ccb5df79a29d6c5e22484df351c4414c3c226eb39fbf3290f5b63c3ef63282b8f9a779494cba4fb5b063dfa9273c74e2271944f0bfe7a5713dcf5cd167831da3a9293e0b8ce81bb93cc7ba7520f78de6717970f967ea90f4278363ae0cbfbf17d6befa53f73c55c766cff5cd356bf43d8c69f6240a429a9fd4dd4f7c391b5a23e607680d421a92413dde1d3fd04112250b14959c9f6cb343019cfe573ffe0dc180c0ab052acbe59b01cdfadea0823ce072370577c95b4b0ef5b6564a00285fd927cb599552510a3f57c753ce16baa0bf2874cbed123410eabd86221ebb50f8594244673e5fb4965c7c0d76eb931bf2f3ce2d7819e9aa59d619591c7ec1efbef4321f64b3f2250065fafcecf69cf0af02114b0b8390bf16f31b6536df2037fe722cfa14b4f39666d45c14adf0a61e04f6a060078a986b88d4b9a3c14a1b37129aa01e0a38c0e9ba61a8fd2b2134e7ee169aebe49476eb8c46eb8be03465d8244d6a71f837d14b7e5cea32534321644f9376d9e2183eab289f2734f0bed9a8e24151561e39262b93f747d9dfaac8ed35cbe372c052230820387fb8ae85261f3f4894624b3b87422de20cb263c551ce6f84bbc29346f27fe3d3afb32f27c06385ba4c3c561a33efcb162f2627504dda1980145cbb3d7c13010b47b56905accf8770e254186fd2c1d31a9a4b869cc0e3a18a3b8dd704970125580ac306e2df37f7788417dc481cf029344a32b83c0616c2b4965c3e5b458bf09dd78a86eac0c60e8eb389840e6a35e317975c3377c1217580cc14fed213199deccb054bf9b11253540db3e0a9b3d960111d6301ce87504ee2230857278c5c462a5585aa85a3d70ad8b16f8b0233a620e28e332c46fdc02df076637d77e4f8eb0f7b2d29dfa07de6de704d783b125cdb9204b59e680b788ee2597f5e9bd641da753af9412346df0d742be1bed3f60163270f56ce0b2219bbd59e550226437507d33a0284dc0199c547b3af42c45211e5d7e65f13451f88e6061017a7628fe545b6c6965f59fbbc3f196843c2ae8abde921cd019535b6798d3340860f3f46ce980ad398f1c4e5f041dca5c81cb93456eef2adf1ee88e5d48319b9d40070d86647d3afced2dbac9f60a24ee9820c375566fa109a57f2a945fb182312b137d28c9c7819430ecdad623a23c24d8c693454d6afb1996bc14721451d32273800e7b50e4bd5623d03c9fc248c504a91a76f70e2388862a677e597c3928efa8a5b0e50d6a3c5021429324f741026446fb445bbe5dfa6a08b3d9ecdb92826f29cc858fe918a7a1492532dcdc8813ec864698355632ff77ff419724d04a0dc0281af87ef993d39506e4348d6f24658094e4dce270e24ad9df732752f50126506c99183428d5d85e7ed10e419128ccac70ecffc50c01f933f0e92ef09a6cc48ea48ecb235e3cf30a45df383904d5a6d8b5c1fcebd923f3e60b4d2fb3005443fcadc10419b393819721bbab4564f5b853c58c9546d3b3eaef28208d90a10b1fa08c8436e6f94e07042b4429f197c0bcd43ba5b233e5268a350f845d70cd0c412477f6b3f9474aad0832ff96fc0177510e13a300e8ed9d4b038571a612b0fc35c27314bb143dccf74b5ddaacf7e2c177ef854611dea3bacbae039cebfcf21178d1a0f7b5b38db9b3638ddb7d4715cbfd83b8131ae4b6de4250611bee49f66d690cf1a84f950e4ccd28c30f9eb8c6c8716a9531ca3511ecdece070263ac4a871a2d65de6fda86efc18d15803d0bd02979e4223256a3871a15536baf227182eb2b0079cb8f6fcbe70686ccf003e3c85fbf1e785576cafdc415f6067a2d18eee0d1df5879d8106afaa1f61e713da53ef48744e23674d5c4d7d48d734f53058b4910f1a8dbe7d0937225230414ba5786c217e50c0ae052ec9b2a58e6c29e3882ada914f92cde20035fbfed4130395e9201cf2daec7be8edf8052cc0ea168b05f27b308559b061ecab2013b4b9bdcc9140984579893817eea9957294de83752e21a5ee55e4a409b366fe6a28fa1e85643083077f0fbd179b41ad4fe32f5ccfe37dbe1908882bd6b0f9fda7690a5092f3d43fdca6d4c14143a02aabdcef99e8aa4c883535e041782396820f90e7c2a2f2a066b3b5caf52e3e096b8a8a2d5785d5dd232277d5c66999853af2b9a362fd9a29da22dfb2180f1a84f58f046c0a01a26b666180ebcf7197b31f1297358b2f587866792195629906f3da7b91ca1a2fb78564849f01be4107740624513680c62c2eec61f9018580ef515526e5bafdd17c65acf8339d6304b139045fc00fd7c2657515c1cf4933a3599bdf1bc7f9bdf6b2d1675f56e7f5fa7e71a8de895d2173c78d7e4c067204299f450ff39fd595629b4268a39b0ed7acbd1bf3e577fb9daabc58d9c808cd2545d2ebca959bb029764b0f61ae7736bb9648ac774a24bcfd56f37fcf362099957f9a61933d4054ad2a6ffc66b221d2c1b6ac459f4e48ab99d5ca510bebf0be62bc0c886202b670ecc6e5b1dea1d48dfef7c41b3760cc1467f436261d2d281b7b67d200c939dc4ed98e4ffcc7b43d5a27ff95a8ab468e2b07b637f47572443dbfeacda8085b1355ed2525a265edcfbac11a3ee707e1864ef7001c40c55ae7c6fc7c6a1a77c09c998929b462fcd32d65e0abeb317a767a7add393244830e997f5ac36c32456c86fee6d3a699c1f339cd6cfd5aecbf35637fee29906319265c914a050ca9c4b16248555f0633ef44925f8da19ed9162e6e64b4e6ee7fdd7674f1ecac8c82a12573e6a7870e8776062e3244cf749678e80bdaf5f39169ce620c8b5a3745948e9083a8d6bf055d7b510e5062c0ecd8bd888e5eef306ca2cceb13d8095a67cf5432d0b761f80710ff51ee59b409ee0ed421336c7a7f1bd6714fb4e5b582cef35806cfa27952e8d48684707ca5fdef9572f17637bfae5d8b3ddc99ba145ad7b0106d2622cc48d79aafebbf560d93a7e11867b5b6989c4f6158b9f350292e383b7ab9a66f9669905f36e7ca54cb994bc9b5ed4ed1df110abd8a99dfa099ec9f3b8c7d250188aed99b503a3b86bea55ae40e6dfe43192f54f34eabcd25d543baf6363090e4b349b1de04e3aba16d931140a112501201208bf232092a74ad6c29d72784b4a7696f98affeb3e52b4315b2a02de0148af830aad26f5354a64b3ae38b6d34752bffdb86573a96724b9e6640c06ffd74623610a896875e4cac629f63a7dc2ad8064e47b24c72f5a3680792df6f221a44ee70948342d86374361499959bb5fb3b6af11d3fecf2d835293b98673632561f884ce468047f67ef2608c590c15ef1f7c7252dc39fc17b6039abc7b2ad6cfbfda141f4f931e6234c65711e511879b8abd6367db6e65b1d4ded25d1474d08ca4a91afa2d833d2561d4ab443183b29645436a06c530f0359c6ec8dbf2be41c3c9a4fed43e69457fc74127cfaafdbd34c5718ce5d6fd922bdf8338c2c7f560d5ed96051f81cb4e4891bca1011f9074a4caa2f4956819211461c205db41ef8062521b8a9b32cb86855c17aedc592a1cd5b9677a4f405d9f38e701039c975c3df1fb68cb737d57d6d7c9ac3e8b026eb3f12c1f0706469dc3af5b1b3299aa0373fd8cd5b7441fff3a28adbb89b77e81aa1f0bcd60a776d8f6909c469cfef8c728338480a8c1ef61056bd5a84aa28df8d0bd2ecf324cac3aa0aa8c743d2018b5669d45a89d1161984acd5153d6332c791697ded7092f6c9e98789091920d8193003fd5b2a2a3d0ebd8b5c40994e6b676402a12e9ecc3e725928955d9bee6df91e668245d0ebe343487fb5fce5d8aa4dc129c2841d44c76ecbf7dc1eddcf45307a803bce6e0495df131ce5d9ad8f54dcfc6fe4e1de1ca45f93fc44ae2dfa315852ab1ba03c12cba597b8d33f567c62a4aa6174142ba5c289ce8f7ce81dc3bd90cb663bb95d54d546a52b1a4646561b904ef2a294aff59bc6aecadd1e671d6c207cc211bf54a4be2580a99955e6402873ea2cf8e6241cd2672b9aa1dcf05c749f20ff308490f405ea7c53611fad9d9f85e2d861b98f10b64ebcebe2c2f68841dd9782dcef7bc4b1cf8c872cb6bd695acff91b980c7c23753be80cd594e4eb7e9912b1e94652e6bb9efc40d7e71475d4f9adb2a7e2ae791529a3efb933cb26e36b6f8d2aed3be59e4d3b4987a17265105069a7dac465da1b0a29fa8c330c01c34d88e691584060b959626ec32d7f37ee11021be4a1d1bab8c2f845873b513c386e697678056adf0b736fabf3520b533e9e74b664b6a47ab6c4e1f177d111851da2da6e3cc29dedfc1b205f9d2009cff14014f94088c950e622f8d61cd797cf41e0ef06815913fb860cefdea0827f2070e2593ee7b15f4efc57de857027d32ea7e716ca7ca7a389bc8b3029ec7bf0a443e7382039e6c6e35ef360e2015756e523c5ce9b0517740f5547bae0bde9db0d2c63a67c290b52ac15543456e180ea07c64f83b3933e1771c3558a766221f61c2a5b9e295f886d4b1a401c2d848a00ead822793f6de8d6b6baf893bc5ccc62127f6cb1a03f4088913dd3ba7d4e4dcff2ff97ceae9ea974df23386b51cdc61a94fb1881e80d3af0c97461153725fb74c302a5460f38da4aa3c0dd8d7cf9fd1821b9028f9d72613d29f2c8874a6f880488187f6cc179e7706ad79c74c21f63f3ec2fb7d22cb030ab328260277cf1fe14a165f3d6eee184855b9c73523d2d55716e724bd6d74ee474029b3a84679d1bd5ede95f103e77e9c9a503a143237781548d6e0d74faf71332dc5291e034f9072ed0060d1a049b0446a431e29db723277a3871230432f5a0a5d4705e9626cd3cbab01872ad0a80e5dfa8f5532c72c644612c51b11cff94aa9b415a813813f4648c5af5747c943797ab7fc3a1e797ff4e4f5abcb63a773805443b7f0cd37df4f69e1f5c927bdf41cbdc0f0736f88e64638635d6898983085b2e47ff18ef73854667f35c263c015001cb983d79d3fc35b06483e46233c5a88962cf22692492449c66fdc1cf3046c1912a680823f74ed1291db9a03c93780dcb1258f07d655f4f47519ee8588fb56f062ef94ab5b6418652baed2337c5e5cd10d01a31e9ea599822b82e1e78bf7e6ed57f2b51cb41c73dd102d8b2e9bcaab4f035dafa54efc4a42c3d04af507d93c403e8326c4d96f1686092fa8f638a99dfbbe6edee6090acd5046329820750ffb44088bca8dee0364d99ff15b005acf0a81efe2463521d13335f6b3f664beaf3def3d3b02cf4b1b1acf27fe5b88d4af54154a072cb33a4f7e733aa3e702f3481df28dfd3fb732431b6427adaff9f0ff7631b1b7e8fd2f1ec074ebe9e94205fe3db08173cca9248a22189833ccd2fb7850a8e714c59267a300d8fe18d3c31b190cc5337c6d8f5f05794f06310b62c3e8c1700c726f13f1f76f51e2ceb71e8729b46fb59200678ec58e3f0a7ae987573a54f2b7cebca416328629d6123e87eddeb1b726067e28e2aec58b014df59e00940b5ca66ad85d7493a4095c840d589618fc244aa05686ef8cb264c335df5b60b763c89eb88a6f8a2cda5c5d37bee12de494e73c43ae6b5e28ea4aaeb8b68d76f9b9aec262dd6b62fc1d031dc0ccb25bc3f03f9ec6577af","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"e51cb6d05ed027db058edc159e71b81e"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
