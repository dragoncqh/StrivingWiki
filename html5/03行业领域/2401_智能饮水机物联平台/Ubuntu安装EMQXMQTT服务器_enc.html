<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"770348e6907ae033161608c01333bae009a837fc1003c97e7a05b400cdd2f5e49e399c42fced95888371774a398a8e9f4880ce234a2411d26816789293f1090f1f7f41fcc5935a09faf6b1b4af9413c153a953e6656437e615b3af6ffcbc71236352f452860aaecec088538457293840c2bec8051e0735703b063864146432c27f8a456c94b072409a34905fb15a2c0e0ea03a1eca7ddd8b9f35a66ace7419f3eb04e819d998520f841841e8769b1586dd22d10fa468927484711ac327a423765025e4fb25e4af496623240b6446c067e0aace2f55ac0a0a37685a126ce617b78632e955e5613244a6248b95fc40bb17454c03aaa18eeccc83fc51c41e9a3a1d7ef655900f2318d3aa1f66d77a67cac59fbb82962c4497567385e9bd824fafb69a18119d3eba63f2c88c287cc457f345e0ef9a7706a24f7e0c13c027d7c159c246b755a4573ef230c14dbdd35d862da38f4c673a4000fd2ca62678162b81ef4f79b6469ecddd76bd724bf38b4f67502e95a85d3453737796f8e0fa3348262032e946afbb9f22618411bd872b0e9249c80f2abe97b033ec1d40d139debaeaa0f2a5e3d90775b9732e6c6baf38a7b3ca8cbdb90cdede47c9ed103ba9a7c119c87b6ad763d5c7415a17f20f7791a5b81289c6c2e472822c422634261ba97595504ac3764ed0db3d4ca84c5d9dedde44e4b8622051c9cdfb02fc83e4b52845cd1d1fd9ffd1d5562a9e3e2f595a1a0c13e31aac2212e0d9d7eaece5c26a88281e4777a77bb22f968e1c9f945dff365acb9d66f31d5dd3c83c29453f90a1c158b07a40478aeb9bb4cd69e1f1df45fb3e8c4520707188f58b98cd7a3746bd3bad44143d41546bc828d7ee9afac8d91f49f2f93f63de6fe6a2e0b9854dd4394983b374562d0803db4a46e1e83990dd2dfad4af1e0bc755025a3d8f3c5b686a31e9f91ea9842dbd6f817e49dfa783e9f5e2c225bece0cb2a5db7d62844fbbc491e78a40f4384dfdec9a0beaf26b229974003ec0e1fdb9cda352031e7395e96ca2bec63b65d08bc0d9dca4f5fdfaa633287d9c66cbe33a9bd07055237c5c6ab075d4d10561b350cade6e2085312619cbd3510d54f7e811dc51919c7779f3aa0e06c1ff60ba9cc6c52ec28d94f1d3cbf50287f3787ea48f18899bca3a328c730f655e65f54e3e90b596b13f3d09e1924b3c6f73c05bbc8ada845245da353ee664a9aee41ed80a3f31ed9da02b9a40627cbff641bbcd2fcd5bc3f4814c7eee0a9154c9427a9105e38ca99ce3cc21ca4cd828a6596d248c41a649956799bd9eee4cec90c098609a73f30e70344ff8fc7ca6090643a0891dddb7053fbde8ca28aa124162053966bf9ec689f55086225438b4f80ef8af1270eceb7d9443bb26949f04a336dceb640c9d0e20e1352274f377385ae52ab7c0816a4761ec186443875d4930a8ee846cb632cd6cc53ee47bc3b93b5c16aede29c48735d91ce2192e27a9c649dd03090277a70634aa7c383ba9a9fb0809c09487f1c024121573f2a74f928bb72e6a32c2dd7bb66d4ef2006ee7a1ccf082519e559539b1a08c6bf5000b1577e4a984b08bacfe613b7193309ed7255f94fa935f4b577f4cb6c8af20a76b746c44e03e1e2965cfb0e9781001173c449b075fac59eb75157f9cf027455abd7e7947ff5fc4c393854ff48d906b1982b4ccf4d1af6ef097236be3d2890ccc2f65edf85d53ad757544b5516c264c48e0ce576f8df12d3002aa2a8594d0a6d9ca232c5afb062227c03292867a8dfcbef6ad93084320b1c17508668f904dda53dd025ffe50e019279c4f5aa5a5ac9e0f3970ef69fa041c76f3f4b3b8c9f346472193aab50448265b67cb9aa431b433260831a5f59b08dda6fecfaf85d8f344774a284d698ad1d55c7ac3f4844af9abdb56fb182018c439664f53d19cdbfa47df626806adc3e5a526f4709ce297200132bb38aa47668b90ca095b0f221a68bc061051acc88d15ef4b435914d2c5479af886d79f1ee8c69e22b9615fd31a8a127a37907cba4e22cbadc68544f702d8812b78b4a4dd59b3bd43ce53dd5832f4fed288bc4c86040b9dd26dbb8e888b826f13e06ba9378403d53ba801ebf43541e714d625259bef633e266981a80953144c86e1c63081a4786f4648286548d05ba366a1adfa8d99b0897584c168a9bf54d350536d8b640f9311f5f23f0c848c7af576b1a907894f8fc36058d46a9b70c685574a7e522212e820d0ad97d870e20f2925d9e700f0d5e7d70c96bd3e23904f02cf1db0723c81fb9b17714657e8f65a6d74a2b7d754b98de4d2d9af57d72d3da0c24465cc620fa1e20c5a2a55a3e522379cef66f1ee177fecbda196c6405d4ee670b103c45d05f3fa82be65341f95b5a8f9909c4fd1de66d3ac4a118d399e58d9f501a82aaf1855d34029aa3b5e17d45de9e8b157c4dd58619a07254f94f962f7a31b77a8b20b3f679dad2e7e0224bbe17744f3d68ac297fe4c8edd178bf35d86a62e52d434f97f803507559e23c3baaf8260cd1c3de26036c4d962506ecdee886d23790566de6d66c153f07444dfc8e3e826fde739dad84ee67fbaacf9703425d7b8a96a902feb45935d25a03e15b5f162248de1555b62a3c7385805a5f4133b2a4cba15d6a7f7e0bf4847a2ca07cf1da7720291e2c7a94391f7261b1422081ecfbb60f452fa33a0e05090ffa9e1d69563e8e8b8cd49b6751a2fe8f35847a00f5cfef96d21a55a5cff32a1f9039a956a76ba9d6dab5f8eaef38a112174cc944113fdc1cb9ab25035ef3362172cdf6895347d44a179d98e767b61f5e8f727ff3219cd19bb92c553880780f7ccb7f655ff6c6c59c3afe906a2b1c857b2773dc5b8df2ccba6c76bba0f6fa26d6b667612c9c9df5fba75eb1e081becb9c62ffe841527d1f5ac7aab7d28dd9ed8700ece40dc76958c485da92e6cd0346bf92d07eb582dec0cf46a265fb70a23d3f349b740cede302083935382b51b399f7d08c7a018d9fcbcfce7b934126880d4a404c46f71872a8edf61b24be1254998d461bee2afb77cb806b8d2e3dc4a4b821315b48796edf343c4da73113091b3306fda01842f1afd4cbb1aa75b471cd710bb853e308d83ad0f376c91affe5c3da06fe7aa5c1770da0bd7deefbcd9e03e1ba1b30e6b02fde211cd21c6391d1cce2a6fdf394b7bb027ad3d4166e99254adec6755c20e17e4bd1d1b22e3a2c150eae30513857a202fcd309981baa0396bbba9d5977ef5fcef95ca18da5ece2923eb102d10786f422b4c9d5465085ea7de47ec50b4ece677fcafbf3aaaaa29f082862f0675c020e2c09e183eb7d10abe205b716dfcf0c1f2039e77b5b0376fc495f4af27bf04af3403b726452606066afd8f75590b8582f16b397e8faa312950eaa22e7936b9973f1e6ae2da9b5c9dab7afd29c3ab792bfee18c15a205af4cf0151f447f178633c445eaab4b66a4737ea298d80a4feae3e94a82dd6ce5c906a4b122b8bc96da13db096a9ab6f09310227c8fbf799d1efa1805ea99677c8a0d23ee18a89c30ebe0d491ddf3bb606241d7d4b55b2dc4e0dda1500ee83917f986767b14cd89d740b19a87cda925047ebd9e1be3ff397411e84ed98dfbae05459ea2f929034c4b40274166731b9727a0649519aeff25b658d8a01d1599ba515c1d42ee940c3cb156b4c2cb1839f6d8ffdbb1959259b77335f878a5ad30f535bd15db1ef0c18124ea06071f2284be18a5a61613c4ccad55f19c4ae701a82c488693be143efa46de4e4ce9a73c72959d2fc2d72928c2a52c30d129fa48881e9677de11aba5dce2fa03d9e690b74e09f8890b25a8b2f840dd3186aa4d7faf1dcb5b7088eed51193bdb4669ae0bfb4e5d4905a410dcaf6e4331153ff9df315af9f356b473b375b919794c3ba8f2ec7fd206173f078e79a8e5356c810136fbd5c9c104f0f64ef05bd5207a45497edbaa79a8469256abd05bb6337489f03bd744345a35e1374a765c48f7a8669b6b78af80eb496dd829e2b4e586fcb4cb8317059a6125dc560b4c5646257f2b49009f32766bda031cb13b76a17242941414bd04523aafa27540eaa04b9e65248489d9e8be795e23f86aa608325dc5b706b8d564b1e4ca9b2f5572444b047b92c72f8c7a6b8d5ffb73285e09ac26d7bc78b06ad4752947d4150ea4849ef4d85bfb0ac6b5a1bc24cda69e43c6b04b0a8b30ce50e0ee94d4922cb29149bf3d24698fac15062256fa8c7820b787d673f2cb8913925af6748fad07eb08b89980dc9bd6bcab5acf85bb716c75ad86e2cb9c08a4495de7f1fbd06dc36090ad4998979b40aa92bbcbb6d90194ea887bb58357335e49ccdc0f5bec97bce40c59a20c9601b08e12fdf998701e094448fb211a0e57890d939db09f8c08e43ed6663b7a8ec835d8b2c6e2b9356aecac9c8d588261c9c6cbfef85deb6a3a4ddbcf2d7e72b5c001c39a1b7e8a5420d7f2309b9698583bd6df61bd5d2489225aedfcaef6c8eb8472d29ac4f6b9b50bf23792195a54ff31ab06521af5b0dda279c4447531bb574d3ae43a6f5e1131727128c4fb9b50eb140d30066095aac25e31707382c7a4bcfa1fcddbf53ff8ad35379e3eb566ddd725e339b7f6eacebda2e7d17b53ed19200f230f23de200c307859759478cf48e36d64863c9fa42dc6fe2b855f52cd8829741c72a7733d716a4129b0f4d032f2bfd821dcb9bdd1a67cd3125a2f2b3b16dad2fb21e5698ca6d68949f1ac32899f5140f2508494a6febeeca6f07895c099948d64cfc079fb694fe074961755e7e82b7c9ce1e397e990b68207e06cbce755832caf930f7bac10179b07b86019d6304cd65e0555c65f9139dcdabd961365938a5e7eb625337ef33cec0378b4055f8e570d73d2ab26f60248a030e89bcabfd872a13c505fce3184c6e094ddcc372d947cbdc134826c7a41bc685a236adb7106f9f2cd6e18746e259cf9713e68f51894c7406e1867ce026c6d70fd4ac9ed475fe0b3ac8b2bfe4641e492bd6f3e73f89be1808d3c572769874e32912f3ac3c46df765dbc0d5ec7a25e2bc1491b7e4ad581b93775e58f3a525d5c566f4c543a993e18aeeaec79b24153694fd99b42277e3dd7770ff5cec3d236e8c8acac6b385460f5551c4622744251d7c78d017d525a002264000c2e935eca453b40b71f58f4fe55457309feeb83cdf7b53925731f85c2921e42f15b3046326c6410c5f4c2b035ca686b203882facc43ec68f4d1765bd5681f08da6dd7a780d33aef5c98cec31055a173789587532c367070cda0b53a15bed986814348ac52691c645601429e5eb0e18c889e0b8c4d4e4984e7fda7dcdb2a5b9722a1a55f00b288fef3715135179fef653516076e060b6db43ebb07012e92e15baca3d2ab61366614036db640c5154e7f0b7a2280745853c3e4586058efce3d0501004b9e2cb3e086140fd3783d45410c703a3758ee56e57ea340e8f7e367af674255b72c90ab79957880368010ba6eb760c0a013a587d2c654bb4b7b236a43bdc13e637fa4fcbdef680ab975b12551317f98c3306d34b3104080bf2aa5a69c32bd3a226778aa51f405837e39c61b0fa865d2d7373a2be24cc6a5740348bea5f366a870fdad6f322aa6d57b63da2c0b14b3e42080f5c13b6662b69274ef34e462aec67491a5847567b7359fda4d4223e6439bef45fdb809a799a1c2d5bf755653dcfad4044b9f5a76ad8ec471276b94c1dc47dd282205e040f7f6145d88fe46e243addf4ffbc7d033cd1e5e7241b64dffc6f124b6d26b74091ebbd1ea005357e33e4aeb78dc72dd92f5fb7d807298c220723a4d135f950c6b7638335cd3fa32d275cf34a65d90259b8a7965054ce61116fba52032151c4376ee0cff15c021f58b15a03e87113e2e7b7bacfff0d5bf5fe8b5859ff87c8fff784eb73232461b0946ef8681a84689f27074bad3ba8661ba800ac3eec061a5a072bb4936138a6859889854697d44171ba2872f53562b8a77bcea1ffde6b487ce5050639011ea00d26b6d89e9d32b9655e94c499f7dfba000388163ec33944357cb74f5652a6afa8c678977ea4d3c746d3af746e32606bf879433822b852fd262aa98f253e378d98a749f1143e0fab8343cacd92e6137f94332cb00441a088de88bddfdc9daaef8203603c992600fc51544de2b6a8a6e8000fdeadb42c8e90396c211f3e4b71dae5d6fca40655d97c109d25919807f1286b6ef70304a99d0446f60be82a0a2b5b98710fc65671ac07434ec15f3a05e427a8d885a4b7609de457d8d0d22245f31f5685ee5c0f721dacd1267cef7e4156435a007d08abccfca47c5f9e3d18f36c84e206000e91adb78cfd07b5243315a316eeada90caf0964ea90e0118abb4326aa40ae38be3208a286842613d466bc579e918c280b96ebe3fc98454aa12cd23cee05ce6c7fd7f64f6461d770e6536527e95bb334f16884735b4f9cedcd63da12618743c55beee75654b4ffb5f837e0a96738d916a52c7da1a1ed916764f1e798d645e4358d309e20bf9a46dd1fea75caed4a06e410f9bf7140b2e09a7d22a1cdcaa7fba5f86b055d10ff877ab8e58c3b5534cf160a1c828425df73dcb13d2ec2736624ce31935c68a95a6d910d097bdaf2ab22da7c5cca820d8fba7a930183770e27ec821e69cbb6f06f04336bf9145782945ad94b322f9ef1f1ea562dd45b8e5da2f4952ab7b50864608be723b7d6d310b15ad430d38d843a52ccbb8056f89305179ca84d574bd019a0a61668572ac54d87fa825b8f50411ff801f07fa73195d63fe832d4f647845188be53523041a1c4e45c7b329012e0b5040fce252bbc071cc10a92613f016c6d0982da78f8e6ef6254978a3a7e49bc0d69af2120be3aaeeb860e21fdd168293aad5a8e0dfca8ef04e7294bd066e2a9822e3505ec8d01c3ae24bc25326dfa0ddd2fc40f0f2cf83f0192566a18bf9f524b984067721bbfb702ea7f93bb8f8ede06caecca8c72560b0504cb3137d2c1913a16d607943938f6b3e5ba4ba16e52b47be2e39600cbaed8a06611920911e832318cbf65e38b4382ad4581e257873e5cf0864af4301ce5d0b9ded18efb4f5bacb69bf38548fb67e2399a38c78d37cbc992b227c8bfd6acdff73434a909e8820dba8e76ca95ef9b43fd79faa395311dda9c2a031976801dabff71ecd95a10d637b9af34b28f5ba13cde31ce0c110c5641da73d5214cd888634bf17decab3ee2d77952a58244d50b37c415fe243c64fd697f2192c655bf7799b370d13a6a592e669c94054b4df57be314863774feed931beb179ab93f0e2a3846c9198d892f5aebad7133eae242d33b16534eb279360b5abd0c787d1e562bf8059b3303251826c0d5da32dc01198d638b85babd44a20e1e30dcfc677d1fd087f447138da8d9e210dfaabc1610fb96f8034ce9f7891610b907fddf00b5b35b5f562882eeda11086a6e5aaa16121b20bbf5d7945dfa9bfd052f9cece8289d8d1a287081036182bcdc78621a141fabf5fed9bbf8571ee09171f00720d6339e3843ed538297b470be8771a2bf9453acbcc094ee3f21b0a282794389549b8f555c31c6006cbc53becf4f15fa6818669551a703d2ef044a1c92f6722802182e87dc4315b71d1ee255f64b6b11d0491d6c1595b7e69fcfd7eb7f2f806d87b81842e41e6307e93f831d581777cd8171c5e7ccbc07cd9e1caaab944134fe23074024c1d8ad093d91e62ccc06bad67e1a473ed89a72dcda61a8009bcf1222a3a30e2d4ade52517910ca736a11708b5ed72c7e9f414c01a19c97c4b27695fa2deac66978badab498a74fad68dd7ad4d5b283b0c63ba87579ae87d46537f829a1cd8c9fe8e2ca341aa822e6f2d0f6207d02062bf021756f26b464e45b025c8aa329d52898feb39463c88e06bdf2804e8743907006e950b33462ebc00c6053a67ed917c07809eb7c243ab73c1359d8daca6877db69560e2030a75c910c1c1840b95968d7f38c0728e4ce2a3c2a5b279125b67a93f83eb7dd85536fd3ef3efca10e8be878aa9030e5a020d3a69c775c16c9d1cac9fc3494d0fff38cdb10e6c87e48d374987551934e3a66b2acb3d168a3a28f8f32bf3446b336b126c46cf13f6777910ca0dde49edb690120e6e799a1fa983768ce05f3af2a67474d21d842950dcfcd6789c64cd8d192460e823e2db296f2d4ed6bb6404e39e141e3d926e902b7a55fe900f3c7949c0116073d1a825761850fcd80004eb06c513b0e332d0469e574cae8356924711bd075c3f24a16d4504240c14b34825accda6a1642ae588cbb752e885de4a1471e3c1d9def4689df4900592262113d09f19016045a7ba8cdb4e3a941949319c2d463368a0a27fadf04ce8e8327934284d96bea37f52fa425fba9dd082ead645ae3cfc1a1b0c36be8855d354dbbd26c5cbed3687198f10fe62c92a5f220286fcd690648757e3efcfa7afa5e243fd5923f370d0bd2cd3dbc03ff62375d7d3190e5677cee2cac098c58c7a67f7e7c521c7e255204a4bbc79dbbb37c5c322727382542d087bbe98a07b058ff8f0327aa260968c8df27256820ee125a1a652c8c2b29b27ac5e9d886cab9b575de2efb2779073e804283d430b7478c4cef16b9c4ec6a7158e514cf65243f910bcd90ddd96fe75abfaf0aef7a4f468a1035dd74d7b5763a655fbb2d3b28879288b3db8f29f062c85d96c32c77412d4ca73a2c01914e6d37a82119a22df746bcbf91cb537552f909905199ee288b6dc934083ac4c06ad7ee729b1ac12ef094d4f2b43390e2497f6784bb4579a61fcadd4d3d381e8244aada666cc5b7c4bba77892bfcae837743f6ca1b97245dd2b944e784e9edca15ad3b4d7b833911ab2261227c64f178b8a2726dd7cb5d8ee8e96c4f04378494f28753f867071f7a8bc1c3d2f2d1a75285db7c63d5f348df3d8e0b4059632943ca945b1825b7f17c56c7276da6aa36684db4948e3041b819fef2600c640e2f867c1c0eea3e1dd403439e533bb54bc3181d0023b51e63bdd92bbe2618c73380983b061fa1fabb011210a240053ef9f228d9ab5b306966939210fdaac14a69debd66f4f97ba29eae8f2baf9ea7a93ade2cac521c9d4c32bfb75268d7ee6ccc6ba6808bd7cbdad62575dcfeb6fa813a2a2be0d68e72e3f38cbbe4dd07f31c9123351609fbace53eccc975d261b0762415218d32b115c27716018a043df121b1ea3e83a44996f1d05535109efea4ca85327f7120220afcd45afde8b92b02ae0ca440c7004e38bc232a3bacd75b8354e7da129663a1a6fd7eaa38f3d3acf29bdd75b79dca7a8709697d396d05b89fa4d5e190dcd64d531ff49877f557c6b596b6a5e80c61bae63dd341e7241aa2ea5920470dc3cb81ff9c264f45638c329328e3a73b81d4b681a07a99ea540fb853c166eeaca8655a50587b5ed8b3246e4b9769c3d8712702aca3504236f3c60b1ee86afe2178df6c0b9ec28ced75c5614b6ecfccba6e98ed9e6fd3ae86a5afcfb0129b3ef5f916311b7c248e88918efdefa43bfa2d535956963eb1e0a20ecdd8aed8d14cfc65922828661d33feab175f5c19f3c967c0214eb8d99817914dfdd6b50bae8a96075f1df4cd80f8a46e81461d3f5bbd6d13cdc864362da890eba98b374018e4c559c073c31724c3fc094e096f1d2574b881d5108033a8241f362c2ca84a15d450e15c60c49c24ae18918a1ceec15fa95f8f2ffaf2c52f0b10d2e0936b7be448892c932412bda136dec7ebc1265324f2c66c212e4ef2d9665e88c554e5b86c7089340d37314486c4ca80e7e246aeda99038a22fb6e20ff2fc970a59f0ea7a2cf4acf054fabdef4c998e8bf81ceb1fe5f34b29d773239e426cc0de34bf922b647d36e4a70611b9da0fdfbe159021ad9166b60eebf8ca8b1a01ce5fe5c7663da67832c1d9884a10959c9774873bdd5bc2de7b69ef6b2e8126f9e86737db4b661e5f2738bc9e484355e5cfc518146c6582c490689747b27f26b820346a9ba5027831cad17129af5033d3732f94524d9e71ee4ad1286778aefdcade8d8ad06c7c708e5c3b12694173ac07298109d14fcc5ad7c2336000fb678274e2e3466666633793972580fddbab6dfcaa19f59e6120b498c6590a4d2ca1aa4372bbd1d8814cba66c0b56262f79b860164cf3695eb72bfbb2142afe9372afb8d6d5cc5f624d2f8e870182f3e000280dd23281c2abd72ef68f4957d8347a5aff3fedae851b9208c635e70bf19c7bf3977a0bf7c4ba7f53cb99082096c8de1f6b279763a592359104d0c79ea192a23987e12b3ef367faf06bd225d01804e0fe36d3e7cb66a8ef7ffad18a108d66d70299f3990675294a8f2be32becaef42d3eed161eb24010ae064d1064542fd1191678a74c1852234f1f8dd5a966a983ae8a531c251d00a7e7e75be05c36fc277c6b6890638d651b801a74b8ae8b48af78a8f3d59944a158b271aa01a948867b979598d7685b201bd7e39ae087656d5b00e54304d943cb376fd892210e31e98497dd6dcb5469cd58f758556a408829e78f3c00e1bbb0fae15e1c31fae00d222ec007fcfa13f1c5b07923b0016d4e4cebbdd40d62993fd1c84dad76d502c026692f03cc62b30972a83fa23f93357b56afd40e0b748ee120c01f8e15039258a7fc52f8f876f836111ed8d58ac5fa721f8e6c1d82fa408e8efe3980a7a947904761fc1f5819f92fbbdcbd5058bb65ffe929e8f71f83008247abba90491f259289b447c985879b1ab2b7e4001997db111ec28e72126e67288ae7ffb56597dfae0a58b5e4a64bb172468a15e3295919946f9aaadb8e2b94d4da99b659c1088cd0078bfb29ae73d0f70308435d9dac30dd196c28fe813696d9849fd5a290281cb9db7807f36f38cc3363d6d7128a2e8719a0a0fbc71c87edeedac8a42e82e316900f107059da7693612375ec32d28317d90bf8b6e49249fa5ee1673529a7ea0d4252d8d4a65ae4c8561605fe5c407b312b71ae178723888c3eb876f60c5e99d8254616a1b8d5b4ac71cee4c69e525d2befabd6d9d529195222b01e7fdf0932a6fb29a98cb638b7045ec77b9e56037d841c71ce647c4256ea4144359b6356228c7d158fc0ca7645d4958be8f1d3479b5eacbd31e0415393ebae983ec1b24b0c9de02932c354b005fd285cf5c4f6d8285b4ebea8637212664b437a6c87e96ac4ad8eabd1ab6d7d319f72a8d14872fe0ac91a96105490ffe3f4a4495cebf50ca68c577e95a00cf52f37020d411659e2db0f07fbccee93bc5b929418064cf5e68a35fd85e4ec9f7efca7fff0abb2e96edaa5fc7cafa7ea6ab742651095e53ffef9bccc0f14421e0272850871a7c31d97e006ca7947fded6cda6a094d231c90fac7fb5769ceb47e1389de1726a452737164dcedf39707c99aa628e198a3c7c60103bc32383be8d588842925a05371559d8b6affe9a16a7b412dc79ab3a5d4d54aee69e2e070b6a19987510d31b8402d5ddaefa440aea10f8af97b31f19055ecdebb5f816cbe0dc7da6281a16543b18954202d4d9f8b88240af51f4ef99899ee48c3fc2c738f9057e1188cbaf0410c06c68ed416a64e5a8526c4d55a5b55c2be261d7f485c3fb9318b9944fcd3676a0ac70dc5dc12076a4218db675b7058d018c5842bbd26c581b5791acbaa4b442834e9b70ac370b0e611fabadb21550bc2f71b1928df829e3638f7c5b84ad29f316e206c70098a52fbe7b76394e6f64bfd96d6e79318a382b79f7b617d7a7630966fea2e2da85cdb3a9d720f1df11e0af7f7fdcde349602873f174811d1a74445f4ad9d7890aa9316b494194fa7626b76979a8ac88e7274195e654f0091c116e4d4a194641009fc23bae2b4827744af050d6f1b321aebe6169f25e7f71b05de4ed684abccd235c90eb763e1b8fde1616e6de96400fd97d679216f2656073121cf5181cc65cfdf0b7defdc2bd469b040fb3a9d89fd6bdcda6175c1c1c2f8388d92a22bb4a1ff12a03e1a75c3627d4e54c97d098ee7091d47d9a59492a2e2d7b4c40c50ab5b89eef32fc5d67d97cce986ce79269d2d50fd702bf76920a7316432d32f4518611d6dd0ad95696b5aec9f865061bfbd9cb05284d4808477f0e998692e60a5fb5d2d061495a0407cac60ac6147e640c27f04d22e4a363411cbd12f248411eb060b29912f1e0895409c3d4338648eb7cb5525652cf9c244d0fe2ad113b374d50dc02ac8a3c8fa1cb04baa7d747c09ece9eeffcd6e0952e31779d18f1cb8f4db9083a49f08dbbfaebaabca18693c56b43a1f840e385c54707e66cf99e57b65ca0d8578f790f1a1353cfaff5f6fd24310743a22a313135327b1e96e09e27d2f3b547c606d8552aa93cc61dc6ea870650f7c59532477aa702639e80818f3e131fa57d94e76579cb44b98fd3fc743894d7a4d075a92f58207b45eb457aaf465085f376499ac7a83e355c83a9bce0d18c8e841308c7c1a43765a0020b283cd2c838a59de9acc4468b7b9a71758aa73e29516fcd17470e5e0c34eae25008917baa6343e3950767644f274e1094b56a3a42640e7e4e3ae049a8134cbdb010c5ea1ac01b31a1c0f0356eefd664c82ad52204fe08c92958804792aa0b8311e5c9e788b522a02f2545e51d0637058d99523069cfff3a38ef79ada34a710421d43c41e47c4f33664715947f50ba415dfc60c9493a4d8cfb4186edc5e524662b52c3aca6b7dc6cd9417c81d2c6c0252f13baf02c5cc213b748ef10d0220f74205506e166677a3ad29a46d0e90665801df210e0b124331c7ca369542ace280131c49b51c3ad4107acb405015144a69d30e5fd94a37671dba6f9a06dc49c7708fa55829e18898226502b0b532f45bdb1d3ca1abb359040f654480ad60a9f8491e36a4a635222fb06bcffe7f99e908ce30905477b50b63df8ee67a58ff495b4d3320237a555f5943cc632dc437c6111b18397492f49fdd6b692d40909ce92ea67e5df148450fe7e721472d01d1ff7290ddfd504da9d7062106565c127f63c318f84bd8ceae012ac0b6f048230e160ae90392e41c9d1d68ae0c65f33a42190a3f368ae6e25f703d12ab208d72fca1e4571c192f8616ddbf26ebea4691bc036b49742a85b29611d4c102bee28e7a22c7069012ee7991299c21f34947899958bbd9c0224aebbd72539f407dbe85d9f0b817be024e1188f4b8636087573f21b7d2c27f0613f336ad2272a9310eed3af6e38b325a84103b38e5018b2ce97eefe85b909ca644c6c5cbc97b84d4d7824c11e18926791cfb589d9f51c70328d8d6dca4dfe2c7118b83e9947946424632f95e09f186dc9093941b2ab9f4e4773d1bbfb73c37e1d97f4757c71d8fb18c2daf2f1011c001bc6d9d415db3008748576ede48b367f241aade871197ecb79b5f9e5fad185005cf51e2e688457bdb0a8f807c0abdab5cbc0bddf07e737790d98265c3dd074418a1375647fdbfb86be68bc4c4aba8828612ec91b242592c81b421f613242f5b8a88d12d5ce8f3ea059de806b737f7980855c5c7be6defff0a8878bd68e0fcc731635736273c5ae784a1a26c6a06a69334cca577573b918560f2eadba0542ebefb1a5d6e7baa4cc9797b87819e72f5c3b09377c8fc8494aac14dee85f531fe4eb1f3945fba945c9b823ec3bf90e4d4f57a150f5fa532d2b1561873da9bbd4eb5050daa1fd9ad311ea30427f58510aab1b3cf174bfdea991f8790d5f3f842e2f2f8f2048c319b0b477d4e8b5e3be80f61acf1f023c58fd6a351978600dec598d131f31a0a00198f1065590a22b536546783425eadd1cc6dabeff8178e729b38cfc310330218c0a7e3b2dcfdbcc09adfa9c3d6f99167590cfb5bc3599fbb8dbd651702a40399b5152a1d564ea88faf23670d3dfbbf8837bdfd5f8f119e927743cf51f34308c4a2ac7a1f728e0c4cbe3cd7606559367a6ac5ceae6eafc3508b5cde0976f40994813fbb25e6e299f67d5345a97fef6839d34d3140d7f4269dea486342787f6554974ea44e065b6c942845258d8600e5b4a815951a70a36c05bbe3428cbc28dc90af44a350ad1ef3933b6e49819378eaa673ade45c7579c6d7b0911c8577f936cea96e202413ec27d38182c249359fce1b1bf768c2df69fc7f0a69fbd4c26483aaeaa23f7aa7dca9650c296bcb7232dc85def91a383c79bea3e93d8f7065dfced473022e525efa9e74b837b63015fb38987035cf1773f439b4f47ee2366e1e5ebf7569bb5d3a30590fe628594877a6983284397bad8f15e59380fcf78438a9bcada4239f2719b8229f673d94df413ab57afab9e8421da506dd2f9c5823e60bfed856e121de98cc404ba1e673d82240c5a2a66665ee4acfa086c5664fc9c860837c59ed9fbe01efe0c9b9e19c87c38b99b799a1c1688a6ea2c2631faa31dae59133dc35775b36b822353c10ad31f9bcf7fab545aae4a543524c45e9bc93d698c74a11ef0f5ceea17c3328d33235298949cb8e8036780d136b484fd20b6f3714bbc1751c0afb9a7a2ad9ec9918267bb6c434031a76a02aca0acbdefbe796cf133c73c0370d993bcb77403f0173129ec49a2edbaae6355fa449eea23961f887c85c3e98a4f3e7ce6f50082b20c2e002bdf26ae2cfd0483a4e6ce709514de0367c06a1d6518cd3a784c9d165fb80a876c5c410f70e56f382decd48ac7c52a68be7d60bbba4f9fe2b732b2a297036f55b3890922ec393220680956e8b11c4c57a8bf943cdbc271bf881f3bcab1fcbc9195cdaa1250f29a3eff68b1ca0635a0411b30072910c829820e74187f4bdff93b72b69e037537d34d3d04632a6b26591354628a758294850eb14d51dda66b92836bd994f69c104f0c03198898f86153f04a49170b707c750871e1088027118bd7110f32330c4036b790788b639879128ed259684f5b27ffc6b13051c9b5e259a4ab3cb13d8a186049b2045c19507623ad762ef2ca5a4b29cfd3773d927510115aa64e66a76bd1c8f245e212365250120e3101bdc2a9e018fd48dd1749ae21e951c596db30c03c0e6f1176277ea882ec90152b2f4beeaae3bae0eadf6d76452b7840f5844c34eed263d3e0f26690c8b385b5272e9ae40ac8482af051dc374aadfdac615997433944b01a0cde5a763cb50215ad69df8b24faa922b28f05e629d95a00340b94781aace4cdf6da60610ee68f12484e9b3e3edb375302468fc44143cec44d85ade781bd3d47a06d6a040b22fd94a187c748ff27efb6d641da36abbe5748f83964175f54509588790f998cd4b03e815dc8a08ece194757c6a9329522c42c33fbc40e62a066d4cb7021984e6d255e2e56fb6a69bd2ed9347c8893dc301d954e32a125e50e5e92b4fc385ba97d77455f61d1163175b3d60bb92dcf44010e0c2ea154f2f42148e15bf9475ec105d3cca0fd630e987f8fce853e6fb9434d0ed6cf5e385c155224ec516efe83270df034c916098ae72711dc082217f75b2c56b105ec7f697896d7ddd4fba0035ca729760cf2b9e05365d4b4c7bb87d5c12335b0d0112c6591d3f9fdf2552f4405f37dfb5028719ff81dc8e746653e1051a0b85759dbdb9ba8d52ec4682cbb2b16dd69edf8266824e4a1f5a1cd82df5ed7edaa38ec7bdef1aebd023c634dfa00207ca6c90240333fc244d6b5a99121dfd6d3fe368de8dfcb581bef24397cef85b9c06f3ecaaaf5262320a8906396958df516c6f2f3ff7a8d6dc90ad07c41df32fa07740969be19740b9bef82251b83b9e3d702aa88681e1c1d0d730d97cc8d04faf7f353551d2972b04072ad4510c9a34fe364007d7fe295775498abd8dc3d7cd287c2b2573de4d1096242d5806ee885dca20aa1161e95b2d82d05807a5f159d6b3b60cb524e84838729057ae629408229139f404b7ac3114c512de6b614542671a9afc608ee7074edc49be37ca55e5e00fac9468b81825b58f60e55227d8fdca7e4193c935302016c0429245c00d70dd39bedfa2bb30cb4b785c25efdada155e94e0e6951f4f7c9259d06ec68ae88d61704fa8afcd1eb8e3d38cdb14da4ca236bf6e936fd4f2a04c03b2e97b63371f27375038e70487b13e9fd26555d2e79dbfb8d5290e937ca5a561fca82ba5ceda83b0d4257f8eccba3d16fd9f9c4c058fa3f22d3536a4b3005cd071938854e52cc9c06eeb2084dd475f75a90f539ea2ea6e237a02345205595345889f3396739d6732b462a947c2af31d99918406fc28dedf6d130929177a614444e40e0b20640a527853af75b892c24420ad9d32f7e7328cd78b943c09dbe359482bf9b79301eeb816b9728e5a05520bbd607ec8c57bfd51d73c2809b8fa238e0a2c1fe55f30639c2ddbe817887b3e8f62ec776148643820cc035837d679e6bd9eaf18080a34e8e10d3f3f1e0401bfe0cfee26d0b3c84bdb762a3cbae726ab195e72e2b1d1187a6206e280ad0d52374d7d667c00d174d0cdf70fe1f8960d9db6f4b07448ed72ff2fe396a1d3661d86e7a1280e8ffffb15b9b78c8fad7db815711000226f57b823bd76808fbcf93c6d47a6244ef5a5c7b19c03a340e99cfc56005832eebaa28d3cc2fd87e6b24a1c1a683b59896d6243520874f283231534fbe268779a1301fdc1924901caf5ba8b3841db44ac3ba0e0009940fd38b944f7e1a3db7503fd8b2f72c81bd6a51c983152a2e67d43e4fa8b2d5ae61c43a326513213bd0ab93af316fb6817c499d1cc6bf725b89eacec1ec1f8624084933d949c21a00b52d4a3d6fd7a840112d6924a48bea23884c166c93c1d8554b7128055e641df27aa940ed8936ca56f68acfd2002d615a3339889d64f2776a88e2649fcd6f63432bb2ac649f834c430967dd68b797ace86b3cfe77a96893603e9e1c9afdb8f9d28889ae386a51c8777104a8cfe63388a53d9c0814b499c2b3f028f0d356d533b2fc836dcb58a03ba8ad17ead665703680e8c2d44d721039cdf913762bf37446efe64dc0b3c016e446c86f19a25441e9e25bd1e3167e4a53abbeea67d419051edc83d67cce4a62a7458e0daf8c063296258ae2478bc1819cdff4324e89be97a20c9b90dd5f2f91d79ed964ddff7db68b5aecf63d43ddd494cea23457ea07af0f1ebd6e0b73d65542a2d26f0e2f0aad3c46ef692fd6aa70382a5c2e4ee62974f9a744335a48f338cad6a583b829c9999c36e10ac918909cf668c0f66d8fc1963360e3fdba6260a38be5b323e4b860befb7a14a0948fca664bd78df26b05dafae7887e192e7fd34a3267beec39240f676638e18dd479c6ec2efaf13ca45712b7d3a99ec251c145dd05de53ee49c94d81edf10e95b034c1075f22c48f0dbafc56504a615fc3cd4e9fc540d9f2cdab3bd2353cf628ea467b4c599097cda6e20f760d8e33792c809c577cadea3b1f4cabbc98ffbc67e758ee6524387c27c6965ff4eb8d88e3c56568c38f67e69ee32327fffca3bd3727d172a713a4d81cfb7db070a9cbeb62cd751a3128580d3a974a4de3460ad208df403cb40f6adb323eeba2e118e63f8f6f8fccae9c143a6fbb7c28efc73f8487652f1e1ae0433170c356c186a0808fa025620a4b379c2e7f26dff6e5734edeec14c55891b1fead710f8ceb9adafbbc0e83d17517fbe63e0acc310210b4f53c614378a2660054796dd29a93fbc2e343925f2f013a20a39d549dff029591a16a925eaf95be6d075433870e6937a93271b51382010ffcef48a396c20242e57047b72ef6fad059d2f02fac9f1e1df097a0edc1e413575ab482274125f2cf6ff6f101848f3cd8d1682607766061e9937fe5169aa383e7717e7b51c29b971a179522703d0d9be6af65e5afd65d61e11507d4525dca1d48ade69f0598c1c83b45612ccdb253a12711d04587c055f3cb0de1509813b7a07d91e2cb60beb2ed1aef40e1fc208aecb218ee0c7e7ee7a6a5a52af30ac8186f54f2da92f2fe03f792e59aa6cf34e22882e9501131fefea7d4698f5654f66d7bc9e1adf116e0ff572e279862ab1fba5062bcd230769fc98748654a0290a49fbf20ea7af08d00595f0293d72d8b0abaf28653c7ce15059ea6ec89e78d4631b9a67167b925a3bb78d2fe6c505fbb37a0139ad791d6326ff2724a76dbef972c9e48c0cdcbe7208d68ec01572106cdbe2c44d6410ae2aea0f1768cd3949f716b62c8f3aed6f5a45a57284702ae30fef803a267d83ae0609ed67c848f6e0f32498e28c37eb4f8db4d7db3d98b8ad8c443ff2b1103d3d13bfe9ee0d656a4bf1a64675eda572cd808467a14ed918deb7318c4d7396d1f2c53ff83e432e4a26c9070e53b2ec8ff44414746e8f06a47d1f1ce8a5d815b229a4d4d6658e7fe494d79f2cdd3c05dd0f4b8eecb96a95d678a53a6e687dfc55665652b4fa906af0af080003c98c5f08ec32f8f41d3268624c984d2ef9e5ab1bbf9b4bb2ee3160295076a68eb5ca9aabeb5980d6d02890bee33eead555c7738e4c384091e5a37e0d473d1ab04f9dd64eb819209da9004ec0edcc20a08c69a19172d714352cd2d7eb21b2afae50194b6c22b2d6f6d14a1dfe433e91af567344df97fa791f07b4924a49e74e213268e37e3e1216cae019def9ee7cb863971e1244589aef7e88869c552c275baee263ba10b2458b60a6636c461f6fc8f69e8e33fa1c071375d424adcf35d84f8e68138d934dda95964e2f84f0bf237984169c920c50ea9f0f62ea11260924cef44fd78da73d31a7c6b3cf0e6b975a22d75071678f1286d6d17b463774c025d1a0034e35b76186d411807540f84d19f17f9704c2513507e20422eb9ccdb996f8157f25c0a0cdd50d802274045ad6fc00d36a9f53ef6b0c76af458058136610b20bfa26a02f8fee1b22369d4a7f1c174d398de09212d8546359d72b91d003cc811cdd9b15d7daee8c76cb8f3c5e23a1eb682fe18830e3f1bae2288edbefe50417384065bb39557858583591a2e8419e4cfad45f43cbed03cbd71e1be2003b9b18c7a3e97fe43e3d8dd8c06fc8778ded7ffea2c0102a539031724d40619688da6f955469fb9a9b5e829de328049dc929a7d4dc39abd85ad61bb63597932e239c832abca2e4d70961e980b5b621b3d035799960e4a443452472d089c413794785400b2f16b3374d9c1ff57ed2e1ca8c5c44df2e5b634edd5d46a9e8a1f5864f750b15d259e481d3e61884ba59d6784461e04d20e894c6e13aa7a3e9d0f5b8e4d693d479b3ed9d79a91b3354c9a16e969115da03da731e2dd5a98eec720201c0a6fee3bf35956c1608d6e6dda789c9d4336983a7af77752d11b8d34a4b9196edda801ed9532cb0f5d14c7092caaff335540aa15f920b2efc0b8c88713e94436e6a17372476f31045a3042659fd61794508ee5067f4efca7672f07457698ab00ab9e11f8d4aedb36b8e1b200878c74eb73655a0bc9897b5d33641bf4883243c591d3d4de60f19b447974bbe092be729b1471868fb97ec99ad329b0ab9c6a1a8272c39b513f47e8575f2f659162deb7b4f5429a43b179d2fb399d3ede9964a259a5e2320427f6b4defaf55b18e7412d2d0e149772ebd33cdf4b9cca500982938dc9a526e81642fc68e731f50970c0f83381a66b40b4962aed0cd05aaf3c2bfc1cbf0b3ed9adf25b36cb753d02e0a4ecef60f6559efeb5fff33f1c6c19307e9efff95f6c95fb044140a3d738c0f39e0410447cfa4759baa3949cb7280601ca962fc329c0d76bf2b9480ff029d2cbb479047c7b79a8ed2e63e86c3778a193c515ad5b25f3d8104271439532c27fd1c035d503bc16bac85a58faea661eeac4e37067ce88efa33e3c0c8db3e12141da08d4b7a29b2f9dbd5d4aa99a31739d6df64e89d7693f2c0eb9e4545bfa7df34a3e70834f8f540529ab7a8c64dfa45290c8ce415a0fc514f2df55644121d3f40","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"db2470865aa068691185dcd60d0115ec"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
