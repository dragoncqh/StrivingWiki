<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="zh-cn"><head><meta charset="UTF-8"><meta name="copyright" content="(C) 版权 2024"><meta name="generator" content="DITA-OT"><meta name="description" content=""><title>Miniblink</title><link rel="stylesheet" type="text/css" href="../../commonltr.css">
<link rel="stylesheet" type="text/css" href="../../common-extended.css"></head><body id="miniblink-EEEA2A02"><main role="main"><article role="article" aria-labelledby="ariaid-title1">
<h1 class="title topictitle1" id="ariaid-title1">Miniblink</h1>


<div class="body conbody"><p class="shortdesc"></p>
<p class="p"></p>
<section class="section"><h2 class="title sectiontitle">Miniblink</h2><p class="p">Miniblink是一个追求极致小巧的浏览器内核项目，全世界第三大流行的浏览器内核控件。
其基于chromium最新版内核，去除了chromium所有多余的部件，只保留最基本的排版引擎blink。 Miniblink保持了10M左右的极简大小，是所有同类产品最小的体积，同时支持windows
xp、npapi。</p></section>
<section class="section"><h2 class="title sectiontitle">为什么要做miniblink？ </h2><p class="p">市面上作为嵌入的组件的可用的浏览器内核，不外乎这几个：webkit、cef、nwjs、electron。</p><p class="p">cef：优点是由于集成的chromium内核，所以对H5支持的很全，同时因为使用的人也多，各种教程、示例，资源很多。但缺点很明显，太大了。最新的cef已经夸张到了100多M，还要带一堆的文件。同时新的cef已经不支持xp了（chromium对应版本是M49）。而且由于是多进程架构，对资源的消耗也很夸张。如果只是想做个小软件，一坨文件需要带上、超大的安装包，显然不能忍受。</p><p class="p">nwjs，或者最近大火的electron：和cef内核类似，都是chromium内核。缺点和cef一模一样。优点是由于可以使用nodejs的资源，同时又自带了各种api的绑定，所以可以用的周边资源非常丰富；而基于js的开发方案，使得前端很容易上手。所以最近N多项目都是基于nwjs或electron来实现。例如vscode，atom等等。</p><p class="p">原版webkit：现在官网还在更新windows port，但显然漫不在心，而且最新的webkit也很大了，超过20几M。最关键的是，周边资源很少，几乎没人再基于webkit来做开发。同时由于windows版的saferi已经停止开发了，所以用webkit就用不了他的dev
tools了。这是个大遗憾。</p><p class="p">WKE：这是个很老的webkit内核的裁剪版了。小是小，但bug太多了。</p><p class="p"></p></section>
<section class="section"><h2 class="title sectiontitle">使用miniblink有啥好处呢？？ </h2><p class="p">首先，miniblink对大小要求非常严格。原版chromium、blink里对排版渲染没啥大用的如音视频全都被砍了，只专注于网页的排版和渲染。甚至为了裁剪大小，我不惜使用vc6的crt来跑mininblink(见我上篇文章)。这个也算前无古人后无来者了。</p><p class="p">其次，miniblink紧跟最新chromium，这意味着chromium相关的资源都可以利用。在未来的规划里，我是打算把electron的接口也加上的，这样可以无缝替换electron。使用miniblink的话，开发调试时用原版electron，发布的时候再替换掉那些dll，直接可以无缝切换，非常方便。</p></section>
<section class="section"><h2 class="title sectiontitle">miniblink如何使用</h2><p class="p">Miniblink导出了electron、WKE的接口，可以直接无缝替换现有的electron、WKE项目。
早期miniblink还导出了CEF接口，不过现在已被废弃。</p><p class="p">miniblink有个小demo，从demo里可以看到，brackct这个基于cef的开源编辑器，已经顺利由miniblink跑起来了。现在electron的接口已做好，vscode跑起来了。</p><p class="p">更详细的使用文档见本页其他文章。</p></section>
<section class="section"><h2 class="title sectiontitle">miniblink如何裁剪到这么小</h2><p class="p">这个比较复杂了。主要就是把blink从chromium抽离了出来，同时补上了cc层（硬件渲染层）。现在的blink，已经不是当年的那个webkit了，渲染部分全走cc层，复杂无比。我这大半年都在重写他那个蛋疼又复杂的cc层。</p></section>
<section class="section"><h2 class="title sectiontitle">和webkit比，miniblink架构有什么优势</h2><p class="p">现在的webkit版本，已经比miniblink落后太多了。blink一直在加入各种极富创造力和想象力的功能、组件。例如，blink早就加入多线程解析html
token、blink gc回收器、多线程录制回放渲染机制。这些能让blink的解析渲染速度极大提升。下一次，我会先开源出blink
gc组件，这东西很有意思，在c++里硬是搞出了一个垃圾回收机制，能让你像写java一样写c++。</p></section>
<section class="section"><h2 class="title sectiontitle">参见</h2><ol class="ol">
<li class="li"><p class="p"><a class="xref" href="https://github.com/weolar/miniblink49" target="_blank" rel="external noopener">miniblink49</a></p></li>
<li class="li"><p class="p"><a class="xref" href="https://zhuanlan.zhihu.com/p/22355765" target="_blank" rel="external noopener">史上最黑的黑科技诞生：把chromium 的blink、v8、skia用vc6的crt编译并运行</a></p></li>
<li class="li"><a class="xref" href="https://zhuanlan.zhihu.com/p/22611497?group_id=764036386641707008" target="_blank" rel="external noopener">屌炸天的内核来袭，史上最小chromium内核miniblink！ - 盟主来了 - 知乎专栏</a></li>
<li class="li"><p class="p"><a class="xref" href="https://github.com/apachecn/apachecn-cv-zh" target="_blank" rel="external noopener">ApacheCN CV 译文集</a><strong class="ph b"> [译] ApacheCN CV 译文集  https://github.com/apachecn/apachecn-cv-zh</strong></p></li>
</ol></section>
</div>
<nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>父主题：</strong> <a class="link" href="CEF.html" title="CEF是Chromium Embedded Framework的缩写，是个基于Google Chromium项目的开源Web browser控件，支持Windows, Linux, Max平台。除了提供C/C++接口外，也有其他语言的移植版。">CEF</a></div></div></nav></article></main></body></html>