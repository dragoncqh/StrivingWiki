<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"4d34221c7242b13056c266bde09e60718e788241a05bb2e8b47fd0010b64e58507e88fe02c21492089ec80464b64f5923ae6bfb0c410802a2136016a40539227d1ec8123f474ebed000e1c9ba41a5ce259c742422001d63f186270783bbcf87d6875b06b7568c63c03463f75deac72da2f803f36d7b4e8e8b6579c8f4668ce67c0171c3779a9c2148b56696ab63380b1c9fe8269db77f33ff866a0d2b6d50df3319712a064931f32854ceda03f2038cdbb18110f3eab268e692833e8642aa72a74fb2c4138612797e0ae6ff58eb660508d63c7ab034585a55add1c0d575c4b7b6c056c2a03e47bc15657124c21dd4c51fdcc9af18f8fc2be562027ccca01e050226e0547b52ce384bbb1f2e08b6bbf3754b36cebee931c9c1dddd1ce5a7158b4d45cc35c2e848c860e0bd733e8bbeb89a305e72f0f33b26f641a16702fc6d71c72152f9eaad4d84eb6e1f6117c9df2e7d38e952a21474bdd4e3853a12f8fb832aa2734d8d25bed14872affafe899312f5e5838dc8aa6b0af967014987df62418c46df9456badbbe92ff99abc66fd31ad9d8b6c156fff080c145d98cbcf617b4c35324833ec271aa6f4829b4944d997aaaac8046bec31fa17e893d0feec6ce9193970aaebf8209f738db1d75fe129a83107432c80cdabfc1c45455c8eb35af54d3c503f5c02bbeb4dcb2b3794a25dd6eef286da139bb8c440e7039f1a3b4dc3e29bf3aa437bb61af68f068903b17eff0ab86a9bcb49aa3559fd006334b177865c1d0b24e3967e86882dbb25d482384971913a5d755f63d03bd758be11d7b1c9b7a21df91c2559b71cba91e090fb07d3364fb5a77c5d769d9c88e54207ee24f31641176a0aea42f808fc4e32fa414f18d1ecb868dc19e14d8aadccdf992dca2a2ff295a3e542ae7294ac4952c99d0e00526ef5cd5ec2ebf16a57a2852ac50fcf0c98d776ded13f15bda612b17d5807a79d5803f64f6f73d1e4f577f01f35a28045ac33120c01733aac4ecac43dfc9fb8645268c9e60fec3a6881eb692f2f1ee69df74824c03225ea9b5f9440c2f4ee06d2bfe459465135c4c4023d6ddcac7f987df024391a098466f14e7fd3094e62494d2adecd40110ceb18b2e2cccf67d248787df117b628bbd2d1a8db3f4952b716eaab8c8fa5d2c0292cd97388fac045eff34fa1f529ab5f81b63e5e78cb72d25cb8c4c04b53d3fbd2b6536e3a705ec8931fbab11eb9750d74d155883a9a5b30f9beb54f5b53be511a926722e2e46cac95be803e000ed4b1de1664cb9c15bdff6b16d3cf19525bdff6b951a1165fa95fa5456c9833600819f0f3232169c9e0bfaeb8063e52331815b6ffe041dd861e41fef793e2b33aa8f00f6d971c8f16f23860169211f30669ed3f49667102373c40ad4de87d9e2e554653f0e98c663d1ce634b557e6848a8e027ce8da10d30ed99255383d55b76500575121b5d852dd4b45213cc9b667dd7862962de68983a448814661782e063e03d84ff7dab558f96391f7b262f97369199b08787c88a5b974a5e5fac40f367369d51ed3ce88a12d763572cb8a05b49d2ee0763674dee21b6758d7a365dd4a96c2f2c0343adb8887657bece8dd8e3353a3396308327c74df73ef245eac9866a9ea4bb13d63d715728090e66a580100bbf55554606f93f634bffb03a545f34acbffb00edcf90faca101563bfbccc85f9214381341ebb4b0723881c6c0ceaa93ded4af9d7f47658b93a751e8c9120904e5909cc3ebe55b4df8ff6806601cf09432b83b9a62150de7e7357d80097ac2aefe2d47b78b806fb645835483572785bf0b7c2bfdc1f893a329d20e83879259480a6a7bda398111e0e971569efd0940d6b5a0b126928e2d7545ac36248e3b031726fad8117699efdac614f409cc8a22a88a0148a4b7ed88f227245269f49df16e83fa044f8801216f28c0d042ac52d2954621cace073797d6d8c1874f4dce12c5238448463f012f3d072243c50a3bdf1c7eb8df0227d00cd5daa9e7432557390adb643b53cd786fa65ee81f633415b441f24cb1e9b6a2543b6261e9fa3a915071fc6d4a459308b6199d1dd4c19b524a894b71d68b9cc5ea7624bb8d3e09f23ca981a975b2f8c2946b239ec9f434ff0787c16304a19d8ab11960cef1fcf50bfaa149216232b2632a42fdbf619bbf42f6e9429ebe34daf0a3a29bc74bd7a06672b86e88b830123a1c8e3d5166373784b5416c3e3c1f449748daab4353524894b85998ac9ed0ae79e43c49cee8be802feec6979b005891232c44fed118131559c71935c662315aa0789bbb219d22763e0d68600443565a6f6c5307533ee540267ec87cac4c25415ae0f148bd648bc815c832f204e1cca7067a5bdd0bfdca1a4244459272e78f42b33597e8472aaf47ae56d7ac61f8530b0df3e0cac4a89578aa22a81f0de15295ab9742e05b58fbd0fc7da8f31e518259bc3578980524cd287a5542fdc8d7d9666ec9b4237f891012c1ac8ba1acd56cc7ae6bc29cac179b299de16d63868f705d3ae2f32b6fbfee371685eb42df6e323d4e2dd03d1241ea2dc537274d5cbe79835708e6984a397c9e3e5280f7ab511022ff282f187af8db8a7efce93ec4fd984100cd534f2f779ecce8daf9919173247610851037122584eaae7a35293ba26a43a8f8f607d18c0ccdb60d07e9131c9b20bc3c74c9f80e482a300c99bd30e9b71499ceb9e044d056e382ba7c18674801b99c3ad3bd18cdb1dd7c3435df734c57496d29302a3a1abf290735065a87645bd9e6f569171a42520dd4beeb12dff889d9b67b69f75e328ae0820347f573e47344648148148d5ef912b3858daff40c0600bcbcb6ed0b38694dc3e4b22785d0fe46eca5a9b5bb5732aadabe1be2aec4b798708584b0a3a0745a854d49fba0eb9af0f6470a6e3a6996babd2320a156126241e8d8ee4f15548b64ec62d70df7b6ae99b179c12b51b12640c0d4adba9083ac339de4728086f20e8447bece8f836fb63303bff3d39d57a554b8375ec232bbb6a2df292035d81bd5c1c71d2e0462a59bcbbd433e6bd2dc9e735c8a8f04c168810434da07855007cf253be8fa5ecae37fc863bfbe8c7636a0dd149cb1bc707e48108f970e56f2330dc80b4838678d9d237a2cd961ee5aeb2dba675392af98fa59910542802ba85ee7a8aab1e5823ea7b746e071ab2d815909ace378ebf8657501bb682006aaa73f3b36dd65f726bad4c9d41df106b70b55cfe3c290a49db4625f31fafd40b759ddc5cac939a0da050d59f1d2d24a6a69aef8d32add44c1930f59c1f23c846942e7f93fda6ce9ea5f320ef2374383e0f1c4b96f051d0c133c68bf36bfd9cd4a8e1ef28b1eb2789deeb9de66d9a1fad28843342edb8fd0b2b1a7d6a4c21cdffee27c5f628aa6617f0ffea5a073f2ad58a268e9fb8a4e237f521162e9c9100ec796d0250a7e636bf1df3e64643291d9faa8aaeeeb0da8f83f0f7097ad22dd3e23436c63f3fab5979a72021771ed39e8c15a338507584e19e0560f1896a5696aa2b7d3841c96fd7f7cb78525e3fbbeb663cde5eb847e6e8c768c3c6560dcb8daf0238cd56fa54ac4cec70f26e2bcfa47b5bab443cda61b570fc9e074fa17e4d293e66d5718e260c63f19fe0287c8378180c7dfd49b743c2e82f227f133e270f6e10b0ab9ea5772fea955f9d2b3e3c14f9a57baca1ca96cf6f031819585303cb978f91d7c1f1a95c76eebbf9e81735d01501ca54fdcf0a25c2e597d1507bd9972869ca94da863bbc74dbc281891e763a52187cc53d530b74db045f38e2a00973da2f9e92ea895c0fb70babec8c87ffc6dcecd672770547937fda8b8810cd99fd006a5e49d207a3192ef942cac244d5bf00fb43867c91a929734682bcf0ad0b8a1f75ab3a6cb34ba18802c95b2ef87082f563801b85b8eb82731b9447c25b935feeeea5dbca53acd210c6f517f808af787e3c561f2ae1ffc9d82e74cfc459db9ce9c226cc5537409e93ebc6523e44d9198444f7db0301f1854f11b67292bb60b97046cc5f9983c8b86a04551fbdb92e20224c49f2aa65a60d0d3a4676e261f7fab01e3ff8e7cb8c2d7ae227fa03ea9f6af0244e264e73612054516bc6bd84fae9a259c88e159856e806c318891e7729cb3df6a376a0796224f848ce9dd9c0e8efb448782086c92ce6cc7176841956b16e2784ee3a4c452878c843b76669402fc67d081b2d8d0c662657bb1dac4b6fc964f18caecbd80ef82f517de065ff8401d11af00768fa12eacd254cc18aaeeba431f2d283c1e38d6d661fac81631f2dd628e1df23cd775922fea36e47baa340510a9e293fe4936bff5978a9184d29c540afc45c04d7cd0fb5b57a522bf1a0a5f07e16a93ae69df6d7d13ef5667ae98ae98afe61b8b2b260db2b77cd61f7c2ae6e5064f25014b69af15188a207bbede512ce4dac54695999811a02a81760abf332b94c087340cdce9bd9f451b1fcc4e340dc7f5d1ef756e28e0f8462c6ce6ad29255a2029a8203b022a5cb386cc20bd2c3e17adb931a0ee7b14f986f8aefcf95d9f199a0d548cb75b1154a2c65dc7cd20f142f6a3271d5b69b16a1586731a5c68753b402c744056b67137907cda2150ef73f38a2e9fb4f20d542d6141dce6b967cff9bb09623cac7ac962bd34bce969d19ac3282e6523b784de7a0a52c5e36761463bd9cea65ce3c6a402637e980346571e8a134fd7d155681ef1e34585fd0df8450673ddd161ca9dc7c12c5e3bbbc2f72b334b5ba4fc0da65609a2d27cfd871173ff4e86213d9614eb3239c237e55486d8f4359a5049b90160cb316f1d4fa44e57a12b765e9625491007927ffdc05c999a1ef3af81ac4fce0e3ea2319a56355ab1fdd15525e47db718f88a2f06e6dfc77ce6e7a012ee82e6d3896d7d2a6eba2bd5e6e1b520f6d5d35cb4dac811a84c607fa5a8d301804103586ec284a7f0191ff0f9f2e755666f703aef16cdb75a528b0140c9585704855c9df63a65d53e4bf7e68def92c342a5aa4d77f3ce54b66e65a998f06c2aeca1d6decf2a122de2d445767bd5ae11527fdf0f999f53b77b52f399cc9cc3b56d086d0efe68a9700f4e19c38625c03b3388510bcf0474110a0541f5537ace0cfa4b6a812501a59240ff2854e34d2c87b34891b0f415e38fdbc3e0d81e9dfed6e879fdc0d4f2861489caba8a5bc1d9556fc5ec73c14edf0d79dfee19e1f6249eb108f9568007223f780899f0bfc32ac78f85fa2b9a339e361692f6154f163e56c79097b85f6907bf6850fa828568a728406127a57366636d543d632ac67ca7cc45d178040bc3ad59354df3613d9fa0106796aac873f11b1f6e93f2334b53a36b492db3f76552bb13511498be834c795e6d2786be491dba2e1dae359450343604e8bde492b097e84835691db10d6a6c5e0716e41511a03b925d9889f80a6828f66fdc8297dc4add2ebcf51505746f16ccbff88efafbd80eaffaf2ff54b3ef98f0c2e40e5a21c2e7ed58a06e8dcfb7b8f6fa5d48ca735bd6cc53a1357f98ece6fbafb89387cfb91d589cec90e32770bfe1e863e61f2f43302aef89b40f204ff00caf759e9ebec6ef5780806f4ac0b50867028089ad762883bbe8e1dfd6a26a191ec0ea7cd36991f06e44feb994635ac0cadf9c2d5bdc849b8e45af2a517108ae158ff03b1d6e101e20c7b72d3c4ae0df048728610cc5ff6e33e8b8430b3c041d505b3800c92b4c2e517c993818c17d2cd757949e364c6512559a50ff906939fa7f20e467891f55afdbba4961158fdc5cad213b7ae9ddceb4fd28c8176f11455e338eb29cc572d3de42e5b25eb24009afbd10846e2e454de6762535e1086d9f751ac317fbc3837ceb30fec5f6cf7935cc4e157e651d387fb660efc51cdcbadee8307c40fa91109e38663663e061bb3e6bf72d3683a5942b23b81a32606c001871ddd79fcd0ca246c21f40dfce0d246c596a067b075e05a5c3b1b2cbcca32ea14fd00b4db5847012b302d81dff3bef3ac49d6cf5dfb7a857c919e4c9c7c1e7934e6b66bfc7224bdae89b97163ea1c00aa9391ab98cb2d62309fcded37e7385492354066d91044191f2574a3e605611d8f83d7328cc4c7de52c53c3db71a3b1a4b2058bb32cdc3ebbf170e885480ff854ff588c6840e2ec3f9a21fa53de3cae107b2f9cfb07b566e14ae2ff08c9f18e086f69e72060be666ee876093aa0b21b4df44fad15649ce089e4846efad887bcab21c5e28f0ea3ddbe6d2bfb12c074c91f22c974abfb38fda932a325c8d05ff3c2fd5e52dcd015b972e6cc5c7839844a6bde02d636feeee43c6f9c8bc4f08d7b21637cd6d29e4d0338ad5e4b177a99f7109bcbe8eee1691dc97946e8e576116cbd009f11866a92860d4e2c9c685b952f02da9e598d343391e6945fd288288abc077fb64be4cc36bfe26b99369aba02511f0a1f44a6be3d89039db0b4c056b492994172774903e50e884cd2127bd1fa5ad9a6f495fa7ae86e1ef8ff064ba3f8ba79694cb6a90e63ac066cc7e17e30fabf4f423f57e8e7126c51e317142b7e0ec1b1e45ff125a1bbc68403a27c6ce2fbe611fbbd3616d87db10a1ca835e9d2af043d3bd46747c3b9db82b1598a9d3ae60e6f5fc1bc77baade575da136f108e50c8a9a3b63fd4185b87e902d016735be48faefbe27898444969349d83b4324dee1c5d6f4eb1bf51c2f1bc3e451f12f6538792b3ee1b06d49e015c83f085a53f2dc5aec1757697ae1054ddb7b90924b66a8fe1858b3843127677d101fd6a3ee561c351d9663fa8bc2b64dda9bdae78d1d422fdfc2b49da5d5a37874c384ca07de1050d2824573cedc61b7bcdf71baf7fd60e8bf8742355494c7163bee85c432c1bb9f7d9f1faf10dfc69202017093ee497e4d74779922f5993cb33f97f640d57b5d10c67a5841528743b8765b5268027629e7c90eb1e2f88b28605ed3881c8097d4e2d6c94d04aafbfd9b7fd3380a21919e3c7711ece290caa0c608adeb2e799311ca19d59c05f809e8a64d1caac846ac7432a7f18110f491c58d2f890124f241696c20590367dcf6af9bff8c74576eeb44359c4144da170fd6fe6992e842c91604c9c4b4527764ce91e0931df622d4bf911e1efb5b3d015164b72b6c43683907a5ff8373d5cbe65bbd28627da48ebf46d9d59e460b228d4ced9cdb224c892cd9c0da6595809786380fef6096fe3843bf523771dbdf0419aa50d14a24e83c45f83a81681b4b853f444d0b852053256964dd323361feae7c8dc93811b58ace14eb004dd606f1f7802f7dbdcd396fd6d7b1a1f4826aa9f11f469a2702c177abc8d020227a9250b140502d2897b067061a71dc7e175ccf2de7e6bf28865db938b29163a4c0322ec034db85472e62bab8fa6ac88f9c500a855e0980c515f2e89ddf2de7bf8f49251140454362b66144c6b977eb3cbcc96301a4f4506aac373bf17fc5a8e1055d7f7599be32900bcfce528732eaef20954fe8f7ecea5bea260a7a1ff3d1c6bf0a1dba159a616a24bda9c20089cb05aca2a0f201156caadb4e9ea4caccf2597966fbb85f4b1e76b4378f11e0a8057856de02012fd35664b10954e4d108bc631d8d5e7a00c1e55cb80fabcf360c6aa59ffbf3b0576f9adf54bf42fc0a91571bee901edabe0afe153013282307b547df3c0c11cf9be8d7673f8218f9dfbbbdc8d570a422db922770f5238a9ae449b293a33ef1c21199d27c22cc748f39fb1e6ad5a8b3c39165abba7805a973102b56569cd7ab4ea2b0c8c10df089e79115abef54aaef586a45be9eb2c22282c75db6a5fc901124669404b142a75dd068659532539cecf5f0ec489c553a9e841fc8c62d62370d16965eac5161d962d63d092730d95b0fcb428235e115ce0f89e10640d9e0615b344239a8b1cdd2dcd66e082b32734d8af3b7d79ab4335275ade167316251fe1b4205663d697e107814c890058e17abd6beeaf4bd4bb72e130098ba08d733ea8101a4c4bb01e06c3fdb5797e3dc18ad25ad2453e48940046854b83075b11d74058d7da192e039a662f39d737fbe84ecd78d158461f3ecf9d8f3cc20aac497c9b4e7903b0381e873f87ae41a7ef5aa4d4e7600a3f12ac83ca956a188cc3ae4e6c30e02204bff7ebbbd2511199fbe39edc5bb0aa41a2b8cc683d007dfc5312eb8977f0f61cce8ba6a2d690c1fb9cd8f5ab698e681cad6208066f97a9f46a23243fd39d9b3d1e3b79d40ae23f3056e39ff1a75c7b97adf5c7d570f6bf5cfb05ba75efc5cc1745fb20dd499b7387d17f1d523a4b09a1f4ed9e272127e45398ed65c3a4d5d4f7ab8d27fbbf92dff88996ce43e1013500e08753f70389e695e9b8c65416584340ea586c035015771f932c9d05ae72bf9c4bc775f01ec986ed0c7229d3e0424974d36670ed5dde505628762eef839ae2b2ebc9dbfc2496099e49927e5d9bc4cdf3c595de993f8d3978547db4fe7b7a08c8b7793c0077c9b0d7efa06bbba52d0fb1b2ce26a1d14e2c6bfb57a0a26847a0a5ac4a7d334e72fe9c449cb4fc0e3c5726655a8c768ca81900d0aa8e73cb40ab1ec750e9bafcab5db86cac930ba7219a8eaa0947a9ee24eaf649d6c6e062d6d09a9d066768ef0cfef2929ac1e9a7aba0f12d1e90ad8955b72555887ecad1a449ac775ef0739a3879fa89d9991bab6bf6510f78523058aa950fb9310495a4a7dbbba30c00097d51c52bb6e5f3e18a77e4feaf3a031ade005e8b68c32d5bf169fed349c84101aaf7495b21173988bf189c7f78e1494dbf21ff4bdd8781e695bf0abe58e28a80a244ccc464f8bc34c1fe7d6cf6cde7a1cce4f8c65521b598c7e1b70bd85de6ea7dc4d52545d0833e73a99e9fefe73a1f511b99e74a442b9adefc1309e34cbabf4b88142f1f9a27537e6bde87e53af10b5ef22d61ea329b95969e475e2197da32dfe505b31cb6250c5cc96e0b66c96451bc5de8b8e5715be578c513ba7bf6143738228ad61f004bdcc7f1300a4f47a2445a29245c61e3aa18a7ab7998d86079fa1435cdbe4d835c3fc0b9065fa8cd42b180913a2b03f0a61d89096fc6403eee67d3aaaebe06c4b03fd95c47a0c652e772f0fb9889f7f56c7ed02c6bbc11893aed12991f84603a4be608169f4af06b0a24eff33d2b743b7aa7aa561105d8773d18e45665eeac84ae7dfc5271676b3b9e1810cdaf3aefe1092f911c7710a54d4de2c42bbf9606763f93d641cc346b166173a79bf8101596d903176d8d8e6141192786f1c82fefeb9f441fae943e22ce05c16bb10e17ddd0e31ca9bd2f98d542d84d91cdef4dc16617e36de90d7694ca913ebc5f4c0cc69396c5a37b912860077bd83e78135cbefd40d83733e402d7ffc791b2510f7f13bd6e049fa784789c125067a2bfa4af107f117c148f1eb4cc5dd6a233bb4bc7cd1267dfc20c368f608b87879a68288b6d679686920c1592aa3650efecfccc964fcae9f3171d9776f04b7ae3bd687d8fd174a8597202f16ed1d4a32ca0e21cc27dc76d9cb38d76b6030762179c8c09d6c1d5604eec9b1cbbb8412a1a36b745fb5f62782d5900cc5f30c4725f47436ebc96c9ea133f1353235190d587669d7cbab9671f590664e3b153d4c08f613869d2cb88964b5410f431ddd02f2a74d101db64a2148bb181ab5ef808cb20fd688f57fbb1bb280000c302df636899bfa5b329fc389615652e530a6bd9e73e1fc75ee41849c0af523229382b7e055fa69bc66f3b6f5e7eac379a2cbbc939ebc34af0477d56cd095d55fb39556d1dc4ae73f1edebe76741b74de5e30c11aba7adb9ea0e122b052222c423a9eb65006fa725cb1b59e31b7ffbf4a75221876c96cc3a0af78badb5df44d87c36ef172229545f4478ce064ab503ae2eecf2873ee329555935697386a11340b330332337314b355b0940883275aabcc9196b8fa55c5c1a3260e5d7d99b419906fe5e96df8efddf052de500117913bdca1a2d67fce7acecfd1acc83a55bcbb39e4a5b85b2eebc4922741bd5f9255debebb2e84e39ce87fa7a95ee185d17f3812276e8ce6a66c0f86afb6f4a476d60685a93ebffda2d2d8fdb9008131bd5ea0b00e82b9d6ff9a07b1ab2f21731e6401fe0721c055cb071cb92a774282390bb05cb71e412df4ffd633b23bd45b1441fee166a18dca68f13b722a12c04e071a97c74995b866d4342d4e6fa19f173eeb9f4c924f410e7f2a411a11cf3af99820a8cefb416a46f1242804dc47ed253a88fbb8eff23727b16904fa6d504c6ca5f69f91ffab19413e45677d3873987f1174add4aa2e796ef0997c0a83957d3a4bf897df6e7fd49a28dd86b0473e59eb416c5b6b55e9a63d0b5d4f29fdf50b6c00c9cc0c5e451eaa3c2749e0c05668d5812d4371899613db941a8e32fb6bc4136aebb100264d9c70aeabda4749f26f07443985c413791471335957dec61bf206010d27547bee6fcc2dc2db28cc80f27f7582bb80922e7575f62698a7b9b86b770e24bdee596639aa77c54995abe02d900a9e988753590fc621efdc81a9ff168bb9cb6ba1baf289c2561316fda7086dbd109fd60d17aafd8a08147171713f7d3b4f008f321d39d9fd8529e6fad535038616257d0fda703aafaf98016fb10d001e9c74943da19b995de21cb0206ce63f06164d81c0be9dd6f56abe55751eef5e720f7bd23bfc65ccb55c1fbd3a1057ef629ba27fe1a45b014be5ac42f3f0285e5ec3d0b000811d5a04ead23996e040ff77705fa9d6c0cbdc97557bf68312f5241bfb48a1e7a055d9e4d5420d3a431470fa39b14ca3d4f0a38e43f3aa610b7245aac1f4cc94039d0d0236e9c7eb6d06211d9dc2986cc7cad50da50cc1b90979ab4ee4be50b5e700ff31115c5c8a1d2335459bf287442bcacb7aed6eb94630107fb97dfd55a9c329fb3c3efda1599859b2a7fb1517de71bf54a9b6e36df64ef698c1fb0a90fa7537266508974c43ee8422a4ee3eb8dc5394a92ede71e87c4b9e14250cefdb08da5b95d3741a099594ca26384e55be1304eda2eb6f636aa80c5bb3a9c8e329afa87db9a99aaaeb1099b325e4418cb401bb2c257665cf7d1ca9639696213100d2a1eddf381a2c59aa086b6f526e082bcd04bd6c21134e3d4f91a68ccd63eeec2e99c4039e721358d7899d5b2910cb90047d8366042ebc12fd721ad7c632379772b8f5e59a8da16df88bd530e68b43e5c561cf0420b5844033bb6e6649569aaad8a56689cd3b044fd102212376109e9fdf8ea40dda3bd01280ab2f50fda1619287c1596e22e35f8fb3f809f99826ada39917471747022c6279fed6483705254e556646875a61d046287b655b782f9fa72a959e959f7d22c51cc598e307338b9accc7358e1615858e67c671e4f69521ab1b6af454ed0b212b4265107a1252c162a566fb5ca9356a39d56933f58b062a9fbf9b0e5b624c6af4aa08e309df04ae0bcb8120c1b3f4f86ad621981086d1aaa23d7099ba648452ffd201e2d9df7abd18c51185212d5751334f3b86a5551e77fc9d4f1eec3e5a0da190c60fd8c2cbeafdf618cd4c83e84baee5144064c742787e97e2da448f2db66a7dfc5046809781f036cefc29d787aeca2854846f1ed615e45a55c89e70d8f94e1d4e4a6144cc68e31ad5462cae28d10e2adb274c769eeab8ad97a25324680aece2e223b2708ff3741d7884fa0f6ebfc89206f6cd1b1746e375e8867c9c10ed8aec486f63f67702fb9c3e4a0743680bb760cbe65ca90c70297c8fb1dabbbb7d5f3b71c748a1493d32e00e123281cd36d5b8a07163137d1619ef0c5a80e100c47aac059f615c785374b1d7a23ae79a787686c55b8aed671efa0586e3ffe4a943f98344ceb450b98d4a6fdb510ba9da708c5edcf352d0f6f2ad4d9821741e57590f8f7e0b7b76d9145caff50c25f943a8a13bd9fcd62730fada9cf746a25d2230a01fe8a30f6bf8aca1f918d209ac88f170cd46d2eb66d5eacddfcc0231c99affff45185f68ef561568875cffb4a566155fb3ab742082f037ceaac57a51e78dc8528bb8d71180e199de264d3e9760d4bd612a20aa7bcd776cae253f8e4ad679bf4677ca82118d8e9b4fa39fa9c271236aab427772d4722d184b9148c44f6098a0950ea003bb6857dc01c20a01021af9b369b8e561e999c54f406200de2e68ae97f765ea895c247892bf74fea71d6220c25bcd610bf01b7a82c4f6072aabbf6549cf0f12d103b2edaf2b43bcfbbb691e475c2aa6fbed8c8da0752cec858d5332a87cec2ca11e6ce29171823c96deaa6f5c35f8e20be39178439687e37b3df5de08714b61f641fd8487f4d2cdb8381e65210f6fe37674e8121876f73e3d7dc80f1b8c38b6dbaf7e4e6ed8e0ac985f52f581a23d9e773d8c5320f8a29e9e697afaf338e02fbbe36bf7de9cd239f9e56d69a7340cd1096803116c635fa98966b624c0131bd8f1ea7a7ab6453b839cde685627543f7d1ef09e048cc4501144f144264785fc76976a71da266372b21f2ddd3fb81497c6070dc56b5de888d96786dabf7bf8d875ac7b444a4cfc18ef0a9655cc673ceae4880e0479d82c073a4e35e9d358557b005a2fad1a16bfa2aed8dec41bca659cc7f617952b8979c44cd908d092c6c210f8fb3044a1ff87c59f825444eded729b97bc6cde3b70912ec4e0a584d898c829e35339181c3e4368eef093047aa64a379651e9b2b5c2b537c4edef7edecf1297d870a0395eaf78309eb51c823cf529d9b725c1eca4fa562dc94e5fe4223c5157d4b7699167103667ce2d6c6b76a09d877424553e15f332f058782f4a69d3a31c128a673ca3de71a257116cc449b29fc143abc381db6c2665c33d1b7fa3e0ee2550ef9509b9ff7aed9eca93eaf3e8aca6291d82cd8a3e6bcb1e8d5c8ee110a340b7255663cd1db69fe7ba6d1caba1cb9508e9042531f6b14ac5182b258d63f2663d9e1d45198240dc0af23f20da8c9daac4f5e5715d2af5186a6e26bc3d73cc3b6917bc47982cba33f377c3dc6585aae9fd8e2f9cc2409863ba5fbd5c2ef834f956d285b777a8d0b1bba3da5fcb0e79a665ca0e95dc949f59744251a54d96908ecb332ea17007b420b618a25703eabb35e826c6e7d580fc9cd84dc63ac637895a591d3fae834990c10ee1b11e4bbf53c509993df3e7fd6f4584f8facd4440af33de05279dcf6fce7ddc5c564874d3c7f1cbb67dee9010615796282080fedf2abcf1e04c315b75e726dd1ea23d3e47eb17cdeecad6bbbde11926efa2893e5826e290fd2d4cd0e80d92ad20b8ebb1f41b22c3450a5bd1775bf942b74ab69004c27d0dbcda9f5de8cba99b007a902ae1254315837d662b9c426fbc420d126363d0a02b6f01789d5674aa2f0925acb4447bea728738517333d7affa7ebae917142a5a1f9c1f5f3637c158c68f839e31f77142f533e30ba101cd8c4034e434ca7c4802915fa42c554c0a8b9667ce3392eddfdcfb2f91fc71f8d193c71d48aef793ca4b23b0603fd06aaf57a9a7259e7f008ab153a7973d9c85a1d97fd880440ade1bca5266d674173adba1d0627770bfb252a2b365f080af1a114558f3d0260974e530c7dc4a0cd6bfc9711ee6d8e65a9f6f734bfbe161a8f1c9c8196ecdb690ae180f0e297fd67fe34ce0fabcf8e5f691433cbbf318d32b439ed83737e346ca5aecbaf99c8410414fa2c998e8518c33597d3228f5d17f595abfb8f1b39f08230c16e09fa0682cedd6ec3bcdd230a974962e11ce16ed3af50aa851825ca3a3c1a7b59b32e34a18cd021024f0d6b1b7e44443894ad6e71f9db403e253c41a67cba2db1cc12e048a946472d57d219f24e37fc528f02faa81304e33ecdf35a87a73697a059d17c1f5d4475063fea9d917fa571aeaa949af80b5597d8567f6ce67dacec4863496ecdbe15705389fb72fa8961fb6c2f6e28e2681ae1620848dc972001c9050be22f1cc78ed3148fd8d2c3d71b9eac994f0e1ee0946efec4aa10be80ad9c70aef83aa0c3b19303deeffc38d0ae13edeedb44db5dd6df005377c21771b024d50aa5c3d915984f5370cc86586db39f1d25ee3f41de78312d17a2690a301d9c3a8425f723f7804cef82d9015742ba77661dfe39f5feffe646c587936d12006bc15ad05e9b9f138a037b1977fb499d749fe2b9637bf9ae8f7f08c69ab90352d5a3f90d11f719edb29328c74a2f467a4d8113666523f9c6561eb707ce8359630188c7f09c8b543514a7ccdf5cbad9ef343d074799c42277e8b804f2871d633738d9a216926acb2b94b2f91a04cc261d5890702d7ee457effd9f471d82dd03c9ceab79a69b506b2dbe23fc6f4ffdfd0aae5fcea6adff059ce910d206339cb386fb97c5a169dfb9c327cac44129da5e09951618416f212e1068c52d24bd3cf109fdd48cb9e91690327d0465058e90aef404e314f25d5f66b0e73b976d1c62b418d9cd7b5cedd6522af7384db6488740d0fddd1c76faeacf2eb7bb747b91392e41f426fd1712b9a8ca60b7e711c311f0352904c5f46549f2673d3d7b92a28ad443a904107433fc0166aec0d469a039da7925c4af2b4c573490eeed45bb73e5dea5a11f1403ada389a7bf082598398235783a6f9b00536d3de8f1235b1924c2849ee0458b7816d15063a13631546e6b73109ca49875d4e1de40e3d74107847181237c976c84a9ec3dc586112ab586ab9d4682a2bc415b8cadafa475447ee097d24e9ea29b2629c7dbac744c59890a2392b3ec962ce98eabd19f0938433a43b62db0fe252d2294b4fc93eaeaf444c0d78385d2b63062640eef7609d7ba1471aca28eae12e1b03fd0b5a92b294d0e2d094b20492f340b8544a6ca58e0b59ada876fd8aaae2db36a062da52d1ad709ab699a0e09e5efc2feb3b6639891c85a5e41677e7c5c9d9caf39c26db11416a644e1785fab5c9504811ee47754548703bc9966ccb154b3e7fa0ea5b5ef082abd6eb4088da0c0b6a874144e451a142278a36709a3d95954cc8d51df085f9aadeb832feed7a8b90ef578f41637ac9f8f4a34afbb213331c240794ffa2c3cd6fd419345fc407f8bfbd2871248184a9db6c4f3f61c43267cabdcf2cf968890235b42c6347fafffcf613450aeeb916c8f037b380b1304396e6e07993623969c5119dee9b6000e0a134494418e80a0b286cd7ca3569d8b29eecaf0a397bae7a07beb94068a656d15d7351b01822b3319b10620f7965fc79bf7571c219d26181fa38bf7e57c23457e5b86e520e048e2f96323cec539de2ffb0a0b0b2cf3254fe36a2b98a4cb1823e3e41079d5f7a8615a840cf62b6de027a31265068606d48a0600f4e6a2423457dfae7a008363c58eff8a69219f6deef7a0e568d8eb3f736d30e05988e769dcddabb5c62ba4bcb78ae959be4cfb78d21d7c704382ea06bd224f685bc1784df33371e8d76881d3e642a4363c19f3269a33223e1e0a3e040ff3d386ddc3f81c6afb69d946dddc556b29f7cef2479c933347d3db0918d8162d18bda766f8fd459fbdd3c84a2d90386a8a76e86469c8ed3fd64d17e75c3d12aa24b4962dc491ef00d3ae4d9e19982299ed5917fca7ab4aa3c01ed1528d1b7f707c1b2a0736f58c27f0e59e3b1b0469618ae8d073fe46d80e2be3d38edb31038b75aeb5f05bc0e2469ce3dd81f768abe1353a2197908f8221d43986db6d867fb5ad05126354b07cf0111e9bae2e8236cf7ce88cdd22550e8c5b454187b2524954a8eb4af0e89437de9c9ec6542aff6502a361eabd1626488c5c494ee58a2b69e6e15d0c557004d1cbb0efe578cccac91468595920df07f4bacc27c88b8ac6a4a6fc5eae4f886105daa4d6b703fe79e46e38c3db987a3c5c8ae5bbae35938a62a03bfa7d1dbd6cfd00299092faa935e64bb0d4a761d93439597bfe692259bd0c874bcfff70ffad24792b5428c642d3c93a374b023935d3d77a993270575bb444108c4223c698d936775f961ff99cc92cba324bb91f5fc49fa29e268ede7e2b4537eb725aee726c17e48e24cde5ccd80731f5a43fec540d2f6fc15d5bf6fd28d9fccc03be7085ca132abe658e945fe701a37f41eb72067a0828c498fea7b86c5b29f2edc8c8e8d289084fee4c2efc46228a444960bc4ffe48ab4404060ce3c04ec2689e0d86c87111176762afec2ec2af424c7aa1cee8fb46a70823158fc4ad294c74c21fe82dd31062d3cae96170de8b39796b3fb56040499e097a94188b264ce9bbabf65e7a231acdd634632703411b7b915defbf216ef536945bb740ffa3ad4e104a63a6546f23e1e3894df3e55b950c158ed7593d10823a973999888b919eb46c7111f04c2eabb6d4489f3c767371d9285a9976c14f0a844dfe8ef6bdeb2b51533c76ef81aa2c1c83ca89111be292a0eeabc43de418a6190ef59cb1dc342243f3dab81e71c00f3612a54f114ddf153218978581d6e3ce3454aac7e376bf96b48e35b6501074281dafe4f762714db73d7d59c1933d9be898d312ec08b73cac4d9e28a3c7124171e8012967f46ad603b364fd5f80b4b997e86ebb1f6cac60761e8951491e5ac63a14cac82879d35d1196c619a9085491e0ed0543a09276b8489b4206f96ccb1bfa648b2a744d58c688c4fa2931f19e6ded563d2f07e8e920c0f89e084a802583a4ce021f7e59066f3740aefa53c9a1c1a88a9149a3f8e5671d3f6c5ac9895909545c8095bbb71462918df76f9d2968e6662296e11917b6a835fdc74c06ca62d0300215ab6e8a7610fa37004f37210f9aff3bff34d839eef7798b2c52c36b6371f7c28adfb92deecbe2b6c2f43175a064c9fe4d17fe788d9d3c9e1ba0850acdf5d581d89fd7279eb1be30ff36d30c9b2c2b4270121953f059d09f3b90fdb0e4d9190324b7f96c2ddd56c8752ed8d90ffd387e4e47a35871cc119ecbc28db782ea930ed958339e9646dfef785f95560d10de8e42d128d0df97404e3e4c3987b5b6d5602189d03433346c6d0064f4b3ce81ff214f91910414e750e7887a72953e8731c940e2eeeecf45eb5a5fc046167cde6aa30bef064e635b7b04abc2b1b81163b352199bb32bd09afc3be86b5990d44f2e77ec198b5b95d30b56003a27c02b8d18b0e062c4996db0417bbd6f6444f34f3a4d96b99751471eabb53769732f5915cf8c8e8d20f58e068b3d0edd63b3bbeb208b87b960179d5acbb2a8772defc9836962a71e44b6ed74dfa47ea49389e2dbe6518dcac8d5d040398b978c07235232d0648a9f2abfed14902ca8bb4b114ab6e2a61b3183b9932b3043965a426b3e696c3e5ea8db8d01f3446bd1a35b9ba00283f1042e1aff42dd23f6979f50eebf5c0c05c454650197ed31e3e378eaa72fcc0af4f6f43909ae79ad0b3daa01bde0f61c5fa9a8481d6401353a967993b1b8678db2b75b8d1db01987acb7fb02dbbe3996cefdd309bd9b9ef1a2e42cf6109ec453a76728f6a8a9c03af1513086609abc8adadd150739f9b745142a7c1781e33a3782ed6b0b351a4a76a1abb1994407315dd7d0640884f540ec8bb5ad8536e618dcb14226dd1e5d7938d6112928a16110dfc22ab9e5844a4875f9b5c8efa92796effe9d0475de68474056047ca2dc1bf5932ccb459e43792c0d39e8d9563ca3af065603cc312c9aa60e7a6d46d0fe536367bac3dc43b039f6272a0da7eb58c32fd0140da5991fae3db77866f5b53ca776a59794dc0e6871eee219eabba30a4945af27f5e1e88601627fe3afe1924e5526f89177ac4290b51b4820c977143ae0f4a50670b2e19e3163b377ca143f342eff2d67c479eedd252e518f3ab7fc0c933de5bfa250356662c5079f2aac22eee991de9b8ac4e0dda83eb97e0753e777e031ad3097715588e6b8342563e699723c2a51998a56e8008df5693b3d905b6ea578d0b172160aa29d5c7c0994b91734e5d87449a39b703b3c6a17a9f02168baffb36ba8b855e48a71d94cd5438bae1258b7dea7bc1abfc5179888b9148ecd35f689df5fc1852e916cd009c81bf3032fb1f1e4f074408383df14885f4862605999dfcbf190dde75151ca2222d5439fecb4f8485fa4f67574ec3889e3df03b1c4d8e2128443366022b47d1a19be6b01fe179f1630d6e73098cb47c41b85788e14de41e23513ad19b47c3441c692a506d002f86c5c10028ecbbd2465fa2daf6964011e16647175bfe83b9a2fcb5332d3dd739d6ef912c7363c6073dee4dda033f9f5858ddc69e71b9917094a8e370b35c5951a2357ebc5e9736a00ca5769fa27c89a57535645e1ec08ce15d79c632c8106b8033b01dc5a608af0fd29ae3672ad345243ecdc7e9891c39a496ca889c183bc15bb6ed26bacca6e1c28ee6d2e1dbae13d5b496c1445055c4b7522397dfd718dc9c3800ec0a521f4ee2c415732b1bc1be1fc23a9e018af1340da52e7ea7361b081fe4dabe5d19d58b58695e4b81d19935a3a50c0a44d8bbf8047f4865307d7e4bda9ef9f3b6078eb667574fa91a4ececc25ce177e5a63e7c54c42383e027a5920bcf01454f10b42c25ed4d332e030e48bac53f62e3cdbc2b2429fc31aed10d3640e50c3859a338055fe2564c733a858193dcb24e6215f5441d4c8b2a6bc569f47ec60e6665ecb76a3d3a44563b9e2570fcf337c413bdb88190c8f65aaa9ae153fd34184e5c6c90355e6d18ba92f4c031f176c2521b7c996ba8c63aa34a18e8117f1f0f1122cdb35206d6a05fe8b60baff5a76c00d01651b734707f571e4aaee22322165a64f31c19cb56f11a885df4af27a9394d8889f3a3c826c5ba7551892278918406f1467ad87af3d628694ab558840048e90024035e52aad2d936d69c79e64113dcbb642954f8d6a011b6ab72e86bbd24fc0886cf1ef27fee5b2c947cb9039063ac717d7a0498736142a9c5764582be83479856380abe29bd07a40440eff00aeca66157ff16799aa18059cbf25f427ab824469a45a641452633452f4c55b554187be3647d362b2dc93cd6f54d8be6c45a663d20bd479ce5d43982d92d45e5fbe48ed394469645087547de375fc95fdc79019a93caab1f7188884facb2d3504687a36bcba67c1c498d805c3d130f3c10f2ece7af126a4694f6376f7831ca436ecf6ce921868250b51786f4078e69a28fd40c7b18d5f8033294ebc0eabaec2e8bdc34659b5f85623341eaab88d9335ec67dc8dddc176d6dc1e94717d8133b80ed80b7d3f79e50c759bb2ebb9b7a5833f1f4354ff813cd8275e8e3834d19a8dd6a8c195ee22c515fa0d81aca2601a5f13948b0bb7202e5734716753de6453d32689f342266b14ca58487b82a033940c57d84c260e74bba0c984298ebe13ceff6b910e153afd91e99c98f08fd1dc8cd5eb9cb1b5681d54a2d47855f4babb2fc9a0afac9c77099e8cfb958299c076c2ff22738ceaecf7970f8c936324cc4ca4f53fca417332cd48f5a67be3412ba8f1c51672921c967e35ee21a10b044b1c1dd0275b5690398d8ea7e8fee183d0c19ce2f4b4fe11343eac1ad2c9d19d9fabec438270ef21b739dbc2733cf2108021af6e36aead72d8fabd5b8bfcda9496d144a289a17da713a8356a6257ad13068d590f7c65a8da5f71bdafdc7e4a405ab8cb51e9d5ecba5fc81870a250d4046903e6cec96b54d31d552c389dc0a69ee60c11942ed4d47cf8ae68aa264a8319adca541d078ad334b84c00f925e3768968a3b8cd4b224460d7bf6d3bd0d8fc76f8bf8b5e126c4d6f125202c0127230a3c1bfb6cb5508e36dd9178e10643de36cb032cd13119ee56632d1f577061b77d8411f2cd6088ab6ea98b25f10a6529b199505ea08132c967cfe772d37a6a245a1244b8d13471b16507a3db30d592b7d9a66add86a94529ba7b9c77fa6c8958f3170c16f28e9e7c2a312938b97f3c26a4f40746421a0a302e5275a555a94096d276349acea6cad0b450c3e9692023c04c47e55103df32698f1fd94e7b50b90be42a311155984582c3b76034a3d6a6864e7fcbab43f5039cc34ca33ab0f67a65d5a62ed513195ac4930bc0eabfb6380b747f9c7fbe729757487f8a0386e66d02e5c446dcce4fdc90ab87041580d83105e2fc9199d31d8a915f5a37878c3def1edc04ae2c1d930965e218acfa2b0ba916e0d40cf8d4636d51853e63efeaf0262ddf53b3c98618b3d0b1b271764d084f2b1da6bcd4902c91503bb440b8144c8c8c1193d3e7fe10e11344f3926e5e8af377aa069ab1c979be45564671a00a93928d3f9573c9c45211e287a2c00d59ba210fa927c42a","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"e51cb6d05ed027db058edc159e71b81e"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
