<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"de9d763214fb704120f68a57e4541a050de13b8586c3c554b597aaedc5b6cebe6528cf31977dab3b15b417daf9a9ef44ffbaae3942e3946c3db988ee58c01076ab1fde1b6cd5a683b8c6f397d6cca94b1f143049c8face7015c6e94cd2bca54de1f34ee4336dcef95858a88238fb2c657d27f9be04188dc48b8de4b81bcbb751868aa593ff0b99dfa843dc3dec8d9cc2e87bb290d669d8e4e6b8098272b0529904ccfc3b32741d1e02ac8b61346b73b47da67fcf2e3a2e4affa7acb0899a1d11fc4e7602711f6a121fdd93d3663b8e13b33aec64728473225b6db06db07a57a8b2c4294e20c4413dd53b1900de19fb109a5a554271a716f8b0c883b95c5742adb47f90c3cd34fa2354bf4217d9ef538ec17d329bf614a0f95b9629182a2a5f47c495365af11716accc31add0085d0b51d49b32391373531721a81c5ae3bbc0d1881287ca70df448eac63aaf1a8407766251912dd34651eb4a060c7f1176f67c9b3237101ea0e76ff61d6086b94539b6730ca50bfb5f9e30005b9f1ded3bf5045217d1f2a69cbad732ec2ebc86eeb09986285868cd14ec78e151ea1ee84f693ca882677f5e4eb1b03ba42362d9cb87b2fa2772eeb0b0216a5286d859aa2414ec26711435c22cacb5ba20e1f173808e29bd0922307b72bb977d78918076a1581fc1a479c591391589ec1bdc75f08ff50f33d4d9bb1844b53d9d30598ad9090b9777ee05e0b0dd0d1c247935ce56f5f942275e8d579c3558db49bc86b1a9835ea50c458cd31db1af8e7ae3fb9360ade60093a98ecf8f217490cf1b2962b1ba3ad3909b8257cacae563a734d6edddaa4118ffa4cb27f184b16c48f1920a9c977ce8b242a19fa2ffa3f528f2d444f5da90341273de8133ef2b449a6ef36ae60db59e4fe93708837a64d526dfb328286fcdb0abdf422b9ba906fcc54024a3b56c8c05141f47b5a3794d004a24e07edf4baff5b80b7638856c37a0712bac1ef336f24f164d5e5de475a18395175ccd208d664817b4cc934062b200f4fb3b081af6153a77a2a798d56d3c463f366e05b8661b4d1f810dad3d09fa5fd674480059d0779426b8210ebb6bb8dfcbe0764843bcef49fb42679607a544665928108c04c88b5834476cd13499181cbb6344beaa10a46f04b18b5c03b5803843e2e6e0977d9f274b51158a7ae934dbd1eaf0d736074098a496cf94183db184ff65c21b123fa89cfd1a56b3d55833eb9bf0be63fd8dce7d199d5e0968584ee41ddeefb0fc95f4fed2f3625caf9a4b7828a722575a60a24c2c2df8f54797d1b74dad81632e9e8e9abee94435dab05d8cff6db9712a1557a56605b8b7cd02aa49c41b33c17e938c895a3aa17a73274b430f239f7322fed428f6af77a633cb4bf044027318ec0a96376cc639f98b2fa0004576ad075aa3ffb70353017a1f16437286812303ba7cbafc9753467bcbf192db5be7b796ea9fafd647c6b587460dcca56196c92659447578bb57ad0d5740d7cafdc14ad82db1960da31285be6c3d68f057694357c8218778a7d68e2d0b4e9dd67216accdd5f5f35ad1cbf7abcb7db3e768406f3de2e803590a7dbc53cf4567c650d4da836ccb0d81462e093b6b743736ec312a8787146510810947d6286bca10724ef0b7d86a7287b19bcd12bf68c7af830c5fc429370cef81a47dbd0800c418db3e7fc2fd4d169ebb47ce2987437172f89f71f8701e83e5d31c6d256211afd4deea4e93aac54e8cc76d979e9745a40ec0551c99f57942d7063129aefadf170de0a044edd3b7e87c42cf6ff76e9d39ca9187bdc3e370975519a814324482798a3724444a88c153acc23162cec84bf4bed68de8cd1b286deea6ba892ce15e1744fcbbf3505e4194391a7b162007a892e6cfc90d31d12bae98b56a0ee0be295cb4c00d59d4a3093b88b2bf5d68f94bbfabce878df15e2b333647cd3ef9196e61728d9496d43b561e4e349427d55dd8a9937dc43c8efc1afa5180282bf1f3526a45e68850867cfb8d200ac597ae015d3b7ca47bbefbc8b2e860d17f2f19751495ee6429c5e0a47b064e85fd87f00e7c63ead12cfe2578e62bf6b1394fa0f79e8963c34350b8c065c6d948ba6d8c4ea075b3f33b73f2eb4ccdfda6c031e111648a42101f3211d829bb045ff238df937291aae012aa5fca19119df6d82173cf6a62603c386179450b1a8620cb21869bd6131c2a86c5dec73363ef44a9dd6a2ed80783b53f6a8a2eb264c1e398c74e1dacffef6f6225e52467fd5ccf17b347ab7a34c4f16bde0f139eb6dce3e51cc1a0b888890bcc44720420294901bf51e8ac9fb9143bc0b2e01372264aeca2e227e224f2a3a04d7f605ff808b1458e539801df68869d15c7b2a3b6e7e20687140b0512944c80fa836022b6d94cb05492376b6913cb908dee19b287c8de3196fe6beac750c09fc3b6b5b92fcc2f0c4048b44c8043ae7b9a227d6ce4a6e48fbbd97987e45518799c9da75bb270c048390de32afdee420cc5419b42acc8bb9409d36a988d7fb00f1de1550473cbb6df965b69a44df43e123822fc78cd9f454b21faae5ed9b628b55f326ba0a88067c7bfe6c2b27c70695b2266f853155b2c35e2fd1a3211753310077df9b7f408a67500387a4096dfbefe93231404e006cb1dbb244798173cab47f2f1b4d85afda59d4f2f29a0d97a92214a9eb6074b56cee13c4f5b13576fe311e64e7c6b5c213c32c578e976168bb5d4bcb01d175be6fd49c1bb2dd5fde9b645dec594c92f4fb1165f9b03dd0b880a0a358d2880c1491cc01a349c9b772ee8312850ccc0627bb7e6e5d3ae4925d8afd58379c6490bc1103d6961f8eba2f5b8db6c5fd3560a3e6d6628014f618a29eeaf715df5d2a970ce7bb8d14e579034d78c59b1d52eaf65ed053ca81665a71dc7d926ac83c3338f9d874e21f3a13cb551bd6fa34919d530e0d8752e8b34bc764b03ec11b005f5c7947c5cbcfa332e413c34049bc211e919f9aa9daeae4b6d1ba9ddba9092e86c374e8f73b5ad209208b7d3aa6fe653f7180a0e6d28ea09ab4cb4c00856c2be689b2b9cccdae48e9c119c922dc06e1cad9266759f151d74b88a895afe0c35b3c136b1f1b700b91811c1f969bc1620baacac3430a17df9abd0e839c56956526c51fe0fe4aba097803c5b267d0551527f8b7ba5c44b702aa46ae82f4ad67e3f92cdde0a4fe6c3078e8e52737fedb156f7b07cc598b6c3d29a8ba7c85e55dc79d505e148f8bbcde7228fb1613f7e0829e45ac9f196965587d8ea9c384c1f397957ae9dc05c77762f078295e617db37c9ce7e69ec71dd5d5dcc37ec7a2bc58a77769f2d0e8d26b32388bcb381e412994bbbcf8086e5a0427579f6cfbbb1b7918347c2f7a728e91fd2394768de8ff7ed69833f567065134f635fe23dfe336d25427f25e5ea30ce037002b0b9bef8c9a867d55d310036618ae01c39ace0136f1d02e94151a29c5690f9083e769cc39baa6d1a6dbd1055ebf5a65848089d4393b9cc57a586ae35537f05e73d126b865f97bb6ec788c90df760683020a6cfd7a2aa679a3bfa1537260e103f406331338c1dd1c4b4252f50ad2ea41c48a52aaf5a618039a66fbac6106381f23f0f93b7404354dcdb938242e3246309819c890ecf81d669315ab51e8696c41a2e7ca211c5dc7a1c9d81274f86b611ea05502b1d7b4ba767caf294bde92b0c4d9afaffdea8fb2d2ed2c058e063837899db2509f434ffda04db7d3052546db1615c204175b15ce19ad3208ade992277efbb17f22b6be08882e15a25a35b161175d7a96db68a1e0fe166d172d1668b65a46958e20eb94520ebd4554bc477ec644eb833c13b23e473e5176628f6c429d0f74fdb8b2a31a09ea28cc07f635207ca7694d213aadcba3556135b89665e2f427eba1a47bff75a932adb502ea34c4211a6a9e4eca5cd60c9c3828cc177d03daca1e2f23af0ca59ad455a2402ca121d00a75836afc84afc69d409abf8cf9be3770909e1e52ba4a96ca4df05d59465dcd122ed0081cb9f6f2f5c05e2e914a58c11e75f15172fbb4fed1ebbedd20fafe25c400119e95b0105420211f8424699b440c97cd1ce1732ad33e3759e6e7ee7f3b2ea402cde2aa6bb75e713430c6d54a612d42954149b7ddcf71a913d33cf241cab8903f0bdbefec8fc9f48183268c234fbeb3c83ed1b401ef965305fe31db988c2b0a37a9bd46299c0e6ce8c4045b73149427a9ccd20c69c2870cc8dd7fe36f6b7b62d66bff6e6f20bdc52efe1939807da74c4401f23fc2900ee1cc39ed4278fcc16e12b6366b1586def3042839607f1ef3b6965788a679c756da598214c26e38cafe3d9acfc2d4d1b1196ca56f95194a50543ef23e0fcd9f4040376b82443470acd1762d66ffc7760b20aeb5acb22ffefe3c26632a745a24e5b39e88adf80ad9681d8bbede387e4075315b435e3531de0b38c3e22e30cc6d37523ee9eded96636b50a2671b28cc48ea9cfca07f57a8fab4fdfe9910672c822e3c934f2954e7776d042c43eaea0d292051fc02bcbf26f68d4a9348f445c53daebc6bc731c10b5222e7032e8dcabd3480288c353d010d58a7bf85d09a9f24fe5dc9b7eee1749ae55d69d92b295ddbcebfcc668cf4ed188f41cc5c32baf7a268ebc1463f906b80798215bedca639e0d23a80e8f5562f5cd5b6ab56931502448f85ddf83b0e15091ce109f28726e0666fc380d0e1b8819ca2c5ef125a273c67f1e7b003210ee540e560f31e7c6c0c183f0c67c10b44ef65471e9b0e25dd08eaa40b58bb022e59e65de97c44aa9ca538e72c5b0e294fe569890bbe2f7e43db0510a18d09adc2e1d044edfa72646ef5aa0fa357a1f5af1e0e0d175fa46fea0deced1b2ad4526bd389befb950f1505d0479353975567aea3a531cffd63228fde7ae459e880380fb507d44a31d11971c5a467cdfc2bd34c5da697fa48f015e95b38b96959d52a62d46f7cdb95924aa83e4925c238b26560b93ba0ef292585d4ab38f1e4fe98cde7e2feae6e90c250531450a6a9e4edb323da0ff5ac8d467a3ad5e418676314f38e47dfa5b29e3fb19fba25942a5279e40c83263b5fcde79f2cad778cb5a825c0060177b2bbcb963575cad90d65fe493d215e332918d8f32404b0fd1f62aeb44bb5dfcba7f133a7649d4268b1362623e01aa8d86f3f83574841893116c8cf24e8759c32b086c01f4ae330a912d0ef57ece972a55634ddd09b7453e3bc659068ac125496d0f1adbfd608cbebcf893d514b3cc74b46a926aa72c4828e496102039acc3239788aa13a02b8f028254572d030c9a42ae86268cbda9b62340ade35355330aba337949c8f64a6c81997705f656ab8c865dda9c006ce26eab778a9e47052fa771c83a9c1ab388ab63346572ea177e2f249c7f8e02aff985656762ec2ab8176aa32dd25ed265ed7d4263e5b9fe67b5f0825803b0600a3018673ac1c94bfc060c0ae3c093e80a16c8fc8cfa2922bbc8672fd348623599aac71058fb4414dc2ddbf9e30183ff8da9803701ca989c62b404d0c27b18387d1ac953f436e0a82bb48d3c9bc72594e18af72c30e58addddd966651d3860920f908395522bb82f223d5da97741ddb29995389530af88b50860517d29433f890cb0eadb5880c9bac6726c31d828630b28ccbb782d73e61744e2c0357d7ddd0aebd69c1e084512a2d35079f004df59b1c0658f068a0daabab23db4a6ebb864d68f8ff7c8f5a017f201cd9c28166c20fafb17fdf5bb0728e2857ac1caea51f7ce8c0e7b4533e4fcd24b43d448f521544880d0df4c037dc3330b08986f4b358f2a183894de9b0163575c1d673b5e8d10502ff3165cf788bcf829405a16ac7bb791889ef2e7af240d4c5a280f17acbfb15b3316131dffd7524e45eec379b2a7778fadecf774a1dc92b250e5308381df76a18deb69b3562fe8bbfc9934753ee26125260e6593ebff327a38d60417a5c7c315337bbdc203e1d3a338c82f47d80c214436795bf617ad6e0556371760a8ea5d4a77e8c3550f3c0b75b17a27a7c295309a0dd24234f03edbe39a30abdc1cf7f06d8fd8f6900352c78d100bf2d85897c33cf0523ec73d78b7a40e65f7539be2bb50423d6a9b9b8d4b9782ff41d31d763cc9249bee2e962eaebd39f2b43ce27fa61eb7c0ca915436b0c36d74fce2245703aa4146cedc3d6767fed20c2358a7f5959f0544d0ccdf8e1c9026f03562dd4317567bd3c0b1145fce410657ae580b8fea11fc567f093e35e6c5799b51b057ed09d52e8d7bad20ceabee5752fed1459ebe4b270ffd02170f8020e5c3a71f42f0f93767daf8b44414571be784df7778b44e581df330a66256506a339df1d52a457f9a5c0532a702d767fee6cdd6fa311ed0ad0ed47d4c30a71e821869a0bd92192ca047d7685a592e97d17e45f743a1d2918e3581c13a502094666784093212c5608d506d5b36847cd02068290136fce92c7b47267d7dd0b369c7dc624c56ff9ed5d530064390a2ba590814473afeab68478fa83735699582c2a37b3091ee2519f85e427296787bd62c5af241ff0dce81640a5cd5ad7e038da5be66c150e9c22ab42d1892085edc23b083322e268923899889d4b074d322a3af629d7b5051730ee216ad9f4ac3a826b019b2d0433b960d7a95db42c6740894542ae9447c516c9933cb9fee83a9ece7e25ba5e0969e560ea435237e44c39b70087d7b58cdb28b2ce19100bb9d2c4e0df8f6fba99bdaf7cdfa7d7a6143e1588a8d3dfb9f1a4fdc6eee810be21b4fb13f82c0aa8e09dcdb4adc78bb54fe89f448567d7de09a47afc07245697882ab94351a14771ca1db6c619440641f52e01a3353df3bb6d53d4a67135d4a7a343f90a892638a298b5fd8d4a95fbda71b97614b2dcfbc17891fa19c54d18aa68d7bfad739edf03158c69c394ab24d14b61a180d95fc005aa24b6dc085415561d82aca3d98f45f65be13bb023c1b0745173b98c63a807ee25f867605ebf2c49dd7a72a5a9533bb3b6436745c30cd61d4841c13105bd619cfe7d0b4333bce9ef753f8100be4a8dd18502da2f090f1e3277c4b28f9782b36f9510fe13fafa0ad429e0a853847088f2205fed8f7ee35478a67c7f930df30564ad452ca8068377ff819f09d6f8bba32f8ba8322f8d835a9afb6d80335735d676b79379d243418f14467458509098db60c3cb3b6301c9734a5df067a786a96e467951910048f237577937cdace651751c21bc8bf019e45d8a3540103616ec132b7404beae2be25fefa91e4e6b8401207d627d6d17c654fcdac337792dd7b0e0860f43a9a8ae18ce6a598f9966313fd3a3e6ca6d7dcd79a4f17c96e2893174948c5bb89d92b7238aa5997bbcea16552ec9314360331d91df77d6fb8d805bcc83798954752aaed83b7a33dfc2f52e055abc5524fda97412697634962d8386595becfee5bb24d5fbc7a1ddf92fe55e4911be882cca7f8870f3d0b338035fc34e6db1c1cde97aebf5f5a4843dd184eb8d0f8665470abcf65a03b5985d9b7dca333e3fdf2a614011602bd310e85fdc7dc920e5b5e47fb45a4382913e87f63bddae8bf97a3e178eb8ac71e90c85c7e05f91f5c011fbf2919216519ce88af866474fe428fab2a6b2aab16c1c9d7281a7b0869e874fe8d1dcb80b4c899cb1174dd3925ac3c755f0f39b5294ad875103b1a694a68ace1658a49d1498367bfb5b506112ff7a291b4df3a955f054f63ee2c61d4b226d36527641a8af78aa40be445367a3d6bfe161a65441a4f45da8557bcdbd4637cbef456c40d7bf0562eb6424b2c5eb7fd6c135ac941f50d9bec8c3fb9c127f6ac73a92ab220496eacaa693bba5508a4d1996ff14035fe9cb486f5f97a4e8c3a0cfa44cd0db448cd2ff2035788a6431d7484c355603a0ad1a68d7a969cc8f3b29d5279cc58230e03ae603829d94260c19cc24148ac08af49d53ad69805f4d83da1c7a3155d20055c57d81aec4be783491653597faf19835388ff41ae93f13fba24a43b60281d34cff9849e9fa6cf3fd42879ccc1823646a294e9045394ba64c77aecf3159c820194f368b58a358331886fc123927093f0473a188fdcce84bb14bdd1d1589cdc6f38c22a165e7dd41859ffc35ee3a3ea37e39804bbb69c8754d5dd550daba1709d6a57ab59502d207c8275956e66cd1b1c2b7ab97dfde711b850dceed08f5c60d2afef55f33f96061a51dc82fc7ecc64a89dc9d098724135a14d50446d00f388b717671948bf4d627f7d545ab8101245e2a5776eaaab4eb8552aa7296fb0496d29d82dbf51a6cf4a51911db9a704e1f4fe5e182ee78b25543e565315666eb3a6bde0c619b287318b56b02048808c19e30b7e8e2c37aad430fa82b1493725032bca987fd4b65312a78a851b2b81adf866447168c23d087ac41531ba10a814765017f9301f44b4e4dfbe152ac85583ee01350cc137765d4f4ac8e5091a99ffea0eeb969871eab891fff99dc22e63d78ab7e8705ba53af3d32763e34a23624bf91e6768e4d7471f66e36d2b7131e51528fe337489506b8da9d88670e252ac58966109a6b22dd4d58d4ff4b16b70e828637045e9a53e3112411718666a105a73261ee8918781f93e7b19b563466934bb359654e8057137f1fea9f51821ca25d4e2ae3620c0d50589038563f74b5fcf17efc4079557ffdf11874b180fe7d83ff7779977c23366a850d3e5a81baeff6bdcb460c8ae1176299c3fda59b33f0a9ff55d7b25ece6c0a3ab67700eb19f6d435c65223776b5c84686af276a1d1db912812b05f98dbaee531e447cf0a64f4a24ada72c1746102f71b4c32be8a337064675785498a296576a314c2888d8526aa12108b64a6aeae46d2a2909653c38cd8e6bfbe266295f90d469934636ffb0b0e9e5504e3d02b302ff83815364808483176c7c6a651094cf29969dcf37114da4c75a10da8225860fe907cfd6379d8360005698d0322e3ece210a6408c1662661e3fdad997be8ccb5ba0229eacc90a4bddc60b0d046470cb255ffda84156abd8770d5436bdc1e38a95cdbd42b7fa7f5652c787a1285eec7d82e8c5848e0ec765e1ad26418452f26e0a575aa7c492cc6bee89316ec8135f3047b4e06d1bd8efcb9672bd5436bb5988c17841d20cd769d35b6d2a74fcdd066d0a56457dfb9e23a20539c3780fd3b79ac48e534b5bfe1941498d161544f847240c9771b148fa5987080f10aa1e34016f7803cdc3ef6cc97a30926d3e07dfcdfeca7ea26911b83c815e13c5e6009707bd823cd63056e6ec288f019e4578bf6db48cac3fc9ed2422d188a03a866634126ade016af2929d001f144c1211dca6f893562c285c385aaf489835aaa83e381e9a3172c2e9604bd7cdd5ec6904a16f7933d247be44fc96a3d5d506d36a88dcad254a20fdb82f426dd6999984bf24c23d04b9f24b0e6cc2c84efe80633ee2ac7b1c781b8977f4112b067c0604f748533ddb9dd14293b511039f492c8ed03a2c64982802d7627c99b40df41fc0a587ffd125dc721ef7ac42d81cf71ab61b67d4e573a3df49bae0314140a2beda68575ac8a03f7d85a83eadd0aac66af9bf3eb9c273c4a38de32bc6b8d2caf4ea9453938020fb429ada2c2faffbf860e557465bb89ee45d43cc0a9ed0236c4eaff4cbca77be35b134631837b056922508bd318d8a69198d41dcfcfe3432637f5bc87441066226b25f318e5256bb07637335e02b224dc4d657ee433b10e587f0cd9805fff6697340d0cf362eaa13c85401b0796a972862df71c5ee56a4ca300884178e9229e64b37a3163fe98418ce537c83135eb0582c850c36d5d05d306bb0db2019fd3e927073b5c0f63b0f7198f33e065d770a5caa764866a64c69eb1898b564473b60607fe1ccef45ca5cef12913e0ecc9f2138985b1ac51d80d5040a3ac87d62d9462d93ec25f90ca7d70075d831bb4613f2c012532812f05201b4a230499bc6831fa323aa23d0b52e5b95b26e78ccc37619fb46d402f1bc17124e40c393a3ce81d9d6df61181d2914138953c07ef1e623bb604fc9027a09706e2acf445f39d01cb5fa4b6b15709a8b6485af2e0dec77e3465215d121c437a433e44a7ede73da4813243b6d1195f345dfb09157906827c5c14cb5af81335c87b931aa4812125d622475dc883828a378e43dbbb1474b8f0457d4c6d2623519686460450e6e4d46b4dbc8a3d00c03b048efdae8fafdb0decdffcc973c071fc3a9ff77941354ef0eb553d2256647646d7f450b1b068e6f0b5836355b59225d0b28abba7b666f8543dd475ad70dc7473b5aaabeefc26f28ce4fee5c66da778edff5cb0236ec7d4fa91696934f8ae062536e282249820343244fe4965a2e148c83acf5a179d05c0346bb381360e0a3263b80081ff275c1f9ba715fb711b7554d31a717c9343b4110ead76597dc6a82a4a9bfbfa9d4589d8a70b39210dc82ddfc32ed6e1eeac078ea218af2ec7528a2892a1b6bb14650bf6d7480e1444e8013b58d7e9720cb4aa406bf910ec247d1b05b2b53deb9452da7e0aaafba324cd435dba4a1ddbde7f10e9274220a444e58a5bd8ee1552a16032b0d2e8f2a18be937e33959f5872d8e1bf97f4c262c49727e1f515a29566cf6e190da7f98065b9bca4c52200f61a40c3dbfbd00a107179c6eaad35831e104ae42ed0667ec4b67487360667d86ae7134c960d46400cce7a0f03fde03511c2fac40a4f7f83fbf62a6f67c68060cd1b2dfde4364b59d5fd4c02222c03612e1424152c84ce47655e6a8faf2fd24c27a561d45d32d3a123fa901e330b2fcec930a3ea4302085803033d2681ceca2cbdec8476fb5f0df8d3464166967172cc31f819fa88041d76c5ddec5eac030a42d0784751f826e188c678ff7000e88cada67fb6e3b27ac2c5eafc3b39c90a701cd99266d4a5f894a45e1d4f1886911a610b9ee87ac0e2b568f4ae0bce9ae66f39a517e5e9b7c5210d0d1d2d64776384b5e50f1c33ebceea31be1fbe92b3b1f721cf9945165cd4f24a5fbc9396d7c33cabde9d4fe216f0f5c210db6741b7e63f1dcf3ce8d16b362ff2ffea9ec648c4d00912b3dbfde9307c1222cd10e1062938bdde857615212107e3903f2eb18f6f0771f10f260139d7993f0f656eb55b57cd601adc015f74d9b2d76ff0a12e3731783330d5237bb1faa9af60e14097ef34a652880cdc6d62eb0b6ce722f2270419b37ca9e3e07390092f3156f06c1842a11eb7ebbcfe9d3be07fdc94682e717dff7284e56cb250bcda1111e053cb4b2c0f26b88f1fe72ec12a58943f40597431aa25e2eb5eba83724e9f2c478f82e47629c0cceb95215c024486a9ac6d7a76434573643fa9f1fac749bb3a7e29e9d42787c6f9e8458fb3814fa95f10f02ed4e4fe9299267180c4538383bb9931a31c512d53fa90ab361e1ebad84e2190403fedf3ddb32ce5f084259f63bdaf8112333b454d7da9b7a8c8b514e3b61b776d7eba32b32fa2b779a193b2cc7d3a49dbc7e6c4127da3a547f98425893835aa25b09ce357706a7ef586fdb0d63484c09a0cca67a5ba0d5ab25012aca1c1dd30449ac18f63c900174b2ff780d97685e0e963bf88bfd7ef2aa512ff43f716b8b2f703f871676b03cb9b33b53486f4bd4217921ba9ed447dc8087e5b06f69be722d01a7e8e8cb1a75e48c1ee5bf2d0cd2e91b842a7ab8055fad90d9cc7410e4537f7b2ace939c5b78262e738f76c5d56d30c16c5aa1df5b010cdc641846014642d2c153e5a7ede8dc1f5c10b635c5c503524c12d3a650f28e027b1ec29b6f42c0e3b7904809ae0ff2c57d51d38cefe6f3196d93660161324f45fe2825461ddc15c7b194f322d227020a02208ad0bd7fc409c1d3d3964cc0e580eba22dcb5d6480fb49cc21e3d4be0c5093c57fd46bca05bca9222ac57ddeac7a3fc0aed43c5e18c8cf9ba6b05d8fcf4d007eea015dbe611d5950451ec0c69f21de836e937055e31856a9e17ed6dfb44184340a7d0d46437a95e8435a9544a37ae9010abd376f47e27244083d7ff468564ea4b33d80a825a1e37495f33715506109dd14dbe2ea4e3990e6f0f46c92956b432a5aca763da63092318faa9b51b9cb9ea3d21d409435defc4b1c469482f1d17f3469bb0a401dd9fb90aa575ae818b2210c70e3d207e8bf33fe2222066cb19d73294f90132b1cee3e179224c58c7408d4adc844bb70ec38415030477fd6b0789d32273b2384f86c62ac0695e67dbdf907766bef2a8f32362768990dbdd10e0c5b69733ad4c10284ebfb21ca49ecb5abb353eb2b029036d2a3baa55c757c3e331786a3a4e66e210b38febe72c0d4620780e4063c2698776619044144b7dfcdd642d0105b44009a72684e1ae951c007c28b48d36f5d15249f2b1297cc2b79e33fadb70ed956b60e9d2b75d2474458c7e37c98e3e50602c3bb7536c7f2216f6f3d6f911f6b5086ff045b9fb2423ae2a0b635e52932bdde4eee42b538afefb446a4005eea3076668dfccbd1fa77eb6ab53bafb62f89d80e5b63cf1a22b7c809767464bfcc21c672dfe8b2d823a8fe8483fea7fdfc41ae9468e3f7c21327e401ad9056460867499cfa52eb3937fb997df574082dd768b1c02991de2a26a67ffc2729b04563a751bdcbed4dcf29fe946679889471ef93575438b1e6585795231f53d9ad401cbfed2e1bd114bdd44ad456bc5e3198c2641b29da1c687ef5873794bdfbc072704af81bdecd070bbe4264eb9aec5c93f8debe6a116c107e2b76136d119e6debb86badf3158020332098768fccc4c03fe6905d8d4acd666b630dbe796ca46df7b71f2462355d75f4ee3e05e9d5a910f6212391ae12bc1b8c7ac1ebf2cb175bab72b63cd2b3ceb2d0ced5b423479e146b172684581591f3b7ae5ebac61a51397f51184b08dec8166af1281c4aa38c6b29629dc981fd402efb674ecb7a3e8d0ee06e29d5675e980e17afa91d597bf36c287fd3b497e0f6bb0a16991b8973e49a22b050393261ec200f723b7fccb0deb8785292689690ba906e4571b7cc5b8c64d3a428a352f0ce8f059031347a2b9e5d70b86a08f70c5f1677e8aca56083c344faf8146b0f2e8fc85bcaaedaaa5df8afb7288a6722141ec46e78c4d510a7ecd7809ed229e1134d516a1092a77a35500b12190adaf825a8f298fd3d04e02b2b8f64fff208067fbf4023286fc521d5bb92d93d951cecb1f58ff9891940e308300f0af41023f22d0a264d163cc9446bd77c11c220d3cacafc1839d78644cbc1ab4f7571a74fdf62f6b2674dc6d4b3e4568d457d6673a6a465010e0422a7045239c38ab21dcd3eb981d408749fa3a4f3da9bf0e7e637d481439831f76bf7e4c2681bb0def576c3d80312f6a9a904db2210a32407f567ba58c924afaa560ea972bfa70d2a304f1b425cb4e32baec135a03a05a4a5d66fb5b6316c88165b9733b0ed8681d62d48642c05835bfff22f2918e6000512f1ddc0fdafde221164cb7f906470c6507260927d06d2bef9610edfa0dd6f69405aeb0f90627ea81d7fde3ce34df1d7695a22724ffca6d5343be2b2864f71c76850dc5c3fdb6a381594d8ce815ff9d203fb6d8e128fc733c95c4c418f3a2e426a78ffd9e726645884e3ecdaeffd4d2504d2f6a891685143ded94fc9bc6ce0407299c58f1e5a0651d53cfec707b5b0137641f0e173daa80b9336c1bdcf0f5993889f579b8739ec2c4b4e13dbebbd6fc509395067dcc17f81bdc705dc7179a753bf78f8906b6eedf3624bfa79cbca9c51bccd2e066f1f745f5a386bd9f87ce0e6dcd51b8570fb1c5e41aee564a7a7fd3f6c7f19b535441ff2c824d4ce4223a37a2497ec6940075cb2f671fb3e653549cc756f926935477174d9d5dd3f9f5dd8874d56b9f90b215fca02b999c450514359fb83fe7bfd62e43f46272d64a6b94f73bd4560b60850ba6ddb3086bdd10befd6ef73787a96662d1cbc8f6864cd3f2b428f8b9726bdb9ef3d25aebdcaf965643621d133d12b3676a6864e09bed557420426ea58abded5bdfeb0b549d172b33fbfe1aa5573dea772ff72597038896d431b67f54d6fc9d49c6625032de43d06342c56da9759a9e1421df96c95eeeece19ea3af3bb5a4d80e32b0a2e2d5400d33005f84d827b97c9202b7c2d0db846f490f8942ed0e4cbf52ef724bfddf5b2a058dffc6db5a40449791d79076d430c7ea11d06a21c39ca6ef49b01e106c9754cd8332a1b277742c24063bbc6ebef06d6e78038524cb6e71f88a30609445ad256ac9861aa2f43d1ff4b6b580790be598d52eda609c25fb4ab433ca73ade87ccf60c24d806e86d1b8ce527a93ea348de8cea5a73dbf3cbddb4f6f21dfaa0cd08d0aeea8f5c8c4a07e6afb0ccea47ca311c5bd20a2c98a75e7192a6aec90705c92cc5128c258aa8bf663e9f2248bd651a81bbdac09170f692b3337d79458b42bc4899cd39ef80fe6eda7cc3c857fe50dccb1b0c290b9e56ea7ef4a5cc8b28fe84c6b804d9313a59ea07b9daa31d81cf62cb463c87839e647d110c5275614059229c9b7a45ba56120e789d9be4904e6f34a9d8dae76f510cbd9a0f1a717a9e38f3b2c517082e04ccd855478bad5c18d9628e4bba1b5a238c1401e163bc6756bcf6b61eadc0e90a561cfc9075ca2e7117ab9345b04e39480928888edcfa653eb30266fb3922369f52d064f2ae019e6f32d2c7e294ee9df9f86fe0255b062f433f866b2855d0a78b0909f267533334e4aba1c4c24b56064a03979d910cbeb5063095dec8f721ddcd86691ecd69af72efd8f3add9b1b00f9b716d77eda26f7917724128515f9094c0dae896a0a06c941bb9cc12873ca189386e36ebf294b43569df2e6b418bd35048c80946af0e989e78626ecad70f27e9b1a1509032b56726e20e3c383c190e7f76ae15296bb66ba462727d67d528f093ed5a298d29589f4799aade76256cff2d847cf91aba57c12a72a183cd6134dc95bdbe22ccf617bf8bb27555bac3a1e6f65db6d93629b0eae85385ac73c0a4c133728b7866af7c88902a5e1ff78cdf40f0a098562d32b52de103768e07156ca4953d4ea45e490331a956bc9ab5cc0f4ddd0c07a876e3281cf0b707b2dd78938037f963a3f402192f70d5566270cdf7098ed76524ef623daa106e585804e52764729e20acfa057b7386894bec575916ec03be9f671e0771045d3a25009479082aa04250d6883a91213ab06c7d3ea29e1cc30a8c442e7773713c47ed9e7d1f58405eb90f0c9c985a972449cbbe7446b096a73aa1ee03ff1df5b2fb021a0c704a516465ee45080626b786a6c860de168ad4cb7d0ca4b7d2501daff34f4261d2f191b6a8dea53c74aa958e39128142d50c4605c31dd920ce11ffc9e78041d2805ad4419741d378b678ab99b901a6cd3dab63f9058d5d4b1d62fb6534275a5522851ab46a77181b4cb84ddd19890cc87bfc2e5ee74a1a6b85899fd22ad5a9774ceba21466b6ecda07ec6c31e0f918093401a55182af07c4f864eaa8a8e23f2dcb771c493a7375dd33cb5a93a9274f935afe53291542afa3fb70ff61edffc0f73b95b065d4c31b21ad7d092901be14f3d3e039e4f9fac4ada8902348aec2cff53ea917b06cfe149b5e3179c4823ec94e6073818f76ee82c2c021a35a986d3a8acc340a667469c530b34ac837896a020fee55a95d1fe0fdf52447f83048587b84ed2b4ea31461b265fdbce36ee2ff2153d1577ca80a9930e1c068eb9dcb09ee484d58d294470d51e438cb17cc68f7b441b186021e65c823108785e2e4459df437b1400e58bab2bc4ce60c526630ffa3e2ee02b6880f36400e9dc6513314b2d8260f39251e4469649d54e1006cdb4bc215af77e92bf58184539e5fe8da4fe5f47154ea1ec5c05bad86ef16865671f7b9887c9c8ee768c7b333302d6452fcd1e9518b564fd1ededaa682b250234d1d1cbc2a02d27a51832e425d09162a74c1d5455038b0b36f126cade8031a50934206bd0c6fe343f7fc82379af4a049913359cac8e9116467d64eee904ce205e9afcc3f59cb512948613d57a240988c869ab383799af5601cdc70e3fb905ca75c9ecf39cec0181bc44ea8b54769576dd446679120b63bf36a9264f9f1b3e31aa2a494b635133f904240d3edfc13d44e60a841dcad27b90103868f8db3e3724c99f1a93d6779ebfd0a8028c651cc5629c0a30ecd3604d669d2bb25e67d8d9d02cf094bcee8cbf47467cc24197d5d20f0f315de9883493e2a77d128b4b6ca7d13e0124171dc92d3b37a586352b05cf1642a91ff5579f94b3eb20ae89f2c0936989b876dca1df0e84f93b7116927a46f6c1eb3c0b0d72b3629cdd5aac327c286bcf79e4f37e26a11d73c7990e6c9fed1257623b76768bb5afadc53ca7f6353ec21de181acd5078ffa0dd18bb5d2922c87839bd7ae681edd6cc9f24a12c105f8f3ae85ca321e663eccac34faf55a8752cb2329a93459342bdd5453c3c536e1801c2e1081de3ba72e38f5db7143321b82fe195f180048e5aa118261d72692eafb0b3db0e84da90de6ab0817af346db438eb7688d0dcee85798c8f468ca102de875715daa681f2ad52216e76b280d0dd9be9ad19b5d22438dd9d092cf663911b471370757aea42c261eb37b35c3c5fc4a20b505ad3e08a6e3a45f0acbf6f23cfcad0a7c58378a419a453bd05f4329921df4e7248fd49aba59ccd8f2397d443d35905c55cbb6db41da15438a5361c3d7fa6e57b7ab8f0f3e2c55afa65679b69dcf1addef1d41c9ff7e1d987bf1d76afc6697e291b10a7aa7c52dccd5d9985395cd16616bef8ea12eb739fe03fb487ef97be9cbe1d24c82ff62ff9b2b0467d8118d94f91f066278f76927960082357ff29f9ed23d7c6113b2beaae8f013916e1f7e6d48343ea51c35bc526f2870db42530c65749f0aed3a18e44ab3e356bbf4fdd07a4b3e4c1d62b8c63e4f8703e0b6eea22077fddbad24cc7de4306926a459ae82e529037e4d5e828ecd1f3d6d0831afebbe3b1dad498916648a43fffdf293dddcb85ca11ee346da656e76ac19de0381bf7735cfb1fa75c29c5700ad68fff4d59a9ceba6327ad99073d220340446feb8b60c6081ab2924084f28e1bf54ca57a22d3a0ec6ee8e8895b43ef13437c04ca36221d99736ce1a8daaca860e2dc419d7e6571d4c17d3bf693002b7fd3d594d2447adf000abf888fab1d142dbf3e203c9bc1d7975e129c25ad4cceced2edbb656cbd16a2906f61dc108f02c0dd3b12cdffaf8c2b85e579fbd2962251d7a7a630795953089323c2d8c202db37ad0bec4bdf778a2c2f0072345d1705a25f09f70b9a0ea6a24626eadafb152a88081c4b7c625c4546e14f56eb20dd6213c8aaa3fb9d8678b36ff9a2a4f3ad0913ec1a262aad304c3ff961d39091537936fb0a2659b4891695b43e7db12b75ea20c2ef3591c4938fa408a70c4a9352cac4c4147bc7ca1db44848f9aca312a4640aff019b6b272aad77e40ae4e6765dcf497a298a1416d1090eb7e8dfc37d1ba073af4a3c68b31ef970d530d3046c74403d309f17ed1fb85c540e780bd0a13b5ea087c33427f53a16e65e57b28e03f9852bd9af98dc0ef730773ac6b94b5150e7bfda1219f9e57ff082bd6c3c39904a40af939d249e2e7392ce5d7c2037b3b68c6f8576a184b281dd4d210e7200c20f0c0b1fe6bb1076462fd4de23a561d43e7c2a568812830d6d75a7e8fe9a55b0080eca9b885c6c875abed6f813ae7f1330ac31839f164bb02028f3977b9d9a566ce9fc2267f82770ac383bd9eb3bcfc6905cda129310e2deda46b1b7cc4f75976bfb8628977b29e7f6f6e3e3ec1a1e66ece36088c7dc2b97a41631ea457d49519d229ee5d906a3cb308a898724f72d4bd00988b81089f1dd0f80ec4dd9661bf625b635257d8c1b3d5c8d2df7b984799adec0b2f9560b01fad05a41e8239cb31c1d74aa061395d52468a0f4d3862b0c9cc56ed05d82b1783e6e9ecde7605bb808ce09b8616c32759146738e811f1ecb57f4d6c107e5feca9dc073a320d04f78c1228654651a198d4c82607c66e279ec04b2e9c22452c7e976878ae5f200d81193a99119989c499f90a4f08385fae428e820308fbfaf8a279ac785b814940c94fb6e501fad42fd67b0ffd19c941564df4bc311fc329bffbe70b8e56743dfa1c30e39d3c54490ab48b5e740c0af4c6885db72050caf6af4d348fcbb5342106fae1b04a12378df0d1adea78c758f86d48d4c8e967ccabbb098a204ce60c104667d5d32973ca1ef59bed83fe11d2174db8bf1608b1d13fee2dbb3b7201c2c110ddc300de9aafb0e87ebe9cf2db120bee45bb3d705b892bc0ec7e77db1ac6c55cb78b53c0b624e63da1394cfbe414b6d9f013cd6d00afaffbebb2f44bfe22809999d0ef5710b93038ae8c2dcaadd96de655a5b3a3b5c3a9580f9475fe05e0d4fdfe121890afb3a1d851abe91500d4b6b0ad325af608ce23aca957f35dec75ab4db11e4bc91c6da8c5384efe07a095ea05399ace42b418bf7a555de9aea465050b2c31ec947098c070b7bc26857276ed4089fce61dbfc53bd21976382562a3d3d56292d805f2c0decd5d6c2a620db58229130b9b2980487e478ce7e1404644e8aaf8610ea83f6eb8bf7104cbed5eda83881a4927de3d221be89a3d0b668fc8455d49f3370607c44a7ff5280b8da5f15109f76d25e0006700def14a84af89c93a307ad4f4044d1f11e29d27944068ab28efd7ddd2b4fab9716475ec24107edb470cc06a41310511109fd86ea9b255944f4e103a80f0be9f957fb8017dfbad6021737bba1c3b55ca020973199b6d5cc5472f4ffe7b75ccbc10690a96c8dc856fee7e0d02fe48261efedb41cc767a916fb396b68868e10645ba8562f135c7db8784891479a871b21d3182c9ab83afabd93c700fabb351612a8c70fe64b64a76b6a20d9f47a27dfbb609fe37ababc883e05e74062af4fd7a48f77f9f57fbc71f29550c08c89a35f14dc0d98cbf4593329d53a0f64c196278d31b6f9d7fb357e5b6d2ca9e6ea779c18ff1335ec16567b6fa3270e31672770aff35902e2642f423d7a788256ecc3dc746f9db42cc9e8e538e6821a714eaeb39da27ba296f4d788963b034a3ed46fc65eb8ed7c4e1e701001783e47a6bf351896c0ae16313a02be2f36eb357f284106f15cb49d39daab7cf10066b11485c272502d13fe36af6ce53f32fa064e375ea29ca669132af3b5c234a61cc8a28cde80b6bd23122463f688dd27f3cf0e272e4f15b52515985daefe2c19469233e06d5447e62c6e20f51dca0ecb3b4d4f57eedce19f50b72d7194db149037bc1a892be1ac775289cb42c1159b951dc33ca8e213477ee7fa564b3c810d82725e183a99bc7927f417f69b681afdf267a74e472c279f14444538ff233eedc11dba62d6ea95e58daa6ff9f75b158fdb92b9800b377612b29cdc3c40d7e5dd1e41a174769e4baaa66ec2c601b1b7ea86c2d76ebd8bb5c8b57a784004e9a02cbeac2b3823a674d98374a2af4ed262bb39991043d6655afe867a4e800714ef5d001509ddff878c61df27a529caa595afd7bb3bbd9cef86f96bb9134d00578e6c4e3ddb4892b7bfbaea7299b28e580416c427269bfc0594e6b3167e20a65ba4c3060952ac02594af427b11422e0ba58bb2da2f6a5833ba51662705a0e33a2f65d72ff3a1a3e5aa794e09c7c766e8b27723a68a139a85cb414ffcd6b3136852a5d07d45a47b5535529508308c551376a027690aa093abb0d751444e9ab772711e0e3750212bfe1cb4e565c15e7b72fde2da6cc7ca319cc02fd3676d66d6561f6ffc59bdfafd977add877c92c25b3780cbef21670b0a38b78e61d19df12fe571f1d36906962a4ef41aa34367e707c1b9c80cabdf551dd4dd0e34028b90ee8ac620541801a7c3555d99a9d9cc8d1f2e5cbf4d49c9cce7d60916021b70f1d82f9aecd60223fd216afbe05a7f04d1acc1eaeb395232d07584baafbafbbad2dc5297d09305368be36fda97ead7aed952d9752b663676566391bfce8e3d7ea5e7184ad6436fd33b3d25a0a07c1aa93f41d7e803cc11841e2d9effd65bb6589074c7e89eb8e28f55cd00d1bfb9af6bed71b263f0266bbcc8390c50c79556df8172a7164de2282bd6d9d9d33fbd0570ecbe5ca6e61a0be6b7ff125bed44725b932cf0907f1db118c243ac912698d398c90c4cd6eee15c3fa0f9fee4c1e6d214c1719020cbdb1da81aa52abdc8b5abef7b24409bca76ba24a3419305cfb92b80998cda1822eb5c8a8ef0e72c0b7a23362dc0d78c095c05f072aa78315dc06f52d8ad79f28621e91ff0de974ba589cd78b1ffb1249fa3c1eedb2029c7fe74dfaae2ba66e09fd5f2ad90c14bb246d714269fe3055a54989997acfcb04f00e38d3c5a2c77621a57a4d009128787686de87b3f5f2c8fab1721321b9d204dfc1f49de5a36d7ed81629ea1b85aee665ecc82327bcbddcda65650d4226251d2914ada1d58a37f664668a6a2eaff4f3ae61f249f6967f670eb516dc9753aa7b0337b1379d90e5a04fae39859720ecb8ef240969000cdf4d4e8b91b70ab0f2acd4ea289c3edc6f6af4b109365049fe34b7570bfd914979c7d4593de80a56fe81d0c63fffc3a7149cb5725e756a92e3538035fdf5ec9acc790670c62b2a09a3b2acc92758fbc13697f4dc15cbe88307d7a667117435cd4ddafadacf232264f11fe079e5f6711a8258b038f06ca761830d93e6b0341a72a6cfadd80c0188d8ad098edd26718deb925a5327b54e9cf0dd36080e762df4c012616101fa160a796bd8589b31c4b5d67658e3989c259df1b","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"fe727b3ec2446f3e9140a7a09442f679"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
