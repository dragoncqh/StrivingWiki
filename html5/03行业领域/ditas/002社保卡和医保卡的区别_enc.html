<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"3765abcd275bc2d82e1f7a2bc17ccaaadea6b97acc0870e18b3621cc8e090e1ea3b18dce9803c2106371ae8cc172def38130f8e26d66e0418fc2edeada99d07efac47e6acbe1b29b462f207ac8effff11acca8f5ed69ad24ddd07289211b9cacc46a3a31b08038fe3cc14eb4317d51883ccd6d95028c3ff28d26efc407fe24b08a098b6cc59b7ff7b9efec6532b0e636b610171947f1382b7c4b9b34a81247cd4e043fed05dc956b589b3f90f68636cc3bf473ac3aea2e07adcb3155a42c5bafe9232cbe5df68ad5a6649760835773fac0bd3c21f407f43d79a1fb2674739b00cc68a4948ed7af3658d82b2f64cf80991570774800781a521a23bc0416062d33dff0607812ca16adb66d1c276b83b8288c1ccf688589a8d2ba26a49b7c8d4b471e0032d5183a7f50a084aeea166331bac43b30ec5f394ba4a87aa1f4284e2c69445f146e710503c20de9d7a584645ae984ae14f5240a2151e380afc38ebb13f50a25c5836504bd7d287973c76ccc84da46e5c45542a8eff547bee5fadf22423ef746a960f508f85b7d1a7eaf0c521465ca82fbfcd3f81d7557944b50deece0b8986d066153137a7d0d3c181cd42b6267a10be7bcd52de312aa385357359080ae6d12dc0cbba55f99b027c9186d42dfcc206fcae30e3729d5a34c6bbdf106224f861596ec43cbb7cb03145a0ab13e7c436faa9008504ab88857a7222a1e00f237af8dbc99e0c261784e1dedbb7d5b9f0cd8b0d2484acf4932f56cea45713b521d6c296139eefd555a11af1204703241fd8363e9b8c83495156dda2542ae49491b8befb1c4fb701b037c52d7922529796d4b75b2f0d924d0377e141703aa0d00553fc1d2fd5127aa1cedc0d60799d504b9276aa6c00ccc5b0c3a783c4905611931f7d730986c3e40db80d3005507a4dd803d021f6e213d1e2229bb7665e09500c235c3dbb6b178300345d8d515dd5a446b82942629d00ec9435411bbec64a8975458cd7ab467b58ff77f0f744b363f51c0bc0fc607c3b561fb42e2d0bffb863da6d48240af845c1c65258ddd38651a0f208516459b1f39b2c0547980f2590c31f8079695e55bdeedaf009a7fa4fe0c99ae7f40374fdba8d5b33fa0d6e454fa422942bff914c807820eb9a34459ff58341db91dea15ee39e8f03805ad9819f5eb83410b2cc3d206760003a76e4fcb99396418c50570b11be9d1fb02d9e8b50e7fe26284972d2f5be85553f024a85e605023fda297a81c4cd6a98d28bbc38f109623f5eb9b4f9e20eab734fa1609f7fb7bbb26223fa947221a37e96cf738b6fc6d4bb1bf3fc2adbcde26b3c7aa387134139b77eb95339772301d9102237f6325591357ee22b8a07591e7aff5dd08bd745f9b1fad6fa720aba899bf9774d26dc1a008cd66acb5f5b598156f7ea7fad1343133382139aa8592f130fad1456a6c5fa3545f1a0ebc594b96ad945e480b94b3e273b516b30b0a3ec58fef1dfac7f77545c13dec9b74caeafb98d487b075e928df9f9298f348847f563aa48198cb1259ac9fb1860dfc850ea926de69d63241141cd9d66ae53d43b5e9d0ef235bbaaa6298a4a262f9875de0ccd905be51a6344bfaae8dbe5e1cd5690decb32cdfc2d4747c7461568cd254f3c44f712ac4f41a512b2aa3ed8500cfc6ca5289fcc4cf45f7065dc283d568cf5a3419e0d50ee85504e7a5b581e133fdef415ed595b5b740251d56c71c2bc0bcea4a30625bb9efcbed12ce4f728cd50739f53c1b41578d8a65fc02f8e4de63685b5fb33c7fa80e2b1923bf0d08b3ec8d36feb08b56affd8ef14b7c2adb8e014c8fad9383b0be05385c1047d94ad70f603440293eab0c272d517e12ba115ec282256638b98d27a63127c6291aafb3d1ef47c51409bd82fc66e166fd1abb2dd07aa8ab9863d328beddbe5ae89018ebf07795fcd6650681c9da1ea84e48219b4985ffe1cc072514c3b2c3e21d5878b369bb6ca681bdb857eaceab85f9db117462f23b21807ef71c13ddcbedd512ecad6fd6ee489dc7e7bbfade55a506c1e54d9dd61163931f31ce6ce485cc2d7a9f2baf719fec9b7806fa674cf342c218a44cf5c1c80afa040e840faaf2fa1657520f8655f81f500734f645e7b9feefdebd90a9bd051113f637b6cd81ed9ee7eb6e8608d465db7c9fb561a3dca157e15e82326c7004c68384ce46ed7f13b830280c740bfc5920c2f51f9abe1adc36add0b829d6d45fbaa8c6dc17bd907080a9dd34fbcb9128da133639c8d4b0bde8f0d3d5091359de4e0e9b7e5e2a204a93a346b39300f710955b71511b92622f65a36c8ac2f16c5056d648d525fe760f846c94884b4bc2ccdb5a95adb11fe3528040a902c675c6bf88d0a1a8437569371897677054c7841485a678e43e8b95d89cec1b30167819a802e9fe7b5fa7a07471509b65907f426d762fbc3fdf62aa68f2f0dcb0264f7cb0841f40b6c26992c85e64a962504aba4e0b597204341bf6211d5cd476055d1f8014cc0adcb212ba86d1d7467af2bff1d6d6438cbf31b32e23d883cc51b5dd48c71428f03a04e8c93dc87a831ef918a38f1112164fac929c928c0683aea2b2387da7e461a28cd2388077ca29f2ad5c325adc0782ce30d9e13720f49398bbb3f007fe12f5c8327dd3f09945f6a1e98067966a7c68e739e2c833255d1c27ae0503dcc89226d8bece24312ce5d049efb4102f84d850ffc02faf57fa9aa57a745c7cad46a3a5b533aff432cfc14150a53bc14308ac83e00fb6054167c4293c00deea16b450f05f0f128c5bd8e2579f82de95bc1baca4c9744738fd26574f2d334e219833b6bf316c6d345e9e602c384933a2939e4d4caf90de6cd50ab2c3597dcfe24cf7c2014e990b426d7bb95fe2385083fa01a560ffada1bc1ac86627e1c2b2a4e40cdfcc7c79230caf43b2c4dcbd971a92f8c147d5047ddb7b1bc1778b88acc49d74c14ec6b901b0a0f0854b46d186369be5acc6fa4d7b7da02151fe4991d840969816a7ee6ccfed3c6c45b0b466d4ed7f3925380f7659d682092b169bef938260cd1326531cf3f0a050719733991d1e3a9fc603dc8fa69471e31978680c2ff9c9b4e2225cbd3d57db4a7584606c5effc88c83b1e48d20a1f237cc1c5d9488aaf4d3e87414ea770fd94cc341602ed6b51186fdb49ffbc77d1b1541adf6a7e6116aaf873ae89b21918d7c4773c2f521cbd8ac1392430ee90272f42195c6cc9c3090d0253983cb31cf9bc505bc553b16c46e588db9c271d47f6a3e40b60164cbb534357d5039a9b579aaadfd885f7629d9ba1b489ae97538bb90750a8a0710c65b9f7ce8a90215727af86c2e5d58eaf49dc7fe791a769583c0a27d866424d3c4e732e38907b76971588d637b53c2e829df26e37907e4bccb386c6727b8399269be0d4b2481fe6df71804bed5c8a54b1b056d231cecafc859974b61ed0adb1e77a76ae33bed1a8313183d036f702db5848ed857944abcae7696aaf5abeb5abf4411744a11696bba2ce7cda57cca8736d2b48068d5e86b9906c14636f3a63dde094d224d2a41ea81ad5d1f5ebadc83b5e7d07e315c392f079c1225e48c4ff19a3253a73d9a8395151da8490399720ba3bc702cec184ba21dd76d0b2842ca0935d7643089383d26866a079980b4b0fd0de45f2607502bcdd4393ec710e7a73441f25f3958270c82ff80e684eec7d4a24d7ae834c41f940c9652265b0fe86f6a2b06b2ddd5ffb5e8a0baec415654da94cdc2e47d32680025314d9153d8ec7a103ab8b7d97d04ac762558bbcb0f6919a8fae99e9be7b960927a97cbfc6e1d7c8d984b9ef9a49008854a82559eb50dba9f91c385a2a660607b3a3e7b932b45d8e17d8c801288620a0df55b1310266d8e344df770def3d671794eadeb2323f25c93b5b7e1be4d29d2bedadbd30563a1eb8d8e17036d4b485c1ab0a98b35df34aa5cf73d01f563be0a6a4cb9338a522b2a7a2566c1db79f3d41029ae68acff956e2b41874b5b2f791a0ebf2c0f3fd720e55253cf2aef3dc77c23d267a614155d61549e3faa6587248844eef8d11d1d5b6e75842331cd1be782628426d63e74da204ddcada69d3a786b3b856f4553ae79d9b12d1546d0c15fc8dcc1bd24df8f21d6025b33503ca7c6d2847337444ba44098c26151d5818aa0fb03f583a7099173e74a53492eeb9c654741c773507748783829adb4669dcdce596ce11b317be9468bc312708299fc2cb0e1bbb62a9a94e4c85732963606f9a0b32afbb09e76da2a218b8bb9b3d949d286c91ca6820bde27393b1aa285ceee39577c799353074178e7e4425704b38f70b8da83373761a131d5798c28ae08312dd034f12369616a21c756a4ae37c80e341e765b0b37270a5e260079ea99af4805c1455c00c47f01e66987a3e1be32856f46d97f1052c5e4a6d983c93a7f1db595cdcf6d9ca8f41dc5520da2dd2060d5703b5ae0a966ec6bf5aae676ae39097d86f1c70e9b45f101fcea3e0db2d88a986f4c5112c2554611fa089b42e81606b13b0afffaf32b62fdfeb0f215258d0e18177dbf99b7b20616148f18bfda11570de6b60e959815b6b778ee4511bae4b8824cfefb5bc1a5d82756c0a8132e3ff6d1f4bd1d68e95a66287f7c15ec8e265695f9de28d2099732f1a591ad49a159f43a12617925dcd4d7c5aa08fdfd8250d8903c4bd45a9cb3498ba5c0b08caa21e0aae72ec76773d8ce9db1180f5fd74f76527645cf8ec1bfc0d3e7fb3c9f19b6c8a0b30a16ed1392810d0dae3566205f6860259ef2534c8b7b64f0e8ee1f010998715d41e31a067b639864b8e31e29612de356c4956fc885417853d046295b126dc810c51f7b6a66109aeb53a79d7b76b76b6173a47126ed590ccc1dc02d072e6c1d98972a42152273726d907581f591a04c5f8b441c3d5a21868a7d3dd5d1e5d1fd4e58dd8cc3cabd3eb0c36e6e8e3228ffe57e8106b4ad8df842d4e099272a9b11b1c52330b1bc309413698574bcd2c29b24089a0ce130b0394362713171accc09bbb5eb60fd739a9e05030d374d49cc4b1d27f306c48e7b35fe60002d1677f42b30da672d313d7a2f10fb040c6694cf6827e866a7d7aaa3266378f182edf04942396bdc2e12bb784005962fd355c63e038ec552c0f9fa8a248cc2293e7f34912d1e8598572376b94ec03ce66a8795329b4cf41b4387d6ee9ac382b5ae9004c422a3b358a03fb4170c31a38e4829460025e06b0c4f80d4e9d5af45c6654b0777366643f91845e8305974ac17619b2ca8965c2f008dd2752df693c9b503fc7aff328e3b9e87ca0a0a7ea7dec61dd24ab5a8111cde698e6fc3e16fd069a41d0099b7514de43dfbe7aa638c89c1c076541effbd61ae1370ed357eeecc5cfd77ce41799543e073c218991e327f000d206e00e63a0706a76f4722c57b027ab966b704aef429ec7eb3e0e68894f55b932148a0bfc7a58ae756019eacb6ec3ee02ebd100dde568de52bf4fab2e3e5a2d94694fe891cc71bc413707788e024a0909b46775673bfde9a4da1b42b9376e3cd2191455bab1946323770a214577f248834d33a3ac121feabbeff2bbc7b8bca75cbf9e7eaebee33c8cd970a30663784df2812ae4ea7d9cc6f4666be7879c8e233118ad5e03b2e258fdc10de976dbd92d1049ad55b400b496f72abae64cf7383a16577d011a803498c515c77fbf2638a7104327ec6b94ca6c1819b0e013b0bd7f8c1c2f26167f6fea7d6b923747e5256a3327d633660d8daabce2e08122610df90d5419b7c27aae8bab90a28fa63dfd958178c5b6f99e9c898613931367ef7bcd37a2266fce9bd8fd88e786d9ca9dee5a2f17bdca8d0a949706f353fb4cb48eebe416b57f38408f6d7ea1e622fbae0accdcb32e1f07e59e2b7a8ab7d31a74fb0713a6273d5e9643a266ad0da56d15ee0dde10ea6878bfda4b7335656a26d744cd069243b4d102717a487b7f4797b74f0d2f8536183ea45930d5f009ac816852ec796e09f3bf9bb3c0f6d11c482cac64fc014eb756fb4bf6442f38ef5b6f64726319711f000a0051aee411469cb77cfbd86b09577da561df9299300bc3f37675b83733ca81383840719b764ac1f2361fe3d56bbefd59cf1e83f4d5812e8194f530248d0d92321133fadb2ad829334887f99a43509cd0f11220feec79337c04fbfa5cacf67db841010c34e93e9d0a21f83ea95a4cea3664f797e166d764006be241ab51dd31167ab7165cd8b65819bd6944685274ba0a98ed537790983766bf15b75194a787e7ba0bd5ae2dd4a380587eac48079454d67064d609baf55433c4ebc0ec1b60c1fdb5bd6ca6944ae7c95419e46bde893b7bef7e05c2624c91720c07d5468a048a1f71d9f94a078a3946cc765e9bd765db467524bf3b6f0040e525db35bc98fe81c50907c373d0f6bb3319010e7722c092689c8eb1d8fda367b647766e81f0eb362944e607afb89d67a60ea5502d2699fc83e85f718dad2e9991d4aa16139233c43ce170471e4538e0c3890ec23b86eb3768516e9fde6d40738a935642b25677f7a1c636f759b9b561d1d0d394eaa2eab1d67742d952d0ae43074caab0509246479b49296c3738117837b55496974e65ee2a03f6acf90c3fd85ec2d5d581a15b58292353a22d12af6ad6df5ba31449aafaea6cfdba9688024ad05840b76dc6772b66f5f9a0e1344338672c8863db9ca99ba902970b8c5349c62b3509ea0b4ceadb2b6cf80bd1442af8c45752fbb8b3c2eccb03c6140a5f3fa93f41d09f3e3dcff70dda24da79d02dd265e32f56f12da4bd5999d8c1101d4b2dd95e582cc71af4cf82c4bd32cad6ffda7565360ca0eec314c137efdf64e8bca2ea8ae8181fba06df99da38618b9668b3bfb02721e8ac393af5eb2cd9e0231f871ebe22dd926816c1c304f0bdfe3f45af2a4b6747399310392d69905b52d2d9babc52e4ba36efc84c3017667933df0f009e6c5776cb2a0b9315e37c36c19e3a61ece53af469b95cb4a1544e796c4ce55eb3264450295362696c3e7d5a67452419019bc38e5c4b5978502671eea0c47ebf0951a3d87e58f633b5a6415b02a1a92e7e8cde19d39e04eee6b1ebed4002a85cc5f06b51c01882dab2e56e61817377288a44a83c9bcc8432b141b5cd86cc23a917ece1776ec44f7e7b20725ef800148cd707a01f1aca25be81bcc76ac73830affd4127c5d737cfcf528fb4e2f15b5225ca8d0fc42ad90d70483cc0deb74f0babb6696f78677f06fc0f87389fd7aaafd5c7d7b16e8ff59130ad39ed5a7e06649559611f5010414f573f99c5130fa08d5721d9985be4701883d5e64863f703d195f2d2b65d8641de3c58c148e00b0c28349be569f62aaceb625cfe025281a7f78d8f38bdb7220421172263121f0005353d2b7a2dba10f9c4787674dab228671433f324c55d83b40db3307d801ad5a6e15619836d7e2f56cf6c4fdc311bef442d7317914b88e48758e62973093046644692ec2fc4171e17f19a22566a2c5984670b61d4e6e7817c0892d76772ccfffb5442e44a700b77582823ecd6812515129354c40b1352e72ea3e9fc5463937a5aabdb0757f5c5998502637f9dfbf96f94c7fb289d804bb3bd75fdcbccbb8e6ecf0e470d8f23a3956db11070558ca41035ac344c79aa78cc181e6910c42670a4c78225cbead6b5ecf5ac3972b37eaa6836f4e841a48aa0aa6bb757dcbfab797c8b04eae89ed228b642ed64e1b7c2382ed08790d31b52fc68d34757ca072cb4b50b4f689f6a287c4c635a3563a81a14af50d086da33eb7c7a2025507223b6781019048a7392be2482e464f255fb49a89e0a4d4facde89a8f3230e68571ed3bc605c01ccef524df88a586254db57fd3ba18963fe0bbea97d1d8168e95dbc19432154dd32b9cd46d704ef009079d67ac3311f88aceef419a2b51ba4bfb4a29b71f6260ffaf73f156f994ff1cc50b95ce0469d9b9a0ce2d3501169097080902fc8b458c84aeefd7f15e4b7d3171342675f14a0222378f0ebd2851e0032378acc222af17678fd527e19a2cbf58a998f7d7f3c5499fe0b50dec51f83c82babb929fbdd046cadd1be9fb4a4664c7b17a7bdb3270f0838e4759842511bdce7956696fecc979d044f4cd8003e248a79f0e6eb88a89623eae7a4f11a759b40cda00112234f44754b8044674b7c0bfc7227ed812a5c72a5334cd477a0b04ea8205d24e575749f2333e7e480afb62ec8a3d9e930d58b6d1cab4d1eadbeb54278c1532369c0b1d8dc4785a892de6ed21d247e53940659ecb26633411ce0c79aa82845e64addcf7d51cdb14689987a0ca6537eec78cf281e87363a24fa67586a2418442007bc45dec35561990e431357e6c823d358547f9741367971e0237aeb917bcdc9c9f9ce6d1b6e6c0992857f2aeb57884996d58d3e5daa7dad4408cf3447ebf397f921908feace40a9e9e2490c30cb9539fc78745dda6c8b8a2e4208ba487de62b75584c82090f95000c8106527f88716a400ba1d92e42f2b8c40f2977c25ac9e9e70b05da817afcc692317f4d7aff846df7e4ad82ce27860d62c543f0ef8d391b7778db8b7ff08301d2c7daefd33b2f05c4708664ee297e20b5acd69f048dabf9f1e64f018d214c1f6ec9ceed730a39bad745fea8261ebde2d6a0ea108a0c2b13fd9ba78a6139ff6248bd3f76b0eea8428f3ced0e84475a4c3e3faeb9e81c72304a00b4ae388deb5b1c99d7155520776ea4173cd0b666fb6b186b07756a0b25550ccb6875a84bfc8221c5c0b70752ad02beacae600d3d06af1a472cfe82adda5634111c909f476cba011e14e2b9ac76c242fd1c5119d8e267fb0f5c33941bc7c1a8259b40d7a19736a38b646edaa83abe9d24702f42ddfbf8912c6bb7edb9a7fa525b80cdf10ef4ef4aa9f580a78c9edb81fe306ec6f42ec231a1c6e4524aeac8acdacb9a4d54fbda9ff0aeee0b61fe5680787adda4461842e5bdc1dd0cb9e3cf9e3e8d9c16dc83dcdba9c561f5e7b3f469dc5d29bc2f8640a0ce3bad9301cc5a87ea9d492422d15bb31b30f0f8220326833a4e2916d9dddf803a853fa1b02da68def17fdfbc5b75616bc81c9efaf5616d2425659bf95fee998c0d61624eff53403d814f8cb3f985b0c8ba04bace6d40d0f1eed65da4c09bd4846c639db18fbdb00101da94ef16e08df245a0287bd873582fe96530ba7eac979c566f705bb7c8fadfa30bd57f03e3fa16838370047a9696b21c4cf387d5a71e122b7dcef2209f9e14deaa3c4d1e0eb40eb3154473da3353230d66aff8473377147e1e08cde08c2f66cdfb6dd25deeb337ec76adce96ac12cbe747e22b4e6936de08a6b006af9816d3dc8d3901a4df08ce52d239dda244a296e95db5fd062dbe90631b1466e71a7285031908cf8df577532073bbd82743cf3254e4915270e46dc4b6688ba5904676488416c98eb64118307ab63709f09a9576264dce6cd0c24e32971ccb3cfa49ae37508f987a4c5207d6fc752beec558560150a3c0ef41e320d44ed5d06bf88a097ea576993ac9b18e9504e5f72b32d9da8a55dea3a3b6cc377ae353ff28f46d7653c4b8c5f22f573264081fb5d85be1d93435e2e05cee5a3868c8f4c0d137a28f49f0e1bec4c8b6096b1e032e9536055f4425bc596f87ebcfc9c6e0b003dd617036a5497fa71aeba9081641703a947f85ffa112b37ad0f09286d1a166d313e4cf56715838b2a463c8e8a93ec2a6396dd22930d5058815b6e7c627647fee962333ebb00d24afb73cd25d09ab491bb52d3eb93f55274772dfcb6113c8b354cd955ffee310ea5c65f94919bac4062d7509452dfd7ee2d67c72ed4626fede749d8b0a58122fe82a5ffa35429ed60e896920f509c64adac71b9d39a52b5b52ef5e62ff86a25984651cb81677a5d116ea6481642d33a16fa55f10a6a10bdf69bfc5f3635a15f1d079e4e5f2acba8936e8a521cad8f64b727ca56472e34ad1b7ea4295cd82d95b1f761fe1a8f15df50b073c1abf206312795cce5a07d479860855ec0c2e2cb2ffa5c093034948c44733871176d9ba3a37467a5d49edcf18e48f420aef5b1bc0bb6ad979817ee9b32cdb5ca0cfe0c4af9e6c15e51425fe9bc7bfa60c78f9cb9917eaa566d05c4fe98310f63de1e440ca16088c9bdda6b8988218e64747579d7d4a0119ebc83500c113637adb109459e3a0feea4ef42046c7a0ec04e89408f313641080503086ca9d0012f7b5374e97a059daf660ef3cc17cf724c580510b80d281c0964fa15b4a5771ad5de9c9b0c47eba827beb9f556ca70750cae80de20b26252e3df32ca8ee3b13ccbf8129364db3541a887534855da0581d2e544e5ead703339899318f1d5b34ccd259134ff21b78552c2c1aae9662d17015ae40cd270e33fc062495de739d7ff90efbcc083b71900c2289dbf409439076b849185b51db298cc7794b76a9f4123db53400f360b3b3218406efcb64110a2b859e5d9013fa1baf4ee68ba107ed0e7b69b06cd93dc1a0d431d4d18712e2a9bb0890452ca8f48e05efb6af777f6d1d4d50742e7db16fc5f2b5466b0d3b6fe9348bb7e0f13e69c1a0face7b205e0a03faa8baea25a2dad42c8b704ad9f587511985b35f314f3bbb0c1801f9da6fd78412840df0d4050fc0579661a22502a2a8e3f0bf73c114b98bc79307608242ccbd2e209c2f8dd2dd6a8adef0582508a552da30795ad3309c086821274faea554ec62a9948d091e75edeb795c2d65c788172823f0a0644d1c96d86fb3ef08ae1a0f4393301ec058a778a8db089f17cde9d8615cdafd4a385bb618cdadf6167ca2f2bf848dc8a01c0c424eb3ad8b60a18ff1ff02b408b515c20569fe531fa866bc6ac72c69bcf644d941793d026ef70418c9e627801b4be672365cf8bd57b81523935905218d46574f1a679091d37f312e94dc92cb5f811d7edb24a9491aa9d162dabfd6d05bb932df93ecd1c71d4ae1ef20ef2f6a49045772cbff6d1970dff25f2c8ab459b72da1f0cf01299a19580c4567f5e2e1008095d0dad86e86effd524687b49e2a3fbe70e9ae7857029908941edb83c7274306eac870e49c3ecb85e1365d8bfaaab3db5e43fcb61d19139099a9b6ba15256b2c2508c0b058b849e93cac4abe025fe7dff766c5a8f3cdde930fab65dab3624760033a34da5e9ec115f01f8368f0eb9cd5e22120b6f5ec0394cfbf2d0f7efffde8b03ea5a6c90475a10a044023448de6d33ccaf8ee2d1f937337213b8a600d4631bb91481e891aa47d70fae9df1e1a17dd66a8821e891401cbb4bd9e5d3eda0be71ef020e0ff47a3c7ae3e39322211559b3514d93d73891f51d1e812ff8368bfa9e2c07401d979fe96f90b41cd09a3021d9336c3d1bcf507031de3fdfe21128cd697fd75af5d8f159dd0ca101a61a1f1e8aca87a20a2f3cb691a2186f4a576046abea6d35fb813dc532e3cab0e922db137fdf07bc719e5feb88c3eef874eeaf77d3f64a337bbb6cf844265afbb03c7cee8fee1513ce668fd31530694e69601d57f6584cf1685f437cf577a30199e4fe077ca61646bf164b189b86863096bfa2c786698e7ceb272750e892dcff58062c32ac0307114ac014844bd4a5518c3fe295652406020263b4a90a911b14e5071cfd2664d08dc91ce93bd7852ccbeb15cbead3888812d9a751b0108ef6ecbd71343eb53b943f9cca386e1dd62ced5356df57dd4d28c618f4feab4d18eb96d525e5490d5688456cf7ceae76c086dc959bb9df6e76029b54cf633d3e0dbcc08e20e9c0413eb7fed2fec5b11ac94e1ddd1c3ff0aa0b786675ce74978c0448dd35524a61ef9127618b6ba5b00ecf2c54929d6f96063b0f4db3a1e4943950b56fe026d788ff4a3562e9527288377bef0180240dd553abc4217356b1402100a5f8156d1d4738e362c4db7248472965238caff56fb0f688459f8a7766061a05f773319157b439ab1e1f7d2e2d266d2390a51448481e353887371cbf4272309ae83f9f72788f127afa441fc27eb19228cfae603f6532b3f4134258f9b4a51895707f2331b2d90ee245b177daa8ae693edc58d3346cb5453c8d5dfd958e79d0cd8744ce0eeaa3e56602e303b0622fcfef701a33a27754850b3212add17d0fda35dc567e285e99ff434fc7dc21e3e255700d3c08a5bd7fdd947b9e2b3a894030585c03d77ffc5504f9bad8e41467174761025f57a31c0d6479b7e170c2b41de9a544d697ed308065122c4be19b7be05f1e2cd3a31abf6fd1ec6e52fed125838f4d0cd003370aa984435fc97ab1b03fa7f45a6f160c68f939785c2b560f959398fb11263a6dfb4c5d782567628f74aaf9cc1a9592d5dbbde1bbb231302b410526463e6bfb42d899fbc8e96b59f4664b7134311b5db483690510415c5b4bb7e49660e64352ab864f83d8e322029190a75af7ba27fa257d67ed6ebe69faa2f7a1cd6342dffc5ab208a840586318e85092cfd3575c37a9430e2b48af16a46b7cf10bc21a4be0e925b19092efe752feee51f70ad943c93b7d11100b6968e309f7a423bff38adec963fd66cf8b1f7863ba3657071920c7339d3c7d99ee273ddc7d3e08dc6c26d822c46fa0757f1dd35864d729a39c5e8f58b8adca8f7ffac6bad4709fca722e7b09f41d4dd8873dbc58e355361264687bc3e409b0e7f7f43562c01ae74c056e5e117e63dd52e5ce1445c3660a08427028daf7006accb27d8bf1e7e7bb76c6c069b8c15e84245ec37078765ed68d0c2866f00024079949a68f8e216a52fbbcc7567c997c2aa1d2cea331cb81041bf141c68d7d8a5c8b699d069b431e9d7887f700de10e767e0e59802330ff10abed2aa89af07820333dad345226e610d27d63777dbdae806d6e8c98a6d1f8bdae592106db85ed2bcb7d9b39ce47a681adff201835c5d017ccbf236762671efb8ff21b6ccc959fc7807cd9fe0e66e9b1c46e41f781904615a80dabfdcaad4246d864375a38502c28089b79ee4feb728062084dc90922d1725b3717c27a1a316458ae993f71e7d724343b9ba6d42cf513164bbf8ff081de95f41614e0a356550184bc63518a10da9ea96ff0df26fa3493184b39f6cfa8d83caab124dbd7bf68b411cefab7eea0b2cf5efa046bf598c25eb87125cc83929023de133182f46327976d5dc0b42138169f098fd1af052eb0020953681da7b751ab65363ce88ab027dfbbc83b538bfddcfe06fa04d1560c80aea55a763cae32c9c4f9942cc9952a82c511b8082220cb7615cff5eb2d333ae1c323f599b981667bddbe7376f1c852168903bb6039518b4ea534c19d852abb4fc58783360fb7ebec53c94be4cdd111e3b115096f69baa004d058f1f7644f17064e56254c73bd631ba3583facc305827e7edfa4254582dcb68423d42cfc97532aa551a2f399ee0df627581d7eccdda3dd5ebc3634a196f98909a72c4d682a940170d452e89f4ed0341cd618fe8fc23298d1a08223b433d801a9a065c33fcf952cd977a45dac67f2925f488569effc9c9e615637ffbe52d5b1712c220e3d13c766568a18dea4ca58063f9544c3026df7c16439d6117a9f2bfdb6928a48ed50ca9198a27d4c98bb8b288c060d7c17ca87b729cf563a8def8abc2a17cf4acab818acb0198344ff9cfad95701b09f3291b4625d96c7d839b2a008df543768952bbf61fd39b166d0c1374c4df837cb97e169c62139c1568567a869d26bee2db89e3b9be899cdca0e7f3aab50fc3e01ca9234e875fb810e128abe6aac83a63029ef1e1aaaab9a975b675ff18dc64f6245d0399765f7f2d7fb79967e4d689b334533b4bcda82c42f1546e7e368e37d04708eb5f3053abb469d5fe0f08aef53e00f23d55364c4dc805b19409b4c53465f497c6cf8284307745bb904b7d06d0d0317dfc3dbfc8880250bc22add5ca0f4cada45a5c91e2460d4a8bffb932251e99e494f0c588ba9f591c9aceae7a507837fb3a2ced9f97780e2721d5d204d4788d05bf5dc0f6662f9445de7350af165b9213b2efa891068e0d9cd59df0d872a7253cb8d860f00727503947e0f1f8be33bfcd9b5f64f0f4fb6bb98919751690e458832373807bb9f40c39fe15cc84b84315183cde49bd81831c09ec8c48213df6392c3a84270c2ff67079978a5fe1c4d46fe260e6b66e5b0cc4e0979e85fbc83ebd05c79c34354ce0510e64c3f86d7172cc1c08879be7756c1d2b67b25186ea444df61e0076fc57cefcaf26ca78ade62bd5e29ea3044319017f6cd7282dee5a7278663ba2c6153d64f247d13fc1dc2e3d9b292ec3f41b7b5cfe5c895d93e6baa75d8f496668f63135a3431bf03e716cc24d96473d6b986a8f958d830d8efe9e3c26702939fb90392ac9b0b700d72fb5a58e7bf161e1eff87facd197536062589a3226fd1ee34a83894cb58248568ef944f1a75a0a2e1c737f05248b49f7b7055af918048ec26367ebea0afc680280b0ef78e92d9c51a93f41b4c709796f8b7a3bb8375dff38e4e9eba3a160a830eccadfb8a1c2a7496b133fcfb3bfa1f6f672608ccd9bdef518cec1e62dcaa816c6011a3651a2394d64e78d824f0c66adfa5b39c577136a576cff55947e7e813d38a58ab61cc5d762c7a141e58e32a59cde83ddea246f3067c2a6ff7e39542beaaa977912893ac4a808ad43dadef1670c2aa080355247ec069253c9949f1f3c13971ec4b0730fc5de5af3692b05f066f27d2ef75981e777a90a54db617cfb6df9af13da2c1b265a3784262b3c2bb92a276dfc1008ceba3a44b72caedb7b984fcbd5f428821c522787deeee532e47170342c4a29c98b3f1a208f3a6a05dc28e5600b4f903114a7d057c675611de7be8c11014f5fb4c02e6b7a75afda2e64761d09bf54bf65076a16af5d29b9f915453e50126154ff394f25716d11d69eba3afe03c561e0685728d71279d92eeea92a4d3117c977e67aa319bb141310fc848e01f5dfc3df82be1eb990bcce62587d78c8ddc352648a7670e8a61e4190f62931705781557e81f0463d48ee636baa50b7bf0088ca1cc2897d7c78ba378099e673225423dd409232d4b44dd8b2b6d24f301006791da0ec4a65ae62befcd7f7035dcdcd3c5937e00272b35f1032c5c34a5feeb96e9ab165192e2dd8f670b8bc3665d69ef98cd5a97fb5c8e762c281bfdc8d048f937078557c2e94c912a4610d3650a2761e12f756961ee81a04ab06c6b5e0a3f9e4d198bc6daf154e0a3b3b9bdb34ba824cf744d5cc545c1b16e5a890a2e13413039026362be9bcffe3f2b22cae9305c13ecca103ea28fff85cd71cfdbecaf56cf1a52b23c71bb0227e115e6cce24d393e790dd648d1c1c759a023160b2924fd304cf7ad9ef81c6ef9bcc98e88dd2035f2eb3fdf23b0707852f4e56efdf58dbb95f61cf67748f89efba8e6234ceef5b5beac50e691067e118b3b2f5f6d4a0412fb860f1bf9fa00f18575d88f9d524b6ea78de41402938b609fe190808d9975fbc12b60ebdf56cd88d084abb9431a081d684bf31a887f142999ed783a9103e4517def041c12052e6b2ecae0aebb44192a57e0513412e9ed3899884bea93c91288e22d4e5161c967e62e7f3382013cc8b1d2a9cfdeb0be5e148508f4fd4624eac4168fe741fe4673ed03bacd652d4a80277609b68e4c98a8377ea863b4bfaa98d459cd51401a69c6f9df3eb9cec8b678e37791868ce157f952539bec071f3ec7f98defe4dcab35de82c7bbab2bfb20a41b0e4b1854e4f3290eaa9c1135b23363a45efe0733bf6e5b300c604cb02aca8d723b09f32f96b79e835e5192519b1b7cfad79469cb91e06dd455ed85beedb0d571cf5b5f815574f1c90b640fc4e37d4091318fc7e86cee6bd57537895624340babeef7bf3e8a9d72f4623a698e64afd55cbd19e0d36ba8994b6c2a9218e2857bfd1716532c963ebb153ee38ad0a11d35a41b8e765f4f7196ee00ac85bd6e02002ad8a10705fb5e8c2925963b3cd840ca81e0ab256b619eb4c28ca5e973669f972fba537cba4c8fcdb6c4c3be4780c8fae82ea6f0581f8e97da89a67674536ab8d4867702234b80fbade3d6c66c7fa9a58e1e70a2e1c5e0571e5921da1170b235886039048d958fa4515489ad0dc6a57717bf829bbf1bddb814a3b0ba40f6f996c836371489e588cdd8d87d4062e67ced85cf0c148df82a42120d921c4af1e0cb6f7ee53d9930f7764136cd0147023b3012f796772dfdbf803685c0b8809c068bbeea38f3c4050370fb13cf8132cbc1e62e3dbd3fccf95f078eb62d6d476ebf79ac218c5d87752632f2231ffe5bd814c19c3dd5d40df9f2fb1963b5c26e00c8350ba9e1fc3621b8ef5b55aa9abe6b70efd31e61d3a09fb561ec4839a83deddb270ec9ca34848c42dc10821a53036d30bd00d932b52bbccc5c557e7e9d908bef8b334f18b970fc950891c1bd646db973e01d21a997c451c9028e60e0f81cd6151a21ddfb31f2acbe84367e1a6d651fec9756b4275bf2df38cb239faafb2e3ab3ec1ffc04f3cc0f7b43fead4b71e00d7c32c65c923d8dec2ebe576ac3e90edfbba95bd791b0362ae36ea6a9c4ccc49e0e8fc7d015f97599f0fb4dd5f426c63c43aae0b4e8f895dff3e8ae03bd496aa464e8b83f3515f5345acb0b39daac6cd7cdcf101f0b2f8170927c94313e29fae36795771539b88a7c7e438febf4ceed792ca6727ac5632953f9a42692efb19de4ed3774feb9def5af04191addbf7ff60706cc8adb0eecb0298633429472d88557b0e8ad84510fcd6a0214665ca905e3df1805362629b79ad5ac8ec697b9f8a934c4a8f563d8e8cd09107417547eb029573e35669f58ba888f11743ab1cf8f812dcee53621f3ec6136336fb3e21d7a4816cba37ee8f2f3a6a067c5b12fbe84d5d8e8439a06d129d79de95871e78ca4e322a760ff3dcef9873d5d67904c0d8fa5a3f45502a576f5c3ed95a1c397e8e192bb2b3f0fa5f24ce729c3f7364433c604c07769ccf1ebf349f6d23869a5a7e1a483a5cc943c1d0f185450a25adeaf4de28518ad5c8dfd059d6d51b074cc9989ddb14b204d7397a60baf5bf5be68b56ac4e1ae90827dffe3ed56311658379e6865600aa1bf5cf1e1055a76dfd1804549ffb95ed5affbfb8eb81f2297a2b97f2c6bc36a68500ddabe704b42bb2aa520a2ccaa625bf4c746415ce105a7cd6267db1079e6c7e98e589226170303c571f4749cab923c2730eda88a6c94bb94b0555de5bceaa4ca6988186429bf65ba039f843dd2d2a16de65ebf6c00474eca2c9afa414e5a2f358c03a14bc1b9ee5f6b0868186f89c3352d8b9c3ff371fea589304d59db2e17028c3d24451d2d7057c8293fd3195c666a6e47dc890c8f54c02c822cf78226b732cb8e3b5a3d3d97690b0fcf5fe001da6033b8768aac6950f342de05260c2cec31185519a64397489db783285649d448ab0fb569807a4c3cc6065b1cdd8731f79fa8edd02425c5548fb5a1833fe9992e8268e4944b50b1dfc1eb1296f108baa8a1de892a46b4676db5cd35d83399908e83de1f12778c81f7506faf1ceda62f9cb88bffe471c42310ea6e0452fc3c65242c1123cee81a5200f794d82b065f99a73872fb43a75d336bd99bab4cc4d62f9a3c837e56444a8b748437921661b0bbcf1e4982ee88f618b0189cba1e248f1dc1a7289c2de14583a09309176c4f91c8d14a50121db5f403bcc50f5d42f1fe9458543d4ddc4ad6d2d7997e24efbf74fdf6e4bcaf11a0d36e606e2abe4e9bc5fe62ec1933c0333fb466758cdd852ffb5c02a4c7ec8885c3f1ad93ab280531ad61374d299c4ac1553f6d373f86e7d3486eff2e3330def950f2b1ffd49ac8aaa8224361559cf460148893158a4df394265d4cf868d65f40a062491dde2148dcb8dc0adfad66306b99c24af257338f2233eaae83f079e4713e0ae6f45a073e5a8d45f3f7b5adfd6213bbff9efa3429232841cfa6461a42572c8bf902adbd786da798ee69e5becfe65dba3cb4603a83756cdc1675509edc7c6303e0eeff680c89ad88c5f88898a13eefba0fe95cbd5c7dcfaccfc9cd6dddf51d039738f20cf2730e04ca5d5e91058d6ad810c751c082064a995e17211d655d1aea0affcc01ddf913ed6175480d4ec227847e154164d159329ebf6423b964341c0ce6109c3580b4b14db393d632f8eae7d76c939d7cba0f8f38916f53837235538cb12ba4448010490133a59022f4de5634a7169a3566a2c4cee242da4e515ade81f7598ecd06b3ec793c18227f746097f9a9c1e2c478b655217b9e83f64ff3afdfde21ca9c1710a84ce8e3efa62ca7409dc00e9c150aff613e7838b70db25affcd6c119940b0fc2e7d33348cc53562d324dca797d67e0eaec7a6e66bb3cdcd5818fe356999c89bdfcccd3ae7ed441ee0469fb1fb7385fef929785a59f7b08eb3a5b04b3679b3588b000eab2f27592c2a4593af77f0861e9612d275f48d73bfa49c6ec628446cf716ab24754d5a41dc5ced0c4bfac89dd0f9c3448a502d608969190887f077a5e42293f9efe5bcb2a55af168a946dbb375dccb757793395e75ab9a33de34a03790e3c473247d91ebff3c96de08cebe2cbc496a866c2d727234cf2bbe3dd683735a6891d47ccefcbd276c1a2f828639bef0b38c32274b76ef66a9ffa342bbe49c4e33069f9ad0aaddafa95ea7620b5f8332e2b2f76a0afda5e87220e20caa14359a9cddeba847089df21f3cb04c0bc195471b57d7b5bf3fcb7c4c08c7bd2e281c175e6e037ceb25513bbf7df71e8b02c06f725d5f890cb648cc8afd27c038462fd2c9cfc9f640db8cefbf25bf762f4d2deb8df6439505f32ad94c8ec5f0954f6ef4a273136a2f5a5895903ca7b433b1a54663f5603e32c5a9a7a2771f9ef3bd4c0bdcb32bafad13a431b2de12ad081c3b6e633296f0103d6adb2867672e23c681a0e1a3e8a33023107a2801320a3ffbb4d168bd33b9161a9b3ae42447cee77e97a8481ea4a767570ad2a1161a51ab4aab0bdd552902e7677562e8bae770069b2dc02a52ed06308d5511324aa29f31a497dda9d6aee8f31876d498a1b0eea9c1ce1cc586edc8fb4a6352d128e920bd58083e13701ae23253e0ee83211ebf8ee9cee09e12dbe40b054d6cbb8cc0fc531f2d786d274926de180f9ba224c955fbf0c0cf521a5f1dd01c5fddeebfd4789a8ba924a47933e48c98f8a69992c69850768c3529c7b24c3624a4e7ffd8eb93460bbf40818790a57b29ba2bb06b63937970d9a555b65d70c24c3c9d679284685aa64af3851f2a47863c651de9c62ca8ad8806c2b963265efb582d54ed4a7544bcb1f466071de063a8fc5281c97b60c6ea1e822f1993c8a50137855b7433c90bb3c0e51eda9d44f5487d924e2dfb791b18bf607dde744569596e7a0c006264ad107b9c499f99976d1bac4afc41df99a9f3f586bc0a5a4bcea076269dda11514477980d75be63163e5d24906f56521bf393a1311daef424986cae08fb67dac3aeb64c10c75a06bd26bcff0e3340f70f57a6312cbc0bb3c6c8c0e384374de26c3f7df3db9546c99fb627ded867450c701b269209c79c72e773e9364076ca5b40727e81fa1518aecef66744242c599e09def2e0be30875b0dbcf6e63fe3cc38a8e2cb387db8670611cc9cb10d8243d44cb8331e9f30352f2240f24decb55201db298bdc972bdc35325dac46a721734f105f0766a48244df73e7aa035c2c64d521091db6a9e564dcaa3620113ba7f533ad80b4f7aae0c884ec2144fd3ccd5dcf4ef556f9701dcf6c2c497fefab79d776eacbf6b6072f06fe3c41b890df8116190304e3452bb3c01b71f33bd1dedbf0bd06021001cb0aee953f825dabdc53dc38bc17193d33bfe67b657f72cc4c409c14e36757bddf664d631044b9249dbd3ce3a9b7a8ce9237585687c5573516bd08a7ac36f24b5f416058af59d1e7c7202c8b8042f38c11c582de1169429a481a96eca90f645","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"a04e2aebb4f065114c065b7fbf49759e"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
