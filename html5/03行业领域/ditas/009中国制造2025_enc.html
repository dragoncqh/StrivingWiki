<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"9276bddcfc20ccba501b100c6a764b9c0e92950fd8f9be2adcf0f5cceaaf4ac5e5de4dcd6a76ddbdc5eb49e3481b09ce6b2da000588af6abc64c2f4e72cb54c3113e88dae96b057ee8561ad266385d8597b181bbe0f3b64a185c5d681855e9652da55266d86ae6cd4a8ca5cff015e75837e349caf384974c912dffb95b8ebc4ffafb4b85d1d8a802562a26f5284dea3682a695ce533514a943c981959964d5205150bacc60005472516a16a7f9b027459205dd58fcc437bc1e0ccd1f7e28bd5c8ee5bd56ed2ae5e73834b053791afa9d8287f45216c16ec33bd61cbb06bd93df1da60bde3e18055024143668ec5089892e51ccf30b1d659cf5d2d0f490dcdd27137a3ed04cb7c4575770ca054bcba879cbeffbdb45cfb36b99071208746056807c1ed3af40ddd1805a1e72aa65d538033b23b9248cd24e43dbe711508cd2dd0d9cc52ae89a7410bdc138e4f2540749e191cb758e1c49055341e4a7cc450254b2698efb5e8d4107659adde6ed86f03b01ed6039a1eae98cc016a21da1737cc1a0dfc2b4a373b709a66d37881e51f3e746388754bfcac64577ec6dd881c061a7d5b8ba02254131fa885f4aec81c31aa0e60269ce16aed7dc4f540a5e9b0d636536cc3e0f4ed9da68f4b442542bbf937b874590f988520a46ef1f74a337001cc6dbf1b387222f8b1a9bc4e6efe77af8ad9c63c2cc781ea257fe2d28d3459435c5ebd2a03c82b97b6d801bcf36caa12241a6e5a6ce6a8bce08375c4e9c138861b2805f79d69292a764ac6179edbbff1b80eae062323a042b0ed4157993c7c4ad1de0db3ac855ffad28b7f6027412284e1c1bb2ed482c102ee7813e851ecc083eae23fb591aa0c857306800e60a51418ee7b226362a4e101c3cf4123f01e0243523be95fc8a23bfb74904cc779bbd546b7ca127c3c87b7d2c4061e2b740b3d10a021f805c63274a2d0354c0724e5bb62eed2975d04e25ca61c200b96a99f8a18fbabfb843be007cc9aea4a868fa5d479630be457b2b2939e4af67b148da6fcba6d8e90f4e7796386d5cb883b6a3277b12eb07ce112bfb8a11bc1b64ae86650c3615b412dd454d293228c936cfda88b5b9a8d6e29769d9797fb2b40e179945a36048097132d55565388a2ed4d4c460d7b4ef4069e79a1e1dc06fec58a090f53f9a1d7db59cbe1091e94256f37abb959844b4575fd1fdadaae2ce25bc9c6d77edfbeb2b06871ad7388f30a831fe420cb82244e9faf1c1b7e498262518471675be9e6c621c793f914f26febbb1b9c805b0086c745d782ff28c9f583b967503d625b007bb6755fc11652f4d1dd1373de2e7b559989fe6a441a469a17f51df01552511e245bad0a941b5c240cf78e3771c55706e449d7b6589b7f227faf051784665cce848f62f432ffe52a8c5588e6f274e21a68a724146c5d469102e9a620b7224720ce6e013ef0cdd5fdec502e5a1daf9e915304504ffc8fbedc23c81bb2b377f0eb7de65cc9ffec29b2fed7440d11e8992a90d6fbf96a80be4d81394f87a5caffc4c923e4d95e7fec871852bf5550158d695ae07a0d66e283bfca3829503534df3de56e0a944b9a43b6218d7fc7e3341889ace35402e9bbe4af04448bc6052c36562aed86e2e754a834fed0a8dfe942e59002231deee41702df41dbef7ca66d04e4cdc33b210410a480a1e3a49680db0cdaf7b332a0f9f1a99d26929f6627e5ff254617da19f4f4bedf10ca329f4cdf36e6b9699e80f16161fdf589f4394f1dd314f5fa8f073edf86c122a9a285cbf9c769f7cfdd2d5c97fe99e9f49c0af8ea8ff6e22846224fe7e535459ee7d1d126a14b8fee529348eb826ebcd28a8ba214a6e5213aac192118dc162211ab73571fa3c9093af3862aa866f2268c78cb11e933a0d9d5f28910f5e604ac4ee18aad328115e9bf97ea1cba29067f66608e868cc26fc073fe074ce0bac370671a16f395e446881d70fa72d663912b4ec550adae924673498eaebf6cdf21b19986889bd8e07e2581e8fa622be335e74df4cb2c06e539add5e972ceec4bee979a3ab6b0dedad41e0b0ba276fff0c8083743749f6887a28ff82b69ed3fd908ce87e80adb59d07e07cbb499d864d9cb4b6c56e35ee0c7c13e3fc3202fa6421e24eebcd0d5ee74756e2ec483f133a34bf1e9bf21afcdc251dfb12075706ad95241cbaace11bf9b1ff368557ea8824bc13a04fedbecde1f22c2213cab2a4bde0e5c76b93d66a4d69f4e40944148a7f6ddbb848783082674a1dda1daeb6d3ed093d51bdc3de6ed87157b3fd8bd33f06462c65a5c2e3479e1e361c01a081127080bd1e00b2c5748969b05beac3e41ff5b823c9c909deda37a0c41c5a83955010191ba2b870e2fe15665adbe504bfe01004e1a57ccf755189aea2d176dd3fead0baea511cf2e1f8bbd95f3c2aa6f02e0496bd59f2abcb8216933f13ab97fef7031f8e047d50c8d635378ef67482a6084ea7baffa2b9cd4e475d5ef328470e0e16c9741a9674cd40cb7065971906c1101fab264ba30bd81ea1032261d884c26291aec0c2703d03d5e4f1ffda1d2fa6e7af6130bf17a4c9cd4e5e264d5a3ae0f1fd15a128d02421f5ad9ed456a8c4e3c0c77bdc22491d826a4c04a7feb15201c56041f45feb990c7a7d7fcf9405d6a1d14f34c9ca5d242dc954ba68d79aa785fec15ae655122487fc46419a55f6c2a78b1659cdadec56efe886449313248126c526b7f9cf5ec9172e4e8d84e650c35eb0fca3d172236510e8d2960307be280ab867d3a06e29edfe48105e9340f24d805d48859bcd8e1ddcf3b791cfff72d4c3f549f444a8ce263f2b4e25a7d48492f199e2571de4553af6f91fe32e26a13d3f38b5517c1699d9368f68377442edd78ed8c0030061150fb0964914df2fb12707f27687ace811fbdf6701c90a947185035d74ffb18094e1f3d521f91d9113ef92f49a18a4f4e4e686f25149048c5957e6264b64416578b8777114b11d7e3ec8379d1030d70abb24643cd71d6aa094ad7e0841248be439da93076d1f9cd04824eba49bcfb486c1777d4751e5c57382418060cfda9b66ef181dabd06f04ea08bb59a728d1417b5bb3769fe40a1d40aa04a2a613b61888b70deff23e86ace3936f2a284f804d7aa9a7134284feae9b29d8a2b885a4ef49f0d85500388933468d8c3d8d38ab4eebddb0fb07e11ce56a6c3d7c29c84e86c4beba26648e193c72ee879cf9c581df5ba54c70da7d147d171a4726488aa4279339bf65ba7d078b8b0e8b705367389b0691f457397bb20b7c87f306a2658a1b8d637ae4d4319d5f84425a59673379e9f01f742a1341a89c5425bfc0f6cd38345a6521f29c580ba6e8195a2ff573aedc5b89fb21a4a7c133454e874662a379d6d7ea464e2edb6091f0f5d12bebb9871ebecbf5746802112b3e9917e813b66a1639b0c0648412d110b1b85bba8ba707280ffa979dbaaa666536ffd25187b5174b12351cec6ba01d8847b21a650c397340f249e1895249696d64b768c98686fcdda6ff61f220c4755158cd457801aaa9b7a86eed85fd87491a8e98969ee07af82b8ff9287ce07b1899b72940f63b9fe6fdff1e55d874a8573b9660555955e46e0bbb0c7cd64f61f9870869edbb088396e2b28e4c075a2d50932388ece23587e5b519c0a41b1a9545312dd7d7cfe8787cd1e4bd8318f59f4858a08f7c4bea1d5b7df797a9160a08c51bee1021f8232b700a11091a3bb4a9ec4e31ee7466f5c2b5ef81143a3e31dce9c002b05fd24f4168593291f6b1ef56388c345807102dfd0ec3800b2e85cf1c8edb3e9bc860e85383ada7e3343f9b5577541e8291bae0560b6dd3fb70997dc83ba993f742e045ab18c69eb11386f4e9200606ad12005a56827510341714de4514d37fef1db1d263e4cd537dd0f76213e0911d1726ea0a2236c7111b04f9efd3407f296b9ccc195d755e477caf7e077e152ee0410f4691dfe3bb5a4103446cfb10c1ec12ac6571ae2f9a8515af1d4c5bcfd515b81cbce58b12934ab5f3f455863e8e332f8f2058a490662901ec26fc10b4fc27c8c0c87e99afac804d6630dce0cc3760ca01ba1c7316e1d715ee6c84937b15764f567f970b423e1c49098e1d086047efc6b0dcc9d948376722989bca40b9c28cf0d06071d0fd275d36d7bcca7fc5b597e18c77b403fadad125279b6a7c38b4e2ba7a8e73c7b5deea776b1fc60e3ca4c3bfc3a492ac1d96f3985cb66069b91159342f1ea0f11ff81db9cf081ba52dc228e569791650ab451948269100d90b2b3a2f48a833c5d109300fbb377e73b337afb731741dc30c097c1aa78d7bde68d18eb691710ee7d3728df398f20242021577d142b3d9d0d94c26edef9176cf2061cebfcad148d10a4831fb3f2bc4b46ff1c1d7f1ac870de39c649bd65c9394f262e74a56584e1c6e3c798be178fb23b836a428b9bbb3e03c9d29dbacaabf631b9ea3479778b78ccdba6d3d5259683603f4ba6062399af0bf35acb1f06b76cf0b52efac0929cba0e53de9a7874ca7ace314e8da542eae3c30c1fd32f7432c0d82d660d8dc80b8ecd5dd0aa0384b374a5cfbf11d1e4e6df7d5a61ec0293679880dd61f376581adc4891a0d5c5b82249d358ed9c59d1b9b5bc94d2f4d4ae8c37e2bd95a122e854e25d6ec19e4b1657036237f7b87bed0dd2a39cd46d6ab2f2601b489430792387bdfe179984f84e1549bc4954394b26ae3cfd8211a7e39353f08371afd20d0663fb64a6f1dfb2935e20ce331f8a42e1563d2f7f5f0ae441c11d81c8fc480948cc1847b3384173d6c5c01547b193210c89fee523c4d4026aab251f790eba7086a0e66674478e9b9268084f0c89f416a0d6f354b15af0018ee184ac587a5ef9e0bfed797448a74904d93c866089c0a4891aa790bfd85fb9bc043654ef0e61563e92da50514b826934eb543bd2990a51d3d2abaed85dfc0a8e00c05106edc1706f102dd1a5fbb7fed04be1c7ee239bf362ea9b8074a03b417937ae979dfe07b613d10103c54e01e31efb0d116f0950a667cb7cd05927ea65ef9533c7444aab6cd3e2cc2cf142c1d63df381384fbc99ece387cff9bf7bb8aeb6a620c038597ebb80e65a8d964fb8bc55807e8033c9449dc6b595056ccb56334593639afc72eb467730dc9cf506da1ca60d0e1d37e72b4aef121c721e8bed702ca1d2e4dad0cf3370a139090c856147b4ade269a87340a25640611e5f77a858ce4d84d9f43281a9f29e590373871477ffe7e5f6e5eb1113da3cf0ab95fd4760e387f94439b00d0db1b4eedce6c11c82c65378267afccf3f5f93659cdd20e47675e9115a28dd1c108eddf2a06a09266a457614862ef7d820c78388f8a557a37a89d37ec22c5f8dbb8f5043eedc6432f70caac49857d8adf85b169ba1b892f720e88267669408d1aa9fd1d33bf58d3d2e08405150d70ce1aa49e4db5a5274c216abd24731d0845ecca7f60a84de2be6ad16099ad71aa2d06c249aca81ed2deb65a46e0111214b4c13219e4732b3c48dbc2ed8f30d1679bac9a6de04c1347b7681641dbeb3a44daeb7caea4b111864e79b8f1bdeca7af47a3e72bbce1f74e0e93ff74764dec0fb6ed40d727bbbb50bf4ee5566428587dedd136ee2d0cfa617e079642851b86a0261bdcdb01c6494731d5e2996b895bdb9b86d0f6b52a4fe8f260e3f4f1c31858eabf1d97b070b23b98ef6a9a0c522049776e1fb345ca492dfd59e2549045c47d1e0169188a75e28f8982bfdfac4a2a9c82ffab3db9eb896b866a438e8306fbd8a06e6bbbeb720501e3ef38a3be15cc72efb20662b5eb7d782019abd05613459f8db6ba364579119b94672a82a89542ab6c92b90b4fa40a2a74e90a882329263821f0e14c6910028c6e0e24b6bd4866091266b98cebbfa194fab2cb45b4bd389d64826e08120d77aa6cbca98430291d39006993b29594cbb7e42d3ad8f4cc58be97085fecbd2456b2f3c6fbb77fca5c79535dc27bd6a7a615a942c6cf79171736b408c10ab1e72625454a8b013387390cf68c2af044c85ed85d627629f0d78bb3b3187332138761552a658621c1364012631ac9d78e5a439800012395ae9b2db7fd6cdfdb434121bca0ee23c2a5e6d0b27ec3fdd90038812ff7306672539c421874ebdb997da638b268ae2064654b680cabe30969bd0a83b04610c5da208a7e2732f1737cbbac2c7fc09ef039d0a943317801d0a63d03c19dfcc5b5c3065d03aecfcb5b9993e22b3ed29526f16bb9564f6dd3c454fbbdfcd82aa48d52682c8be8ce6c0e5846435a5c167a1a5bd50f6b413283165435b04ff6247850a3616500a31f0b61561ea2157b13b382923114669b7289fe225e1814ab12a0df728dd3843f6b4f24978c12f99c8a14d5df280762034eae252ff15c6bfbfda1f3ab9c13fc1d0f1dd5530ada8f0f4f0b54ad5d2c6d7566d40e3c5b068b40f615bfa8a4e0396258a3ac5e1ea5cda64939ebe2ae08f7f30a14f5b352e28d0ec51cea806016b0a56013bcf1769d5607db885bc8b1067c3f9d754b9cbe8091b5b9bb9dea05c56fe6862c2c85e33217ec43a3acd31b3c41b3ac3c5d580845ea8eba8c6ea9f4334aa54c5aa020aca9ed06d34b650dbc7f298e51644292200ca8ee28f9fbf49905a6a3eb2bb030ac3734054f1e9624c0db6035de727f2e6a1f9a4d5498d6d6c57b980f994995e4ccfd4c275c8ab78d286a68d6351509a9ad5b3e7afd27adf8d8869cda56e6312bec5177f8922f897165847a6399572c555e180cdd2bf063270087ce8bc1e5e890b61111b94bc4603ac1aaaa0398b901a2bc59eadc1244c7cbb05037c8ed2b5ad06e7a24bc33e91a644139b628fa550f78210ef0e8380b9deadc4048063955a458ca5adfd7791b6a716427a066e87342b82dfa9b55e9c78502409d6665fdff5925ee365ab86d60c60cca2efb168078922f069501740b84680a4c15e57b5b59c4fa1efc3f4e7ee273404a799aab819d7cb1fd19c93112962fa2751e64cace1727a522e1c604a5c3890b00646879f10cb8c827e640d6d4fa999894b399b156dd4e987ef3257c92e5db2cda559a894c71de975ccc158d1825a2c7c4c90db678523de0b44f8b526d310c8ec02c43f007a30421e7a2a7f01fc74a2037741d2c0e02c2f7fc83a42d1665550ada19fea0c5432430338837de031fd64493d0379b05ee221bba52fbe4b1611703e1c274c7911b8983a328b439b169eefcfa927391b6f3ea19ad10ab4dd51a405c310980e9cc5af488ca1700e675bd92f00c3b3a4cc2ebbdb9daa3fac8370c2c09c35d42447c8de1fca0201c85b0662f372bfa5e730666e8fe571bc5e83c94f3ffe9cfbf14b6382eff4f0bfcb478de1b8b21d8e5a6132c2ab9d9e8303e77f09a366b0d071ac7c738a8f2a3847996c2caa7fbee366ed84b0bf556a67fc6b2f7ccec00cc5594715feacb4a4dba2e80b3bf095e5181dbd0c0f615525e8e14dbf310dee60b2b0f060d7616b244929cc99b3757b6e27518f67a1dd086956edc5fa0564355e2fcceb56cb658e3d354928190451edb91cb68dc7b228c6ecd2623a3748f28eefb9aaee138c6b5021e21dae9ae6ab68d6283cd9332f2641c6ea1736ef101a38aee850fc5856bd60732301cb6426c341275709be3f5fb300aa6170946ef03dd4889c3c5a46e6ef2cafdc4073b9c14007a55a72bd6aed1a30c028014b20c165d59406d858d44dd0f7300b15496364b3575aa034b1a2df0caeff1d9f023592691106eeec3f68e2fe1e1742b5e7819e7afd5fc012b6b534b5bb7c2e35c19d9864ad4935409e0dd0b687240f75a895da1ff5b90a706f213e1cce4946101fd9ca901467333510dcfc6eb01a83604caaa604fc531f94577161a8a90ae53128e25697b629800e9df6c11a15a3aa94e07d10c2b565c87132c85da2ef2581e7cdb9eed0a695caa1913334954db524110e98d217f3cb356cb41423b3c59c22b037cf753014e6a38d415bf754beb8f9b372538d3c5e3ac1bcd0e44e91ae29ec3495c638c4672c4354326bfde5668cdd0139a1e9ece3e533d3e0b37e728603d2bb9335f5d6c4f06b51ce56459ebda686dd8b1aeb933af8bd36d206d7239915dcf95f2cfa5e38a6e1f16c96bfe5cae7cb0a784f6d4253be4bc91163f88ff86abaaedbb8c76eb8e469a10ac78711e9291846fce67e605d1a86f4f56c1cf0f217806f23a11402b01dd6d4839e31638b7461e1837cdbe998302c55de82780644e4821e20dd7514eacb35a35e05ff4e0d4ecb9f569953a1f858db33055c492a32a29f66c2c614fdded799ad74ea8ef8bcb6acae2e4e5626aa543e7689cce9395b5dab023133e1d6177a8f9ec8ef4db3e68bb61754dd037ab72d4d02568adfe3801f0b4e83771d5a21e4c2a82f333239bf65546e9e198144ba661b647124e5e9d58b1a0329bb8a1a85a872ef225b7a55cc471f9abdbe8fbf295010c3c5fe3504777c83483b736b92804c756446b1d5eb2270463c2e80f40002bdb6ea0b79633753b68c8229a3308be086e9a579a6eac7b5f309873e27ee5878e858eede59fce9a13260ab58d62c3c6291c1413876a2dc3b71a32ee29ad414254ca65a5e99963172bfade043f1fff3ffd97ac7f193594007fa3c8907cae1d3f093ec730d98c614f75c6473e6fd5151b859aaeb7519b5f00ce3e824e29a8bd0dfb7ff6216e5eaf03bba15d5bdfc713f980ff34b8c45017b6a42e18990ec46ba567db26bf75f4f4ee85e0fecbeb5b0e7d6c2e7cb629396558434c948401fd21d9e93d7a90c7e4549bf16d70e384d9a3b2293302288d3208e0289b6239d4d3e566f2be822840020c96f2b64f8df4b1a41674ed916074bfd7721e3689e8f96d7df96f792b21554d7d4a1a412b96cb4de3b1a1a63f79fc524eb8e5e02c82c65d8795353ac1bb98fd9e67e05895c79af146f6187933f88cc01be42b9d38cf392be244cbc661daa97679335292eb191398353c7452b4ddad834c9de8b70e1668ee07a2dbea7301a6eaf04467473d82ee381e5e815f670d59781ee34cc0f587d1344d61309f56f4eca981f09299a9a3dc75d44b2bf47367d75b0ce39e50e40b42bf131e647de5f63e4a344523c4693be259303da5cc74123269ba6d3f762f197ce905e8b69de82e464831c656ca21944b12031339f159e3ab528073f7625fd7910ef366f8eb554aa4440596fe0ac02f4017b6577a5e2f8def8bac5756cd3cf5b56e382e302df5d19333bfbc6ba0e6d7c94107543f28ff2bb2ec5dfe49d54ea6d5c6db40b4a878054423aa7571303ed8c5739097bc923d7ef7bd1f8c73f9da4a81cdcdb453a6150e514c63ab67360a4e9d6606579fc620876e5cfc598d31abd0e424e32c90cc2ed7f5cd15707590a01ceb17b542d1b2f2a3bcdb2d27c1fb59461f0a237f39d85e90f8006200e5676ab1a59f77a611d0416bcefb1ae903341cf3ea8a117add81a69252276f90f6f73a4b865bc14700bdae01f8114ab67f039b026e32b5e346de612da55bfb5b121f6a2977dd211539bda167b623e1d6257903a304cfca5077c2785f7c947b362df8d22ba8fd9e1e002e1685b9e9916a49402f399054efa6afe4697899d95fad957822af671e8ca813c923e2b67afe8111a8d5b7614589a8eafc69283ced6ce055ad81e9cafb22eed5f01a1e012bc5ad4d7f0352fb880fc651617aca3cd00035e35566ed50c7d9efec60b7dc2a95e14947c92c9ec30e6c978d4a3f267922cd85f162ad07cad5f5602488b7c309ba80d0da8c74846374140859885821cbd8011a6e5e358eb9eaca55997c3bc3db2eb852899bced2fbcedf68fe5442c3a12f245471129a548a29d738989d742d5b655bd80a1abe2689b99bd1aae73270515140e103dd5b02b4f23d4bf5aaa79ad58a7ec6ba3753307982a80e582ad5239240b3c4b7b55b342f78d99afa4ed3abd0d0d3418517c831b8f56f500b99c9ade2d071ed93d59735623acecb58bf55c9cf2716fb8ac1c5ca65b991410e037a44b34e25e9c5a6554bab95e90d577c45fc3bd35401c54e2057219e0bc3308d7b2cb24032085e9b7b6b595f9ad15e92252189266c3cf1f5e31a8b82b1f54dc3465c165040828893c105c23fcec13b58af76f784178b5c180c3cc7d50d87655b379ea53aa5a3431645c73f51ba359981fd6c75aee32e2b74100b70c14b1683b755a9e8388e62ad4b8fd3f3ed789dca2b7191215618dd81ce00c016d502b6ce630289d6558aa9834f78667dcbe31ca607b0256d9ad332b02e48f0797b4566ba910079dc5ac6907f7e89f15e7c0033a12d356449299ddf3fcea1d0ac5b606fec3a3026e96ac40f41e7a7fc167c12d1f2bc46ac0c7f07684d0febe18af4d27447823b1467305a83fb748c810e94c015e2782b6bfd3684aa3eb9d9412606020741dc028d718e98983738403e18c01303f6b3a8c80dfb09708c0bf4bf0b6332efb3f8e98edb03efe502e4a6035b358952353425a878779b2608a8bd109727320e8a9bfd688a0db4c04d61a9fbddafc7f05ed2f03d8b998f152ef52f9c3a77c704344cf4aa112d4510415c3df3f15865e286ff53004b137ee5ad8dc6ef161e40278a487c6b122235ffd54e4ead20b74074172dd2b2a75c7a5724e74fb54336bbf3a210b01420f987af1a054075be0c966af4f5e36d1f4a6ed52e907f03dce5d88c8cd92b5b43a6c6255334db8474eafb549febac4cc832f00e5a64198c14c3fdb14a39fe9d036bb58f67f2b917e319af4173363672eb6122e5cb6abf635e634f62fe0a9de099169f28b9d14672b4e914d98ca8b9b6f458f0872f122ca0c375bb5d252030fcbf205e6a8a2d2572b13adcc7783e6760450e04af9744183f182642927aa1adf9682a5f978416ffd3eb006a57324c931156c9cf06ac24c63ce0018303b14d5eea9e6fb95e86edb512998bd058f46b2253e3435694fa22c108c5e2ce31e7995a466bdfc2ad281bc58d0ffa540928d75aee5def2e160140f1dcf26b2e01504233bc4ba6ba9fea507cfc0b3b37f5d863b5bbdd7dcb63c14cb5d9ae811a8c6b2a38a914643d86f8d421e246c8d71cb782fea8bb9528c63c8cf34964eb7783e3a2416e2b5aec67d847f77713c6a274925ea3383d2a7ade467ce694017ae33d646e658eff5d5712e3ac9bf6d14d53df3b9f528c71476e6bdf2ee689224fff510a9abe7d6a1c0ac1d392205ce4f400016daf9e837d7de53284e3fb52bb885b9a5ead14914bbbda73fba2153001b2877e00567d2683bb38b3f453d9056b1d888bba1f0d977ba944bcf3bf6c737d14f698df7524ac7b85260846caae40d9282a5f6d2bb143ec6adfdcabb0865b10cdbbfffa54ee7418ffd1ac0d0d419bf83d356f01b1598739929ebc446396d06915d8d770e9abf7ef4cbee5cd2ffc179951fbfcfb47766476f5a063880d22a11cdf23bd810fae73a1b46481059af9a993bc2f909914ae61b179ae47a77a0a145610fe5a1b6bb9ca62e4c6071ba4d5808dff05aeb0974f680c729d3fc4cdd54ae940d603849f5536fb079f9da9ddb8cd9cb20c0bb13fcd15171254643e6e23033b554e4ccdea7e595a9a53eff4306569ac099664cf21218d36bd0e6cc4e0195e0879b0cffe5709481c17b06c2f240e0edda9415a396c2ccee8a98f417e2e5c39f81fc0e600d208f4aea3389243c44d95c4a3e9e155bf95f926b2f2edbddb65b1647fa371f9ae0d73ea150ffec642775428d7ac69ee42df09bcdbb9328e27475d3a0ae641793b64a144b3838f74207bacb7cebad1f8ff31698e4637b755bd207ae061094bbad6f092459bfbb275c831658ecc4d7f800649e30f7e43ef2b8f83eec350b4dcaf1529b3860b655fdbdf48775fb3f923bb8ed959de6795bf6f71786949aa70fee9355912b46545221a840fa64665f9f2364930bfc7e263f00f29c047340c46086a93aea5e8df978be2daccb06bd8337f26ff47b9c67fd13e69399b2ce769fef363161603b2d524f3418831c82f8f08dab09b49c6d4bf306fe744ed6eba742455af49fbba7b6e777df4d8dccf2d80d93c275e908239573504ce7ceaa3b38c4edd8db905a196d406eb08205da0f5325374d973b7a13b7fac11ad2ab0e08ee045cbc5adefa35336b70ed72f1f964dff12ffe4f22e1efceaffb4b408591111601b58ba62307d75aed017e05ceea5126dd02b762f2e2f38e34c1f363de448d2c9127ea3b596d4d22883eb4507b8d882b829ca6ade1677c5f3fde259d349998d9d54a1f974ae045ed5226cf7c9af812b322935fcda9216671fa285d3c15293c20f78185eb5368a2e700a0245ac29d9c77e5cea4af66b65ab2e38112d21195440c8e4bcc55f8896b095cee672b23a43badcdfcf51f261d150f7dc3e49b8a1e1e20a2aa4b5ac3834bdce57af1c69bd51fda704494d49a09d2d966916ae1b446a58dd8dc7b130fa4ff9cf310752cb4df0ecb4faed246e8dbb003c510ac07722ab4325dfba7a567710df948c9b10cccdb4e2d71a112068cb150a3728e6e7abfbf741ea519215489b7d2305b744937b479cc9c1ae70e3ee7d10413b1ef533c26fc09b71436411ec235e327e09001828fd25f8cabf9fc0ed01abe142110167fee00d7e4e0964992e263ef690eb785c8b2a2e9d3eb6981998dc76e9b34638d69e99b583c4a10c6a6a6ed559d063a39c781134959c6ba041457b95c44fed26729ca1ba4dd9d3008e9e749a7d7891af48e75164467c7f02d391625668acfd1bdb8e6cc28a9bf30530ecc7d19fa4397b9ecff09c9dfee39cdc7d9fbd3bd5ef71982e4bd0c214a54aafccef61068ab8e5819ce490211ece15ebb7b2fb43faa693ca0cbf7b676a7af4405c510bec5da2abfb699d798d98ecdd0a4554ca5ca5350996f3bf2bdf9a8c6af016fbb56589cfbe87f014c1dc6914c50686248f1eaa9900003bd49597af65d4674d680868385c13cc64c56eec92a4c6b38cfbc9ad473434ff1a88a941611180cd6a42e040905bae3c1d5c1e112b427c9c80085091dcfd794c8b736a0be3e5d25ed8947750273cb94eb527e063e26aafd494c5e522d6ed7274d9dde6626c3131907ad8e9cdede87e679582db1ab773c5108f44280b24fe7a583cd2d1eaab99807b0e1dd9f6ff174530ee93567562e51721df2e32486a1bed9803bda0ad6016e148f8ccaf1803645615be1e0358c9f8c33af0205eaca75f19c6d70d732152bb6c444ff48d91f8aff29b3179967e6895b60af1301953558c21e78806bd7871b163f80fef0a0c7d454378c5435ca07aee1ac20f09ba31ee9d4bbaabe73528bd34ad4180a0de6ae003f6c98abd3dd9e4c6232fc70730e7590ab65afb6993a0995fd0889964beaf010ffc5678d85ed0f5a00ec28e9ae9c7efb1037697f304f6ca9ecfc9c627796ab73cf6ff491b86567da745820b1115d07029b3121354c628092e53c7fcf9259ee9381ea38c15d951cbd500009abf996c91451e975acbbfb0e6cc24808f639528ea5102571384ae8f72a26d27764fc27b2056f36d55633d60173fe116b7c76d9a36407dec567e27912521298d6497ead14872e4e6c018b28db8f5c26950d630cdf458c38cd5db2b5d7483c646e32e668712874c79c3b613dc2d5b5203929e42db54ec9f34b4617d51cc52d096b891a08306ed2f09638d2ffa0f9dd16f9ccd22dfc787489d4dac7c2a486bc6e192bb21dffde0b2c7143f5bc9fe8a386dc107aca12ca5440fbcdd5220a1967037681fa9e96889e9fe2e73f16dc389455d27f8a4726186cdab40c33d5200ad5f7511fc2ef57c44af02ae0d40ba006c0a6fc333fc2177c066f87dd7d284c2534516a89045f90b00732c8ba22750760bf85843b1feb612024dc7a10601e13e9d149ae116697c14248f98e29d639e74fdd70dbbee5eb47942baf2a4b9a505d1c3df2d222fd3d1755c0acd9dbada4f9d933bf3e9593ab3082d216fd1f0cb81d3900b1402c40f9cdf4800c3b13fe1779c8190528158e5bf83e0ef6a09a9d2ef0cb6fbfb47f626a659a9812929e60d7aaf301453bb3a6767db6e225e6c7f2ba143a6fe5cf5e3501fa0d24652f4aacc2e2339cbe40d2db220ac8568d357a3622b8bf35e52d00e0262aef3721d63c0dd5f9297b24a93b856429c7f71778689c883f5ecfd6ddf7c508b2a391e50ae8257ffd5face58660dddf165113614543effcb78cf4e9b76a27687de1d3f2cd995f37a0f060e4ed7ea6a5ead4680638bafcb1fc7557f11548512e380564b207e123c1b50d1184a1eae626a9eb377051c12a446d9885ab7301b4adc52b7c9357e802478672eabc9ab32fcae349ee8aae7226616ed63fb5ee456357fd9a556fdbcd28737bbc5b91d9b5f205930f178a196d893e8db1d36028d3628e156e24a43ae7b383b93ca5870fd7f4c39b061e70e0a8ae33a1160300481cb958bf50d021c9e3aa6c81a2ed65ca31683b30298ef3bf2b826365f3e2feaacd548f01c67689bb77f88e5653d04541f1d68e10cddeb6ab4025f68978201b5783f2f404947d23fba47f90a7ea79c6b9f2431e92dc32c48d03025482bd3f128ee8c301c2f014beb0fc410c41aa27dc06c4b877a36cf0269100b647f58db70293ee62cbb859fb817d2653b6571a9bd689bb06c76438d859ce234b503a2f18c28fa7b9abb8eaedb7ae7fb99aa4a4ad09f5368d7703c09fb1d01571929462bb423ffdb3b9d512beae88cc178e8b1e0a866f740ff1f6ed6fed0c9dd808e150cb602309e9e519ec6504ffb35f3999cf01beb4e39e9bfecc7af7660b38628461a4901760e5d95a94353231bb428463d86bcf57a068f258f43e9a84c848a6f843b8b9dccafa881e2cf61a3936480bde54815524f313334c52e880d1aff77983de32c04cf0116b6b4f0cd1955f6389bbefcaccf372f64673abf26586948b53a60e06cd68bc41129d0f02290f8d0434e3bd5602b397c4f0dd1d3eb81a07d7b6392d64b5ef763667658830c4c3809efec07d6da6a38b82b9fb736a467ec81a997969b3076f8d06a1141b0a16dfe088f6713a5115c517b03ae2d51e1e9843fec59be1231922a650d7d1c6e185f24537af6e2b71587f31d86895ae79fa6dab5c0aa80f67e7e72d2c9c754926492f71d8cc604d991655e105d7bb35be2f86aa1311fbf38e7839c19ba30b351f61ae0986d72cbf013b6911945230ec9a3401e7aca24e84b477d5155e062c3840e2eb5ab1d12d5254ed127b628d6bde2cd65eee1e85b82412ccb686c853c174185b77e617525366f27d274635fb8a6589390b7767e2bac42802cfc0129679c8d705dc979e8ac235b8df7d5e8232fb0d01a5dbfec0e923c9e4fdcb08f6583fd5fa6785e45acdbdf6231e29e4e98d0b5daeb1ccb6fd5d28f5d6421e29b2d6505d3c4da624ac60594300bc077968f551a5388027b55f9ce82925ff89d79663dc16be380ba061587ffaa8ed3e5fbbf66e54607df1005ee7c5c295171cd9597f2af5dbee291921b75a16b80b71dea8ba9e67ef7ae19fe7906c84f7862ff3d9cba82801eb0634f62fba51870572e3b5ced13ec3913145fd879feae2e529f481bd2aaf3edc32f3547b1f928865c6c91b0986735cd8468883e7be59257560c873f449d4c56905f891714c5f4532345b52b6246224fce3eb8d701f09ebedd2bede26576bbd97665c8e45a5389edf65a3455e914c74f11e6db47fddd7cf30e264788c1611ae3027eab02dc8c92799e8c4994d7e26e6f6ac94e2bd73f6a1d5a80644bae978d406c41491b1d6bf3294d1a91ebbfacade94f8d94fb4ac0943b0df03677ec24947787d4fe12cc4eeda4ad7be3f92105e7bb7184212c1bf83a697bc1a3082509bb879c3d34e060e606bee29089e85a6e514b63fb13973df93d364ff8757df02cad48ed65bae11a7edd871e59dd97f70f2d9a5b36f163312240460ff989e4d3bf9f893cd2e6c37140fdc04ccc43ffb8f1089c3be831a8abee2ff123ee52a0b79f51ebc5a7cd9fa9ab117e81bf9572d58aec37c7dea8dd12050ea1bc8d8906d2f86c44a4ffdbc18d5310ffda08820ae61d293c609a10096fcc78dcb8d0018e5324d901595cfdcdab5baf1a48690d177076079e4d0f06ff2642e7bf752f70cfb64fa17abc311f715f5e77c0e943bac0f33716f4ddfeb64cdc7563fdd7f360c8b031f7c51bae58f53d30528d48d1bbd317619fb46bdaafc02fb4ca2d31c70e103ecf74bdb84855fe5947f392963f6a01dde7acc28825d0a1d1afebb3109d46e0f8067e7b25a48e66928e460273f244ea6edf7e4f17f0777e00402cf931cf7c279d2eb22d70071ddd2aa0d2af339bc03f898a8f0cf0591c4b44ae80903723534a2e394279cddd7e09a93e248d876386c967d24dc67741d0b5721b4f2262abafb3f519678617df5c85be51d8357ea126bc8b26b02812039efd1ab6539a1e8bc0c6eb0c972d63c50a9bf681fdf243caa33ef519e1d54b3dcae2591656b1e77597cbd637857bdfed6b416e9926fcbf15d63bcacef15244532b164f26c2c5bafa9bda917961104e119f2d40e5e293ca882bfe1a7a3b71c406a5553377f82285f79fd5e9377333d31f0bb8f2a5ce2ee9e2a4186b525bf0ee55ad715df5fb62b80639ba9d3456ded9f726b2fefa88d7f65220b7c16715abf18856bc6f1b1ec0c147badb8216462fcde4dd56bfdf5a2d1f363a588148acbe21b5f98570940fc998334e91b51617b6fbbecc2d6e6789f2004a9b5dc358119bd9bea17dd250a32e2936b5e0bdd613ad097499b3aa2489d6def22fadcb9987da8e98a5630e1512050fc70fef94f29690231f403e9b7f418678f9a71ec20cde4500e76fe394870cf17b49019a3954db565c69236f0be6bf41a1899555ebc4de65f562fb0992994fb1aa3aa2106d89ba2fb9a61e80e62be10a9b86c262a72d948ed57f4dd241283cdc77762d6e3dae398eead2d71a984fe96677fd831f368fe170747e995432315b1b6912ff9c3077205b6d3d789e8188c7f326c1dddc07b77c7d42e466e89a9cd0a42785fcc1da7b4ecce07447427c3c43e33195e18b609b713e6ab52f848446627df368e5c2493b88ce8959aef7636115ed623f09c464d5c22443875768f26fa7bdbde9b35f80f57fd926e195761d50a433ea4cb4593747b2714ff9715b363d01e0e0c7c0d63d60e43ba1c200daf7f0be3b612c193b6ac56a810a815bc07807d4228d37b2c2f16335112ba1b8490e0935e5cfd33c491ff949050650460a429e096b462cbee1013af801e47081b76946f5f48d9f9275aa161759695314e00af007d4d49a6de5c9f484f96768eca190cb71ebe4e8ef7f19fbca5afac81a576bdae837ee87798d1f0d8cbc8e2a0ea4ef18f9bc2da417d9f27502f04f319a8b6a2c3deac7a4fe8e1a16aedd7b918d0ed0ded8bba5aae0717591c3054735cd88afe4341ecd0c3de8edfbd7cb3eb1cafd1b185f7c6b92d3c7526e8b163fd7bc4a93ed6c461806173aa59f2144c3f0843d232c927c31de19d3cfa0e13ac003252e966610e625dc2234f1d9ec63097abce4fcb723bb88b4ab688ea123f902453843bf4720204382b93f2a1ebdbb4f647a9104fd442ef7c78afdce7ad58301f31bf6f1e0e4ea75829a7100217f82edd88191a6bfb63c5297d9c77f842bdaacda1a97f74f6e37cdf629ebef86051aaf9683e8102a42c00ee1a8cd0c9be8e175c789c4594970813ac13101d0c5861ac921f19e8cc1ef012a429301e1713407b6ec7a1a406a683329e37d2af6f5f61411a9569c45534d2d68a106120eab55206ae364a291e39a73734ec840c34827437ab8ec6e62492ccf671816dedf6d183cc520f6b4bfc25763772252f542ea920f2c4b628f88dfed5a981e1fb601b505ace72685e644a5019f22ff6f6e39853694e1f888809fc9549f5bc115c071f695a1921b6eee90f116c2067ef6f59ef2f4cf6a193918047f86fdbae5e1bae3c9f6232ea78930bd68a15ddd19704ef5bff2f71eedbaa1d920d8921a13d8fed8c0dcf0e0a1ff92df7120ded8dbf36d754f03049bf70134af9f4bbde0129b9bd998100de3f635fbf26dc2715c4ba52d59f8c15646883dd65d2d82a4e41bf1625cfeb1100e277e969b5b29534f2ce502c9fa4b981e7227de07e30a6aceb4a7c34e8a49b73ebc7e76de128fd1e49aa4015e71ecdc0248fd16afc6d411b45105d290ec5b7491c2612b808d3e96314ed212b4e35ce943eee46c10ebc73e7ebb205f159d476deb5fd74d4629ef628ffb7369c5fc4824ade525914d226aff211766b5c4e9c11ce53b617d54af44a09485b7ed10702512d8a125cbff017925f7f85321624f2a4ea9232069d0193aff4b1a9a5311a88c0db0f9dae14b8ff514e00e3ecf2a89dfdac32d73c63a819e4b2796b8a07719acc664ec945f6c141712f496b3a3fefb9242f66323fa04c5165bc3399585ea6c21a5777250d6c4df21dad82c42363bb72323e93ebc19b64426ca4f0070fedf25672d654200846de382c7819425a4ce9b7ddc9ba2c521e7feae049c73eb265cd5bc07d769c66bfdba540b2ed4572d6bf67e69e0c54d4702844b21bdaa950924a64a70aee5a2c9fe6c374f0e9aaa9c0a40e21773132c138ceadc1a6018884c969d100ff1d1fae73338a2488bb44d62b68bea29bc645c78345c5305c00328d597aacb5a69e9c8ce73370dcbaa36458d471127bd6b99e46dd560621d86dac79efd1a8ae8a458fe156e6b6ff48796a64ecca700f7a786b636cdd5b9876b0c8d67120fb0b2691708c78ce3e470cbc2bdca3604254fd852e24375cb511f4002ccd1950e5909d07dc3e734e59fddc24ab4c896e350490316765889ef39a7e68db91b6455fa779db2c4e7f70e59b7d424f81d2c2524799865045c167e607acd54ce3ae0c2b18346523b9e16eec52b05ff0c9b919e2c54db0f24780c58b3bd73aa9d0c54ef453382aca4c1fd404316b8541f22e4cd0bcdd7978d1fe5e6d4a96f43504fd2b4ee4c35ecffeeda01c3726870aef6d4f66ad759c853220909957bba4e5cdf9e67a62465ade6ab9334f60eb9df87f0c6b3fd163e8271fd29085eb97ef3981c9831c4413e3e0dfdf043b615932a7fb5357d6d376ec641f432110600b1358d5a5eb33560626ecd8b8bb46def160664315862e30a76895ecec81f39f1ae935b14fda37124850383a166f1e4821a119512480cc0ca45e2bd082d714a8ce4a79efda8281596c2c3e8412718f1eb01ec264f1567746d711b9498cfe84c74fe3377cd63c7c8e97ea032f8513ad971329e95b14d641ca531a463d080213c0d7c344a70dc1e8156c2983d060ed987c00cdc8cc0a4e75a72c71d610b558d4ca56da0d45bed429966deea5e0ea263703314a841d78e4ce751d4dfff0875aca6d03a5d823bbb88fc85e8828e664dfd6cc4a23937dad92cac58f01ad915bacb83b11dfc7aa57806dc0e52bc0f9ba1605380473db0237fd254c6469b02813c14267c727b826bc131771bd92d02d0abf3d2cd04d13c68eb628ba2c1d6c62e1d1e7e3fa62aee09336390399503c01a2d667fc282184a3171828b2c9ed6c2ccbf9411ecc45ba0f95a2bc573ff371fc4f93caa962ccc76e09772ad75845243388418518c6ca7464604f1bb2606269f45d1acd293522d8cbf8746a41d251b150f3d85c6ae4992a4aebed650fa168dd67bbd4c03743f0f01e21ccde4a5758498003a492750d4f76c801109c99ee828f7258711a4af945dcbe8c8758889c2c2f40a1265bcbe8ab91de2251ddf3377be3a6d6384410e8a75cb5f1e6cc05ba2a38bde85274a85d68320c00d26ebe7d763b3ef7fcad0d9ead0e983bb1c0083a3e0fc9d7285d4ac9f360b8c819cf1ac351a9a9bbe2eab561ddaf60d403cbf1acbee5273a1c30e61fcc7532791a38fe5d1561d3159a73b4912917a3168bdf6f40338ce60e556128396c1ccf5986fc07362fd8d0950d3e7f0b460841dda31da00b1172d75c4ba7b5830dd622021178192d1d4c8a76928af88c4df9a30ea77ca29439fc060cf5988f81e69ab93d165d6b69f78df2a07c9312d00cf3aabfd50ada5c14e92978ed7e8e626029db1ffadd707056372780cb64ddc9e02e921a36d64752fdd2063be962ff967e1671b2150af1a3eb9ec99f6735023927e9639ebf8eef7bd44ef90a7b6c7c0031b9eba27cbefeb2ea581ba3273cef5bdc58fbba7acb4a6564c0f40d42b4c879cd6e145dce14eaa029fdd79e05a6df6a317096e627cfd52f74bf254661187560859afdec55451736d83ba563c9bb4a0753dd5b1d3c6de57d2f17248b570be9c2f78c6b19a10b848bee3e323b356f51af573ddea9ac41de47bfaa934dc09cf9b62f4a1929006104ed82031d2de60294c6e231104f8b804f211a0d1242c33128f504608c84bb3178c77eca45eed913958f60388ecab3325445d308d0d012c3cf2c8e1c2837aadc8fb7c53a95b3b48e10cfbadc81018ce8f180e4f18c773a07254e64a9a0e9cfe064f3ce233889189c98abde5d50f83620dd74bfb8d4c78a8639cbe25f82748dc8772767660e6df927d4acf323da102f555c09197e0dcb6643045b84994f2e10009cc1f92a190a313d5b6c37c68c31bf3efa44b806b25c1ed8d8c57520cd31184656aae2cee58272a748aff0d807578ab3ad9cf2193d05e848bd68a0017bba0ff0be36312213cf9a3bb8e3c24043177518a894c21909f13cb3b50a3933f34b3c99fc1cfce4d74199db71c88dd709a25ecf30b6a6667db01978f17aa7f0129de87a88bbb8d9d3b35cf887451ab6eac88","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"cb4dac17dd2d3b658155eb3f63bb6c40"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
