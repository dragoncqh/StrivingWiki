<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"6361d1c50b0010e6a4fd3d453d290123f7e398f29edb593458ddf4c302fdbe505fe7928e4322872622b291920dd44e95be1a479c7826c0cd12dacb9b41718bd99d9991b41274895cce5032b97d6e499b5bfc9ee30a4a04327f97a6081ccb6eef84df7eba58cc2bdf5cde46a03c031feae3320be67233f517759f122ed722508f5049ce20fc50ef6cd3415e154aff18c73d69a7be2abe0d8f2f7bbae7e48af25bb2570d9b704b5611370ea649f5e89028d98becd237f69ba9d4ea1f2d73af7ad4bc02e4f9c0ba3e7347933c11b510a25621e942ef14ecb492a44e418516ffc288941bcdbd2d7d3c2911f8339d02ae302d0c263404edf1d1f095887988fae11460ae15697915c749bbfb5ecb5ccf29cfcfd4561796dc4a566358ae534c81c3d53c80e9046b9e0b29f934fe7967ee5748a2a95a91dec1eff94d7e6b70a488de559f3770568eb71a46207e38e71adc8174f315ecd744129a6753834772e385d69fd831d4535d976b6ecb37429037ba430297450338f5b1b9b04c7ee329cce3a393160d99dbd13246fab8668868c2dd8dc04c4609f936661db033c9bd8b1afef852cbb58011e717732e64d0acaacc7c84e2d8f554d1b6a4d93a3346553897b26cffa909ccc85a82025c99d1dcade2cdb8793ea369e4dbef6cce4e0a5410a3527d26bb54c587a6c0345493f5705fd9ec3e0b79e14aba0d42a19bc888e8252ca63f3c34bdd07e1495747126f0d5761bbcf7d29f13891c2ed75d230cfd1a5a79e91c50c5f2447e91884fd6a41f274c142dfcb8ada4989ea911ded56f65668b1f371b0207998b2abb39f1d70bc09c6610c4166a915c3d7f3525868060652d297080fe7387b7404d3f9198016d84b4256ffedde42f56711ffe622d373f1dbf95c1309bebad7671146408158988b260041dc6b669e4ed7baffe64d08aa04a631e29fb0ed97dee5104e539d5de4078004ceb7845acdbdbddf6293cf6b13c9e25ab9eb1e3756f283b1a1260472544f74a738066ae1ef7e7a11c9f12a70dee28de5834b6525c8397a93c1f292d2e4f84263d3eca9cedf41269800c954514c13f6c2caaede32e562f12e8d6c7bd9116fa49247c69b53d9ed3fc80ce5c3a9f4b406d11f7f7032a3dbbebd1b8936ba7fd6abdff4887aa7445b3854063947dff67af6b3b1a86bb593b38710c709f66efb437757c511975c46ebb9b1deae6dc776e00eec0651024576092e140af725c2665db6d2d5388a713ef1721b75b88ca2502d7dc24e8bfeefb5977f7ca4c1daf8aa61d38f5a099e77bc46ca3bd59bf40d0b275f1162bfbf55c6a8a85d1cc1109ad9438afd3f1a7f5a73da43644979cea5843e7202dde08159cc663a32aa7b9fecae8fd30c7c939c1185362dc6a7771599d01eeb57806fe672a76d9f224cbadca185e15c44af6468571d5198131ebf51d952cbf387c0201ce8ae99cfcf55310e3c600c4c368839266476d888a29da5781735e8b9197ceb757342ef92f872d3291dc17e6e1f0f8bb14132a89f18758950e0c4e6c0c5cfeb4ad1038b7ce0a4de91190841c386230c796a3b920b792486e78c4e4619eb59314f57ca4cb39a3406a3ba15e352a04cf4285bde49bede2bc17352d32a2ff6addd21490a40e2f0a7a0aff04b1f942a3bae3a0302472aef67b1779d12edab076bd94403b6fd0d9dd4535a6318e89f447224f923c232adbd89b8121247ec40a923c88b8b0be237533836c9795e3a2254f4f537217f6a2232ff22f5457e0dbff8a5bfc3a6882f9e30a977b5b441ab583567d37dba13a1d326553782c22b974215b14b57170bd655ed8cf283106a5fab2a43316bcb57ecf51265c699d0407ad372373416c5fd81c15f62590944ffc98ec85e14ca8f4c81935ecab74895783ad3ca47145cf6d1882ca128b0f50f955417fc9b0f990336270b92f4e24d162b13d5a46683971424b3fc4cf181a95e66c9dfbfab77b922dee23121b2506cb839d5924c7f4b19bf84826c40ef12b6218baaae336c34eccd800315755cd910a1eb6d10af211d267cd5bfba519053babb7655f8e3571e93aa47969459b30c85eed58ccd0aa4ff29bb2678c056e8a199ecdf23391c3b91544f9cf9f34f72a4940936bd0fad30b38e23e31f0d7dc28c1b78914a0427174a0526c4dc83eee6b449c375f64913134c524f1e6ef0204f5e052d22768daeb00dc3928f5a0853d0653a9b8676be708f5d599ea1ce588b6cc17d93b6088bbdf449f6bb87ea50ffc3957dfec04bb4d6525d84391a6cacd2a27cf7525897f460630eb109a12574929b07bf22d095a4f4548e1788f8f1d3933061d35352820910f345bc4d9c8578911461d719192ec1ce10e31659156c99af19b2707a4ffdb4e5f06d1ee6eef584c3d1b96e9517b8f92bf73e8e2a7cff2025f4f48f78651e4c3145a7e75c24e8d103832c50df3e7ec9ad60279d6b829797e6a5722c93610b2472b6f3c54463d6d641e77f6b24dc7e6e3cb9f806a1fcbe5123d22cb14a2c3890ff8d25862294d03b09002d69e95a7cf47defcc3c71327253d9ce97b290810b337021f82eab68bea82db83bb1f04a058b3777686d5302e6610f195349357cb82d13fbf7aa4d6abe783a2db65ea5db2c3eb608bc56174568eba6759c361bf68ba6a494a2b1f0bffea0ec062cfda8b534ef90c741d4bfbf5d77eea0c4e11810e9f295cc537f8abc722bead1b4b95d2c6b0f69ed8832d7de8b6917047e68fe7761ab96f634c73238c2013baa3d4dfa94742c584d64e1797230fa7d5c25290af38dccdd1cd25d05359104830c8704f116a0647cc149ce9990f840a14d4c0f180da659dd7a75cf60f0060761100fb03d91c44499159a446d11d3c9b2ef8c15055d47ae1d3fa963a2d787875a976f9c3a06802d7b988883149875e1fd7fe524e5803b5888f5ff33ad72403b852b2a4f95a8ad22749ec0e6dd993e4bacc0c06d9b6ef3115d3becdbdba72ac5101d45b353111271b69ad1b343b79d694d482876938c67fe47fecf6404e3205afd7cc3e593becd7e3a35d2bb72044ec95b0e64ab853d74d2079e04fb4c30728336d6bcaa7517a053211d3ed84d77289602fa9a78ebf91e47cb032da36c93f123c8a0941cc4f82cb68cc17d01518458123224653ccbf7e6b7e6d07964303826749138b08f4a2d758349f855a701d1608b8de1961118bbee2da749a6567f67b501bf663a17324d2f69fd21fa45cd8e62c8055da7c5fd56d00cb495dd5fa682ae819078bdc80a85931a9ae7a6402a499c363dc43fd6e49e1f2d9f788df520bf5a09424cc9388a637650e76bcd25dc8e6fe33f4c192dcc70257369bec8324ff0de18c5c9209b5ef16912fc994fdc84d0dfdf782542f7efc59001b2171352c1644cb1dd55fcf8f25455cd87c90dbb599f00284b1b679effcd1c095f918aad8ab4db11cc56dd5ea18b1dc9157656fc216a66d3dd353842cc1f8816a8d90f5408d5691a04c2571936c8b339c58bd33d260a790600febed3e16e45ee58bc838e9e489710f6df3be3a73eb254ae5a8e1d0d721f1e7eeef01dd46748b50cb0eab3d98239373ce4c06fa5d87a4e785533ab857f02bcdeb64246094330c44fc7b5b999151eeade6ef10c065997ad4ac339b7df25e566963a757f40685aab30851b4c5583a75dce416bf6cb475890cdc4b9506d13a3aa3620188697b73d54c57b32b46bd5cbb9971325b16d91b82f57ef28efd8e8478ed9c339bb02d74700e31fbf2e2e8abd1318d7d1607184ce439e047018387e773d17b1340f99c4f3af05c6f3b02ddeac50aa3634eb559df89450b71f63e45033e7f2fad17002cedb2faf7c6c34fd507666400b9e4fcea25aac8db2fc3c4f5af92ad7414898cc7042a88aa7f54ea46c65d99f70801337d14fa44aa6b249c10d01eeb0df05867cfaec8094530bdaf76aed40f380ba42de8d72c69e59c49dc6dd260047842c3887c89b3e4daa4c7b2f31ff6c2c6a9b333da35753cb526c1a3f2462a316fb4e906aca49d263a9e7a328e329ca2726c293ae9a38dd5f08e3182fb7c5b249318d8fdaa43ce58940ad0354f697191495b7db579148d8fda4d7829df8a9531ba865ca8f7a567a3137d7db9bab623c5da47b23d67ef8b73a9cdc4b6c0945dec87beb2dfb7708b864e3f9a0776ab10fb39b2dba63e8eba67bc484048d98a616f44c44611f340a0ff3826065e7342ed2399298a6f432b7ad323fd8fa83fa7cc0d172a55efc9c747646ad5a2ee94a270c0e679f5d50108449a56b68465d045cdfb35c2bee709f97966b7538663a68fe63b7d42aea4af03cf9dc97252d4b0fff4ef0ae7ea66b5d5d110844f85dde8ea9064c61e648ab3dbfe54d95f9ec2545e2d457cba45f098b4b209162c84ab758c72c19a8536469b829a0aebcaa0c2bbd9640373d101a40da4193f6c94ecc2ccdbc552fc1c4d546bc2ca6b8c633f65bb0a13736177a5ec22db739a4d761467dfa628f1d17cafdf5e03a01031dbd1232d000bb81ce1b3b332c04a8a5cea70d3e7a8f9bfbe7c26c2aa671d23439f0097e1f61bc615bc59d5d33c661846a7df70862dd4da1ee9ab05393c4c5db70e096d88f22b3f26db3be2bda1bad5654b79da53861f9036c8f8f1133bd8b22c2c5a7cba9046a59d6290a661aaa5902c3e11e78dc73697fa6532554f08e83da70da9c979225c941560d431fba41a4f0aa6967b97e8fbe078ba88e936d420da25458beba8bb395886714078ceb4801039d1ec12c21fb07038901a564dd7f6cea51470c51276953e5549bd7bbd474af1d21d7a051da4f9e2de2e21b82a2b101fc3a0d18655174a30200ace56483b026dea5734651c94c3450ae5be6aecc504fa030cb2e7b4188ae94c41aa4288ca4e26e6ff397df37e3ffdf2f586c1820b0b48ec6d367be5a9821587bc01f5d108e9a60437383324feaebad036ec8d149ee967b77fefff59f286b8ebd1e41a6620e90a79dcff3ccae89f74a565e81f5187f32b777d6b5717ab42c91a4ab072beff3b8342fea02edb821a602dd4c279975d12a5144a8a9da44b36ac4cb60fb2b823265e2098cf6cc995f7069b4b38325833ca2b149701585c8e832399ba8d3760c318d5c1ef213814637698168502857cc6e9097708cb40f5a5aa3a32768484daee3a84b90320524b9f004da53ce2cff4a9fce93ee03f62dabc1f23e5397d1924123a610d3ab08c7615205a001999e6c41d82c9919f20479e9424c1d722cd8d119ef4fd2712ddb4c59b263b6c4cab2fc6489c55aa114154049d55a42e2c172cbda57efb5121c8b02c179bbed8cf720af17775848feeaddb681bf1ab48fda0783726394766437d379e02819e20fd2e3aa68b36dcef4c3da1045ff1c8d4eb65d9b545fdbc81f687d0582bd03f6fc827ffb2a50908d8aae3dbea103c2826ac07368ae32cae15277f308cad0c1e9929ddf5f0b5dd0e9d5ae43712eb74df9dfea0d60ab7e76412f81c74c7508232ba747ed5fd8071930929e8f602976041bba7368b82ace12480c75e84897a757b25422941fdb0a1fbf63737bc0becfb9c8200a853c3f5792d3033362a0ce5ae74ebe8bbf644754f91b8c066e7d95e78b1e5aa9b09c5034c4d9523feb0242ccc4835c0e589e1bad5cb6c57f288dfb136832894666b367c0911c2cec3bd882eb8ffabc75b6597505e58e2166e7060296b19e144729d806007c6d911213d33bdbec3c6c8fdc4cf47221ed2ddc607c5b89ba6c937c99403d1f0c21ebfdd2a8b034c9782844027135cf446e9a19e6e46c845bfef9d9d1434475efcd0c541b6526a9358c67fb36c2230bae1117104d95600c3ca47a97c34efb58687cf2d6969c9e70f27e27864f75b62f3fdcb50ff2abb599684234ce42d5782b30214cfd9e7a76c680628316c17e636bbb2d1bd1e1847e5d71f469d303903d02aebd6f9d776ca4ce44db20d04d47acd18a8220091e696d3cabf25643f2c29350037755741ca6d8fee1e767adc6213f606af2f5c7003965bb2d4fcc4572647a76ce425c4a8c4e842744b7888dd97dae3521dfa0fa969ae0ab14d3f282015cc72606ede533ba935ed7124a993edb8151384a64c539c9bd3cd4f895641962a77eb5a01c844152b2426389477ea1eb8846dcb063ae92834c77fac8aa483d0d3a9ed7f14b5625395b542a21e0a773b263a75e087c13d975f9bfd8647a957d8875551508c90fe0fc7c2beea2ee9a4e46489b9c887801d2419fe8dc0acdbb652b9326e24370456a37fc810347f635cfcb168c0a75455a57b0fe5d1d66bfa5b5f5791da312f54c3950c2268bc7821789a1e4bdaa527a28fe65c63e435d5192c9c15fc2736f5a7a85b9b92ccfb47b21f0b1742f33a8370b2e82814291f58cd6461045a578d8d2885600aea969f2a08d95f4736341f51e9c420330f2ae2f00676b746701afefaa6cf83788f0e890c7120d7babadecc6f6ebcc2152c261a43c972489ab71171ca9ef0b3dd06090f1a282aa7748230457c1c5cdb55b0841d114846c1ddae47bfcb135d274fb8871c76d21248c457de57f912cde83fb3ef802d208cb124ee86c303c43d37319078d5da32a8107f01fbaaf58eebd73020367987537748dc4a3b7ec53a4fe3ac491ba961b04aa5e43b24e48a235f494c2247f40cce018ac011114b454bed5cc99a5442eda0f7469dec8707bff8991a32efc3171a3d845c1a4ccdb92fa01d52c944bdd53370cc488f6661f357a39e2c061c3e9e9fdb4db3e06d3e9bdffeaf55b1e483920caa111fb2f1a47a5e93693f0de044401810a669299faa77c5decfc299616e558cea928a5eb7aa1dfc0b2520104b9b3887c60f3f61b44a2f442de4c16715eb1fdf5a541613e57dadcba00204d5b097b2997c036e8ae4955ad359f90292787f40fa6928fd5c162c1a169e0e3f1d4aa513e63dbf701d8efe34344631d99b7d1d4f1768d928337b4b78006107766e47cf355d1ea71575dd8a1a779190c37711112d33e6a4f065d77339fc9f732d7fb5b8e7367dfb54ba726c0a298040c827513b7c766ef2b619cc087c76f7eba2483033d5217fa8e484506f7b12a10d25f106ab34f008b730bd8e3ab33fa4d20f4cb0d9d764b6d77922b3f830c5cd10082c5a131d30ed0947320872c5ec987e896db325b60984b6c3f3a44f5a9f9e2493472597e2b8654458c6061b66f5fe3a0c4f8219929008fea9389eab3a0ddce1027b2d0c808158839182f9f2583206998d731e400094110dbcd1bb34c059ab86e7c94ead0ea6c7198660c91a192f63a157d360efe6e935b9093a3a928aedfb68708344bef2747cafaf30a249c6a9ab6b920b93f8f731de8c6cff711700ce620dd638b74c03242b2b8ba9fe87aa526827ecd13ad8dd952dd110f20ebe625e5d7f923a952f3a7d1e51e7ad1a8924f40505c0d2bcf34b71d20ad1ebbccf291515cb64c419f559c147e309ba323b0448118fe3a81b2ce3a50ff17bbed1b5b425c7dc34238a7b1a6225810313b4484791e0b32a9aa76811f2a8a4f582e9771c5bbb26af9d28e68f5591d7a9c66785d59bef1d5ab77d7b8f770028c75e3717f77d133ea592143f9fbd1b6e0d244f28c54a34e2409e9e39758cf8dcc286596a02f6bcdd44e4938819ec598b70bc8112cae06a5bdc2f49926e6d1018d07f4a631b3ae6b2a793d03843f37f1aa6d5da8498f3bbfa06b0a62047539c431c63152f444082f983711063909eddd4339029544ad742dacd57f79755794326a38850d58c7f346f8600a7b4bff306f4e07907e37338088362b51c917428d1f51645734d289d3b424221eab18a018a726a003e07ce7a31ae78e3af798bc17d84c6118caa445bceb0378a101ce4078d093ad64eca48f00cced7fb160c2979c132bb2a429a6d94aff5d87140518016ada64d5fcb7586dd41df11f0ccbde031d4084ed6725773819817a4eefa58dae118ac64c48ca5ed4a01fa364fe1d9600b88a5e2f49b5c0884c1b8d63b284084c6cfb6d2e38988ef9a9a0070105a8a9f8ef02ec8755fd78558c5860ea64b19d1976bc02c4b4cd0d229cf6b79c14c50f059cd5039da823624d5c0233910ecb5dc60855b0b1b89ffa2fdac2b78b5c2d8b572cd87d47eb7d5b5b9305bf571224874fb1bad71388d2944a901c647c5554ef823795e5f5c46e9ec433aca3710b7d6a42e882c2f9aa415df9b66efa1c908dfa338f7264fe9ce9df59636d3ab0b93fb374d1e9499e171297b0eed8dcffb5690353124cba1af8328c56c73c46120d7c2055706330e1be0dbb48b7a9051ca6631e306d1f8171ffe4d4567e72ae2844a73c0256be12c12f6fac160bae5930ebeda5f238bd463829be7bd0f423b5b8b39893c9c4c28403e8aeee6e7251d7fdeddf6831db318fafde4060773b5c1b5c66a11d95388853d611cbe349d5d852c7361322126f523bba35a41c04016278f9aa011ef09c724af14deeaffd69b434113c1d09c07be816d14ffdd3fcd24c5b40d8a29c79a7023c7d986c36ce3dfeb52f633d927345365d80f3b3e1ff8698b363b37cfb423220dc52d147ddebd275ad9b90e64be7ee60d229fa321fcc70df51b8dbbec2aa263a6dbf88679e9934f0ed3c9cc3311e1247a447e6a592be487f9709e657dd4d73ab1bea09a984717c57eec457d8783fcfbf56cb0a598b9f68bbc8053846425711229a88908a6b4655f878719cc6b68d2c107d8d2ff90c9bcc968d1e671649e0b8756d1c8427fc2237a220d7be1799696e1c31bf2a48ecb5a250ca172e13c90a48e36ded89cda8f473cd04a645bcc324ba3d29eb0935ded52568db42ca9764c9c2b53c40ab5ee97ad21ac720f45b25c4bf9eefc555cb12d3205107a2bb362838f074933ebbd909b60c8d8621a3f94f7cfa83b9b66f61ef84f004b7883c0b957845db0ae58e2424ab80159fc06a957ed34e6a92a5f3a3fe6c594e768c93bf8eac0c5ebd0d9d7c810f7890331d2d5ba41d7dec321e4b5b6c886d35afb8ba37566fa22e13040835ce80f7548019ab0a08e66126088fb9defa4d8be8233773326b5695a49a2743673c9892fa828e8f1d6a595d57d91a2acc2e2f332777c9a4eb7c7bcdcbbb094b8c33dc2238dba1ec6e23511f28d60d26622cce86c3431c6002c7d9259234cf2aa64e95d23d54301a00716d17669414446dfbae2aba72d1822afd4c6b08c205c31df6d0602f28fd9a76d8e95fb45f6be500a4f19bb1d4a876e0173390f06bac62097517097b57e6138a5041c430a7fdf8e855d9c9a170f273a8212065418d980a73dc0b17653491333cf1323f6a98ae791fea52ecd962c2d2bc844f9ff851558666519f51bd1ee9ede3ceab467126c17695b66dbb4f5f4a2dea46a61c8058cda93ab9461c060197251adedfd5e27e749863f9712b25c782a72b775b5552bc27acb802fbe403116d97530ea6a7e7cdb415f77f6b52778c4ed0e705821bbc0ec0a420ed52889e298efdb5a37f1bf6a0b9ad421824efef09a7cfbd07c49c480bd7b2677df6e74adccb39b1411818b14b6ba8cf960c3d80844d4f676064fcf74d7f67abd3f8e1a9749a147361073e9eaaa6a5fff42bbc90db468dc4c74e7d48b5983ff28bb60daa335b586cf005dbf01c8cf83ccb57591a7b9ae65dff7fefa2c33c9797eefaf25b5ce6d678c215782d51bbc221d22122fb1c984d133d87c5224d2f82e98c146b307b869fcb0daec992fcf2d7cf8fa7dc6bc44551e93f8b7f8fd8b9a310a6d7d2ec29c6e03ddb5f91d6a7a837a0a5bf2b39e6a56b32be0b7c979f3b007fc231693d8dbb4d97559dd9460d41e0fa8d92fa15fc06ef60977f8faad8f01b2dead4434d9e5bd04507283d313dcdf432df7cc7f75981a623bef3e072de36197fd1d63439afd0ee46c6cd38410c7bd6e9c705058750860c037b4b5fc07db22953c125ab13001f0b1a8f2a3c20a1142f2c12e41ee79ed826061c45ec13b1974f567aa5e5e40f97d208a0177557c4b188427125494921569a437702e73440fc3cf0ebb7a4356683fe8c01c43f11f75f8f7803a2aef931066b6e520717fd39c3b96237c8ab6b7fe7ff1d308275b5a55ccd0a20e0ea42a0a4b9e591f3634ef691a60b21a65dcc0997fa20c07ab1d00fdbd314b53f1c170c694fee1905a8323473b437fe4b177b71399e6c45816a1a24a6d0384a6368e368e5d9507c6f68021e5d8c7a8bcc485a08ed317605ed731916555b83f9cd5b00d4407d119bc1576055eafa97ca40830a0164e572412dfc1c6317a864fab2dc45af2311ab2aac45b2d1fe58f54fa11bf1999aded9ce19206755698ebd812d9db526eb944d2a2948a0cb729acba310c99a2849e5d07bd121fc1ac97b2b5327a8eb1ce9128f5380a3d1db2a5bee17e181adadd4ba2dfc698548bbbdd2accedd063272c0defec34ed052e69d5413905f555f1435fb9d01e06e02401e9a0d5749022705a312680d11038ffd0d3e1fac785e609281b5304a77ae88c52b5ce2677f4a018fd4ed5561971626c68211d3a8090c411765b8e0efb41f436ae545050ab442594ee07bcd6ba0c62eed3092dfe1ddbc1958ae1b70ebe6697340eabcf9c7e21b09f000d7d72a2092b75dc11df29d103fe2d5db25885ed8368f9d441a7eaef5ccc461b902a3894a54baebd2f6bdccb859244659b0578f45ba257a4772f0cd7cc788d514f01e573ca25b13c2b902c942109a0c368cf3f8dda22f14cda398c6537024509987746c5f3f8b6e6deac3982a1878b1626e92c36c4fcd39d0db9c2247b9c7dd8cf1293fba086357b5a884d60189be42417bb4d0102d12663f232ba4c9e1efd7a99e36e6d577659ab660d445238bb5d740c983a5b1d009dc93d0db8b7adf72a19c704e619ffc25e0c2f8ff35ae34ad54cae6aada8a37183f6be807a2d9ceaafbd3fb6a62d2cdf473671fd0be72cb7545ddc1babf73aab2c851b6027f5134f845e50d9d3841f5d633a8ca68b2b8f6a314311b9d9a51de4735050455d6e0e99b89483127c1cbff589f794d2d6bdc9db9646c05b3c28e6f9543b60bf2d965d858ede044e3945b894c074e21315d1c1089499833c9a5f0209c2b310211a56b58d2be59c7640f1ea1a2dcf4f8e71e6f94fcf704edb4700de496f81c05342302b8ee8c4559a74ed909725af233d15df5def5e32ecbf6f44ae209ecd2c38a2e1f8cbc7c61605521dafa3d97294ea39ee978d57a1223bdf9f77e18f029b1b737142807dd2b0bfc930b402ff7341451271587da29c70e0bb7e547b7678f35ed3fbe69b357ecc25e3489969f1a83bc43fe80476d25f04580e4408ca885bd756968b577e348d127f5a055760ec424c2d65ece949d535ee8dc9be33cff6cdaa3c625574c175973aac8e07d514a7c5de26e03eb2af80785edc321b5465d246c30665d92ff791e9e4ef23721c3e5aee5c3393d88d9af6bf010044f13d92e2ff3c03b0b95f36210cc303e22b7ff882437f54637d4a59fdc961404f5a79bd02ea93e9bd132842e17715139beb430f5f910f0895d5d9e45076484b93b7d08897216ef84fc8280b1dc228ad21cead129f993715ee1dd3f9959bd3474c6a3f75016402f351fc492dfa8664673edd6c4cea7a11e93de16e094d77bbbbd4b7dffd37b18ef713e816f80bad08435a5fbaecb2fb50448ddaaf7d07a043eb844da1630c7e5ec55d9ebd9ed4bbd19e03d928165c826ced2eb6ceaeafca727baec5a2844579fd27abe5843a806a5d3254265b9fdbd3a1d6245f0fc83b9666e8246b6c2c01c6f757a08d25e84115690b399e15ff6be3110d1ef8ec6064a7b4230c48c25b493a729cf0efe50ac007b33628267dee6ccc903ed9e4776d11f638cce224b43846501994a12771602fb7ae778fb8ad89cd0fbf0acc58a7524b52a474f803466d66a3b5467b119e27e6100016fc96b93c765813b6494ecc563a8b752039b0277fa03cd0393663753d0d00e0a93ebf9a922cf16b0761f8a38166ba0a9952bf6498fab0f8cab60c5575bbcad1f2e0f9015fa8100e34fb4c3f6b9bff276ce53ba2849a1eb12f4036f297402c09dd3df37a3d68e75eb3abd593a2780aad976e341268414946a1549252c26d19f42fbcd1828505b81201e4c80151c8556c27e5687bcabe11349c2d8711c6c751917f6497d6af35a11c75318122963ddef4b5bccdb8a27a04bfe6da85428e33380880387be25492b216e7b72230081818be5522ed5d262e5b0d00dbdf547aaa766490844a601b62c3249632d1035d45aba054de5c8985dabfefd9a4104d4e0ab9e779076f9962327242716a9e380e2be2b7fb68f556cc4de14f92d82805b11bb37dd281b8723198f614ad1417cebd2f262a6f83e904ac4481164540c1ce573e79d6ae810f54dbf7631a0f7bc311314f503dc3ae5554b421425349bf423e4f49ca875ae76843c6fb8e1b8f4e8a967dfe1a13d680232dbcaea65de3217e556171d890b033796981cf8e9810f1bdb3d578637419a18d591c235224cb2d0705c9e2159016ffcb7edd4ad07f512440095745fc111fe5bedb8979978067a49cfc9c63bac339176128992d4d73c8eff764b41b65b26461ffb3ded230f98feafc1b70f3b1b56ee704cbe9dc7acbdc061ef17cb90fc64f6679d7748f525d3bafab79322d998a73eb085188bf95de36546857460f09a6ef29fcda60010a807b2859792cc70870445818df5b8d6d33d40c48bbb34f29482a764c75a7d241b457c149b3a9ed3fe96213ebe5053420787d9f85d5c3d27ee260b3c099505e4bdda7d90c7fedba13cdcf9361d5a15c778c91ac1636fc5439d9a9aac6c41c34eee37f2abb92ab2d52fa732b400b3fb9182a78e2dd84cec829d3c3dd1d2d156f6e446899f0a2b06756feaeab8903e84ed7c17b8f60cd63b827eda08a64c8fd05cb8dbf8613ec3d3904c407bb231a33132bb59cfb952004b437fe19d0b20d88b265f1b4cf1f55c9adc4ff79c4c29a5db6cd5c56dd7eefc75a5ef69ba7569403bd19430f7deef496caceec671ad81e0c3511ac902a596aaa2688c3fbb1fe676c7b43dfc46edf2f4f3520bc2724f81aef60396632dc380bdec1e9f2b1df8cfa760e2033436e432cb4cb8d45fd2ea0274314523c14c94de0088a30c42aad4514940c94a8ca5fb16919f63246d64644812da598650182301be2854b948121cb9638454af4f63e206fc9d40b41148305bf4d7848a72d7e32b99fc335b660fedb358ee9beb4929bfef1bd0c373fcf9d307fbfd856e3a96c95a43a3304326f6b9666ff9c2a6faa9e71565d2b7e6519c5e1c6240e391787ba3431282910ce784ce0bfaee18353e89942b43f1a10bb6c5032e3da3622462d7d5156ce015df8c6a80429879fc0143b8dfb97ade9565c78468c45bdcaae9f7753eb63c6e1fffee62fd7bab53e515dd52d1b706b533ca4480286d1909f2f4ad34ad831db7d0a0fc5e5737c04595a956fd0e4b43c258f842165bd9d8b9919a7c339b93d734e930febd32cd7985fadd6a4a6405de45f10aead338cdeb24fcba4a92739b853526eecfaac21cd0a7f3902cf9e6556b3a09ca423ef113774f7ad4eed4cabd53084acc28ddf1f58ae37a788a13c85538f424020363bc5304ee37b6fbf45d65001c291cfc71b501645c24fa47cd5aa1749d57d5c9bd463341466e73a49261de28fd16366f38b9102d90e414712f82a84b227bfbf24fa0f47eb2d6b76a37cc1a3c1acf0b2ddd8cffa7ed1e2c6c650288809794a8084ffdf24c36076066d2d6812cdd0b732034660d406142a6bc0438abaffc4d625f75a73ecef7920daee350f066f9945aefd508d60457e94cb9243cf3dd6777e717756d200743bb5048b804ea8ffdb48b99252015e644f6adbb0deb3f09a8b06311fb43bc03707916ebca03dc7d5703fae9aebf725cd7976bb7a739113d7ce7f651b07bcf83a3e33a0ab1e8df79b100726c7b47c861b7fff056a5a2252ef25a0c34fd490e428f0012eca7ac1c02ec8c259934dcfd7e8d013dadb510a685a26029fe8e9fb7000cbc00a35970d76f8311c5fa74c1c7f5e1aed9a59c0cd40dd21e756148ead71efb7445218e1ea05147ef37534035e59e82f3a59cbb258de3388f2af47f65104f4724ee705d089b630f246565a2b5e76e1c74b19b2c8349d944b42634182572f695d2b4e2b52c60124b1ab1f840acfdd24a0a05e5ae5140550f240d12e2df82ac823ff23b48d56d27f799b0e5077f6efd5747c0049fc5974d97f8d9deecb7495f074597c51f882051f5410b707db4a235ade2665d7f27875278b9de51eb5c7cb3fa398979d1fe4de5f1b43fba913558e287ab1c68c41ec3dd59c444b75b7c955008b1b796371ea15816df4fe99929ce365f53eb0e1c708475366b6fb1a052c542b032f9515aa36a1009fd6fca7cc11be597444bb11d9894c9a7b1c2c2ecd4f3ead9426062f80b20f377856882325bea5eaf8dccae75e84241f38206f91ef95268b0cb635fc75bd60c9e599f11b9887ec766bb4386c692936cb07a8048e3d13fb57dd2f24546accd6a5fbdccac3c46a7fb3dadb92a9b3b109b152efbee90d2cd7824418ebc92fd6fa767e35cc59640872f59fbabba504fc6d138e913f085fd3105292d6a2c9da47e4dd871ac3f04e68d3b05d117ed6a321aa83e3df7b33cc049e19b8e0c9922a8650d3bfb48701856029d7b94cf4f4cfcebd95534297997845bd62f4b5f00ccafdc0a6a5093235a1284b4fa71934447505632770f536425cdb2d3f3427e217966c537cab282ab5d95eca8d22172ae08aa994f15c6104287e76f12e290b9e8b18f572df622cd1ca175f126d08ae2a1612fc0b8d04864f540448f767c9b34a71e0014c1dba125a4d0d4553e8b937bac923c93faa1f0e6036a791d2d04e69e96f72c269d0d91b0c7a2b82659faaf3428c305767749bd99c84f0aa5199174a48f579a46626baa849aa4ee92f12015aaa05fba10325c955f7d0099ad197b7c261a18a9d565c1cdd23d9b32920e020f1397862182a7b5d701a2a6cd9cdf3c3b3a3c73c5450362f8fc416033f8a2e0130cc514b039a5766547afc68dcffa9d2c859fc348773b99db1e5e7af97e3712b33258e163e89fe73f6b2bbb8eacb62415e8bd0376e6cac799efd07f7603d530ee203613f564bbf7ee736d3bdfa9dc855dbe0eb3c38d6151f36788d1623a95a2ee347731d2662857d189bbbe4d99fe1a209398bd392478894dbce3135f86d47d7b346323a57e8a1123796d2533922bc35948819c7bfd2b6069e98bc9665c9cbc431b6dd94bc0b05daaa0753f27295b4486a7cd1d6152726d17dc2309d7a9bec1d182f3bf5b20535490014bb8bf2f39b0e7cbb69af0a489f9bfee48ba006beb09f86f216e219ca37b03b42ce279fbf1bfcabd577e6f7f3d6a25934b5d707546722b2063083806f3ee9cc3feb30e752d00ea639deca34e83972f09ec6d10d446121a1bc09ead249d22c9d17b0b781e5c12d0c0314aa86dd707ff05afc07f6d37adb538b22b2bd3cce815fd466b93628cd6021a8271619eaba8a5d3e96eceda55df5c9cd92514dc91208a89a62a863e7369acf5135f166c142664eefa59b3c4ba1a159a2dc69cd5b87ffe862e04cfc3571d54d5b5f5e5920dacbd1cefb8270b344c981dcf4b3febc18ea063c7332a6e7a6b1addeabe6875c64e85d632a17871ef7bccd6c2382342da3ed3a349f9da43850d220c028b3a50e3ac08dc7909a38cc800ef7e93dd6a6ab5f33d9c083953001a2ee31c1ae3d33aebb42af0b21c9472fe928f66c6577cf8e9e7eaa7e52cfdded1f3f8a71ea87b88a61238de79d56c823b8aa0f31637396b715ef80a46c1c997239fa653cd0a63c22040ed21e951100635bdb22ebe8e6726765839d126bc257f395615ceb3e3729bd414e3217dd71d117f2b9e9b67f3a130ed88288e2cdc752d3a564c90c74ec679bc9dccdf8334b67156c053ef69ee292aaed3032e6c9e72d3a323fcf372f34deb1776897b4cef1bb9733de53f756aedf6b252997325f2e4b27bfae6a8efc6e14c6349aa5e7cdfd61c3e72d3b65b75bf7c8d6d6ef1e48107a66f3c02e7d6280130787a7f0216768435885884ad483553f193e2add7db66f43eaf14a12f5641c68556dfaf6f4f69fdcefea7c2c416613927c5eae638c25fe9b2858fc7d139511a582a3d67925e9bf208c9085110b42ff4d637c91958385b679453bcf159a6a2ad89cf4fccc8c8063d493cb1cb119dc1789f9a2164a19f2d844735791ef873bcc0f46085dd831722f5a56aa3027d48abcdf62d4470ab02119fdca438d8f784e6cfd65efb07ee9571782f31766d4140183e10fc238225ecfdeb3aaab219aa5f13a768ef2cd889b614001cd210556ebd94990dd8c3083a121f1f9eeac895a619b1aab3f3d040ad1764faf5a4dff007371ec59b9fc86b1dbfb5d72a0c9e2b8e9bfbe7ba234b9e53a5b2dc8216f217daa8655d1a9d855f8e5c777fed737deb9c6647f1d64d882d5820f7ddf80ba7e67bf31efdf28a2ff046689717d31d5da06c038a19c4c51e39a192cb1512499f740c7c988e90288f9cb88975654f21dda75ba5d2f54b6cc97bfbaefe6528c93a49b1f50d8bd3532242206addbc44d01bec8a7de13465c876053cde59352c2253717f0041f93ceb7304b680ee181a94de6ee228050b17859eca2a0b583f0043167fe02985d9e41e46fa7003be5907d1ff7abb4a446bb35457192f2f4262bd15bd7e1679041e674e0c1829bbfcc3fc70f46a0f457fbc15e7abfc1358aa0f5cfd4114bf9071b86c02e979a5e84ef1508bb36d35cf60907a8601a2f2b27302d2e2dc32c8441ed36feb6eb32860e763fb0c9ad963e632dc1e40d96277e5e80fbbb7f53bd1f7888ec981218ed1740ff641e1fc4bf28afa0afb609dc46446e77a1ea2515920ee54dbcdfba2b8fa7e9dcd9a5745fe577e7ecc89a8fc1249c076143136593c8f9b417bf9d320ff7bb8fdc9ea02ecc618ae2c639ed34aa19fb0b9f24c94476a00ada5231ded910c56522a5683e8a43a5367cce4be1aac1d4fc7372e825d9d4895d221b92a78cbcae462fe24d36f29ce0786ab10320a320c898e8288eb5cbe9d2a7a93e64d22fbd8eac6112dbea0b8b38a4082c9aa84d2b2685c89df8a804b5c752b32e5952b2c9c6fb360638152bd34a9157a03c602f3371868e14e07d1d624c32365eb48b94d184a581c7cc9e8136837f5bbd740199b1bb94d7494faeb2ea2177235a457564f99c49349348fa50b7c9adc7baea13b94788198dd5b4c7787084932f485313221e7e5c9c54c223e6d8d3ca6134fd4246f66390cbb1fc6710c9b412734382b9eafd65af4c67eb4da70374c8fe31e08cbcb28b945f3aa6d8e75c5f48e3aaad36cc12efca5c5ff579de8748e776d2e9a39f70a15f456dc6ac967f97bc5ae720dcabf99d5deeb764aa78adc889f2e177148d4f68834d26124ef4a43ce0edc461d0c8b86e8e93b931c0e375216c58c17eb239d22862e510d73a911af050f6fdfe4c643405f477c35b6c7200aaee325ff8323ca4071317240fd565f1947607b9caf15d4c4678b2601e75cd4fe8ec1ca2655ecc60481574241f5ffb71aa99989d2eeebd3ebce1945fc2510e0865afb6b15d0d5e5e0d7a8ee2eb4032d6ed6214d59d2d12a156feb9a4bfed0777dff13ce5de74b4b90708f8624daa60ee7514ea9351596dfa58db8fd16cc8adb634ed274356a229824a17d4f3e32b9f74d24da02f2cd0c9e10f445d70793297c9c5aedd2704da764c04f316822aa235c486c1a408b8a653653d2e5de29df75bac537a23a4fe294b7e851aa5d78124c743b4cba02d6603788b530ce06ba564402fe179082d3cb1f9f86e8cdf6cc8e896e43bf7bc9ca8f1d3a71988eddb9cbcd9eafd216ff756bd1e2b3fb732382b67c2666507f61d36c56dca2e8210ded5aa011d2b751fc29516089b8bc565b2ed9ddf1748a5e9703ece152f0113ee2049794d6500536160dd29186c7cf13719039b90aaee925af8154ca2a50631d980291facb7c564d738c21809f2d97c431f2accbf0fdf528ef1d7692ecdafc627c4dd9d8f61c530f2085acc56f78c7fa4f21e0e576a4f81264432996093e03af01589226c624070823a17e2d9840b98dff29f22186e24ce557464168193103240a869b75669427971a75738ea7b491c95f5e1d09093ed8ea8fefdcfb96476595e53a396d73c3fd3a99e280aa49bd0a391be","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"3b65e88fb4aad2a4dfb95b4861d2091a"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
