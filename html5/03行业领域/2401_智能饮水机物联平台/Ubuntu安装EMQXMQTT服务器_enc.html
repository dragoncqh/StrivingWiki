<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"f7cc3a513c31dc2a71faa627602c15503914f45d9290a236db9ce0396581a158e6b59fecc801bb4159de285c3cd2cf6fb0a0027e651772a9c5cc7880da111a2e15ebe3cb66eb7776f2dc70c583666fa33e6d76b1f805e260adddb8eb7854f2a297504b1a68d30c53e0d62017fa58690edbbd972e1500b4ebfbd8b8d31ed0f13919caf655c6f813ee1ea7c86f0a2ebcf44e4e02fc092b41d7fb0a136a93968e92c41b0a2489e6449fe2ff05c86b4911eb8bb261a2f912822db654021ed4e03084dfd88eb7e7c3691e69cdf88f0d1a7702896f0eb7c4e064c36dc9a244145d9a21921b1fceb3bd01a22cd0b8577a5295d864018358802521ed27d19c96f034f527ed9e279b8f83a18e98c3d7883773b9d32b731c26bf71cf756bc6a5b02a34dbf5f30fa4c53d88bc9b61f1cebc954de9e8950606b96e7cd8a33f899b29fad3b5c54074df6bab9534a364ab1228a02149bf819c45dfd6b3201dc680c17a0a7349182e4d6c1ff310eeac6c1631913b9d7cd44dedaa7e61ad7de154e57fe890c4bdbe076b048186e3ab18755a7e20cf118d3b755bdee9f1c8ff24af6866a234409023b784a98f4647866b2ee514ceac5a6c5476e99ccb2e3c4c5c7b2c035c1fa13a546b3f4049655dbfb96529f8b6fa5ad54003dc9cde907af46d1f2c343645326f555ee13a61ee3349f0356c18c0335dbb916b7bb38abb7770993c13787e86968ebe0fcd78c8218d5dfa19e42a613faf651dc86eb66ba90d3c9b413905b772391969f8ffef0b2196b3be76eb3bc60be26a5d5827b323494c555296490bf36e0f9f2cd0cbca79327ae15795054a5d1d7e2322ef851b6c24be755ca8607bc9c1e223d96e9ea3104ecf8d283f16cffa7b95f430d30cf6c460667f35afa34009071ba960fc03ace0c03b85dca842f532db2dd8334cd0a76f629780ca1fd53effbc2463ae246a63a70955c6166ddc405a87aef3c04f265b196b532d76fa11b267fea3a4f3d730ae63dfcfee8d1a4de124ef267788b703935eca1451d81155029f13745105f7b193ecebe7e09ac8e3872729cc15edf34b5d7078f75f158bce860924ec021f8e1fa4e1cd11ea5c12de605c73e0044bdea7dd81e98ebda6ef413799d07bb45737b16d60ea756a991d51502ba8691007d0d8d71267e10f77acd6a8c76557a50bb13027e6f759bf198388522910d4d154b22a18fd719b28f73eaead181840cdaf91b4afa97f8650707028523add049defa7a14a68bef83ee81b7c1421f218cd0e13a0e80e159d6c25d78438c8efe402dfa4bf6934bf164aadc42c966e95de23792bcc9a08d9ce2ef341bb6cae48f1b2a3d2edd854409317707ec3439bff415a2b4dc2bef97625c92812ee3e3910c963322587878de847fd665a68d1d96d29a6de472c28d2c8cc6b0e9d6800d33e640c162930dfe22bbbf40010535479f57bc21ffc12837d139c3a1d94329079c60517287b4a3e9df133b555a3173ae47d1c77932255eeaba5cb941f820816519e139ebd340aa3944b5805898e3d8fdab648614be452c5a0bc01c427c90d7ec155ef441fe3b8a0b811bee2c66af8d10aa4c865727d2eec212b5d1e9e002835532bcc2c1db8a0e50908a242feb43f324b8ff492ca5743a9735106595ffd1f53bf1787161cf21553183d1a8ec5e83a9ff0c671fcfc59c66ad7b460174a385f5be1ce6217df6f8c20a9eac534a0a337b5e6d71dc03e922028b2760f9f8813b7118d17001e510735ffd4f7a6a47f3def4b0ef591237d11dab77225232bb90df131b51b228cc4938d40a42810cbab945c0538c2d369a6f7eeb711534652998067a541ab6735c1320e37aa3a1bde63d7dcc537df48d694ba9610400f50d7818a9f1863cd47247498b9fc4a7350dcd2a6516a81fae6d806e84798cc4db63c35b49700760fce8ea9a6786aacf39e1364f241503a4b2697d81e7500c647cf5c7afedb027c9ae60777521686f1c20b6cee80c466c28e510181dfd11491f4b88f34d8f8a463a114ecc96f9847b81344b52ed5f0a83dd6b34ceb93e11cdd9ab5b2821c2ea74a182b95ae98758247e74b05ee9e1d18399010e208e29b03c2b8111fac17b6d8aea9e3e8b608d57f49c4d66a2d1f5abd740da25876814760c9ff8d3c073da3dd0eb30f00105887366deb18dd22511954a95029e73c5a8e1feb805f29250e032572128dad04ad42b89ad0046ba843dc3eda27121f97efbe6116e07fb8dd6d4aa991d4fad31496338d900677bddb305e2a2e42a6c3c5f9a2818f5266a4cfc88c922d416abf3ad67b14a7fcfa8807aec24040363b18517890f7c558494557305890fb5b0abffe1b4b9ce7a1c97e021be1e838e48dbc42ae1c09175a0d9ea7384d2253631d7cd69d1cb8e1bbf49b1c943c27456453b1e22f8262b1825fe0a6d0f665b770af00cca5732e20a7cbdad8c01d831955de104100d400247b21abb7e6c2fe2eae2ceb518eb93d61306ef88bf6ecf305fe15e9f0f905175c02edfe653fcea875a5372f2c75223960966863e1794f470e7e60af3e4dc833a95e7415a42c46fcfc072d2f6ef3b08375218774d820cb9f0afd7d265c2b704880ac67f55a5761b073d3ec1b6fefae37a7090bb342db8c81e5a30d20d9be88731c54814957fd3f52a32c048645e752089c82ce577185bdebe2b4529827611327aa66c287dded4d122b4b6555deea8cc87f41515578a9114e6624d65d8c41e755a7b7ea82ad1d8d12e3717435b47b6d49f67420ac5e2213c1dc65541dd340477ccb9286772c2b9b58f79a646531b3bf43b6a1601a0f6294be81a7c86b1a53645c8b4fa82d39692ca12b47c88cf3bfcaeb0408073a8ddf2a2110fb7f9868759860fec06f2294e83191e775230f7df2688ef837bfed78a482d171debeb6f50606defe748c21cced7700e9dab3fcf03ef45d9ebedca44ba70d5f681acb5bbce40c278d550fc8d635c05b3f283ead9a320deb4a3c8a2900801038a907cd3feef09791027cc25e302bbca59589282a820c262d3fe4fa059ee1faf6c3cd5971c1c38572d6915aa03e2ccb446548e990438af5f90e115b50a9bb793b9ee126d0c955ae92ad54c872c295d2d8e46670811d992581eea89cd686a20c0e2967689875f025652f9b55dfc9a391eb7745ba720b040aa92b753412067c100de37c8b132bcc37844924e0256757d6263c8131a47353d9c48cc2458e6f9fbf855cca7fde65b5dd564e0d5d60e28d32f8ecba62819bde8da0aea185f34ec7196f4cf7e1d15f7088085b1338624b0e22f7705a573c75715fe737373150080097766e1aee3134a40c9ca6e2012e7ab9e07e71b27df264a0867c22c1826a8ac614a6fa8c1d426f9d0bf5c29c0986a5295efdd6f75cc9700b9175452177229022a506e831ec01774f88a37fa137e6fefb68dd55123c7e12736545148cba7ea3a32fd73d071b66858bd14c474085c71e5a991caf6717e7ef5b05dcbc402341e7687b3184b972df6ce71de6d4cc20d44c85ca0a86a374bf6e145c39a64ca2459e3266db4dbd405398be35fd1dc573073b9d0ee46c50eb2e3d41d41fb78d54d5d2828765f6bea2ef25a0bb2def3972af51ed3e5a7f1002efa17b9eb1bf2f8b63ba012a71f6f915951b24d58145e0f48198c531690f5ebbd47ef108f602358f48e0cc85b96f9601fdc992a7b309d807fa6ec9ea5bf20d543cce45f92fc216e1b5b32dde1d5065c9ccf788924d3a03dc527a6456f3fed41607122131134898a7043b8df79e59fac3e4f7964435a52447e18cd120c813c1b6b979f0c9c26e23e2ccdf35e915e00206531214503166cf4d09ec64e82748edd5846bd0582df77a262e4d86e01ab0282283f726d308445136ae47e8017db611dbd845751554f51479cf263a13df66e7d6b226cab90d5495b211daa0fe7e5c6ac2c28a93c9fdde58e98b26acc2f482fe8e905ba403345908d18a8a02956a3eb9c2c348129719e0e0707f2f2cc572b322aeaf3771d3246bd97b87818ada3128e2e1126393faf03c3b3f2cf3c3a9769ed9c2ed7b78054e81aaafa94999ea4f1dd8b7aeceeb316c6c5d89ec24c2a7563ac4e8e61c04b588e930c668e34e58a187eb6c292f029e44e5ebfc8afbc7102919fc628595cd8c32c7a545d07e76e952a551c615cf3ec08d1d8587ba0f9d73c063ef237aced943aaad34454a7e223523c844eedf23496ed40917fda605636b819d1ed8ba6fde723e3dfcd04bfb7effbd8dab0faab1d95f79448e5d73c65cf0dc463dcc1fcf0316a85d12e16a3a32eafd9653460885f387d94985f8d3071b5ea3663da3e7c408a9edde2de20a0be990114aede17f54de0663289196fe415ef47b5b9e2c589e5bd3c48207b1c1848cb44925820fbec255c8d45e425c962b57cb79676a9ab33a087a0d11654469b98841fdc99f271368652f50f491b269ad9a7c8cfe79d318ec69705afd89877b35637bdb0e9a1bf74904788d353245ed8fe2f0e10c47fef4af43aa522b36aadbf310ae6a8dbbe3c1e652e181b6049eabebee368c5274de86e80e3fc1e3be67f2d66d593410dd9dd92b6625d89fcc9cd2330eab1a5eaa8940627f43011d32b268073225be45cfdaca19eb16ecbd1177e1552a5e61fed1c219a92df113244a69c94c0842ba7310456a2c76edb72d7dea73f3d2731921305dce5883d6d2162f81bc330cc49c0d7ee05654f8bc28eee689057068e4a8d889008868e997d475c4c9f135d389308615d5617d60464e8ab87d3b82762b584d3d6fa1dfcb9c70b89e7f33078a8acaf018d0a403ac49f883d53f0bfb7a3e59c93a098230d3419810bed249781e0e1e6b1a329be581613404e746623038fb26c5c1437f86347634fa7f5da7457bfe46931d95da90b0ea2301f0b517a3c424df4ed58c3444e06532ffaf63958c1729a9db0b5a67a01849bb12847428f3ffd8dcbb6c80a0e4a458d89f1c18b1f32dac116def1e557b9e16fa568fceb9e04a5f5807e3692df5ef622749cac4b87a150c13472497a696eac9f6b38a7e76fce72707452b9e6b35857656d7676525fedb1004260d6d1a25caac2a97cc6a1dd97a0a6ac0150427b82cd7729fc2b128d8854438a8c14376dd3beffe83117f5e12f248074251c963183ab704963ef46fa310ab0e7f57bb54a97270e06b57435b7f69b1137094cc4c8d3383142450a88b72551b169bf59db164b97ff60caf3d3628aaa3822724ca4ec5b7c796594b3d4d6a2b3f2c1c344b3a5f8c6ef2a9ec7ddc966ced5da68e3dab2de3fbdae64c1bee24561eb9aeab67ebf2cda9774cdf0a6c86ca273fcfe7d5cfde37f581276eb880e5fb09810979fae4e90e4265209ef35ed7a487d89e0c8fe4b295b21e7f5723f9ad122439da491cfbcc3369405a8deb210b4d9572ea89964b5edc330d47e24c528f647eb2316d0d309080a59a3f6e90c7d371d039b06888b1eb6f1d510f5c7f405b372177a379743880ea0652fe7953b281a367a63f2deced36cf9a3712a35bbef92d47e693b44977c8b9e7c5649430f5e6b082c9b9b3baee0c2d26ca1a9fce76c774bfc9016587b8c7d2902f7077c8e1274cb907483ddde7d443b450c55831573acdce88065b2ca62867cf4e2a6793970637d04dd801a507d7392371e6d9cc98155b928cdd4a7fd981861a6c045afff45a2c549ca62fcbb0c714a12171320defeef94c38586c1fc9c30a79368e873de4f909f71f2fde54dbf3862e828ba1d7d8cf7b7ecd71bb19c42f39162d9ac4ed28e8fce922d9e18cf2f95dd5f68ea4ec2b461b85224e608e88de5fa857354cbf2e988415946747933df80549c01ee1abeb2f3fa6ba4f5489a842b4c0abbfa6cd7933495559fad3d63e6a30a385d8df978086af0064ead720ace824a235c538e3d5d107a68de848932b96322cce6d591f5c3fac1cf9cb8d175beaf4de3dee71652d4c5dd66376c4ced7b98ee68bbfd09467fc32c4b0510cf552564df46d994a51e15ecfc8e810cf71ff0cf0270f31419ba9a5b200f13cf8d0a5805c7f337912694520879ff47eac0886f125e0ab58ebeae9ff90bef6315647569d67d02f5b1e22fcc1cdd26dfa4abc9f7805b42a139f7d3dce71c38588572ff563ecf33896043f9294d985cb201e6402baf03d6ed1655c6313b6c8cd27a01617504c8229d7b3060bc9a0e3dcbb17e9b10ee6e928dc617a343532ca4bf0e41c11040f1905998286e01301e8756e113e2fcf84209d2969972d04c553151e52ec40c4f8609724bd7eb90600c9f84cc92ef750c1d4c07093ec32e6326dad414d42e25ea7080c54d3d6418d8455bb51de8e8ae083d23d85faa293869dbae00c8f585d520770f6e516088ef0cba2802ddcc61be045b53de97fdd13f9d0afbd3b281f44797b1c5d86d980d95702af4a58bde2579dff54f073d3ea08b5e0518db74bd63d8b4de77a9a0f33c72467fffe8b91085b7cb3a08cbfb2e6976334326173a14d99de5c96b054d97c2e11ec89193617b811d47ba1474e5dece7692e85ece6ca20ec442cd681217202714cc07bfde30e0745b40efc221dea41b0d656f02c7c3cd149b9ab2360011dc0e00f744a85fd197fec561dfca5a1b3e9eedfeebac59e4a5c15ea3d72c9ab479bf16aceadbdb06f1af2a79c8b4576832a34632df5fa7ff091d8a73bf514fdda8b83b5292d4b5581ab883d97747f0821c90b3d2434e496831bee1a5af2c0ea7a8e7152202bf3533127fd5d3a40b00a9c6630c58ed5098ffb51f2c920da58c3d0fec388352284f8dd5ad5507cf33c5151862b2417beea19df9a1095dc4c8e95f26ad95d7bf9831aa2f561610eed1a3fcbbcd226447e67143d82220ced5f238fd12435c5477eaa143c02caff02121c37bf4b2f7defa6e9cf419c60a0ed26ae1e6e1684b09f1d5acfdc3001a96fafcfd8fedbc6206fa4102f497e62189fbdc4db0054b2e2a5dc200fcbec3652f9b4bb891d33eb2633299b6d6871faaaf8042c9601b979d13fbe5b50aa014116cddaca78fe437f6ecb009a211ce17a08903425a46148675abfaddb7143560f4851abaa8bc431c8e81ffd1381062173afc81e19dd9a9595d4638a6700761d2f5441db612e9737fc56ede4e7089d1039e6dbe78cae6fb7663fbbaa285228a9cd44dde4b18377a50a71d7b46d039cf021ebc42f952de6aae0e4e0837fa56b0d367aa9a22204f71ba3ea80555505418e48c9bf5f3213ddfb6b96931683cc2533606121bc6fcfe37347657eb3c3e9cdade5ac6903082d3e10d3f57c767360b82e12bd731f1ec132a64d27bcc11181ec7b1828b3f607d88889bea74eb369894d05f6bc490b11cf91e13964b41f19b519afbdc72eae9bfac3e89bf45b7ffe668d33f2e865b9411c46cb80a832a62551e542839c1943203d1f3c0217d9c1006ac9e82b887eb8ae8a1d62117c6d1b6dc0b0361408f87933d1521a70a7b70e844490bd83ff323002e18d4ecadd7c8c65d8cb5ebd1b93688d8550ca222a8770da36a325e1962eaa6bacd048e5928182a34bea36535ce6f783cf5522e7f0d56128be4ca8e488b7e37201032a9ab46ce7ab961116a89e616ab14b1d3c2ba508d33fa467f91df837dd6fd8bad7ea218dc9cb8a21c2e85f631845e01fed33eea309c5c80ea4c75c52ed422ab8a56d9ae44259d78e383dfa2957150d5361637b71e5e7d3249efefc2a5f89997e5f91ed050fb28b96a0c68c8220535a4fe42aeef847df89d3fc7f5658a0aba6bc560a64b2550bb25d34c879c3ddabcc58f69e9052c85240bf9dc9f90ae48a4af8e77235127b5ad6cadb3b405d8d0404b3acfb4c318030b6d93fc9fadb37742acdd64e347f5dd70f231e260034188f1f5b0c55e9076d436f6bad656892b1a4908f19461075299e1ebefdf5d72eb5ee81a3d3699ff80db50286eaa34e045d9bfed30b8237fdd46111340fc62c47f02d532e41fbce7defad0675d42c036b725f694996ae74322b30945d55f90aa0e0301140e2af59fc131407971f970282cc99a34d2281e20a052e8ef29e85944fddb9e073be50d06f712e3930e8eb88c1c34fce5725a4a0caca99b79fb1c1a98285803877720dd08ce654eaabffad69aceadaae28f8f56faa00d14db6843bbeeb04da8aba6b5fbf65f4e96bfac5a4537fbfd226f9efd52cdf8ffafd5749d32b155684839fe431ab4af1b0adae3a6f49faf0b407eb5f25bad57fdea8d4d8b63b9346ce27e69e31033cacdcee6e197de92bf54798a8227826c35af9bfe66c3fed88515dba708917f1699ef7fcd5236c88bac03cf232c0f12272f3421eab88271b1829e0207d3b592d3309bbb5d28bae95d96e26d081faaa186d3fd82aff4d2ff8a98f39fb0a8865e6ee7c037431ba9f74ff1687fe04e9132bcd3e9e5b5ae3ed37eca54e8a8a663d0e9fbd1e14879faa1a8a4b534fc03595f4237ea79dfd896ce5ed34402f62b53688762df584fe60709e6f8142c28577b6b975ad265cdf8d91c510f356f0a10425f09b456a378f2b09d766c8697e6581766ba145ce42d26b930d3e93e517142fdab4175c443eca7af58a3838bd92c365c660fc2d2b052e0bf550f5c73573c64f635f877808c3ea1a25485e32fc535cd8e14b03cc577fa7dc1e7687c07e9d2fec9b19de74f28ae132531de375aa5e99963d238182914d902398e364d8b5573dffa11a65073128ff4600305135a903ae8222e9d5b23134a3093c7d665005c009da06232cd8c8fd1194def8b97f022599f434c9a98230c5e8b4cfd0d5152ff296520e360fa13236fb251f2c1debdbb01cc47d632aa890d74eb2847a3630509b3672cebaee8bf4fb611b91a84629a5ee3b2a2a615de48ed17b38380308c593c3352522a9fa152c123833272d84f8efec990aa0e96d7c01a560c82614f00b3facc2f4ccbfad930741f8ab43c8108c1a1bd46a2ac1bfeb6c435f4fa8b57dd41ea121d6c08da551c6f73ad6569b7645bc0cc09cc617e958a265fa74cbab07c1ce2ade38a86345fe9308bb0b0a858333554fdcf2bcd24a073fc660956d8ab6bee0d02e627150c2bb27d58fd6d19b1d84769ed5e9fa6da1654dfafaea615e61128ec415ecf162455c35b926a94e197631849978e23b86e89442111eac3185025ca1869dc2be31b1144077c06738402a4c3fb57bc87867df6f9efbd785cc38f0ce0a1455a43d8f90dd1e00da09649178543dbcab8cd44bcd392146b6c040793078fd2aed065f3614c83c7534c7727c39f9eacd1f4d37c4c1d18cdef1e9a68a0ef5072b5e62c71e29076bd95788675f9cd0b4c9eaf982e7735be395d64b452c9b08f1deb17bec39ff11ca1693b5b66842fb1086803828676867543bfaf8723f35d43864baf33cfdca9e7b2c1c6d73b2c6bf550f0d59f742d2f50a3fef6f69ea90eea94d4daa1fdfa93b8ddee6c155eaee5a09391da738c4bf942f828aebf0253f440bb2ef623de5f7c97d37a03b6e1a605198f60edfc3c28934ebe71813bae590aa7257bdb660132241f5da0308f2e14a0323a07fe7efa74198b2c5fa1c1722b89dde30a0bc7783bb22e69fc9f188d4d8e6683aabb9f5154bb68776e712bb4920976bc558a5a7adf17695ba542781daa9e49b1f363434ec10b0361b13b88d1f9a1fef17e4bcfecc193703acaa721f093139a92f4b3007ff2748bbf6dcd217da6040e5c2ad0a813c75d3061d52f5f1af846292d1b1ba05e9e0654101449d12e7e508b70be526bc60ddc0a471d95c3155b84ffd922dde1cb1b942313fce3614651190fc87b871fc3bd9d9c4a7a1a65a801ea7a8ac4b62d6f805d38789ee537e99a50365769057092de10ea70657dfb8e9814f0e7af9e7ac5766748f8c65b4032f3a2bf32d0744ef1554a1c43a833c8f0b1e956aafe474314053f79b3bb401d0cdc5f3cbca712414cbf47ccb5418308c8bcc6dc174b0ce99acc649209411594207f7053a5dd2f65a405c8240188a309010557e5bf09cfa14bbe43b8359ab55dd86ccf74de5c47fed917adc9e96e7effbf9e73a16a77cc7c2370ebf8a8af1d7f1a79c768c0a64f7a9926fa1fdfbc1e1a4f997f8598e320d9deaf9749cdc2332afc56d447e28c4ab61eebd3ee06cd74d9adee365f19952d63d80557e9e7e2d01c181132f16850bf3402624e033ae798aaca389279475fa1ca926d3f24e61dcd69693ef42e3e794aa2f955dce7c5001c4fc270bae46fe1634dca1ce6f67f476d809b6507b14b2efe95a8e675af2f32c943b00aaf2ed628a2e27f1641bc0ceab67cbcdc12f8a85da3e297dbf22eb16a94a018bf926840c182f931ca41c079eb4d2080ee56a7627583397d3de541388e861fbb03fc8cecd8da4ca484ca5a0e0a0a90439c92c2bfb17ae38b717e0c804cc2cacb47a2ec10637ab0d4f6c712a427388d999608edbca30a07e7d25f061906afbfb1bd4301c3748a04033e9ca9dfdb635f32578f720f6da7235ceff1d520e9bef25f08bb3dd4a8a0240fd1170a7de52e11fdfa874231640779aa12a6359e4edd3af433fa497381833a70c35a80c51c12d4f19a6bd1944e162543b8e78a67bc72ac7e6eb4ea3f5d64a564e8109f54276ad7d8ee9473ce677c7d69ca4588f0a8ffe74efd05716ab3738ec9d1386a870e7b1a235df9a57dd386be80e865b588d097a0cffc83cef4fcaa52bc74fdb562de89ef85cff56c0db8c59458783f57f46b3c96ab7d6bb69584247005775fc07f5f4a8b842264062bd2bba9dc37fbca581b1d7d1e9f466f7e97b337768a4043086bef87821c0cfc82799855e0e45144c6e55ea735d54c15ad49fa7dc02b686e3ab84dbd7644406115fd9e8c3902b8e7b363f0c9598a51517777e0d9526ee0b847431b855a3acdd843724df371d6040a661597df7a6823e9f681c73c7774318a0a14533a39723ae4f9d5cc904177a0a78653281fdc213f1a1d895c9ad1ed6bd0e558863ddb2cb03048d16b74e081f283696b437de6e7bf36710d85446e4133855c3a7a1cebf0b80218801aa522a46693120067fcb38f36c0a3e2f61b43d5ed602c15b85f5171c44a24e15146c81bcccb97a0dd9d0d2353cb1aa42ff1faf454f59c6413c8420332cb3bfa8803b8b5dbdb9179d84846289a6863cb18ed51507a8eb7b22de58853bbd9f5b62f2d018ee4d0e3e1efbe079692518071b6a7d1ba195fc48eff635c5f82e07a650d67e69922c9b87a716ade46ab07e0039e6e8dafeac8b20d95764973e122fb72030b4090b7a137cbf6d631175332197e843fd95a786d4413feb70b58abf20f28bbfd73717c514759ce74ff1b9b12d72c37f6587913d3d169dd75319219b236d3e38ddb5c5fdb331d08bf86c5a4b6f9ec88e572d5a377ab549bf75b8a372559160990b6a13717b77147eaa46bf9336a9f8672259e8c55d5a615ccad728a9994a1e2e098c62a03f1a11af7b5986c541b2cc5299fbde74a4aa903ab94f49e80ea3a879243df5a3b92fe8db894da91b1567a90533bb658b794f15101dd2ebbf7b418f48366f9813098c78725c930ef193fab91d5a887553bdd6981e43c55f14e75253f798b3615aa2ad7aab9fb8263192441e2e52cbfc97ede3cb2ca4c970d6c476c8a5b15aa0862740f272e5c5ae473962f38f1c96b5a441cd061b1e8f596554b889c99645c1c980db1cf6c50a345c68b5e8708695d3fbe53a2c2570b107b607e93fd5b73610420c99ba7bb488b9e13a68b7dd2b9d1a949a9ebfda87da4bcc30b2510f183b3a3d81d15121155f6d3bac106929b6e1e364db5c7660766b9d757dba2bf7497322faed46311e0d620b8f6e7772026c6000b7b3adfbe4c50a9821aa9521022d39fc5346d2366ccc940b5913a6936ce156398fcd085f3dd9c2d85995de06a8a919414f4f1e00ffd1bfb7e2c2dd67f07466f95eb4919d74ac3430273fa2ccf636c07c79af5dc416e308a0a6b2dd7075c2fdb822fcca82d8c971ae9ee87f7c0ab6462d0fde2bdb7f296ec50d506cbd724d76fa96c075af7448d4a16216f28f94520e95f6405f629d23b7aa57f162ed969525cb059cfb56430c03b19a0c173dfeabcbf025d20a0716af6a3e5ad05f1e09ebd7faed5cbe157f178c15ef05802372615854c285a1b9b54548707caac0b1bdb92bbd4c3ac3ee8f954969d99e149caa3e5c70e5ad625a3fd247a095028bc074b8b69dc3c6c4e0234fd0b8c9474442860fe79ec168bc8bac3c58e4ef7779eababe7089135e11674d75bf1651552e228382295d07f91b33b54bb17878b76f86a786860598f5b5fb709f1db32fbaab4878f9ba2e7b38002e3246f9c85e94c7363f57e87cb0ff786960392091d1b9111a3c3a0f4e03a644e832c4c894e6f7531e83e3c85d48bc1ee4de3df7f9ef9b5d669e920513d18052468a151d80a9b2d696cce1f2220a33b1264a0302eb61a545d34081dc3b312da6d7415f4ee7d03b715d35a1bbc6461c2cb78542fb55b2ef2737f2edeba69d3b358de1740aea00a0d32d1914343c9a4bda53f2ee4e2d39c4855bd48de489309b56609a2fe496a4f5614610ba900b817f0d4961ae2516f142491f18750cf06ba80c318d8ca750cef79b5a40866bc98899ddc20df8024be34e139f148329bd5cc083480bb048f0971cf17ec01dadfc21f422125106b68c04569af5df079462bf7189470421e7871254e30502a19551d7eed0fc705b132accce1cfabd5d38d6ab0de95452db41c49421b0f8ff922d176bfbf34ac380fddd58fe93aae87a4445e5350ae5b288d29f07262b1496226e2ca79d5556d45c79ee0e0d47d38e96333a400a78708e2230870560730fb115cd2d21689b889fe3cc217910b3ad8446b2d6b2ee64acf3dc3e303330b2dc6bc4f76665006207d9c9c5626357bf688d74d172b9995c66aa3206d467be57465751143d69f0f3b9cbee7eda7ed72cefbcb54335f64e8e655aeee8f703eb82c8b080c4700889e0efddfef1c386e976d7f322e5697249cd946f93c29d7437b20645821cba168f0a3c23bb678fc4194db9836c651b954146f15c2cd780a7f1401a64b80e06d03bd9f94392857ac74edaf9957a6fa3a8a869f48e8ba5eab770213594af0c305acdab6108d9c99d6ec12eb96cb5395c9aace0795a125f044f212b8510bb27bf797030e78f36f1c12b79e02c8a979957f1720ef69f0109d48aca1a97759f38f293197a5daa3a93597936b5c014dc8d6bd5c9896fd2cab2f7b420f4593fc932b9aca12bfa287efc6c8d513b4909abc72f342aca9f92baf5a9ab0031685b00daec6ab704258d76c4ea1d9e52e36de069b1f2e7309d6cf340170e371f40486c531a9cec447b1df9c0bac9d7a86b4522d5420115e08a368a0697004464fec3840eb4cc02076c784be838bdad25f4d4122a94ccab9216f168df8db2450ed36b2e88dafb75dd7579c27bf8c1c6164c3fab7f3e92c4d007dec6ac7984cfdfbf1b1e1343170daf91bca5a2f494944f0c08a67395e8e4e1f74e8749a78fd720dc0f2fa063b7073a1b2b9a884a2abdec4ad4fb19aca8f12e4b179affdb327c0609e0d633eced5c415eebb72ff1cd1bec07b98a6494999bf3209791888957a1aa5db58d17c373f8eb358f822fff56efc9c00f0344df9170e9d1da35660a33ffdcc1272adad03375d45c4bb2b8662e1158b900ef7e91d750684a134073a269be6d3d88fed4cfcce131d8de07c8b2753113d142745651eb6ced3dab27e64789f79a3dbfcf6eb5aa80dcc48a329897a9b8a440f6cb245047e8045c55246794a207325b7dca8ae07c579d085113d4ee983b3d7fd97e2ec3e9f32b0e71fc5755d876b1bbca987c2a42303b0665b83a26b43df49c22f40b5606f0a04d4b05937087ccbbf93e84cfbdca61c79e41c800a999807d191c78bda81235cfb599cef0f7b3ede5bf745b2d946787a59555476dace21ee671536dae1245836be45c39be22e84c2e9380eb9e659e16e4cb6c2fca5af82b944efa06ff0a4afad614c032c55097b115f9e788b0345c248bb6543f55d7e41b580da07ed99c770fff4d7371e552fd7217cf8b7e87a45fd6960c4c70c49520b576337fe5e7f4128300fb90948c4465104aefa24aa3c5a60b0048f43154d1e57d28a1133134e06d9d65f201134d8cfd03366b4a909a45e8e22a4666efe109f467518b845d16b56aa47e6fdf18f5d314cc7e9602f37d485011447940828a8368f4da2bf61946748015891006b7e3c89a8e60fb78213407f57dc50ad533425db081d3c30447c9b787282c92049fe53fe2c17146a6361e0615a36222fb384c121d8896ab2996550bbc49dec44b69a633ad132f053c875cc3d2c0a1e51f7767a615fbfcbc5f9030d32f1dccd180c891c7bfdeea9664a395f2c341cbaa5634c75c0d92444d45909ccc3d76834ea132966b5ea7439253462b82bcd9c85c78c353ff2fe379f5b618535786c12caf428f7c05131580bd2467230ebafedcd9edd45ba1e4906136d3b117d08f4a32e7ae73086ac97aee9fd0b8e1e00c4a7fe66ca0c47e8920e2efe0169c2338007015d6b754b701ed8a0814484bc623ba4266b35f250eb70c60083ec8a23dd1a4c78748f8239a33756811c70e194ca5bf9a2318542f504f6843621f6e990d1489c6c1f82a31e3332703a607dd0edfca5b4d07b9a2b0da7a9742704ea3035ba9aba4f86e6559164584b2bd256da434c8f4b50486fe219b765df6a1802d9f81f6dd6a71db04796e4f156d6a50a26a7d057e04c394793e93261ee3a97e4c6bd40458bf6e4abd26922c146876b4516f6b61471c391523256d522c015314d5f1c41180be5dff3efd6a296f54ae2436750b227a7b4d50fb81d7ec6f5bf8273f2a2fbdf20f2e47216b631a2af3ae28a71949fadc8292924e95df77f063680d65902ea0d2dd86e30a35ce90cf285f98a22db9863b24281b5c3d9603b1cd815cceef00d3679985b912adfb56d2007e1de231bdd390f0279b254853fc3ed08ee73036f5858ca644484671383b09b6aff0ba12ebf7beb98f43b64610718b031ed4a7c272abdf63f35660204bf0ab02430d42639e6668e83846323e24bd5d1941953c553b0caeb6aa8adae7c347f23834fc8aad40e2045c76baad48238884d1fec38f1769e09c3b66697c34a0758c09c8a43b06810409589bb0e820a58f74678591d81e750be3af089e480d51defb36893520642fe166670e57ecb152aba9d15480a766c5a218a322bd6a4f23a1497f7f1a996b0e4931e2ce3f5544d9e3f331ae0ec187564748352ab7668ef7b09bf142daece6563de7213238722a5eeea1b8d553d74a1a655e16a6251db070378ae40a5c7ca08eb538bd0f0104ce086d5c64ba24a2a8c382d5cb3debefd711e5ca98181c2a9d4961b3f890801d3569e584ab2999f111328778ceba4c23e182f525d767f38353683eb51947fec9901a8425a1ae82a0d6f3303503c202c494d43b3a68fdb27413795b07756a1c2cc60be8ef098fcd493b1b56e07419ddb4f355ffc6c09d2c1fe7b726fc3afab02906d805b52e912b21c33599d56fae73b129fb74da886b1a5d3e80c49b07fb31f2d06a9a63fb0e06f2abd59bd5af7b6955fe3987126132742164451cd7351cb57ad578ab20ca0b51f8640157cf6e1ac40f8cdc0ece27d3fff0d3119f6a24eb63a933ac09da77dd5618a5004c5b5c69f63b55a66b7172433249ac68b13e8185d2d2f52338eede49415838e28fe003a10ac84adc794954ea48cc75b5e18a5c499f405135621995ef91e3f0207cc65deb01339d67cebf59e712ee504da7f1d84e0d928f08964cd5b987943a82c2ca61d9c02186cc726d85030a1c8d747a5bdf530bfe3dd12e8265c8e6db4f455abfa98208f9404193a82c5e291a7c6e87f4d0356a77e0e51b3d1f87e287b38618b5027ae5053d321bb7f50c67f1b5c6bf7a2ca364fb4b36dc148038ac2c43ca5352ed1ff87edbdb2a937ed990bf49686168bcb92540a27688a5dbd5144ad9c55907d738f3db3eb4b562195678ef7b595fb9d9b17ddf8fb659faba1db93577085568b49bb1d80849265809657b4e897674c03263d2caa1ba642434f10fb2be8c88ff8c648bbdd1240565931fd57b22462ff4d344dce6c286f57afaa4b552819a9746e693fb76333ef747519be13458c6be76e11a80313c215fada301ecbae6e9eeee0e64424af19ecc82d11c53c91af466c543e0635aa1f38dcd75e4fc762de1441081a8f89ae0beac8971f758cd62624ebe734ceb71a43c1b702f5b7a90581770c52c3ed5f713df366a39302e0ad36198c3c059ba8727aee404f2e0704bafac2e8ab0a88c1e279fb215a86744cfacc1dbdd982181c248cdeb61f95f3570423c704baca553f73c9bd4353f1a868d90e8a08541b93dc01619fb7f6a92f2f780f6bca13f6510c53179f36218f74e2c997e20c1157c1352b564b0b56fd4636f1c964c319fb5a8935cdb1560eca445a9bd92926ff5a731c40719792848266a80a017a539bda8f9cb11a584c91e6798711dabf1fc4df9fc8b44fe9e8b5f108a48a549dc0d67d1255ac82f2d3fc2603d61cb422266a83cc14a1770109a2bf65bde8fb320ccca3d330b902a55338ad39e0c48d42bc2b06e73d3310109ac9d1eb33936ecc7d5e8a30641c677cf96e03796e6772d089fb54d6c94f99b3063bb4f4754dc42a53de5083a05020398295829912979ef92a1fbf2745debcb92bb30cbcba3b8516a42f3843304874dad4e2d37129beca380d87b1578e0fddc663b1c44b4eb9376c5ee8594adbd13047f1447976a7315425d6ff77aa0ec236df89d018bee83bda1d3ac94419c7cc0c19ddcfd2c2b9f36dda04899f2c21d20eee35a081abd0a6080fddc06969abfa94f8e69002a89f927a0cedc790e2c6c29e6917ec9f3a61ce50018b75e94169780bae6f3b70f13536b71cd60e0601256fabab3fca2d38a204253431ddce8ca33f0b6fe13af33e434fe5219eef401d31e025a9009c83ec4093fb888f0d1e39d6a2d7d3de13f7a5024426dcd5934319a7e107993124c1736ca9e3f2fc8046cb559086dd90d251914c863047fc3c9fe724789d53600f5b50fba7f31749ea03a75ba2be1e4edf47907892805053710b763477f3471a52cd19c1a8bedc235bde071d90489aa0805482bbd4bf43c0b3aa838a2512270114f82005d55c91b2513b304e84a3dee7e49ac821717f1c038f29db69713f99acf55a4f574ea6b9a61945cb3b71c421a3e9b86825bc4e71f55b316625ed499ccc4a98e2f7c50f984568fa62766ecfeb327032cd094eedf60ad157fecb5b06548e77ad597e7f0441df84d041b4bdb1e0f7740e28bc94f9dddc70808e962bd967ffc5d593170143607f5e4c756ef0ba2323f5bf5a8518b05dc3fe42d6e41751356b6500debd9ce98160f396e9de2a9a939822135d1d9988cdc47b69c74470b908d821538fbfd538bb4b5894426db6a54902eb11b28b6b54b08f1dc9a5f72a8b301a1bc91654ae7f32e8b3c6679e940763ec97f7604ad0640d9a4de1056a933fb0253c3515846ee595b5164f0b135e013627fb0fa3b610ded99f4a3908193ad2528a598cba758eff56fe9d34907e5b134bcd0432a91527752df5e6f744b88ef199011a36f9bbfb2c465b253cec7e74d984a67d901aad60267b655353ba312e752f73accd2c50b855b38652ae449520e15b9258f14cb9de8b590ed0f95e5fc1e47c98a64142b263f3e2e1a6199d245e4dc7ce03a7f3acaf179066b46a23ca77e8e7c7ff9e2afce4fe70c79e8172b90ab02061db1a4ae546a8e8b6db2313ebe156d026b60e3ee61c3693baeb1244432e5364f9015e585b685db09ba65a303983b94fd05cab687517e26c00988b13cf0a3c740dd96e00662d8c315d61e3c6a0e659f86688ae0dc389bb1fd7232129e1661d02dce485e6fde3127a45a24ed2587001a60791496bf43e154a97a04d9b63640547f6982e091049a768500eb3fdfb0279ed475554694ba0c5c5e739474b8351733b78b829f0f88faea5c98cd84cef64bd1f5fbe99bff7a9654a6e4cffe3f9d4e43acdb771429008eee47f6947c61728d18dcc86b279cc8d141d2e5a6dccbaa007fac4647ef9e2f6247ff268851d08b0c23cede26efcd10b409be612bd2b0969db4795ca7531dba3f957ec8beb79382eff4cd9a5f23aca83444285832c2daf7ef0efbdecf35c78c267d1c3c96c28d88404be100c40436d4656cdc13042e0271c394008b36feef323c5d4e4f7bf8c20ee9f69d170308e6d89057eb31022bdec8eaeb0bc1bc5991de110b3006f3873748817e5e3eab1c5b79244f857986296e28a7f099049fa2b81971f4c66ecb28bda9f43b581a8fb04dc36cfa35f4ba9f706e8a71efd952e731b545160435bc6f14fce2508f9d856de12e8c240a16cd0646907f4b00d6bc55d41be17abbf69e683bba453786d7a4a7cc140e1880c67763c2bef1819c6e344801a3ddb309061b49a0785a3774bcd4d4cb3fb68b0bf830d28b7b821a4268c5e633aa27e7b0a63ab1586428c56215d324d28a5eb816b395c1f0f27b2f60111ac1dd2d39492aec7e9e45c4bf272638fa6a1ac98d83aac14e26a18b41725d5ca266b019a7d69ddf6c709bf206dfa1b51379892ac5568cb9917048a1b1b85e1d3f4255f2ea66c147a1d4bb69226c0553b3ea7d342e8f9570f6152a36025359f4a369fd87433d89026a79948f39bd85587fc6afdc9298a627956cd2a5058bfe55190300129ea11791c6faad033c810b173600e4319c5f8f55bab70526a92913ffbaf3d5ca25e04cdcde543210268470fc7d7d69499e75b205d71c9cada26307c7bf528c6bab192bc67719f6195b9ebd6cdfe58d83540595e150dfac7960a43e026c0c1609a33ca99c43096f6511b1246abafd41a92ada88beb3f19fa51a11c159afcd4abe97153e5add1a2157ae45d3516eeb9b393829479ee1d8147c3e9e5aa5f1c69d9c16018e8ed269e6d6fd9a72899cadeb02c66e7148397bf54fbd6cac0aa291c53ef4d48e5f8495107947614e1ca18a7cb6a3df777dbbe1eca18a5a1681b25bb548d333e181aafb8c08e7e5d5721c441ec9543f37964a526a228fae2e83867c267c59b7def1b793aace1f4ff92cbec1cf3a5aa52646c776bfb9fc4e3aa72afd34b95ec6b41abeb7f15541a3f89e71cc5269ddfa4b9fd956d4966dda5585ff264debb82dc1777100cd30620295400e7390d6eb875d92519fab355dc83c9158e2d38995ad993d55c3a30729f35b176e6e7fbba36fe31811c85f21e4b418fb05ee23b7a6071f2be3c75c4d5808f79f929498d651e209431fb7f6c200abc10ba46f0c2e5d2822970276e6ae28bc4dd2cf8da82853be78827141197f21983a4dae8d97d13441053ed4ac1d6ebadf2c8e574c152c67a05c626c701c6838a30cdfb8c94aa098963ba72b4c2e47101deb3c32e7df614a0422f4eb8d63997933417a65795e5b84ab2aec591f29ff71d6156e83853a4989e274b5bec110fc38f38edea57950937ffe3a6f178aedf36c1f18970cb3756fc563db365da9043534c85b4070cca58b927afe1f0686dd4255348123f5fe0ca6e7665f3d0405b89396e79d3bf49094d9ee8ab5df4e01cb89a566f40bf0457360f6853ef8a4708440ed30cee2ba8069788c68580a788cd403bdbf46967ca2030bd9c29277d4a0a7c0404f5f8842cbc941a7f9e8d04bfcc430d2bb3814ea186adb81cd8632a523b201e4b7df96f914bf9481999b056e09778c7c06e76c08e6d16e9e63618c8937f5a612a197ca76c91cd2af2db09f8fc885d24a71c642dc20e32551991ec82423ac9bfcb88a9d80f73bdea58b6c0902d54b36341e75e0f363ba2ce70af18dad0526ed484c64666d8abbcda7a0662e90b4da887ba15c24b57bb2cf28ea6770d7ed22f87ba4a30d0e7cd1d6a7024103925e33165ee36940c26681a67f21048525472e88e8","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"3b65e88fb4aad2a4dfb95b4861d2091a"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
