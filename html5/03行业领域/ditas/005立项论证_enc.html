<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"33e583a4b8a61e4c1627f4ed909dc568901e4e89f81b12d7844fc44dbb21fec36b99367a36779525eebfa29ed4ea077f026b164238847ff6a62125cb8c25908b3594e6c7f6c397c5bf7ec68757c48d237078dedef8d7664e6c303c9b18634d0829e6829173785b8240b387c251b8a3e6dda972f2e598a34678b909a31ceb9d88ce91d899266faafa8aa6b1b9d156784ffda4dd9f6347989a473694b8ff589274cd5c4ec76bc72275b802d5392939d74529bbae619b5b1c5c4abe3abc9e919f08ee172ed89ba75b8f3cf57206ee99b6c2513b59e5dff777639203f29364d820d35c01fc0bdb56c814a6d46239c0e33c813f148f7fecf6a658c9d9e11895778eee70557083bf722004dbc5a12a6fbcf17e44a94fb2033d58830bb5899b7f65abc1506248cfa42558498766c1650c0a2187095e46bb055751b55db686afac9f8320e2b03aff62e55d48b8650a5f657747d7b82707b6a5bf5faa7cec0eff423663e2848e69cdd851bbe012c1a0df14a484dc900b4ab0d199abcd878ada886121501598552d820b3bbf54a835ba7de79c0a22621e5f9db839424ba1e6d77e77dceaef81484356ee8a82e127d7f9648c4c225d8aff6b082e5c0cebdef64610b31e551a84fd99f60964a67d5a2c9aa35cc06b826e79a63f61c92e757eacaaa2d80cd3843b03bc55a648d42ba577a7ec21cb4f16bce613de38f899ffa3fc342bb0fbc512c263ef62b200e6a77ad736cb5a785856654854e0ab966e3c4507df6bbec03ce2bd538f337eabaa8bfbbf34862e784e9e272e24d5d09ab83355765c2cd4901e7a33029c3cf40fde6496ea5a3afd756a8c5e9a67dfbe8cc8571410161a1e49f9f0eaf3aa302186ed8231495ac10a5beb92d3b6391bf70aed41db9657fa3a662ff2a224b3ece15b201ad808924110a223927ece898aa7c7574dd56d8c983177899bfff35d85e9dbc86dd2ffe3d44767c3e45a5f158519bc870f5277b1b1b84c86ac695bf248d326b391aa772f365421adf5d13b33d39392895ba39b90f164c91a7f8929b852376c6cc498a8847c858232c301a722752e32fad7b4ac6a7d470db33bf8a487c93c5749a878eaa449819c245297fe0027a2709d9c3b0ece67187f61a5fc16c421583b4124ea6acb5995ee9392e6c45c19c385a2228d715923b73bd14662a2bf6c61b82ae7c2564f5beea5df156e36adba5fc1c1dd940b2f20d6322950d36f04a602c0d467236694b9ec1cbfde05e31cf7cf3058cdb3aa6ff1fdba88169064bcc24e884b6c65e9fcdd5c01ea18bc007003586920f616abc606864aa2183d35ee4c37b52283107ffbe5275782dfb134d432dc628601ade5eb50d909a231ce4f93a0d7de5efd5b1a4ead777144fbbef96e86fb4521306039b6119c45baf02990936eb6635b754ee439d13cf2bc0cc557a21589b338008f8bee80adeb4602af33b770e487ce25b3bfee3d335754939bfe7efd02fc0e6241966e52a89a717f9d1a73823b3ea27a9812c9ff2307219d7e25a18555e1cc6634754d1308bdbdd09f9dcb8d27e0fd72bce3f89f3149bc26c2a5666d29a71e5a3fb4c5e19260245ac56364c2ec5d54916d0714cb467b99b27648928e88df7fb582da229d2b40fe3e65d3e2433d48bd17b710747290672681c8bc3b042ccb757d89cf584385b224f41776002242e69421d89198cade5341b842cf6f3d0815b98c0060683a250d496dcd142c2d6e295a734e5df22eaa6efe2570f2d3620859c196d9a84bc640d5942db806f2644ce382f026491db94f429fbadab8926c4fe14a7c6606a1e276188521111a05388421188beaf35c957da48f4d439de0cba1d4faf00f2849e0cf647fc50599dfae5b372ac46959bfb8f3a3f852b95455b462b05141db10104409fa5631f2358dffd66b2573edf8770af7775c16f966dd52933025194de87bfd35fa8cb1c6159ce132b0ef609dc0276a151cc28b53b6efe3c5850f314729339e8facf2ca2b470ce5aeb22dfa34b370f47bc45a88e0b8a398cf1374c9ac532ae25689c042dabe4824579f66013abbb768817ca10f518848f7a19f1220f20a2aa114b7f94a4da26357ad7e6333745e318ef89c3cabfdb9103b2c78b8d9133f8e8d562284f674bb5abe9e1914b6ad4fd49e9d5620513eb6411a97101413911cd1696aa9a13036d0028f227579c04ed42d3bb9dfd635ce28ea887e6e3f888bd5c9af319f7cf6c0a155305a9dd7096e23a3a1d5aee247f11626eeacd61960412106902c6ddb332070ad47813c3b81e6fd9bcf28f6d2424a37bffc8fff74588ab99cc70893b200481a54ffa0b4d8dbc44b37e40e538f6618b320b6c108330132b9315d5a26166525f022427849c2fc43bb291a63e6a055b11dc9ae6166f4296e10dcda745c21851001c625db312c18dee367282e96d5e03f850acc56b18bdcd2a71f0a996686286f404ec10dfb2ed1ae1022eee462a17c03dcf217d83d5ba7e214272703664ffd4e8a15bf3cd649aec358a3950d15eb498bb113107f84694bb40cb2e74a44bca8bec5077cb7f3ad0d548c4907fecf5851119d81c31f2d615a7e7d1bfb36106de8aa8b5014ee3010c8826b162454805cf277d24e1c2d98e4c6fa517fae31f435a8cd9bf6e699b4b2b188f68088cab11721c85e3e0efc90d199c5d60c62681a3a11c8749ba381d17f710a59bee57e538bd45e9bcc8a3d3ac8abdd07362200c75ce5ce7b8a324e464d602f1a7f10b879e0128e7720326ee7ba8e105a40f788fd67d0e7b779a4f3531a6a85ef6056396d1f40afcef9d475f02b917937ab41f24243dd702a4aa2a5b072e29990ecb9176b801cd84356c3a9d0c3e10a363b41355e1b4dc3db57da141a20b28891e75ccf39ad4b83be617874edeaa709086e8d9c39535da1c25ee8dc85df419de6442b8717588b9d21189b3d49a0de33d5d06b137abf731a6e33e57bcc38a9be0ff41afcae2ded50307afdfacd3c9a70bc62cd06add2f8fa44a435b9d8041198f2fd6d68e8184d32c571a920e4ea5239c0263e08be16ad181a58b5f303870ab5d5f63ab24379adf31c6a6dc3d8af3e89cd65e203d14f7e6f6945a2b4f6fe42159868fc16c554214ac2a8d69e9668bdd242b7e376078fec72ee2803122f6e5e2d53d23d5af26b337c648c5a55b320c8416e0be8cbd20218f40ee30bbfb5effdf5ff93537265518c7ad55225be8f304c4e481d508c66bf42ce2c1e1acbf079a6a545a901b9ce4a1acd67cf3433c0e2b44111334c6e52ccbc886494ec3f8ae9458679f0a4464a3248bdd3010ebce258d64f6ab2f230beae9673fda9972b99d031e5240d0542cbe5a8ac0109ae613ead9ba0f24e7f9422c1bd67f069ea2129b304d5de3f9da90e8572ff386141ed23652ece4304a24954c7768993235501a926b4127638dc4a39e2de06130a4380aaadf8ad0e08bd1e7647dc1a7b2dbe089d31dd2414665d7fe3eaa1b0dd55e6ff99fd847cf5dd099d9611ae51b49be7a4fb2eb31cf9a3dff7d2f813aa00b193888e041f2f8f0a08d5faa80866d4b6aca6b2a9ef5b0153be0fc6833393b1d9a9e6cc93b35ee9f60564fe621bc8d6f884e8cb7196aba55501be37d29490c696629181b451663ad5364f5f110a81a51670b913409d7747a3dd1dcb12cf9f78c6946f66c58f07d76282d616bbeb761ea9952e678b78b2d8c0704ceb5906afca794c978b1687b367b4271ddb54bd740e5375cc7c8c4408828ff2a569aea388e0c854a998b1eac52b5c9ce22576411341263aeabd2c4a3f74e47f0d32ef6d36b6a28196d232f8367af0e13fd99a7872857e41db1e8660bb4d53bee343be7ede70c3c33d9c3ba5dd86f50098fe3f3fac15630ae3e493ecf5a5d2f810cf3ac3c11bd6d60938fec86e6af0ca73c203f5ed85c83867f09aaf73c2f4164a1090c9637f9b38960702a38cfc34b5d776d8613e646db824189ca39e79e4b4d02efdfcb0a3388e1e4cd7ca5429bc55178abc8e0b589995d50dad38f7c21e92875113ec4ac7e60d63c21c55fc2a52e65b2daa86bd4ca9a91ad35990c104b2c112fbcd845dccd7a4131581fc37cbcf72f73b0dcf9747db6b45ea5c3b9465ef3db11514a70308cc9dfa50ad1390f532938c4e5c15bf15cf02018384da91253a1a2b91acbd2a9742e065a13e1b44d5cea749f291a387c183dbe548c02501b9106af171c79b256ed1d703c5f0e6067d90aaf71ec48b6171b8c1c4f9ce633efb32f875e8a108db87e3127080dc9093a0016578143a6b40bb0800b449c896969e462f6a893bfba36b76911951dfff330aa482f91cefd02216c29422e808a85a8f056b23995170d3f81acf30220c5393ede2a9c19fc7e4a25037e60cc35c8efd9f6b3706664fc55e92fedc484ee8201dd29bd14674f0f6f252027d55e5127556164c51f563097beb751fff0966f7b89ddac35debf7365d9e34e979caa186fad8c91e8bc40e2fdd4b7528399228cb037af6d950be602a897a2f2f045b86d81a21655dfb2e95f10c46b84fcb38c9f83683af4286089eb243a1f988a1d86efe59672b4ad063193554e6f03d0bb868a6de3b1cbe024ce222a3582e8b63fd6461a246b254fe1c4aac0b411ce60dc8c384cd7d678caa29b8b9b2c5af00b52ef86928a76f1f757a652a222f4a6fa1bcccea44b7302338207090fa0d5874801e5893c2528ba03cb676959cf2c0979e2d0bcdca132287dd2cc946856c6b069b75938bdcd6a7dbaaa2190c08f5a490d6898b463cceb897437f905e0cd4ceea33586f9169b750d0663a7b22f6e1e06931257b6b67c27f06a61cd8095c6df7b8baec98e2f56d6352e8cf01044766d95bf547392fb871f4a4703a633797c86cab2b35a09f629f74f3e044f133c8b960cf96155f71d791327393f8bc8bc05f4eca3cf8ed910c59513db65ec988132d68c1edc4e828dc11861e00c0d0538dc711997c27dc66f9037731d8d0fa5cea01ca86d0f98ac54f97a3e4223e2eb084f36880c5b1ebaef191d14c80409203c1a9b4694072befc26810409ec4b81ca443e0430e2bce19525dbad7f6f54ed4a26f92fc2abaa9ad852cd714463a89d5cb49756d28465c709b2ee2995f08845d082b9293e0004ea2fb44e86ddd4462d9a81e519ef84945fe4c2f66257cb42bfa5ddf3295ceb415a06165bc11a5fa89ac63f2f57b747670a8911be498a7f133dd3ec449c1e9f7d86ceda37ef66c9ee4ba1c766e8ef611f482c692eb32b897eb200254332f440e58a23fc58bd7591e7ffcd8f76abb7c648ab08d3357e64c1c70e170dcc3d7b96e9f33b40d508f2d486b8b1b277b49b411b1cf8b92b07d9323da42c4b621ea13f3af08b97e1c1274c969855b6540f8ffa4e721c7cda14f51c59bc63d87826b80930b7507c4f81314f04caf86bc9ba313383d7bdc6495324faf669d5931bac9ad7f634175afdf02d4e0bd26689406a3bad1b20d8f1728646dd32c3b309edfe5342db436d25d068ca6c9774a582bd3b1fbdd140acd2b2727133aa279d595bb7acdc812f4cf5046da9a8ec3dc476507419a5018b1cbe3ec9039b4e22ba03bc7fd79b13f937e8c4f08fc2ba685ff5da5d044aeb57f405106d44ba0172bf7010b03e646a8606dade37ef5006ab6ad56e6006442fb272e46e73f96d4fd791b1f3997d7b235a8e243b483452b8073bcb71340ac5e42c462dad632b60b32e22f014f798d85fe1bdf81e9aa7c5833d336b5755d7c4ae9b5405602382d4a7b42b8306825cc9dd3de7434ac182e994e5e4f543f380421011bb7e72ad556bf18c1440fb263f23a52480989b5c294242da32de56275c71ff3063ef7456274179bc83257e67be596fc7e879f911b098f53080634646e66b4b05bd8ba7e436351b7bd3904adb9ca4aff5980313f45db844fb872323a2af48bc49d57c2cd0061688e2cc6424951f73da7430d0b222f9a0772625b823c6bb608340b0910057c440c7fae3dcb03f071eda7ad344f9e929b24f5cb9adda56af24eedea18ea49f7823a4f98d919eb26b8b35972911dc5ef50ed1382ff7c3eb47f948ec5b72f242673f561d84510ab88877759c93d662a8868150ea34b738d564f3f73e8dc41538210e4b9959307cc85aec9328acbf50144890e3ea9c743b92d6cfada047025848e170e8a0945699a748825501071553a4d419da96892148ef3aab165a0d97aae9e7e331bac645312acbb3ba8672fa7a71926eb7542f0a7d1fb279a88d9acdbe804479c129c80e993b0146476154481a7fa64a721a7908c98a775dfe46f949869ba97c0f9e042afd80d4ecce7ed4c6ff38664f30046f4e0763c365d225c466747c230df49f65594f8177b6e1a2e650f0cd8e3ebee80baedc3158f0e9a4d03ac9b76aacfa563a57baab77a7c7c0fb69e178d765df34471360b39ac04aa97b11d14d27a0945804d1ce0e5feaf344efc27a3defa5b29add8b473caada79fe63a7d8f52675303db4aa4dbcfe2775548595cdd7d8d78081ff51512acd02257095c7566662395ea0f432a4593cf03df5fe1ebf74a914f3b88dbe0300e961dc10adb88330dda9c313c3f8ab314d4c2f61a597788392f3111e46ba59a3ed4a44ce8add77c8ae84182b78a272cc13ecd0d2d510e9fb3489026410a67678bb1b98f94681ebefc0408d9e1fb30e791a2d48ee503c79762115821f2251be025952d327b22805a9a13165abb54d507b7e9c42347321b5d50c97174510c221aef96dc62b08e1bb7be59b29a6eaf3dcf6793f5c3ecc87b9a3954823a9a804ed58492f8e90eefc705df40e4ed79279474107de4af10b017891ef288ef2ba6ff2a64442b9080ec1f0b9f254fdf7cba580fad6c52552e3d3cc95d7d45780346078619c484b733426dd00ffe6515ee62bb4e7a335ca537288a05b6314ada13a89538162e431eeeb461cfcdbc5001519a4f0a168d38221039cd1d5c2d0b434d4a90a2b80e54950c90c46df4269f4cd4c53909ce4f5392bfdf3bc09d0dbb257f39b95390e7000f03439d40680136a7818e7f433cb818df5599871e3064503bfb2b773d2274f5bb448e398208cebe2ab438fda196a45f41efd306bc4cfc44d1b7865f13464852c7663045ab6fb96610baf8a519a7bb8600a00bf57fd8d691a420790b161a6fa559b24bef6739dc3fee2f0eaeefb109b190e1b4de30e1406c9266457cc962c8075d6d679aeee075984ca1adf67f6f4f80e27f2af1c32ac1c97da4040c8367b1471d9006bf8ef1c3597b63bc71e0f2ee52e8b51982d0d2cea4d2965d2f9b88cd59957d345af7cf98d5bf9e3fc77c8da82d30f4bc2c0fbead16a2cb98f0cfce79d56be8a2a0d1b72151fe147e86fb9988ee0e7ee0821f8182234dcd00775ce9a8767cd327d7d663af215ebd67436806eb3f8c94c1ddf040fbf047c20c78d913e3aadba5250c20b5f8b453098b9432621b2637e981f093f6767d541ba54acd357daf86bcc940a1f937b0d730ef99375fa37116287ee43fe89544a41f9ebe44df86b37da765d1d029fbece918e7a0c97a572120cc887172f76e88ae69988de352f43d5d7de0ad52a890a64e99bf6a7ea76ee2ba7c0b9a45b74d28993f258ee6e8977d03930a59ba970d34ff58205ed027fbd7df1156d0049e430947124e750148b47f4dab01ba485382e04a2d750aba9fce2d125c257eedf5ece3f112d986af0a23a69463616a15f81d40ca965868edac02f2175020c64d1fc74923207fdb02ed94c41132dc13c3f52bf223e78c4f2b8190256597746cccd7344011b1c36992078f28410672a503c4b424843a6aecbf99a5223c68eae52071567d7ad81e136ed5aa505f52b2bfefb94e5f1955e5348489dc1151d138964d4c327863ef13a20a8f55714e88bdcabb7ebef453960cefb6d0b66f4146da91491f9f8c0fbd1d7c6983ee3d57dcc22fd897bed2c5e8ab9b1ba4589ef07974b99e448255636d178d16d6c422e091b0a31782aae59a6a97fbcf23963ad695d9fe274a3212d66b8e83a29cccf252c7d352390f739af4acc4d41e6f3e464aad83b50c6a68b2020d1d6587e46758805fb6c17006ff5d99eb00ec2a5e389d2752eefb1f493d0c5736e1f1f1e726d1c9700608bb16dc9b38fb86f08e1423abce5975fe4655e59b3b7ad83aeb1ea93dc5a928c014b5c79a888c2c7a0ae81a9c2081b843b97ebbe05b5007eed2b27bd4a6a9606899b25be3b8ad0daa504c6693aaae70f292af6e2286b3742bcbabb3cf0f2abd9e6907bb0f034718dd5bd9c8020b645765ebbdbc657158ce7d30575feae64074eac9b8c3a134fe776e1aa6e81df5313d069ba09134505d89276abfc6c87579383a9474f37800cf4756559eaeea5cd2080a159b91718a70b323e45c146c46c7cdc1d6ab40cd89c002f866d14766213643459fdaf2df91c261cd1766aaa160cca31caf9e1029367a84c3173649f0e47632f8829e61a5a5bbf204ef353bf5d330b356ed5151323aa1a5fe40fb76a13dc5e83c28523ca6e993e4259c903ac37a1b2532c8ca8e79f8f9d9c4b3cca0d82910ae544dc20ce700a302945d83d355d9df6d4d8300bf8915d67985902eb0aa3909eb0385d713180fb3a578e41ffaf2a278baa5985c928a4e7ea514db4878513b45a01b1543e1ab68d1b7ded6009ef4fdce7bbe32c6cc7b2af0eb26b9ee2771d21b3009c3907c77a7beb78129cbce74f387d8e80f4a515bad4c28ea2f6ceec8c8f3d24d2a36d8da498aa5f36ecf504b66cc757563d2ed94cdd8eafb51e5abc785a11ef4f57a91ac3c1858fcb79f8c08492d24f92d4f3c619b9e18bd62043a5ca53c0f0e4a3edd17da9fd5f4ac1dea0a1343a3c8c1c1242f25238041c061c6ff4977003163102205e090fe5e58e7d6c4f96013b3e806dc7fa4f8d4fdddce737f6e86b05a9e642e641c8d1a6c3acf81642cbd44e06fbb7e2b042d87d69cde0fe2a9034003ef5dfb6c12b966a9f0016c0c703ea52688d73052d1677f1ab9cc2216927ca244ff0121cf428ce28e79da1b4a8194c92607fa596f51ee59ed8b528694d31d7f489186411e2fce02aa7297c52d21b7dab4e07ff12638ee07be5d85ab27579eb15ffd2f431c3a40c987d06de946b5c3dd9c57d3a122e46a4ffeb38230205027a128debb0d4cbd924f20d54f54dd4b7b1881ce422bb2eafa41086887c5d9ff977c49097da9f8663278ae485e64da962f2988d293966249095e73ad94bd553ef2991a3e0b68b6fcfe67a209483dd9a971ce54bbf17eac3886ff7ac922332a5c220399d4de1c28ac51c58e15e919c4bc2ee4e22b28402cf81e63ee6527400c645f880d8d69e185ee36ff8be55605f5022482afb33f7fac16c68ac55bdd074dc0c54e95aab47f8d777a8b1114f7980787ddd034d8d503eea425033ba6acf21c6c07569c62faf4416e0c32bca82c921556c719be765936fa78ba43ba3041a033e71dffe123dacbf332f54fd674e28b619321e55e90289b01a592ad60e6d2f57e1a67ee8521e0c8ca2fe10d73af24e7669f523827681bb2ea5dd3ba8fcdf7cea0f536bcc139450278013843ef87da4d53221c3ddf4747d16fe365a3437656d6b0aca1399ed9629fdd74ab5d6efc1db3b8d573dfc4a4c21de2d4881d23c7f5c38b33be678ebfc78c1591960296754d70beeaa5c7d5640ca2001a8c5d8c0df01631ec5ef440410b0e102e6a1f172052f4ebf960d1560f10c575116b07767c622d8623a3d29efac359a6c4c98a3f8a39032ab16ae82f180e049abdb5e7f3e7445befeebc8f95c85ba594b5e770493ada6932226ed5bf2e9347f764e9b20be5fa295cfd91ab326854af9861444233cbd899b0c221dc556062ef2ca2b0b76f07bd86c25d7c153d8b1a902bac76878d0c388e092070ed4c232acb54e6f9e4154eff1780423e4960441e3dc0b983e0521ef57db6d77cd074d2bbfcc2cf955322d199fbded42aaf14fc6ca208a41fc21c7081b01cffffabcfcda7636666fbb3a605cbadae3db88ba8b4add2a4fb0b561cf78726dc2ef1558c5cbcba07ae595bac52395a916a6e92ca0eeed55c4cae1f51812e71ed27a55eb024e4d2c217877620b92e3bd7b110f4d9e08a38d7f653bf0ba57bc0e505d735cf8c6b8c487c5c9a7071ef0a438634a92678f623d2894c9bd99f83e37efa287069869f8192d59847ae40a3a2e8b87b1f220889c0b6e0464b50ba149fc6e7d7a78141df4a12a7b2b7fac318b7ffddf696ab62fe252dfeff29df9b426d2c959ea01db8b55ab4172dafa15565d0001cb0bcf25b50521ed22d09a5d498f3d1814da7e257ecc7c2c52ac6896c82d985e4c7863f4ee23dfa2da1c7b501e1033aadfad3749900e5f14c09c0363dbc700a455fb8e9f4b8ecb4f86214c44e3e08b27b4c766d18fb1e6a6c9e00798e581daa4de017e53ca2995d53c3ba3aec570e52e4a5ef11898afa385977fe03cca40623e6ca30b64de8ef1293f4f9b667e5d3c2a9d1a0b15d458d01874910a9ffe914b852a4ad99029e17c929a54ca16f0ffc36ef7f6fe52605a7c454552d8dc202bc9200995cfe96e079342fdb43632094e6d927f38a8443dbf2fac0f4996920f76d3d4534522867af1f43f271139c16c4a9993deeb3f050c29a8e8e1dfc9ae3bf265efd0b52710a237834b3d1fae687972bb392dcc1204569c3fdcb568bfbec8584910fe69b14193b38ee9d516fcb92745366a2f48845ac935db8740be6b3bab1635326225f2581409701e6f8e48e46a2b8a8dff145170386f8ee177b9002d03e8e22f62746779ef99ae06f7e21f1bca90c15a9607a384da71b7dd4517547456ad6f2691223eb14403b36706e094a614b7ecf07b44f9730b23bb40f060782c19ad2e758dfce258d7b551fe37ddbc79a1346fb8bcd733c280dc96349b424f89d527a15b05e9f33a94d10e2ac72f2a241d3053071123c2cd3007af7591abfc9852f8b0f54cd4d04b53a2ec1d4a44a5a21126c683b167d366b9978e488e397d6984de8540a6f19e80d0add108b22da4ddd3c6991c7b36c6997decec8bfc2dea1d0cb20422c237f3f26c6aa724ef2524bb2e0ebfb21584fa5629f986e9f390d867e57594b6c6fe2329d7e876fe3153acca0075d7ae6af405d8719ae546eab62a25fdc1f46979f872deba3eb195feb4884c243c3b334a2d0197b60b774189dea87a2d48455fc2cd961d7565c2678d77e82ecad1893eb2067f4842ae20e2ae00a47c11ca4ed2d33f02718b50367202c7cff3801600d694d1271bc407cadd4c22a6caaa21c1a58026dce6dd6489e46533aef10b7ce74a7cdb28c4fc5db6866b59799340d710323aa84d008b55e581b24fa4ec02a25a9b6bc169e1f2c929fab05a63a4d20a0ada875f002776ef92f68cc0354d6ab3c074636239ab3a3bfd84c8240c0300ec0cd13bd1a818e75ebf1737094e6a6b56a850e0c50431e07b43ec447e1bb5640be12bd504d9e04465072cc8bd3c8efebaec4dc7c0f2f3e2af4fb9fea00710bf2d794eca7cd2b3747b5859d06a04830a3585f75625ebdacc24435a2791b6a96fa04c1f4714dad0f9e986780620e064e566b54b13bd18ca4cf3823d50827f95efcd480b0c4a896e4e5e41d2aea2f6018f2b2b238bb8ed1fe639131876c583652aed19911b6e91e1916d56bf64d4dec9d55a3dd6372397fe1aae9a4739358a5165bb5a71c7b8cebded8a1a05838bee9038e8846965486705f20a30cdd4503fa3da3ac58fb11a8953cce1cdc6d52f0fe42fdc8a14aa9c7f8d796e6c41bfd44fc009a1d77f63f3c4cbff40f95f74ca84a27e603a14a240707849bb7aa824038339e04ee3fac78543f65427a7a0892e0f8e3f1ba0196e921dbf0a51b951a0ff592ed8b353047026da9cde5d4a146f4a2ed2a1085f9ab6da5479ac74244beee0c6056e9746c002e702a571e4c5cd211472fa9c015ac27a77abb598d266a67328b02356247674f34bae7fb7d9bdf460330bdc2f5b9e67bb593ee99570134b23a6afd2453655e04973df8affea41c0f54f1ac7e27e1f5462a5806ce2a11ee44d860a96c293f516c969ed715001705fcb72e114456ca9f293ad2ebb4f5aa784e5e490787ef27c20624926abbba4d3aa7b9511abf482cb327924c4118abd61aaaa441e682ce64ba0d866015ef59f577c0b6173e80b1040cfe9dfd36bbeefba859cf94f62d3dfdd21822402f97805021c66d224ed24920d59bf0a5f4401f5845d016cf7ed5b1437bc24fa6142fd0a98665fa415694177a8ce7b85ca2e7b0366f4e9211adc861517c8fa479f7592002ca5004289d8c9a95ba1a40c6b515c189d23a75cff9aef92de4c6bd9b30778fde1aa729c1d2b2926c9d9abf6eb533a07de6ee062ed5a3bbbe86d0e99fc549690cd3069887e69055ed38ea73259b327e2d248e01d1062a4c14b32916ac1ee963c503c5f01362debf6e10d90fe84012dfb567e95303d5e5cdfa045e1385e567495e7762971466fbb79085569f627091abfdc06873efecae7da28463b95ee3d37dbac13be97a023009e4dee1c5a0471e8d064a894f3ab6d4063365324d0dbbc741b1e836257ea65f6f7c3626cfc8b95343e941ff3bc010ff604238e1c618124bad52c41e8f3a9f7d138cd5b739d574d0676cfe394bef1fa4d76b3322d03c820fc3735c660d33b9e0dafddaa57de70c82e12b3517cd84a75fc4fc8f3ca11e3351fb4d27d0a22ad0d7915bac8d8dfe700aefeec66f3457b4ee012503db1e45d47a0764eaf79904a7eb593cf1ca10a3f27a185eadc923c9347aa666930a3966bff236821c7582863487affd3a4e9e250e9cff75184e8706d1df2911efb21a5d44341af4a735f357dccf8e08e9f95ab25f612ed99cc6c86ef935f3f5aba01c0946cdbe35a1167ac22c8a5cfd8c2e0d1bc670678e2400a09c25bd2615ffebafeec7128422fba89adc10dbb1120f8cc4a7d410f19f8ef1a65bceb7ee9d17964a38638600707ad91337e3bce965c148688ee7b0510d038b8942b07ec5758f375d4412b7673e6a4d43091ee2be44297656e41104240824ba49d0b9f4f38e5794dc45500e1c7502375ad90cf8972b8fa54004f3fad35adf1f7b1d0b563d595809df2bb4f1480c4ac167f1b0eb11315b31bc2ca301c22935e546dccb91c0f307f143694e5ea788930593487210a2f68d0d4ceb43df9ce6e36d06bb511467fd4c5fcbf5c17d8cc71deb1818e2900917ce6d961eafc823f9d9edd34d48a4eacd610a698739830b65d0c00a9927acef3679f383c8410c9e91aa6fafb3c09b28eeed7b165c08623f281de1fe9b241f04404a01f2cb635cc3a37da2c287efc91415f09f284805902866d5f16969ea17333b49fca20f334a41f87ba1afea8083efeb8f0de9cd57f6b18f18a3a8f473e516ef6f939db2d1bd5e620fcf27c6b8e55a5543f2945f19cc94f3803145150d7ce57168ab10157b17519ffc20d168de685a8892d5b4a31f95f61ff1b04d838dcac24e0d3600b832f837ac1f2c9c5dff07c11e53a9c54dd411d50c739ea1904bcba03ab654c584280bd2ba7f8e7053354efdb124a78426bb2b7fb38e45eb3c854ee5c21e2058f96612907a024e7d43cc5876fe8c8c54920f4509870e066f5c8c606e49d7309d08b03c1567e553badddb52b6fb889ce1bd750bc995d29f81897e30844f0658a3a92336c0400b36c939f66bbee870ce7f14f0af0db811ba14df9b380c579da1f731ea88117685b2a8ed5d3d3f35ce5a7eb82f974dde8ab6edabe9a5dbfc482b598a0820157631010bf73689cdb71c995229caab82e558f35250d0ed3fce04146cd685c3d33acccbd6d13ba93bb0a1ae57d567ea34fac2dd02fb8df830955b7047aeec7b7cc074ab8119f9ffcf2c4e3f1df3b216ce66fb82c003a3e6626ab8fb51752710c83a348077403a10eaf1198b9d7edb0fa3759882b900fcf9382dc5c3aa48d560ebcfa1021418e8ec5a8ecd9e167e0e2eafbd80c731fff9ccb80dc5d715cd63fd15435f13ae027331430e0939488467e981b99e5503e79c846985035064b016515782381cd136124965c86394819b3615a6d10f605f8485909b8618ad65b1f95220dd3bf5a81feb8854e1f81bd51d036d5491457409646f47d3536b72def80f38f19a25a7a542648b4469f1ff224d13c6f7f3828a90c5a18b288252354f762bd74fc4ed8811abc023e26f6875dd0d2f4bf0e2f570b165a650984ec41ad74fbfcc102d32573be1d157dd6aae2b76ca391a4ac8d80f40f703a483486655601e14dba82d58a39ca5ebaf839740e32126d369e38491f096b09eb4b8df7f8600d315e336a6dff4f0ff5bcb5777a03fee0e331dc931c23a6d89c78e60982732e6d55caa9e581c97e5553666e48fc63e8856bdeb06e61af32682bddfc65f3071f781032ac048b4b9598f95d4cb3edc950c93258fad623b728351ed2d5e39ad545a034349723d0f35a83958d482e31df20ff16d51d15f8c5953c0c5cb22998d35139200e67423486812e30484a20f58df31945cc1e26d67d972ffdf71a4bf795561e5808c3489dbe0151752ba8e0c140c9b7f62e41eb33ebee2f6b6e5f0735d2955102ef8bd51a4946f7ddbe22bf02b7bd241e5a24d8519ec05804084cfbca9c8573021fd52e9c7ea67251e03b75edce564647b5cff7a0e80436cc21c1017292e39006d39e9ded4c551b3cf107a108a45ec900ba0c84e03353a0e5298c88f759f4f16e05f216349a02518ff96a2c8b2e8f93ad9f662e4b8bf30beb8c4bdcfddba189827d4f08b4dd1ffd6e6416b5d13b89699b72bec08db1ed5eb49824a24be748d6934eec9d21a5aa76e789999f2d2db3fcc20796b58cf8075cc4dfbb38eb7461096ea8178f0358ddcdd7daacdefed8a5e3102a3c88ee8771c2d38b8303853d3c5c93d4a62d3f7b38d1e1593855321a007f9bd955de770af86459266782a12b9ace97c87a25782985464f8ccc8aedfc2647e2dbcdd18a32bf38df4013ea9e4abbdc70238e1137fb654c1f642c2ef9afed964977eea30eafbf9e58598cbeb0207309b2f3d3ba408855d3309458751b3b0a889c68e142affe52c908cff9a4879f9b5fff8be501269a8768817e7ee8f3192482b7c5f285bea7d5fa4cc40c22a5f15a43f8a963a1f560feef0adf67c705bb87a3ba520cf13590f345d35e5694957524d461d03b45df53d7e5d9a71751990230f05408af2cdc59244a498108e5ad5ea2d63bb5d7a4d4283a2899852bfb0be780c6d454d727014035c29bd6e6cb45af26cc4b78ee263a6f24042b7f941e91a1533af9ab1fd3f233dee19e1a3d32742d3fd05b719423553d42f6d0206e883e73d41d041ee31d0e68dce8b3c3a05d31921201ce6a49a3b952b9209d55b91570711c93f97c0afe071aa967f8e4dd754076fabc19dd0cf2e813a3067fe231d56dec96f591a454666c83ee47301770a9d80426a1573858eae7f617b6bfc6344db3a90be1955e97a08bd32451a765c317f83ef6721dc49ad05f8b9d1a9676be530173613b4c726edfc2dc807d38e2bdb69885ce83c5070838eea1fa74bf7e611fec278deb30366e4afbf7bf65707ed0ad5a4897abb106c863cfe742b0e5c4fdb59feef66dd3b1b21e395fed10220936c8bee953591ea6826d14b4c83f78de32d5cc26f1172e084b1917e0ef9b9821bc1de84b205a1f74b21527e76aa382fc242175eb393e864c486f220de09e9bb22460bb370aa6dc3a5d14821701bfa8c01ce014444dfce8ebc13bd463e52b8c2851b9df288ccfd272f1c972d7257d89516fb2e550fc4838586e8c7dc2c2385f8adc302559048ed78234692d27b33729e34b375a4b2afe5183c515026cc41ae76618163e9349a63c691c4bf090b6dd9edc8106a1f064508cae3fadf26bb928369405b9599380684cdd14437e59d6b86e4c730b7dd8123cb5c7260328daa9c6df79e550bde0182e24ca91f129c3b638db346903aec8f144cd95ab203f097a45a2128ae8d5babb871bef005ab78ff449b5d0374d0c225e67fd4dc6971364f4ddd320ce9562dbbff2266e7e1f6bd79f290f4105b88edc9cb09f8ad6180489493b85e25ce7a91d0a19ab0e13f0f1e1c3bed0f3a4ce452799899ebf27b2a38ce68878e58afecf1075e8f2b25942b27259b9cc798cc7600c32881dee372615516ceb82b1a22e8037f60117add5d2a6cac73982cf10668771a247f6fe1b275ab70c4f1aba99531a987c5135681e6f5331c95b5076e8a45b2903c66ee3d9de6571e33cd1cbbfdff4a9b9bd1fddd9c0b13153dec01a5c55965b24bb9c93c09d14b9648c81eebe20885aa9c89e4e2fa6749532aecdcc7f237f8fa1a28de0b9fd80b2a5b5dd2bbf73d4b09a00223b6eb8a2646f9a23ee419587c105244486b7662d2d5ae9341c2bab1641d1d7bc7be64a361b9c2ce3007cb898b81288603e35ef6f3f7bc0b095c16c9564e4841e7e68ffac5be735d91e386b0e1fbc15c854ac6e3a3856c4dc867eb4f16a5ad9397daaadf2a5bca305521d8a3d3a0088de616e9fa6c37ff340b86d46f2ef5d0cd7f350de1fc06a6f88c9041d23455acf82e651c1699363d0cdd5ae456f9677941d3eab742b7654325cbe72bd74f847b20d739dd84d7c0d5da6509908ac739c47bbf127ef08786ea5ab6bdf73b141fe3785f69afc3752c3b0dc763ad35d6d69fc4b65663a901f49019b67b1e1bbca56ddfc6c02b86843f60ae8c56b06c2cf40af2d0c61442b32e96668cbb437ecee6a93032b751c36179ca3254cfea41afc878b10485e0e0e8573b5bbb0d515bb66e1fd727239c5c2fabbfbfb86c16c575408f43da19371ea8fb50c2ba1ca956d8418cd24692e0223f0baf227196826acf40b6146d5b19e7182520e4f8cf93b2ce56e295172eff43bb4c3a0d721fa90c140a884d2747d8ba4adee115acce1d2d046020e407b5d581a3f7dd3e323a8882e53023ed7b13b8d202856b0ab424e46aad1b9f08245f7202e36bc9acf21376af05e6a57d5d602aa1ede2df267b9be7182f92bbfdc8982991092663cdc1532d9dd41c20eaca276c81d5b0e8e91bc93a9606f289261fc3cd390638ae2e40684104afadb831db346402d8849ab19685f4b9858b4180e0b8c01c378cebe2e872d980cfba55ebf5e1f6962e68458de2eb5577114ff0753e6cff7d094d916962ef46054e163a321f47e042701ba436612e0c3eccbd9f8c6c3aae88c8579e6c94e1ee10860e2232edcce1e1c4914387bb5d11954c9dcd38d390264d84359d09d1e2adba90925c687b26b965f3bff7846f244583657811e22b61727521e05783b5e9d47b166cc7a522740f6268022899d5b4541ecd512c5231ce18a13bee423e9440b2a969a5e7fedf790a01de4daadd937dd8254d7a531f7991a1129b14f04c9099a5d2f4e2c6f598d8427df13be064db37dc3801ce730823f76ea8263207664726433c66be5cf8dcc30e5580347c3aa4c633f4ed00a42a906ac14e0da4186bc8e3dbe18b72fdd79571908d57afcfa113fb6c0bd4d36c71216bb210b48f35b76d8d1d1eb5eacab762e05761b4a95b0c0de05e938345c56c4bb696b009f98cc619ea7867b6f1a98a6f5e33e45001c3264f84dce1fe779b6d193092e2b29bb889ac25b53bcc4028f69e00ae96fffd9dbb086a6757bacba6e62997a253b9aa5b4a2d07dbc60cf8d722530de7ab93c9a2b85c55a3816538cce789e1c73c9ee74350b5f4c51f4edfb369decbf3bcfde2946aa1a8cfbf21b74c32d900111d72b1ef65951706dd0d9052806d4322a4a8d9b61b687e4536895e7ea1f45f3a56e6a2bd9166e7953946a30e590ccbe75d54578c7e20002c27d6be385030f754d9f82dca8955d8a0d42af9f89794377c9679330f27b80f875e598671ea48b6a3504213c7698cf0bfd5adf3f8e1f1db53a24ef8e786aebb2894b06b4726002c9cb080e53861fdc16ae93f21924591d29b5759149ad9dd3d49062bcec1f807a79d3b2eaa4a96b88838edcfff3b553e3df4c560007888527db8e9e8e6c24b53cded01b69f103686437fa296d4b010ecbb217c15773184bd94586d6dc8cfbb24c6235a36a196a8c753c73e79f5710a70af290984519fbbbffe5f0c1e73555bc5c0018d72a92d3e944a5d973d6b8da592234c218163edb0effb23c6a6feeabf747df9e374ba1777604a5617baeb8cf0be7f033f490f866a592c2904da1fc2c5b4d2b81e60f1ed5182974dce703f548868829dac94d732fa4a33daccfd637d2554ac946fe9171fc8bdf5670ce0d740a7d7add6d15c7d8159be0d82f2f8896426c0294ff8a79d27e9dc9d195900e5e2e90210bf54396e26978a628d2257807531372be8a66a4b46f407b1346ebd399e39d6bedd0c30b691ea7fcf82d3c044b2b8e215619eb9c5035caa05c10469fbb0d56ae4b2514eb5a1269a4b24ce81af8a762bb0e7cdb18ed0899aed3e0251e98791f7ff52c39d29d64e2ed2a039c9e36fe75745ac1283699814cfcfef4f0f8b8a18ec4bbdd19f99867821da1f906df27d810e13d21e05a97646beff9a74095689fc14efe6044caaa2cdd47918717c1e768f1e834323ebf83709fd060d31bffee85a96f58cfe4e664cce4573e6209e5a31b30eb52e8297b476cf2beb9f00e3c3d32ebf94099a6d254f8d972c2c551358cfb42e7f94bd2d21f4058243a5d5c1264be4a9cabf4cd2a2835949b5e5d9047ba56a0b39e0f6ab5318681edead0cbe0c90b2d5148998567982b6465ffa556e7f8b43822ef328d2ecb26d3f8b7d40b596bfede6a0f2a6ab24e9cf649c29634a98fa2cb08df19fbc03fad8bbd66b09fe6c02ccae30d63b09da80a4e4758ab15280a4b6cb91a35ffd4cd3c5c57bbd2295b866d0725e6416e0c07ab27997c526490de6a789f2d76e229e0b99917febd84a1cd62898b7c4b71104773f29dc5abc0fb51f81aa63aaa6b20db68d35bc087cfe65935f87f6fede384d9a06b7001c7a328513509e3b97c7de96a57d047fd7cee1f5bf7a1e2304d69de5166686385e355939731096b8f9248af5cf548d48d92c84ef5703d68f4f4c45b5074cee697b0905d469d3f7b9fdf3bf141a7d848e407a560d18f5f98d43e46c3f752a14db6fec4a6cedd58fcb77898ebc16bbbc922693c21aebf9b564262ef913382347a2ad2df7c5c739e7d5bfce7d300c8144386063d70a5846b5208f06adb6b8774a71de3b2fccf77a77f156c817b127007d2ce5410f5744c6610de9004b38fc5162c2b2c2c98793c4f99bf7c9346f2bae54541f1276e40cb0ba6156a5f21492fa787f7eb40759f04e7ccdf75bef2c39011dc96995670da388608d9b7d66dcabb957ee32714a642f22eacbe2371bf5440389f783ac9307f56ae50111d295feb116861ad26ee3cb2ed24d7a2c32cd7b6cd0c5efe02068707cbb745974dc86160811a61b1b0d142c4038b59ab0411af173846dd5a6cd47655d33fd935fbaae6d34388a466b1e5bd323642a717994656882f5668f6f3da632b37a297dd3479ba24e4d29ee6aa7f482876158f04df1c5314a210","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"fe727b3ec2446f3e9140a7a09442f679"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
