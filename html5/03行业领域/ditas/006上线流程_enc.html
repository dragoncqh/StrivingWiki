<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"7d25d466ea31cc8df2842c8e6bd6068c2dc8779630a8317f0ff1d76b23137cf5b49a8081461c49ceafa0c4284e4840493976aee4a095024dcb35893812a25b612432420dd39e3ae05a0b69f306c87a3a9e235f8078ddd0575290536435f664e086d267c9dca1ca11c5430bab688845dd4c8acb5d79101c36f655432ac2eac9c4a5585995693faece90c6f0355ef11c868f446883ef377631a53707f9cc11af0d5af72a0c611c4a8856caf92569e0eacb4fa3ebaead6820630d5b13eac1ac765b349fd10984c04bedeca68a94d41eb7b2fbe83e033850fbd9c86c34def9f8ccb8cfc68e58e649f8c45e334b2ca2a8b97801f0e98e1cea3d959d9cfb76beedc540a789153d565205173a64dbd930d05eadf64d0ccf834428a3fb446aea7cd7f57503ad1fe4fd2912ad6c061bfb4d964eb1b1ccf62f2b2bc69aa859834128919d8a0049dee82acb2e2496190ed668c046286885cd94fdb49b2de50eb58be11eb284185b5727807358c613b46a035ad8e27d8711ee3f9d508807dfba88a94b0cbf53bdd4d8909f5b6d888b63b790864f2ec2aff1bf0360904e3c28416d1328581a13e1c4f3bf3b8f50798ea1fd6660697e5768e74a8113057a42ed802685f9713472fe927a2519c987e9b0034077e72d412ba60d7402d8c74ff54861f67177748fb4f8b471a8f48dafba32e38291d5e49c687055d6e8a07a4683c5869752b0fbc4b51dba30f1aa54459497e8db14ef18dd425203e91a6135853dcb4b4c853fd00e46f997c5209ae0e293c48845309be23f98aae28bb1d03e0e387783a3d75ce01519daa7128f4fb979df949776d14ca5799c81adbb9d819a76b44053162c4e87c16c08d6cf113a960e168f9963b8181b9ce3fb78311ed18cdf4d4d5a7867ef01cca59e939558abf02732f6e72b6bb0a2cfdc356e59153b781413c25d4c5be307d7642a8645ea547e2f82803d78b04ef0c01386542327ba36cb4dc77d46ffedef366e56400a5214a15ad3e18fd82688ed26df87a3a9002eec1d900491a82c99a83285b71d4477edfc5314fa5936dbbc1760de6c3b78d47321b8a928a88fe49f5c8fc8de7261c308417d76f2d2b39af8b7d7c0d395820145357864f3f2499967785dc0706db48f5c97679c618d7db6f58481e5c515f8490ab1daf27ff122c47765095db16e35ead7c8ad3bf382e37b41f74764a42c676067fd4be58c65aa4829dbc8a7a57fb4200878e898a46b9c28cd13569fd687304aee6af0662050a5e5991485d3234af709044fe6b7e3a240d06b020a7ec9a0af94c2ceca8ca48c2c957f0193d6a6e8a2b8300fa2677d31e68916709f42ae2bbec8eee88bc46b8fda27a9aac0cddbf94e40c8df989a8b4dcb615d6593b17f0436f8cea9d9d4e59b7283e3a19e378d7795183afbc593258b447da5c7e3f05452ebba9152093218787d67b5cb89c0f10fe6c14bb31da268d6362718fca9b4cb496a6aab411cb6f5efbddeac909866ca8c2c12899659be8cf1fc0bafafc88a441a4f847f9751f06ccc22f238c583d21ceb8f0695229f6675d07a1dc4aeeac1766a5c3e1bc2269c62d1d1e837f18eca6f64c57f2fe931838ee0d85ea0ee04bd8c4796a03b5397f0f42b3f0775b0189f0b247d0fc9d0f2978b728ab0f742ac80d0f4304888eb1130cb5af767e34f5e444a567737d02a54627bf7d15c4801054423a35d960cd262bbc584a821c18b92549d58437caf1ebe090eabdde9fbe95577fec61e6f3dc9be2d61f75933b2eeafedcf7c3f0f7ebcce116abdd7336abc38b86a7f350e5558681d101563410e20c0adfac92d28655f1eb3970478a384048e2b9bcd44a30383382980427262b60f8ab71d3b6ce95bf997cbb11eb8aed3190592648dc57f23eecb267829905736c8ec13129990859f24a742c2d405e3bdde54ccc526f8a79b22104f4435adf24e2358b1f3c3e638a8dd8274d757cc76c7f2186eefda61e73172d6a5e4c3c73980f9bdaf6357ded37d042e4c260abb73f4d01b29931430c84aaf493ac305f177074f93990493feb98f286257a2f27a2b72f34d0b7e1e8a90eec3186e0ee6e74d433d87d0d38d181b0cdb9fab570f9192bd8d50e50fd50c37e4be1ad955b0ef19aed42d3fcabeaaf3174b0a7a33f77971d0773503d8c1ab659b8f68f119294abfa8d449ec2e9a304fe8adb6b87a397744468037bdd34818207b3501b60bdb39259f649a96d48d81e94866a66ea13a47dd35764fd2d6ecd98fdc8d74792969507518f4156d076dc050cf26ba7f052a3c90d9549e4bbbe1338154fa37c8a23573b1f3a5dc3b67cb4c2b4f7d60b1fe1105cbd060479a0511e98af590fc7f698f954ed7d534685c4c78339fb86644d047accba7080d1935b141d2799503e257afa36b6df94b44ff851245e5e970cc1910cddde1d81d63ec1cf89cc2a604b28008619a003bc16dd6c3693951e5c0014de0b1f00874468e2d990784c65cb6913a8b9e109fc4715a6c4fe67b28ae2297eae1529081b7cb07fe7c9052ac94cb2f1327688bd78193fefb3fc4c1cf5bcb0f5a78e86ad6a3e98a1be912d8aacf2f407da3fe989ee0e04e24b6bda068506821568a55972589c8a741731497dabf69fc2355807a1e18c2b28bcba60dfa2873e688a4dc97aeeedee2ce5068001612b822ab1cd1e5908d9fdda6e8971f0cd930b03047b42626beab74b565e59976615e8176386dc447da955ded09e8d078efb697ecd97ec382bf029e18a86f91692e3d2d6febd5f0acbe51bc298d6d959bcdd320fea020796e0cad36b92e81434ecbed27922feac91997c64f1cb6829db1f3a33fab600bd3662dbbf4eae6294e3eed6cbdd4b8800a41d4835770875342894748a1b737448987e4e0f4f61efb9488af3e93e42507a46d0e4d9dc6a17233af0fdff482f6fdbff74c3e6decfa3e995463166550cb753a04c7d0b8ebde086a5d2b7fee8401afedf483df68915bb59ffe3d43e99ed7ecf5b4c56db643a43a2ce0a4823957454d8d5a0972f536b763a247900b8c658e51fe36759e52304421b120b9c952f5db7dffacd1d2a6b4dc1d7fb17a94362359c341bab8591958224abba3fccf9222aca528ccf0404fe2ef060b358188f21c68d4d5363d79663e24dd01729b87f54aca58a8905aba13801972934d5efdb6e0fb381b67aee5c666453806458014d643ee32ba5af2821ec8117d7f47a8aab045b93088fa69ab0fa648624d1244fe26b3b9c47b9a33dc95d24edf240dd5a5055fbca9a7423b8e87f576fe74f7ad8517b4868227e83202e36d6ef7639b6ff69a11f4676bf95b1f71b3d15512df32c38a5bf2c1e24a18488b746971b4cc36fdf25e36c9943c72dfc3a4e6688a3a0fc5618660265fa69978c6552b7af2d4b3bc33633e4bde5b25d360d2873bd9b0030e1ac3be667ea39a189c994fa8d7d266ee70eaddf7f2df1462aa2f229b7e2ef58c6637de6488218216d7b5eaca8e2b49fea733aedf2121e92e9baa904ffe59deb193b7ebf69dd6a34e79793b7999419459e1efd997830c28b5c90767e0f2ebb675af598b2af40d1fd47f7daa255fb76553713e3b0bcc5b1e8d2a60c8dafd9b68ebe3dc26734031e3e95ed4790b188842a3be6738a1d44ad902fff2ecde3240063b92d4e73e3a2f36f7c69a52ac65513da8f81e6042e9aeb8a49f12181580579f8dfc409ad602934819efbbbcea2a5f37dd6d8532db9ef7980d9cd37502fbe787025176ba872fd613485b37ade311c8a7a0177ca21819c9aa8bfec34e9a7d7754e6f01f451885ab0401d39c588e2f99f72a05e80e3fdcf16c11e2eb469dce50f7038c8a5bec434522094776bc6e9892268cc08b96b595f8b5411beb860537decdce5c374f495cd9eee562a44e208629b5ffac13b3d23910ea8d174e23fc8cb64851f5adbc1c9f21a4d3e9f7ee26a9a3af305a9011f0e06ddeb0d9646214781910822a47b7e52ca06f6382cc795f1f39bbe323f7a45b820a02e31c53eed6a5f1b256d65820423687945b35ab1b3dc3211b5d59c9140f0d80e9447c7ee5274e761ef617f39efedf816d190329d17bbd7d080409f7d69d079efe252dc86bbdd7f1c797d734c8d6da6441d0393271475b20436ce9ba2a72064273f2ddd3050362941429d33daaba8ee0c30c7fca8b8fc76463333c1ed036fdc029c31b426c7161ecf9e39d662aaa37ff43fc99c7c4ca3a0fe347d3c3b592e17815bba4487ad0a3395c6f13eb1ce04e88a8ff3f7e57cc212b8679825c13c69b7bde657978e43ca20cd00f683683f52d104ebaf50e1fafc554dd0744915e3c08e706516057fbc18d2425dc44f87b03c244a86b1a2d3a91257bfd6c5ab3284f10168019018222e291ed93fec6cf4e9e240bfdf6bccc047bc6ce637c921ec5d3f9fe59c9ccd71d75cf8a4de224ea49bb1a583509c2464527355eb3ac4c8b1c486668ed67acdf2dbb7a0c2f5a3a068ccbfde8473c8bee56ef9660a1e31742e9f796721522cc2424ebd78503c8c5e1a2d8c90aad836a8ad49062b11fdf54c7287618427d9a906b8797e6b5d22ef31225ee7bf4802bcc297026abb3284f5aebc6ed746feaf30d358a8a2a6bdbcae42c856352c494c273d477f57183048cc49be9511d982da92fb9a3b38e9f97bc4fca56c0e7f61399a07d78f666dce98b7f5abfcbb2c73db96611a572fd2801933d2375de9dbd6ac5c9a75efb98172404712ed51e88c97857a4e9715baaedd1887d2f6fd4d8d44752e240597fbf7bad6bf7688c6dcc4da5ed2a8ffe30423e0745fddda0fca1d2f57d22f1ab70b9abd6ee9bd38ad85fb6aa3d0f69d5cf4b4b16c707a0e88d637be248112cf19f95924a3a0ec55819da14e05e6ad1737a303bc73dc8adc2d8e1d464df7e16637650310ac2a2e69c6e4c772868aa2055e3e845ad054ff417b6ba802a5e343373f83a0c1fd44d487ca6efbad5eeb8579a8ffa8ccb8f627dd4a89d9ba9bd5a408a0a78d2ec2903e3513e7b53f71a801a6d16788d14f4b7f77f4d533c9e9c38adedc2a4553155c1a3e685cae0f22342ab338798c07ae48128d4159f7c44872276892ecfa7dc842a00f1f5f5f19093e564f0c1e978c91fed02b17af70c4382f628d2e5d31dbd1b508d4b8b6f4d3c35e9e4f8c012d8ea16960d7dde26b89013a8dc4f656bb75dc3a139b83d79b6e927aef1cafd8a4369a3927effa70c63ca2d44f6d84d2efa60c2a7ac0a4d22e0ad4b25fd71c1a0c02a816218c503fd8f38c4a8e3ebf42e0dc3dda309e3e298d9199c0c4ceb51fe502483e2cef4bd4538d36162537e783e5ea49a316c4db709b9d005cf2270c393622fa4b93a3fb2c80ac793e4152ce6655322e394aeb38fedaa5a70b7a2c6117efe05eb3da2e21300ba5e07aad48e2ca0e2d12418dd4ec93c1ab2c1ef45f424fc7b38fad5d6641bb011a1990c360a3702ecc8f7b4f4f7e432befa35533fda69fd508780dba81f77f5adaef42d1b7f926afe39e07749f61c7ec4107bd5910bdc0e08f369e57678a7410064864938c1d25903d5a7b847bf45a6516d2bd8364a8120d61e5299e6811c7a2f501c65d3b435cc5045ffb78379c74810bf0f7378435c81f7910945571169a7d05770cb717b9a73fe1a873635c86eff793502ee662199a19f6315cad4155cf3e45f9d2ef99129bbe0d2ce6e226c260976d25b99333ebd0fb1e93f3fba2d9ce48fc7d4833df2d4411a32cb05649353e0714618b275761cf887223448c2d95adba3d02e46e375df0bcf327fb7514704b9e8ea5040c8c02a2e0de0dd46dafc1a46cab1b04463ff696b572475c2669c4381a53761a570e1316fc1124e37ef4619d710b197bc02a662f9ebf496140ff3b6b1217274935e4890721efa16584fb8513ed2c475fb21364b83076f1bf886defa8a6db215704742a49b77795996975926a13f49bba7f2a5031c643e739cc82aab65cffaca82229e3626be968a3f2507e296d201e7fc74868a1ff1ff581abae38bf8bd4485deaeaf1db495749a1847017a976bb9094eb97c9f062a188282490cc09cbab6afc0ff93db80b97ef08fa898f5232f426f628e2ab0da670e254e1de67d5f1a71f478f23b4e48fcc0e30897b8d544176356c2596bdc1ee89badab9d748452ef651e6bb29efd8d92c3a133229aa3fb200438f0719f3c3678bbe2dcc57de2b35b6aac128cc7985f9cde612092f9b06f17b8afa9c5a4f19edb7ff67251a24e952a8882bda9bd7b5b5b342e08d6323ee6d765e83ffe41b92f4342496ba1b07f31aef23d52bacbbfcaec5c7eb6445aacf0d1aeb1f8d31419167bc193bc5b90fc66757b40628a53605410898bfed7b8b38a156bbfe35429a3a86904ee0059b3ccc31ab6f9c0de9bef00e99915ac844c45d58fe25c9261689daaf07a137749942e7581053a213036bebd69524d4cb866dd32c863f76bdb54d0885b5039d902e9fc319728a060845ba12a09cf619800e25737e04e4201fadacaf3d8b9b443e87e40973fe9d2c58e0c165be14f8c5f52541f1f592e69b5e51369fdddf935c9592a9bd867bbb808904dd84c9282bffe4e4ac7e7989e38994d01affd3bbb4f5f0a33a0a5d201efe38aa656d9a21d426dc8c6c57c6f358393551f07683458f5d8d7cf25e4d62b8c4b8cbef1a990d40f857843977f40f96cabaeff982c8438c763d263048b460e59de5f8b98e2aa71f7d2c1d96d8628102d8048b161b1520b21ade4b17a2d714f7ab0c1fe0174057abc7441bc55e254f789a772e63393c53e0c91ae0d6222621a0fa37f0ad521ebf2c8a3ac96edb0f4659b5b396a466ecec38e78b801f75a918da80ed042a8125d2d6bdb1a535c414bc0a885e2a212deaca7fd29300cac30207aedcb712fe0584de258ee023d7b0d33cfebd606ab691fda399c1b052e0b1fd0f800dccc81e4e2a8c27a0a7d1fd94eca04cece00038d093a4dbd5b670983c67f9d810d2c29ab0711d169092d4a294840be921ed57afd0e076d44487ca82aa6d85693f50023bd8837baec08478ac36ed3da6b994ff2ef66049975b241b6b87bb4687312c5bb0e7333063ad031045cc5b0cd76e131f23c01a05d9b3473b01d651c4d74573e85b2dd3b2f433712f6782b55df0d6fad51ff55ecde02591df06410e237a3c5175803e415b5c1976b6c4fc27e22ca3eac9b3d84fba3951a3df5a5b89352cc7a5221cfaa89ebc2bdad697f63fe907ac2bca37b288fb705da34e5a9239ed822aa47a1483d3a9899d10c8037ca3bb856d558b6691a790d42cf04b2974526d381a111da1262c6a4855cd259a54ccb856d4ed52e988f1a047316a4104fadcc8254913a452cd28ab86a3e34bc17dfb39aa9f682b4e15e5e035f0bb401db49d645020c5f23eacc44eaeb6250831c1abac280f9245fca2d4571ab3d9a6bd09af83a6d2918570ca455b2a7f8a4d664ae5e5d53321f39613fbbdd4fee3016ec33a01b87dc6b96e3539ae1b4248333169d64ce3d1f2290711ff633f9fb651f1f622e46d9633b94231861c159fe7f850c1f7278e687884da11dc4331bbacfbe1fbcdc5ffb9e16224c8b548521f860b186b01f033f21cc785feacdf275e38fcf3aef30d4bd4f9f9555d9074f8c469f9656af0079683abb8f291fd64b92633fa032ac5c8cbb90fb9d26d0a359e1a758dbff881bb4a86eec5548b0f297adc1e52796a8644885fd3bf843f192197c5bb8ae9039ee3534988bfb61f9cf05375eeed8c4ef6bab27dcc4e72d2c07fe3030fed9050f558564f4932c9e835f6475fd1490413f7972c6db18f5a1b0c5219017a8bf1ca780d446f78ad247227a4c923c4135a96f41e2b29b37d65718aa83efb1185237973d137f473015da6ca5f840ff422307eef5b91a1f3f2440ec79743bd140b7c434f5a111d8fcccc7b5063787294b7dbc648eed8b0d974d8aaa2da599943404c009c2aff45df13ee9546d039df0c65cf13f701fc42d131e53c8f3b4c7c59935be6dede46afe029fa5dd1fd413f173fecd35a0fd6b7ae2278e05fcea58c7486796542dc4e25d67f274392ed3bb3ff5da42d0bb6b549d640853abc18434d187568d2ea498324c92992165a257f7a1d726760e004180ab37bad803cc2619263127bb7b099c7f11c98ab222e41d6168b8247eeb249e075816a479492fe6971b743ffb6f9460cf27daf516d04dcbaf193503b0c48000b8ba86cf70646f1a680616dc95dd739975361e48aa7d2cd43e486cfc7b8175e7b2f5f251bb226ce684e293160cb4f0f88d1d3793996726772b9b70c4d0030084511a6f9d508a2c25210f48f7a7dfc22c7350e592cc09afa1c8316c1b05afc4a9954abfd4f5d3b6e9ef91a25f98111607b5c7ace90ad5c374c245ada1a1d4f7e1698679f1cbab6b2d9a8385e776fbf1b6cd87119f7776ac0a06bcdcbe8dd695d74328d253f88ddf89457d12a06c175e2d098ac3f7186b3839ab0ed6ed366c1cdf47b8771fd2cbb40fe2d70578df329b5e69b34d42acfff9a6dc68952fea09f3cc6a07cdd339ad3c50c4ea96273dbf3f461df29ba98c8675b42ef9e2cb7ed3c83da6bc284ffd46f73352173a6285478f8d3a4786c9b3086fb102f0caab12696d880c25ecab56a2b9217848ffff43720b69a10b5799cc9a298bd955671df759de7da208abaac4ed8cbb749631a78e4e7f4e10377e393969015f14a40d4048b234d5c49ca0ba3a7e3766ebd366928e9a50c924f066d794d27fd36700507e4d9cc9ef1a42f7c1735cb6adfdbcc4f5cf63ed1ea2f6989a77932fedfbcd206914324ac1258a8e35bbfe519e0bc15cc9a6a7b2d155f186069f159f456096f944e763278449561dbf7d7e963d66aa39259df7f1c60030da318cdcae13f6c9b01d9ed50bff3fdcd0ede336c58d6ccb581fe535e5079ad8ad219734454d3eebced471424bad447cfc5943d0d09cc7d9e66120767e843d9fb200b6d8ebc4ebe3d314cb948a5a897d4caf23f5523fe8986cbf20b0f77d45582ae10e72e8607d8e21c52733f93737e57506a881d36c776e59780891b1023c6838e1496add0b68bbc0593e6bed0dbba391d9f63abe9a8be9fafeab858a202337980a44e2b179195f9824225620e863ca3e0eea7906d0427ad924f4225853ef5b56c0b3f11a7a11ae6dc6ebef8c23da29c1c495e977907c64779f9b31ba99a454194614fa33101d6bd561e74f9e9149f66c6cb426f680c19174b85edfa214ac2473751d7232f7796399d43261d57c93b31bf544b47f6f8e089600c85ee84bf85ae8428ef50351d9950005b366c678e484536ea18510f989627ffadef069f86c5aa38b8986ae5181ad189baa1141bf69b2c824897450e4613c2594b0ba4e25431aa4ca2ec251542787b33cdd021e5f1fc6fe08da5aaf52342f3b0d763d415bed6a77cab1a21a0f5923864d8b9759936ae486e3c3262d6de917c7ae51afb39ea80abb81394b86afa7e0da335ac290bdb9c5f40aaf4dd25510834bd092b987e2a35ec843514d822edbfd9b382dde2059002af7f42e24814b92bcf31a66ce9b7fdb143602b623148909de01c07333084e1870d85d62474b4c1a4e1f820725436b3971249ea336ee84fb3d4bc49f08b31b913803119f8e2f0408e04a863d5372b2ddf2d6cdc58a080db3a1e0ad300fd81eb5eb63de228220e7eb1fe78ebd565be779f3e8ee1aa3f556e1c6641aacbf081360b82782a0da18442e5b857f57bddf3fdf0ab6646be36904ee54f9471b384242e570c35c80b4d343545fcbada6f7efc5001f4bf6b392ca677fa8d8ce1b1d235eacb4923c45db5234dc2242744858595b29641e8cd856256f7bfffa8bc0d278678fcd442ada2dc481da6c124440d27856faa97cc162bad2decd1e118838ee5eec7eb2630365027e92be5505256bda9c6ab11f4b388ec9668c89425afbcc93cdf5adccd17288c4c6e87ed4d8e8885cd39239742d516082a79f4ad28e0ceee6f136a9f89770bdf27f5fb4208a6431876bb8c06700cc9da2c25eefeea488f277477af51ee616cbf40345fc1f73e574cf23b7e55b471d112f4a1d400b0af591f620ac430bbfa45df72291e668b521f2fad4861478e7ad0b0617d23823936e82382180ad648f60e93edb9ca0c4b21a6e743be844b6a6492f5da2e83f5cbfe4b2bf3391c0eabc9a0b7d4db2ee5060e99a87d09562c3060f728dac43d04405c26e81e48c6418dc44c038e1acd7d217a4ff04c128da2627c17fe1681aa1c4279147a647708e60819f0e2755adfb7cf12f9f0696355226378f384e8046bf944f4690a1f9e8321ac22acbd4eff5761fe6faa6509d691dcd0b5e618410a11b125706acd7c450f5fab74caff3108ddc1c96be35ec268a308299aa41055cc5073e6db7571ad4dc3148795dd4b64d6918b9eedc2a85e6084582c84762b4a6a7125b220d769e34079209554959360a8c319da86f403904c31ea1b2c1a75f2e4a35e65d5c87510843e7dcadcaa1a3bf6634e25ce16091c10ab05ee8f19c8588ba30c96135f6b8542169ebe8d6dfb3b3bdd426210da8a0d4a953582a3507be06237198227d07713af4378320f10d90d4fc5f7a7de2f30402988548e165e0e9309d1f3d9b6d680b20c351a7297260ba8c4bd12e4ddaaf8304e51fc563020e9543646411d0a7af276066565912f46e3c512b575e3c1904960e935d55f210242022dd6c1a0d2ea845d2b15134ebeb7a3fb544f024bc59e6ffe5e73d4e9aee4f17a25c69ba9966f54d7cc85afd9743e9c0be584a07794e50d0f0e273141246cd96c88895897a522c56f57c4ed0c50e18aed1fd8f8668211a3e9ee981a66ba99d7a842061617404d1a4d8aa63b398a5bc6a651567d7a69060c1ba9bbf265fc39ef6cd6faf9f5660eddc6947aa2e0f32c14308da169ef445f0e2bb2b1695a5411d311c8befa7b8d40550165ddebdcc8e8ee271d8f1df932768a9d4fa291ac2d71dfbac52887e449ab3f1763306e14683bac3c3a8b95b1a45c80bab9bdd8aac09b4ff596b7cf718950c493ef9de050954f22833a1284dc20d1e45f9287b1b292bd280a6fa33ae9ba91d17713005be3ec54cd148b8c3fe32b1dd2b318dea5bdf44448fbaee750cf6d2ac00a73211925efd339b958071d22974647e01ec9a0a9f6fb89ce84fb4ea8716676910423d03252082dead6c3ade3136ff678cf6ed688473bab2aa0c24de8ab3e3d5ee6950e64707381f6771dacc3089418f9e7b365702456cc5ab21c4e6858a9d18a91ffe3cfe439ffc58b56f1dd0f4007686907ae430de2aff6e0370f09a902e81ab663556d42938d1fce2c42a9b1b9b20805e86ddcf598bef8bf32a65f7cad7126e7dff5e81fc8b2b032426c89b9bdb557e4d19ef4eca4f3e03a4b1e609b22cb542c8216a76a96d8b902e94d547d5b1de79554453c140f2a3a3f48482b8712dd1164e002fcfd23ec8326ab3d40461de7cf0432e67962187d055031019c91e0826e7e6548c752def42b33e3ff1f526ff0a0da22cb7a14dd6d9b3dcf060a7873b1ca6ab43b3af612d845a6a80c16af79ceedf66c580eaef8842dd9c02b89e1d7fbd84995b43ee7112132c16f8f7814c582d66a5f50138ee5c49a6ddcaaf6d7339d44d51de8db7c9396b4308926aad991194bac7601c3e2a49c5eb29b8d6856d865a08c1988b631ff4d1f1cc06171564e010ca971a76d335032e87a7020ab3ddb63060ae516a260f887280644a80466b6a0e4940c934f569d35d6c95e070d24617c56b896cd1f64793aa91651463c8b74ba17c991b66f52c31964d65549d7c4a7f4fe3a5c5227d4efbfc16e2bac9f42718945770f7ffcaa8f7265f6f4b0411b1fb8a99a70c4207c47f65fa2d9558362e6823e85ae702642e0082a59293e078c3df7aad44c148eb9a1d17d6be5def25099d58016373dd74e0ee7d0f3c5294f649ee00b6ce2afad8ae9d3a4afa402c912cdef68606339934cc458260628dc535e46aa5cc340acad369c1b22660b49d48266768174823efcccd318812d757f52174af3e91987980bdb1d9e6b0fd27cd2ae1b2ab6cbd2f03c5e42874345a0bec902af1f352f17b51a9a0cbcabed51c21fce6fb55d479a063db56a83c6bc96dc49a7ed509b9601299d4f7caa594ee5b854885c9d6bf2d58a5d1ff590bc6a530451395f83dfcf5876be3203556e14a8c3fb15df55bbac9e37259636eace3efe9efbae7a40480c14d9f0d9f6042d87735e13e36e9b7da6036e9dc9d2bb5e2cec2a072667978bb4fbd5283076654748236c8c6f47226e39b3ea6eeedecc5a9eb285a79515263cc5b40183664cf879f9fa2e7bb82cc7b5ce124c1007ebfe433d3e4d0545d12b96523c974fa4cf3308a4d60df2a52239a29cdf253685f68bb9613be182abae0599df9ed65682525ce61fa1d498126794242a6694584935ce70f5e4de668bd539ebd0eabdc1bfa5ff07076420ca30513b3b171962f227b3ebe59be44b6753a9257198b5b5a3903d4424d85f7a6123695524269276b1cb85a66629a7497036753e17d1320526da50da45933a10f4311e4edd133336f6395fa03185b229e725a7e160d60953c8fa35f4a32f726bcf13c6ddd5b318a1670606784909cbfb307c24323847c8257b0feb2f1616edf4121eb2a2995cbd1ffdd9f9ba4f3bdefa8f9cb64166d623cb2e16e2da0403b860a7046827b3e2483cf795830fe844c7fa395241c926ee2345eddb056fa6b5fed0b17a82395cd86ab0338d9a07e6816e5627c9ca8aebc2883c41b72093de252402dcac8391eef6c95afb4066dab2535521db2509feb39ecde8d66d7adf0e1c27d15d54d20ce58ea391758bc3228eab283cccb4e73e676d95008333fb0186caa3e62813da18d372d28206f74578f2d95d7d8c476e45a629f7511756b9a664858e7afa5e5891d9fc9b271539eef37e1a2ad34d926ada40c09ce902da386439db252230f6b45fc79a45609fcc52e582549bc02ac2b62f1f843df6f3393be4a08ba319436ed85db0d0a812e9fc513e810db12a6900ebc51eabaed0d94428999260021a5df398625dd6311b6ddb500b52c6b76579856f1a3f515487fc302a4f33e00c67edb7d1a8cb65881c6f102789b50c881add8df3112b28d5a249d0ad9936915f3de305ba5dc67a29265ad29086d0e02c7f8f841dfcb9ab44a808acf4a1c6c99c838e0486841255bea93dc6ece976625b1d791b7d6e76fac4ccc8300120e16c82e6c5c3b1a9654a6bc86ae47f122bd5c8a4d6a03171ff357495b4a987b106bce7432932cce39a4427d9c37373343af9c9bd082ca0c1e59a1047c9a0b08949b608656a9f936e4a6ec64ba57d927aa3b1d511c11c0ede4f6c75b468dde53955229567f1622e86c0804a403f521db323fbab7aeca7d67b4771de425b0527a5199fa8b9318cb0921b9f89076d5543d6c3ba4225c9738e9617f242d487699feb9a3497889fd0414a83688056e6badb6433446ab8068a7207730e02fb6db8c4b209e639f99fd538fc887b0bbdb180604e0b9811965fd068edddb11e4f602fc6e2d01642a7e05c42869782cd9e3ad8a8767e09826ced40d4bbfd2c6dcf580751ba76dadca82b6c4a2b7d6019edc07be029e66b5a22a2f816c7da04dfaaf19e920dfdcc432ccba05cebf4f8b06289aa8581835e5cd14f5dcdff2a65aef9c88f022d4a7450fc24904cff9223f4305e9ef4281ce29f720d33b8e7a4de2f1e93d3a724cc27c0b21ecaff8bdf07fa6bbd301d5a02ed4baa2d2ca18f4b9a1fde3188bb05a2a0b75a51abc26c85aacf3f5049d8946a06e6125b5f2d62783582517f34215875458360dd194c20aa71afa5f9aa4e4b41c9f7b2e50cb808826da6047a7e3bd457e14dd00bca3db2e1af3eb619ab24c85ddaec73ba892bb8a1e2b48c9c37d69a6f48b09669e30fdf7f6e13b9c81abb835f4e44247df79bb2c2f8d9dd0008af44a55e3574ed7f910c08f78c95ec333ee99edf7dc42798439775f56f9c5725d23e9277b6a14519053cb67d9b55abef3fddd6ff32ab71478f4bca491b15073098bb0e1112ed7e776468fdd4b2177ee861c7d634e7967292f39ab3e7eeea81c341955ec67ee3bfdba8737b527de5d52dc635275389d59650e7e3fc68115f20dfd3db9dc11c61999ac63a8e346a5a1303e091d5784bbb1428fd5f750f03f09d1418d7db83fd0e04bc18d377ceb3242e32fa1825da81b628d65794f0e65268e234ccecbd6cb644ac0d04a3aead738962aa6118a013cb50e98bdc5c98da869d361e196ef4ec777de3a7b3d4136cf36ad07acb54dfb38472a91e6f9a8ab26df0fc719a494d253070457562e06c12f400316d1bd135f86a78eefce262d0160a28ba972eff894991a7d02cb98e5c1b7a24c020d03f72b4b3f7429af6cb652b6c4f43fdbc61df98737d242d3e585994fa4ba9204c6440c7d8b9f71963bd1154fc85b666c3d82a93373522208fd75773b5e686ddcd49c9652b44d50d6102717e91fb37b74d934b981e6bdb77ce48f3b91d4aed6caa5d0595784321f3387ad860c6b14db45095f242ca2cd3a2aaf66b47a35c089b9f83301e88ee68a3a33e3dc2b4e40a49ce5150a0a8b3dda3e1a756762092d943f0fdd827eb209309ffa3e7be456895ab579a151c6b451435e0dcb758874f700763911160df26f25384f075b4924ede50e42b323160358b398fbb3ef6207ec0f56082e82cce44718efb64c8146d8d0196dad6615d9374c7c6632be245d8f36372f25d0e065ff8d933d034cb4255ecf38916d27974ec3a7882391b72367a66af62df2e28ea597b89246940cc08aaf8ac34fd9533e736311937d853ecfe4cf5771ee05e95c386fdb78598a2324213a856b3d44aa9837323e75fc9d7488ac69e318b1490a38e2bdaea8e820ef4475e8076692408fbe24792e84b83edfbacdf28b821d1c3ad0a28a5931b8c63df18eb0417a74fdff35e5e8f9c3e5e894156966487fe8bcbf7430f0a9b354455a3ea1c48de13e2cae9110a1940c0fd199f8d6b89b5fc931a618c5143426c81a2f23a44ede6c6a673873b20d95f1deae3c47102cf6ba9cf69334c47cb606dba13a6eec92a960cf38d693fac70dfd511867513661d1aa3db3ef4a38526a612769bedf00146db5240705b67915a25c9db31486f57d3205a0a14f434cc6d2936c24a578dd433c64f19d4892a07e87340083e6b486c40a75dd089200e988e691cae9e88ac6ddab402956a3f8b20e2650986434c1f3f0f3f568cbf1de1d58ba33693b1fbfc8010ac93f5c1d27a6c06859b89794f2db519f65fd5805a4c121816b63db5c5f1ed1e9436466d5a4047655bed902cc7e7caf9977401121610fb777b3011ae51ef463a87fcf24367537d6bdc558b61a4a98f9d788692cf79e96132d742e449c6fb02d97fa97ddd70406057308b87f593f0d3282fd04e32b2191c12daff2f7b783e55ef1e294fa18bbd8a451a3b087374f05776031ff40a5e971adb1fd3e3a6b864513648cc2f0ef4c2fa7882fd8fc85742ace4886f7fd61ab3116e2ca6ed473006d73950d5cb9e1cb3c8fc98416e2ca85da4fada6b3052303641936d090f59c3d660a320b5615e0c3b4a5e223d2b83e8c74d301a6de275f0fc825343c8792068bf622783835ec973d57f59f18233acfbb596a00e09a337aa852fb34d59cf158c1f796f95abd6fbc1d36ebf1a020ebfe60bdad5914b9b9cac341e8b66f84b36165e85a94bb7b0652977d78c2114c54b8a09f9708652640237f849c9fb06226985200f03ca3467306b826a8e16d459f0065099cad86d07eed11020b4912c166518e6fa1cc84c92e01e934a450fbe471af48fe06f737144a8c34110f6c07a9726f130a36e8c5457863ca5a9a1a598db2bf174451c52815668ee1aff99227211aa4fc6b568d21cfbef83ea2df51c71af5503744de4c317cd76a218abc7066c0fff88ea7846e9784c625382d0938d17fcdc2639b024be232548f03d120da4c6185686a91379912b0a3b9b885cd06fda9e1a328496ae47a9168e7feca0ad521c93dd1a197ae9d90215304bc0d0574536eedc974a1c36dd65172de574a56fdec93e6c6ecfa1683b0d36a181b407cbd7ad2c891359cccc5098ad6e1fbf6e9d5eebf4c2898da6c594e6b57319cc747c71a8fb9aab8c838bc67eb1e28716f4fd464e2e73b73376241608dc699557426c8724a0e555ed50970983415deb93620155d2c25735da753d31e97f2b9b0613648cd8192ea657c4831120fd1f486664b22626a1406f2a6a3b02a13f684422161c67e1ef50af34b3bb3dace49eae7948aa145c95b2e1a0326c062f0a197ae00c94c72eb46ef5ec2845a95e536d2a4b8fafe9af18a4eb25f67ddf056572893f1a81db319d7452a02284a926e3473019ed48bd6c604d5cfec3dbb31de107e8739ab8a51eff2214f13e35bbff143f7f99779d11b709a0219b76b5d13569354d7bd832d8c5e1f5add3a692e2cc95252c702284733242afe9d3578688ea4425c9ce93cd10f7ad3468715665d4315e187b037b97f93bedf17eabe61ca23b0209eb94dcaf74354db87c8a5d343c2c0db59f70a287f39c9cc01073c935596424ae9f98884e6ff2de60fc9f4d5f63d14847c53d34cbe1e311f295d5e4a822ab5d32f7cf603bfcf2a1fdf587580ec5a1217d3a86d2e08c83633c1ac5e4c4c0780617c75c666fe18b16070274d9310b4de71ab78cc6858215fbe9abc9cd75bf5e989703a8d667c28c9777f5e6ad660c9557979c07c569939bd8728bdbc573ec57069f720a49d662f311bbf1b76a90eddb628e804fd94e040ddf0241dbf6c5bcec5fb154532968847085543bd26f52b77a9da371c44fb19c052d5bc97dbcbfe2db1344c7ca0dea1c32f1042c99c949868f59b1f3a25b171fc3f542e888abb1bbf051229e60b7dd164a02a96b4b088370d17a6b3eeae66e71fc2c55a20776f09d4398fb2a6204bbe5d9f352d3abff725bafc66c0387f4f6bf8d510f1d26f7b1ef2f9c9feca843f94f4589494acdb37f6e5439fb488616d2a3399f3e057600efe359b1c9c2e74c6a270f7b1d66a15f60f1754fb1a4b55a37117c1a8548e62e305dc49fccf69c94762884c47771b3b874feef6d3e9eb6178dd034ef99fa7f50feebe0bfe3057da6ebd806adccb35cf07a2a6219d8543208038958dd37be0e52941d0a6c1f7bd2b12e623d85fa6e7e1f7ee73cea8021f864959df4a9e8ffb24ac90ebcc127afea7fbe066d044845c9b89a0d49b37fb96ff68f7dc4dbc3312ebb94e7f4fe8e7e1b455afe527837a86f84d2eb0e30de02bd76c310f1b104f613162515d53731087fd6d46cc05344a92b85c374a9a630fc9ee881ad8873827c3da65a98c82aee8a9b03416d1cca41246f37a0f213e0d69025bc8fc23e011609659ce94d433fccc94b855db2b377666d2af590bdded3b0c45929d5cd76590ff186fbf2595e31afa7dc08498d84c65b9177d399663d46f9614492711a1dcad00546012f310ae853d90d7882c8359392f19f32ceeaea74a9ae8105bd9a48137756e5e6f2b935a282fe47028c3c1e3b1e6c9727c7b40906c2920a58491b0b234cf6a89ef93b359acaba5f59d0494e74ead1c8688044be4feeef00b23c44a540e0179c90f423466cd1eb62ec72b56b767404eea3448f0557ac89c4426ee6cb0db4d4f8158e58ce2c76eb8a09050da369e7aee37d0c2414c9a1783c5b9ef5e791658182d66d2d948ab83ad54c996c061995ab789b8c06a5efea096b2181697adfd3a7006eca052b6012c79247bf7660bfbac54aa7788478eea66d7279ed02085e619d292eeb9b73f06f5beeced5d5a1262e889faef23174060408baa5a99f7935be90cfb2be25f840ef111dd379c97c1a4e4469cab5ccf5139ba8f30a2a6519cd78f41b7648cc6571d7655897296e6f428720825fbcd24c0f90abc08e9fed59b1e919718c573e51f5ec9c31ee591d339dfad6a7e42f3c1d700ad25377fbd7da175a303355acf7775bbfc634a2fc3166cc749cdae43f42c8e959a35658762cc77f5a1a4c192c6d836853fbbce7639a06400c05c3cf0a3b45bdd56345fdcb7b7deb4930ab7b620bb49173fb043afef6dd366ad8c61103c42d15936c8be5be2e980e1475242fca17f41ee05b1371153a6db828aca0d2f93c6e0420d7145378a3654b2284f600f739b00df1fae1b044a595e91d46099d2bbc56cb656b8bf4609e94f3f777bdadfcb05f06d86c95198233d23fd72baa229e63cb7e80c60374cc29d66d04b0ae439fece593f038e2233c1710ad21316b3f150c438cc67fe70b699d77cd854c189ef9c29ade6ab7dfd7d7bbe4ce21ecd054561722994fa71ce981531e39c3c62eb41e3d10875ca4ec22e5d6f06c0e837383216a638141b4411049bea4fcd934e0d9a194917e0b33d79f40755211eb1af3ddcc8c7082dac620057840e04baf6de28264490678e472e5566b6c83c526f48bf8d533f40e17496beff410e31c3198443629ba67e1eb07b760c5e863dd802cb500a0fa29f34dfd39b55cc07b4644f0a9e108e8e344b69f9885f489abce8ecf0a2d696cc313ea0b0b8ecefaa11820ce80b27a28b26cbcaa6d3505faa145d208ad876fe149398ea230f549f257adc30163ef670e1f962a8d866b1c3ba285490b3aab142417df3337e389c9df78ae7d2eee748acc5923788f785c190f76de237dbdade68f758127875500ca390ae182a0fb4e8eb0584404532daf2856a8585d5b331ac8f894794c9a82e38b9c3ecf1d5bd4433d64d6fbd0e9bcfc8572523aa7fc46d69dcb0048cf97315f54bc9e8ffc28e546e49f0c61a9eb8632a99140199dd2d8433e925601fd8e9cb6324d2084f766c32a2173720ebb29c35990c8691e3a11aa4f9e3e498d0b85cd6a616ab5809f9f960e973ceb8be61836dc02cd6a123c8fbb64cfd1ae82cbf087ce3ac30b600df43698820946537319cd2d02c475b4611277659f0710ea56579ced17fed292474bb1efad6526ef7a6f51ee24f80896ec34b1420f5a3203e66f9b370a10e23eb50282f81d2e00656f45e173f29f37835f6340c93f73c85c69b1b8ed6be763bcc85a2b61674cedf47dd66e4effa095a879a5f8886180363385996425dae9e5043e1246a5eb01d4c90d16d06842c4eca87bf42777e7428a025e0b3916b00fce112e088230adbad747a4c090890b598688c6b3167f95d2ac39b476dd83bdb86680b8043591e9bd28ad833954b9824af091df3854ca76cc0a5493840f62143406ed9117bb13989059941cbdcc7ca0aa59309d220868a08c6d524f92564f91ed5ef0bc80acd2f79a6cd89d291a4b20fa51b070637284ef0288aefb3211e0257aaf50fddc77ede9534eb57e7e93dae7e961c75b1bb05992e40a8d235e33ada0519643fce4bc3a093e4c20e3834b54389ea936bc08d06dbcf74d306b90eac6a6caa97d5480e042a8577b6d11718b90e5ec9465af229486983141f918d1909c9df7b95f3c048b3b6efc702882224cfc155536bbcbfba9448f6eac1a04ae826dd7f42f5cfcf3556d291a3c787b0497933579336edccaad7933d33fe5cf8e5cde72374e14b271758f13a96faadfc267e1e21d4a354127ff5c7595fdd3887556ec758016b0c5a0468b551cc3c84204e77ea617a06bbd39bab4ff6bd0f7091bf7a50dad0deded2673d96da70cbcb56cae47cd8e6dea5e25cd58768d948c5749869f43d349b95e81320483c","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"3b65e88fb4aad2a4dfb95b4861d2091a"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
