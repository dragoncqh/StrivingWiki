<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"5ff14ad796f2a25a89d05fe6b67184804aebe0228cc5502da7ab07e822bddf9864cd902d845514b876da7946fca9012e6bac3f9ade1e325ba8a7d86e658ad8365b47086361c864c22e4f057b91073574d9249e42db2b1f901f6be13f9e57126ceef83c402c6eed12231f86f93cdc7d266df3bddf2d27616dd39ca8ade55606eaa8ab4c545a337f97972917975fb9592a0fb725a179bfc1346e37b84272e63e6e9df95ac2e024b91d844b89995cdbd281401ff7d962a6609de97d8ab0bf693ed555b0e7dd6e2f17dda160c4e28ba13f3da16e3e8d8791db518110e8bb158bcab17a8954373dadbc5a22fbf95945085e3f836c8a22f17344839ff990b151924f6c884347d654556bdcd797d4b03510272aed85677ef92cda09c0fd8339bd1bf75a9aa06914526088beb2a3cc7a95ce53c26e2c962fabd90d4bec329548aff1235d7dc9222c2123cada1b401d8aa91aef7552f65a199820fb5269c980c39ef12c87d79272337d88940d8d787819f0a8a08bdf77d3e137f39f1fecb0a5d24590fac4a52e601ef1230299676023697c99801e29e7fed834f0e10313071219a5c7cf591be10240fedbce732eff9da18e7a1db7899d8a53c44f8c516dda70d518b0903f834052a8d3312b945fd75353cd95e47eb0582803cb17a02c7c55e5bfd31643538446e01f4b0ede634e5876f1d31a0d3073d9cab0b85345fc803d270f2a31d03af2f3acacc80a2c0a4802e8b619ceeb9b407d378a0382abe0b881123cc89ed9166acc89fc3c0856c9b2da48c0fdc81796432bf6031463df7b25631ff848eaff4167a982373c948ad8bbd53983f6927714b15bacbf7e125e513e97700767d4e45684ab49d837fa6355ad18d394ee960cc85f4837682f7d4beacc5b29b0166c72295365851f94917c74f5d258bf017bd1f4de2d10cb9e452514e171e1503b29b1d6f45baad6f4b6a1ce8f2171dc09825f561bcb57b60b3565ea5985bfc940d07f930d741f2ef1873ef695e2e8222fc491c2915b1d7ca90d5603f74f6756dbdb79207ba3d82bdfbeedd68834c47b0b4f0568717d2ca251d97febc7c528ed885a0934c469ed1a06ec461f0cc5778aa4ecca4fd031976c57cd7b51dcaef4b0ff907aba97f7fc4bda880ed95599dad75c17ae4b64d94be3c0582c79907d25442d1bc7279bd27aea19355cdd517b5aa1f561d1c74f3a79011174df56d376682821eb3c334f51ece299e23ac4ade62a157cfc573f23f07b2c9c2a9a44c0541d4d28cc3c4b2b0348f5d71dfb4fdcfcdf916d8e53d229e4dc0a944441e7f9477fe051ab09faba8f9f50d277f73df02bf43b506daa92fbfa813ec84728ed483b8b00ba4d0e6102ffa1b1d07363d8a1e3ec99173c9454edc10b967073a3f37516974084881baf4be2c3ecf80c17284b06e9a4e58fdf5c547924668e754aeb0a06fc85a90170045d13261b7fddcc24df47c1d440002f0d501b82b4af2e9f1663f44e5c616436fc8120ac350150a5d8c835466a281b68a496b18ff5d0ef6f2898b9e5949fb569c92175eeb60ad8eee6a12e38d5e38cd1ff94c9adac483da06f2ea8d6cf6fd73c66834207655e455d7856f4b04f270e6c8df7598c1c5d6486b603bf8e8b858d9f0c3455b4f3de99e0a352ab2ef47c92dd5f0d520e3e83f6d55f250c02f94834b25958c6e1f50756d9226e547d490b00533c09d12f3b103609c7ff09d23c45a1029e6f1e558aa8b36aa3fd253338b61006eafff505fdb26f05a71d95dd06d625eb2867f753e8ac2aa3d35e9f489e32b84148ce474f4ddea36bd15c2d1461ebe92bbf353937b0331a04caa34cd8673b802215c0c2f82a44c08aa9af2c0258347e454616d5b4f5b612793b605e760ce40b0c3df07476d75f3e9feb37d6d102cba428b1d3c6747d11d55aec891b6d21ac7c93e43959aa30feed7afa39b8cd0dce0d03da7855aa2144bbfee936d2ac314ba8c40fa7ff4aa4cd10c77b90af4ae59c2506c8d1e21646f4afb7b7eaee295871d1b87a82dfa7e2a2273a21f3c7fbdf20211a0c3668e37242838d80ad4d6fb191260dd5b9a8772c5512f6e17331a6fb2a8b74342b4152d0ede1a35f268940ac3c03a3952adea87e4a348e82d41d3473e2f2c8a8279ce8b54b2fc2dd1a16219eb6b661d00a0e4e4be353f2ece70b14ab98ddc52f2353748ba466ba838abc7ec805125fc90c37cc6aa18e59dfacb16c0a8343f292156eb06a70425fb824739de85015758e59d61cc6ebc3035e02e1bfbbe31768ff9fa9d3b154b12769663f3fdd24310981cf85e0174d2689b36c9cfb3322a6bddcfc3d1f8022b00f3dd501eb2b5b456ce10c0f41e972e4ddc1417f5c6538a301b739606bb9eb31d2f1d7c9d687175cce49ac9efb0b6ddd6471fb105227104b6a811b4bc0f7533686d60c50b8045de16f16a352d7a6626424cdac47036f7ef654962141bdb8e3cf71e466e7bc9fee3b4c7d836b5b66ea2a6066d13790ff583b8144795f50347a02daf7d2eae369e3a7f32451b84298373c9c31ee98b9d2d83f6c7644eb096fc2fa14b91da42992194f24ef07c135ce980a9860279a09b0ec3f3bd07f04bdef6b2c11e4aca828bf1a7d29694006bbe7173d9bab16bd007c2ee75c1234a66c2716115dee3e195d225cadb32936b34ea58437df51274583faf709c42464a986898ad49ab29cbe769162d09e0a8a6a0e1dbf094d5145c8bcbc22f3e86940a18ec1a86a8ddd8a927e0478c4c32a0002b13fea9fd6dd1ae09d7cee5b0b1ad1c49ff330650745ae51aa209b4421cd4ef7b905f551fdfe65c014eea3eed3295fdf2b47b3cd8b16aa4a8e8d507e0847e8782df0f278737d392d107958b155e50ae8f81f30a4a9c467bf8f9f9861d7b13e73f0d80c7277151d8e3988bc486ebe31913cb2e45719701a7f40d75bdbb00446996412ad04d2480dfdfa71e1d1247a74aa7b537ae6f4f6a2df312d0ba7ea3a884a4337b537e3ee2d66418d466b624448cb285d5d73505775108ce3dd2b7bf46d64e3e7b50409ae59aa4b59b972f991864cf2b80fc7dd66ec1d2ee2785dbc63f16c79ecfc74e24a41e8834baa1fabb1fe7c157c65ab65fd3cf78606d940fc55555178787ccc4ed8e4e9f46c4b2f0cc8a606a3a39a72f13e5e5dbabf54986fd39567354f3613243213c382b72cd0b3b332c0f3ffe40c40c3f82a417126c0d2c7d583e5be394c4a17a0c8f4713cdcb1383e76436516a4be9eba3d7d7002294f7b86a8f1f315aae32ac8aeffaba0b9ed5bfd564078c98207b6aa4b2cc66d1160830b659fbaa985a36103a781179d268f22cf08826ec9c4cebc5e882fc0fa45c8f8667c91cd119cc511d28d0ec2d579ae954d1c78bcb8275c156d25fcd6cce7b7422ba6e605117bc911fc21edf659ccd4e542e26d43f7e47c30161bb863f0f9df5ca8017bf51c77964ac795eaf3a5e73ef37d4530399c29d2b321f462c8d44be3cb12e854621317b5d8be7019a5632ac6cf587d2177d076a126733126296bdffd97544f39a50074a4ffcabefe858887007d071dc311e92d0e8bed23987f56fe48e6acd20b0da4155030bbedd6c78e1d916a1959b67c63325a37e5c159803b10a1da3fb2069b5cb9542e636562583e7d73756ec5c2bfd1d64ffa4e1bb328e463ac1364f71b9e7da02c05e6a2f2a751c78cca2e8f74e2938902d8429e65694b751c9b51ebcaacc1339cc1255bb1bb7257cc75253a63c918c36bf37753a97113dda569312c02bc5ba957f07951f7dab227b7f4e21ed7a824d307b5b3fa515ea9d8c5aa8e9626679fceb92e9bfe1cbc57fd89c9539d9f209d56019912b4a291319a85b8a5175b3d321a825bed675546de4b157d958553c9e4343e72c1cca6fcaa6777e124d8dcbdbf884c62d7fda792b614065668ed3c43515596087c05d4ed5a8e68db5b7e4e39c5c1aa67d2f3f7408c1f8f457e8bdf7827abde9f2515e2cb1e71fdf07ab06a0c008a1b8f8507071f5c2580aa7ea8d1b723f1dcd428090bb35a2cfef122a15a310ffd55824f282e16fce14f08876df94c19186d7e21b2de6f05c034bfaef5567f7035c944fd5efa33b30e391bae018e95725d60aa8e09349e3b06ee4c3c1f91e481640c3103efbe1a02d669035aade5298e6c7b961e88c3dc80a87551bab3404d478aa67e6f9c86e6aaa18e8346775a530db7dafbaa9c45897facf8542331f18753f930bd05717bbbd4d12cd6b3aa02af9e136ceb398141a0e57aa8ebd622b3d7eff3af4257c884f5643bb782a61bff2052599b87922f8695943324bbf54900be2326b9f0230b5178bbfb11385686af629f1c5fb4458b5d4a8bd2d29ae913f34140802f9475f7ee30debe02fb9a38436c6e65500348bacd617096f9b110885e08e61e17419547e0b2275203d1d447fe1bb0e0b10ab55e724232076cc0013aacf40bd1335827502120885c0d94caa7e246899cf78b0656e1d0a65a03991f88488ff4c09420783028dfb3cc2806738bc7403bfff54999bac54ff7b76717a630da193080ad86146623f8d64bea475655d9663b59b0fb9a3750b2f6a2826203aa46a10c5546e388f9ac50eed15abe8c64fc372ddf1221d18082fcfca5391a2651aa321d3129d26c48a45831067220a89d8f1740261ae0778619eb5ee811d88c0dc648995f886a49d97585d3a452b8d9d1d4742af6cf00c20cf081dbda321d9362e28ee67a2190e6f861ba834b713f504243c92979f62f091a6e009646e8dfef9af36f0c5c7471d1e4fd35030f02ff40de66f9661fab52058dadfe2ceb636c9f4e54c9be789fc8a50e08f7cfe434d5507907c55c9c1f1f062548efa717a7cd418e43e4f6e0594f5d8d7251b2deec9cc8419ef6b7005afba17093c181a96d4d31734d8269df90416c52d9bd7075468a87ea4e69faaa8fd1881b7981f3a4cddf92e17530fbca032fd3619d01bd804f60beb97a742bbc70153c3415ec8d6050070728f7f973ca83488905ab2ad4c15ffcfcc75e71c5c65ce10843ce87ade95f6d3b3626264494b5a5cadc4536a08aa09d1612baabd801b301e16cd5584709b5fc9082af580a1158a8e931244b396c914d1a1ecb90841bef93eae72512ef83ad32205003c55b19ed06c23d4f5e113d89916288c75a4a2a150935e6cb0f1c6ab361b289bcba8666c4b1eae4660fb84ff6a19ad94753d671f9277d51b00598f8534c82a4e156bc2f599c8a60c93a3e78b0cfa44c4f9ca2811445617855f5f35a0cf324293719e41519a24c8a2814c3709e8d3ffa348974b3f8a21dac038989d35a4ff2c01ee99e9dc03b61bf8dfe205ffcf8cd2462eafbe07c9374f6af98e8dbf404e55203220c2f787ec9eaf7513f3b01a242128e683a0c108d989826abca7f0b98a544e30c33d683f0a03013b8d97a6f8ac78575fcf6eda0b52a7edaf8046aa58c6943eef711ae1281745b02c341615e4985b710e8818716062ec515d52e0ec858a4893b35d2a08b64dca1849709c32a9f7ed01dd2825dbdf2c17616a8a528cd13b3cabc50bd28fc5966a14378df4afcc45c916ab75c70a3c0cb0c3e62f9a128e2f816ca0059a461f314b5e1b39c063c61d016fa6d1430ecba195159a216bc64890aa2f23e4f62a82b05132f4906fd4a79cacdb2d00e9475f5f23f6eaf13316b4bba1a5f5d32c820d7c5fd73ae9ac15d720890032a5b30e322501278d34a60a9eaac6cc95e84dbe761ea6e67d6eb842fafd1254602bc0e3762e0d2ed2021f52ade431dd5331970ab698aa09b9608a667106f50f91791eb06554e655f08c93c646b1a4586d07a29d96c39a0c048a3d8ddcd482fde9a942aaef05e82bd0fc6cb27b726e93a4522cd0fb2c5a04605a5f32d8a5becd54577db32f750cefc0f5a220646888a6fd37826cd10b6dc1ed62962f7ebf285236502aa781c1dd56f699f338181c84a16599b8bd1f68c803fb45fbf62e66981dce28feabf58b405bd41d93d5d855c727942908c25984650419898069e009c140aa468ba34c9de087c15dba63860486d2e82ba4f518150b941b0e4b657f05120b35c3dd2d588c987dee927d41db918c1d4964cd0d56d8267915acc1fdc1614b852d7a04c2d8f00e0e57b8493201aaa66114ad4a6fbf05b347139cd7073f915532cb094233d52a29b9de55cc7116840b33b4aa6b0ac1fb40a676bb1528467ba53a3888668dabd70f6b1cf46410cd0bc725cebfbc2cafb5c0d16bc1747cf518126f62ac8032951476d05de4f90ed4e7da4b1a61520cf1eeee2bd802b089ce2e15f5a03dce35a31ee1e3ed01347274f257c711e1b8e25c5c317278d8a1f4f505893c9dedfa76fb594da4ff6b9e1a3657e7521a8b161d06949a9c157e2d67fccd31c6e4f0412f7da28072176af9d06c210f2898fd9b1a0422328c255e6c4a97d287a1378a42c743b5a14f56c02d22a03c300b31bae0b6057e65914214c43ba280d386ea59dcb6ec9c1a10d0a98b125cd30bd673751497d73fbad3b6b355fb45c5dc3402b2b1e272f71fa810d6d5f5e0ffd232f6bf497ab3f6fbbbfdc01885ddb4af68b96adb3aea44d82c5874fdf52cee2c44d6d4299566974d59e6c49747dff03612f81eca56a49c31bb4a429aebccf552e788c4835869646f390188780a61e67850742b2d9c553ef2389747b3a2dda3cb1d29c1536fc2c77a2e22e89adcc92a0eb16e6570ceff949a1f777a904ed83a55346d3e3d76b6c0cf294c1685033b47c3201eddd7bd0099c6036a58fbc9d90b666b0b50e6eff0c79235f26171806b4501ac687e796f1b0b5be25553240204ed9d062ffc9104d91fc127ca418d551211861b3cb73308a10213ee69f2d51d8eb3f81879fe259d56a3803611bded2265eca684bc0a389358d31c4b06894eb7379d3bb6f899008dad8862aaff6a45be296b4398e977ae222437911d7bc246e9d8fee3bb3c52b1e65f3928f1edcd27dfe442a740759ead3420d751632bec7e3e36614dbdc85e1f910aa59f628a6499a11e6247e65297cca9e6891c328e0b054cc2a66720a70110345e41185f49db8c512354c55fb35fa658db8cbb89e597da12371bf11800f32f8210a87d6674831c5504013d787bdcbafab89dd70aa42d730c106a26b44a792cdecb40df21f605ef49caf19cc250ce3e032938a7e3c46e5038d676a503a9a1edc596bce17b7d0c18edff4aab9a0af539f591f6df96668fc229311bc7e749bc7af19bb089819d0e6172e6c0233fee4a72c15c22b045219cd821ee92017f1a6af1ceec5a1e60a0cced2c7b8e15abba6dc4723429c5b1e4f491ec2d533d00705be9728c244832b07eb172a0e44ec80a94b79777c484bfd7cef17110b98caaa40918fc61f66becb92eaed6c40d9ae1b9a4ec17862a99004be6feecb1d0a4c81537c2828aeca48c94b3f3cf8a90d3e837af5a96a83e4aef346122657023f33a36efef1395ca26d8d6a6e862d438d016e075b3121721cb2978b725760bbded9894d2c0d9dc3c80cebd8e2b16a3399c4bd4265d627996816265d9732de6fa8b1546fddd1e9ea30233782a977a972416be1c7c0d52b96ec17f7bb51403930d9361a4ece6d4c7cb56aecac3ce06b3f1867e99481b139b629251a1e49370b00e635b53791f0746f997e3f5aba8a4901801a83ecab419d96a97194b89566082dda161336b5dd09f5b2bbec4bfa10f49de6d789cf8f34722749d6a368fa4d0b69bbce376688f6a7bdb1386270bf831473e461082f56672b113e546e5307452589960fd100f4faa7d6b9fb57def8a37c5863162913700f1fdbc6c7d79cd0ee9d05258d196fa3061b56735c77f159d24570d70d55c08654fbe5e0bd8fd48eca74f87637320e9650a16f0e20c29c5dad582c8eb3e5dc948fe2f2c4306ce1ca0573ded386aa038173ff82d3bb596f4627e0d3184d20d6779baa72b24179b292489ada75a412baaa6786d1d0c165b6acdc639004d6987569599d4117ef0a13ad799a46c294261d0ec83e84059bd0f2045b841751d8535f6d2a6a7f3293409b81c61ebd5e180e3783f6bd9a623fc5496eab66d5940f0638640dfd4b838193fac7e618fa3c3bfeb22347642b35f0248c36a5e97e6cc04fe77e8ed7c7f2f99d4fa32915a5b96eff912d7cad7bb1d19895ac6ccc70d4430cfe518063da2156a3b8681a3348923805778d7d9a441bd410f6d65cd63d715170d067ebcab3aa0ed8e22356738479aef4c0b60fc9d8b56fee7d11866357bcfca3aeccbad33b91a55071cbac4aa2bcf69f84ee111a8a69b7bb996f620c4e4c9e5cc8d056338b78d74e9a11278c7d938ff4dc1ed2ffd6ee17a28827b5f4fea144b7e8aa0ce15ed28a759b18cdce83560626c0017a0517988132dc19237c8a5a899297ade984321ff42d696055fd7a3388f81e6b9d004c087d80434c60bb63f788a7fa219a41d77bff598837d8404242f8ee5fd4ff36c6450ae69da074632b1c7437cf9727b89d214fb945d0aee1805797a24d906340bb5478ddc2563668897fbbc3b7a50da87984ad8864c0bbcee7ee4e64f1a842f1b28c19e97bd1985e65049aa2cfdb3bc06c6ba707f3ac3d5254028cf63976ca1735a968504e3394d4073e2559f1ebdfd5b046ea21427292df04f4d630b7cddc44d55efd32deed3e6611abc37beba7063dce4ed2cbc6c5a898ff101aed18f5a50606679adba13dc930701a1e9c16024250fad5ed5ec0757d9f3342f5320a16e80eaa6273a224ce36a409aa6694ac851707cebb0d370df618f92ae61e01bd44a6f469403cf436d66709661930266c24682650c50f2e31e88a0eacaf1cde51e3bae647f4654e41e664f1d22fe854d7f4f5cc435b7f6bd665a7f8fb47c074f5362bd3be015a18fccfd259fd5d009251a22cfc5bb8366b6373c64ce18208c52197561e919a65ffda61b1defaceba5201ab4e7d6e09ba4cb5824d9b2baf40c43b61363534dc8dc82efd4421c26d43f9ce53f108425bdcd4c504e070c48b70fbf6881c8c0ad72286dbfbe488789373fa545c8a18ca11c58bd2dc1ee868b0b62b7bb1114eeef1fa09712c181530a2f9ef6b637a98ca3428e7ec50e93c333a92b6f20d29e69634240b30ab6d567f0407ec9ec114f4037c240340afbc775d724a659fe5e26e3989f365784dc48aa234953fa623d36a7fd17852ea42ebd4b22f96d760c3a78b375256e6d6edb5182543d2bf469917edea240fe64a170a7b0a33ce58dbb926ad46ebf1b628d7cba187aa6c21eb8017e4574b0199e4f32f76b1cdae6d980c2fbb0ac7a16d4643a295350cf9977d31987178687895dd1b347264bfe52d90a6d046d4b361298e103a9aebd53d9ede8d0903ca0f9446ef3bad811af18e3de3962b2cb424d0697cfa3f8d711a534eb5b1b50ef110a1494177d3709121d4c361a1a186f2ea81f2e71a0eb94b59171cfcc25ed602d860ee8c0d8d3fd4cb23728564c72d8b7b1f89983ce4c3cce52d97f0853dcbf1d2a1b55ca4b749c73f8bfdc5150198b19bffb5b549244140ead7bf434a8cb8b77e326b035b3124db4f0ba722eb786332f64199ce76a44dce51b3432ed2d87d714005e3e11923228732228efdabb94ad6f83effc78a2939d7f4faa7bfc6368c477c1460f52ccb80b3b2ede1f02391aec773e61acb849e373a54b2558ecd5e6b16502fac45e99d7207380211414ca2d41275d5d614d7200e58cc2130bfe48dad3b213c3c183680badad3de9df837acd3a5268f2ce822feaf4c20bc0d1e78386a0cb4f0490adb155984cafdfa8db740b810401dd899cbe858fe46427c259b95aa55eb1d79cbdc5d9dcf393b2281be718b6f891e7cbd03d12cedbf59de47937a2f818c92baf0ad24fb3f74249e06615ec956e662fd8feeafaef84ecba245889e53e105ab2df75fa46f8052b786a8c534f6e64e55052a0c1f773b45198e8c93819bfc5cc9403b5c706032cccca93e27dc9fddf95b47fdb2a0c3f9f6b1562e4e6eadd8d013f45dc46dd568c66305ba891d311476b8800d644cc28554b2dfe27798169fa0f9d8644f130062857fb34f687fe66056d978cfa798cec53fadb5a90fed4f1886f745bbc0ff6c0d3f8e8454a1c109b4e452388d30160d2b5f8a8e0a6e904aee509dbac5d5995505588096e4287488b00248741fb5fb181bceff9c80e50920a9c1d09422d20a386a092576d6695ef6bda55250836e6588533215b498c8a53d9e40e32e42ec3441ccf457c630225993363ac9b47ef3d3a780b9e8a30f2ef9370aaa21671771cbd4f697c50957610c1ded0d7445c158f1348bac3d372e32ca024449e145b485f7bd1d9ed375e554a07c0f27a8a391d00748f2e30b0d96bbb518bd641b7a6d2d2af36cf517d3563f0abf1dbe0b797c3c34779fecc98f914e9588825c75bbd3eee18a09c2a9ef39656549c18fcb1f01d995f1d1465d3e96c3fbe02491651ed86a61724e24275504c8f868915d64e9d4e6ecb11235d199f230c6f25196f6194f35aced0b02eacba26a82256367b2424e7e4a16bfac4ebc104a021cad0cb08489f83e449dc72d4acb2a46d7a465882dfe2be9826bb5516d56e77a2eacc3775ad568f423ec132f62d592d9f2fe31835af4a261273d7e115e7d22f82a2fd7fc8143ef7f7121a61d013b80fa4886bba73403675d417efeb0517bcdb16cf67be563278c11d21a6acb8476d10c4724203d655c83cd3a5167d22c0235a6f55e2d99c63f647288661ca1051b6ae73db9bf6c691aa37cee7788eddb63510d982a54f7cefd3ea7f59fc28eb4910a5f0166388a64638e04e61606627c4f93c071dfe46aa5fb47a43ea630d733e65e4b203eef28d3d4f950bc1ed52e7c7d27dfa93022aaa55f53c17faebb7fb782b2c16e2a37f121a5359cee7a77b20f078459f2c448c2e5fc9c1b442ce3deaf91ac486146f2022df40c03b29afac136e3184af87f60c808e12e167c649cfe2194933bd6ec191c5581cf0ea9323aa3ee0d5fb876e1b209458b56afe21f2d6472c6e24fa489e5074d1bb566ea5fc2a0d8e3505835328c984eba05b3fa8529dfd89723607532d63e0eabc8a936cf52e0c55331006aa4cf6a917135d61f725e27cfbc6540d347903c379b81eed135799c2d169ef96c25f6adce7dbc768d863c574ea09947d2b697d02eb36583918fe43276226c0b123ba2c8ab56bd8d9c18f1c87f8fe1abe5cea65ade0c85c8ba5f1dd188ccb08ba3ae4cf7a3ba1177266475d924c201fe48de15ebb7bc1684e53d0679109aae7f6ea51be84f4de07450f21d07266b6e97e2559c3cd528170d4d9afb8a8dacd5cc05c7340da0436df0efad8577c70ab9ce991aab4589b64adde3747fce1c9710593b6139616d9845d899d9c461e531a527e08e5256c6909f8833feec10642f19755522ce2572d903e88d04a632210d37c293ea1e3f219be1ab57e62e59e8008271db9628453eb03cdb8efb5ef9a6a062a0e01b7b2da6fd86b019be839c16f2818083df58ef06987f9ce5dd69b79704c1256f659916da4a9ca5c212dcc79d546c0215d8adcd89b9c57d41d60e0b82de661048d7ac56e55544f1622f4c8742a4d034cfacab32de0ec9cbd2d1d4e37414006ceca51f0675d102a1ac5e73454cbbfc542ba8602a5bee98889fb8809ad03cce93f7f04a0aded5b8dee1f086a6ff539ef45d4ce36cb4dcf66440efcb4369c6977a7f1b90222aeba6f15bc639044d8e5475904bb49bf65c77e2a80b158eb4acb6d30c66ff48bd9b86dc30feba1cad7f07099ed9c9cfd16221c54bea81b377489e562ff8a8f1691a5f325e6c268c7930c1a33a0de34795545f6051060af170a0316d4c03b255c9e49ed1f39ba2eb3d406c1512893ea953f20f18671c3e86a4ce357d975cf75d1822061392fb52e813d26e49598b321bc04008b33433b949b44acb3ce0abded47d28f8562618de01e11f6a23503941144423933b3305fc7586f15ede27b2dd53300cd0297b3ff1fdd5919fa5f211cdbd24caddc82c41193b83f952ace7f3190d0713d8ef816e672771e144db71ec5ab33d146988ffd5f253b4cc99df4d7f499a39c41ea72577630019dd6025736cbb90bb6e0eaa2877ee4a22f160fda1de9af28fce89b45bafe9d764bf30642e47102879ba5154d790d383db3b675d55ce5172a99a029f742bc5db1f893c5019eef0401d92fee579d851525e5e3e610caa53a0f2c83d2596008f2a75f48e3790959a3295e521ef41d46c910b1a77a6f04f9118bfe2771a942ad59bbcb27b873cd6910cf936a77b78860cf48b0f4d63336f3c0f5b4933ca900ceaac5a3f4d4c0d0998fecad9f75b15eb99f8e4f2061ea413c845b2a83ad7fa9c9a7d8f9c30dd621e1ca4f43c14d6c75c61be4f44e2f0b3fcbfa45f9efe22f7107172afa1c0cd8830998d26de14e0c20c018a20bd3678c15915b6ef63d8333f31dfc984788b53f5480027f4692a3dce0944e765330c31e2e97c7b5cbf349de655cc62f75e476004b7fb5faf5476196dad27d8e5941565df0b4d19b5e2b19e25f2717c12242fc101bc17d03715372d006146bd38fb9ff8b9c6bce46800757894e5948b639266214697bac22152c67f4f32ce01595bf5606de4a40342d172699ee1b8556b0910838f38407aaf01d69be56198958118dddc7e1cac275888a0eb0d70f1f792f12c5cc908dca8de40d9f0e48ffc3dca55828872f8c34801ec726818e1a01d39abe07ab30b01af73c698000747aad42cbd705f7fce287972a60f2d13662a7793738a9e8bc72967d2c2b4122d78a12717780f1796c0ed803be0940ed2ac7f118c6a95e635470bdb737f4fb9eefb4da4ac7ffc405cc03e44012b1c7dccf80a34ff445a8df1020533f0959bf7f0b7d0e46b5e292ee549a9ce1c2fa43d145dcd241a4a865ff22a1fe392286129346d1b3142b7801fe7438c127e49b64019617e80edfe35f528a8ffbae6fda78e7a3006816b8dc123006b68d201e68fa2e2707ee17a20ac68182b5c15562f1f349c0ed33f9b014d12b2280431eed6072c9b0e35c9322fbb86a7095bb69506b90caa3fb6219b1e8abd899c8c18c68448ebee0f196c9aa50c575e6db703bd9b56cb945fbce1a85b1f1daa1bd6072eb42a9e2387435f99ff6a18f276648e2c7b25d0e29c58a7c205690f9505e4f798ab6b56489a8ec0b5e6d7c6979e89db78abc6616f01c7de79cae7645d8b5aae44d6b776a9a9f11f83f4696fe10e2f79111de42b7a44580c121d73a6dd70d3c8813a32422ac95c825e8919d6a05befaba7b567167f3ba7ac6aed6f4df624221abc147a5945f5fbb30d6a469549f3381585e269b622910a8b1688a94847ccd08c7944d30dd790a0b7f7fb2c2b1389cb25e4494cd781e7018bf5051f7abad9067100a39c79a65fe81a008f160437be1e752020b569cce21a0a88724f8ab6523def1b06a06ba362855b6206206b761ca424cf85f6a556058925198494f56c42e45350b59082dceb5e61cc380b765fac468ad241e361fb5acc7a0560b99c97000a4270c3cdcbd4f96585ce89eb950d191b5845d9f7be859f6c17253fad7506fc4854e23aacfd01fee5832c10f6cfb8218c66afff6dac18313b0a741fbfb9968ef36e775779770f50e505d6c7e22178d6dcc40964c0d0b474cfbe8e347f7cdf671555e5d596ac3b25d63b9fce03ef18d21449aa36e225ab96f06cb0e72bc25d95c0ed2d5de216fb9ad4e17ad2edf98a3b22a2ae3efadc5373f905ff8d1f6c656e4484f154a1c1a593f59bc5b26ed192d87cac08c4d7c2058fb694762f1a1e1fdf5b12e895af1a6b6a63381f7c61c30e87342c1cbe8c2405977401a8f2caa90747a4d441e5a77beef68a448e2bee9aafb12badf3d45f3f86d8e65fa80e03d58a3060e63a40d5d0ca530606a28126c9d2522604f5921f97087f8c31abf05c2024c7b26b3a88b215202d2f2e0d19781fa50a258f81d71ebfb2fc27164ba0832c0af2541f1b6b521dd4451b1fe99c02b2ab7d953cbca97816eb1c1f0f23a5c9204e2782e13e9f3dd78f61761d6f4027384810f9cd857ed9223a3e0d1934d8a5b0d70d2b193581512e30cdfd2268c188de8299cd8133200f0a304b9b0b2bb07a777f2f0fbc720de2da23a616932e326a720807961a3a608284ae4c6f31302e90facb02febd3ebca89a857ad0e3375157be104310f3ddd3c585d2e3df4c151bcc77943a47d8b796eb2f57e85372c85f2a719a6d494cfffe33b740199b08140a4d2f24c83640851e3eaa7bc9f6025be17358138fce6f7fb075f56731f6376024467e51df2318ffae817a8348a25334c6f1e72876ecf7cf8e6ef239f9bd5f7fa1c8a8c6ae5eabc976f8927c63248fc56643aeb90a39b7e8390893d6c426634e7ab384d88dd097e7689e14f7bfcba7a0c6f157b4b6c0373981e3d8f1f03873b1b01af5c136b8a09820b74c80028322d2a27d31c8e6973b8e7c7dc6559fe6f61d038659de749e09cb289d1ac546ebd95870a8cb88287a637372a34afa910d7eee9aa391857f94bfe18324d2f097a4aadea6ef6d057794e034c58aec6cacc2c36185bb8f4c3bff1ec3a47614e33ce01fe1043da041168f0c15c2226a8b8817673576887ad3385a59dcbc3c528e633c0ae750b555fcde3379aa935a2138e06d046cabab6f1f46d0b49397514dec0d963b24bfcd4ae56a891fb563544aec26eaac8bd5790570ce52cefe59ea05439df65c226a33a4b5f54e5e8c358ab3930d112357dcd6e69524765ec316acf2fbdc7ddcf4c808311869f4432e0ecca1adb780f3149549dcf8b25814c399db5ec2e140dc47468dc9cec5b0b8188b4896748f993549b32a56c46c9467606005b5575033094bcb2c8d8649b202fd5f52b230aba5adc87820a615ce4c11ca2f04424cee91ac1552b2aa9a6121bf6922b97ed6ba594ccbd0bbe7b139dee9df58db7f36f2c72515d56bb31d37b13466c4116142d53ebe6b7996ada16c2faa527a6bd4e1e5cf54806f3fc5b453ea957416ddd8a5990baff92e41ad22e2725877bbea1fe51be6ae72bbf60bb4f75c4bd306322782e956be04f97f4a5b111a06642ff9e1393a531edbe7e0d32248739cfabaea603570677d8acc3e371d0fef3b6cbf533a3eb6d5ef5214a7df9f4c3a8fb954b6e0a0978a0f2fe5b451c75e2a7a7b5c0d4b0aae0492893254d01d42b44c6c2524c30e053df360bc3312977b77aed07fc3cff543cc16f8e19f8daaf043f69f3418c07c7b97275833f0e1d073f88318518c30e38046bd37b761ccb361e849fe44e32047ae990a1c98b3595aab43ddb3126dd633ff8237907654f0ff662a833ea83325f0ebf9a634ce10fa15993934691721251ede085453ad608edd89fb5953dd3cf7f85cd8637ee022959b34a0d2ae0baa1c63f84614debf369f751a589ace1998e4d8ce48e3817af29805099a6c6415be38b5c92da8f9d4e633b80f0ce37a0b338a853586b915de4eee8ddc3de5e1679795f0edb7247447399af71563ec998f2d163362292a93d8a3b61bdfac4087a8a4f315b6eefc924cfa5dbede9a6c65329c75c040dd9b6d7e318914b00d98faa1c5dd422f4d074c65ac823e657e8d2a15584ff9eaf804c8056682e678167b842c37a70c81d05c39fa852de8b1c5cd6122c489a3d2d566ae8b3e1718af33a4fa1d50dd64d8f730952ea7d0b371e9c81c278488cf53366ae9bea28a2595a03d4ae55ef9d31069f61ec577514305b63ac9b0a02e2ed91bdd627e69613fcee2793e21bcc794aa8907f6d08c92225d43120e30578249addd7de8b871599795f07eb52eeacbe562e9ed28c087360992ce40bbc21b0f425a3933a8f937cdc36195a4c2014059df43d81ec192676fac971920703d5f265a2422275c9e777739117d1593b355d154d6243a2204c8b0b654a9e97f4a48f47b657be71fac2b72fd87d3a2d1d07cb756191294792a2a9216a3f5d2ddd2f41c90f22788502b66a9c0a9c314734fef7fc09c7c42223506e4a3da0a6079d647d2779e4a874bf4d973b7dd8103d79a1869195292f0b9aed8f17160b81f4c6a1a715866d4ee4fd49c63bd25100c68c6075e3b22d9103d0db4cdaf5dff537b0e080f89d26f3e10ba29917cd3edbd8ae8f6f33c4eed125a8e29f6892137a60583916fc58f104c1ce2e24ed0b2fd192923ceebce966c9351121fc57935c0a60c9d24650e089e5df48220373f88dc4e985350751e088b5876498f18a61d74af60cf07328506e4501743cccf0f227cfd798a37cb75d4daff9cfef6ae0fd4e482f7fd2cb72d38fdb7461baebda43862cfa772253c9aa6f03cd9c5e1e04d8ccd5dbca581e8103690f4f82c34ff7f3b132acdf02493f68603b9fa2a37c792dbfa1eb0e24ada5330c5361ae6c7fe3931b687f3db2c659acca8d6a0dfc18b48346b2221697991e934bea523ca808171f44af2f3998ecca49d559c329cb9f1d164293d04230b579d4f7d9cee0adc6a0ef843cc140d257dc4e3a527ba2f4881dc3fe696e70d4f337fdbc634652ea35bad0a69e2e60a6d21130beaf34faf3b2f73774f26758a62bc59142f7544cdefe5b0fd2940913100423fead287210aef98a5c52c55a640f741bc99db59f3e0bde67b40cd22d571ce54f33f7fa20c0512f3be9cbba8a4eb74206770fe70fef2b2ebfce7fc680a0433e43f675c12eea8bb1158c673f3499be0b332c493ae95be4da3e8aa18c305fada309bbd7ad86b3d08728978dc3439f10dd016b116efad7cafbd170916a5be08dc294a8e6af7298f68e5fdced3891cec1f6e2b7bb4c2cc2ece5ca78844d2ff2d78f44d3d110c0fba35056ce8568c37ee30a03fb2b841f45652cd7e112f76826d0f3f5596c1308cf55b883f1afc3f236e13517fefbbe76ea3040524951ee06edde1c8e64894a9f090e7b656dcaf4db81468d382d1e011927f7eb4f21ffac912458fa3269f0870e86f5db4fb3d4262603c58a781fb40d3777ec5f9c7f384c8ff9cdfaafa439a457889b32156a7692aa7239804c27876df0e09a8d5a2a3128ca3005b03906c46ebdef408ab866f11b72bb9a9998512bb697c19600ddf746c92eca8b2291f0ceb453a34acfc29f7143381a57dfbb944d6814630f5d3b0210ddf9e36331b09ffc0141c2df87c894d6c15626296c3e5183499e238194e1f3d6fd5a464748fea5a63dc8a89eaaffe9442f5924ff854b6adee6f87a97d05582c8e55e38bf8a071fc982d40bb9ce2680767ebac0f8da128ec976f5f3052ec6e3bdf7001465dd9345ce57f68f79662613d5c13679585b682ed9d5730ca723f89a2b05611a236f842ac9d78ea617632827cf7d162796a7b6798e542d5993857076e23d45ed12554ad5f8e6ea661d4b8d17bb033cdbd29b064792f4d01e17c3bc9754260dc8b1013137dd7f3cdc34b75f47666aa087a9a9d083597806ef0863c82b1546b72e599abb6b3c6233161ceb69606a514dff940119dc6d44bab684992cb35de6e9805d4f0e4bbfe72b30691ed9a3f9a2df31f042aea32a915d9536472809a1189f9bd779c4e482cf61779afed4ccd0b3e794f496ad45803dd800df062366450158966f5d219753e81c4a2f5916431f780d1fd848a5a065a8860c3efa5e960796896f27724c13c30904fb64fa565ab1017f1b60943eb45cc5f0e706c392d5aace912dfc9fe8105f89ddcae407535d2f2dae93fc63cd27aef7351db4ed9dff37bec23c20329ed91b1b43b6f9518b18fc6f9b12a329a1cc1108171d60839b9446a6ce3c4aa9729babc37a319572df15066c8fe9ad3b1f1ca082744d5a232aaa809bdd2059de728ec78e7a84bdd6c3fe40c5850949e639bffa238f745b96d5356a1332c020b9b7cb567227dcfa73898f41477128fbb294a317979ac029c228e4e6a72ce3157d74b59eeba1be7929a3f50f2acccf2532328e2aea3b70b5aa536367dabf77027a1b93997674dd2b360770f69cd778b0a81ad021351ce2ee660693624c60d06f68dcd4caa39e0609a14d1ff4d1c2a1288f9b5801dee1fe2f6f7062ca16bae5496fc24cdbd0ac69eda70a5a2e030afab1299db5ac189187fb5f77398d569f8f81a08c4c483712f4e98891a07b991d3ca272a4c8f713ac281080e68a63972b525ffa4cd9f151d7f76642f4a193a1004b5cbabf537cce795bf3dc5aace029c6fcc1d18f5d933f933f534f5feae59ec13690e2000e22f1f096801f9f48f7441898e9fc38b2dc3eca59e788f44f2381f6b9429cea94be4df06f1ec0abfe87abf31bbd706408ad0af09e6298675ef8a43ac56488e261c60604a214e752e7066d9a3f479f7abfd643b6c5caa5de5290c94f9a97ff00db09c6c42c7b09ebd75484d403917702ac19ae9c6fd97a3d4faa8f2f7d0526a0e2cfc1736abe3647997337fd055deca2c2659c34ba8033357bd5b001ca515d87ffb4b6a7c00ae2af17108d9144ecdea5fb53391499312d51f0372d037e67bc52454c5c18405165599e4d00d53c3fd5e2b8b7774060d29fe340cce78b505dde6161b2b43219977f33b04fc91caf4b2a78a15306a47e64cce9614fb3060367163dc370cdee2f4bf5385dc4a066d9b554c63dacf13c9f7b61848e288b97141aaf619e1bf2c66f39c9de540c567c0273b758c6ee7707b9c897d8ebe58533cc48e5a0f8fcbbe5a2f8ec1456ff7f9e961c3777571876a8570547cc372cd9b35db030989c84dd6447ea207fc2ef77509e475ac422b8ef7a6c7269aebc3db58a49cd250423b1d8bb24995794c435b506418beee15f45a7ff2da186450e5d8f12219fc92e2fa007a64a8b978dc1f21fbd00e04d29e497b133adda14125c63d124b83ca0a064fa01b1dab6ffc017a84fba1b718dd8231e0a79c725cf6118ce044602e4c3a8aaf4504719ef25fda80cf6d339f3316d63e9145651df5fba52a7188742abd60c05b75e104353fb8ed210a19e6fdafcf9ae66e3e37ff1ab7a147de4a5c5c07a28ba9d11e5f6849a610b1ff9fe1e3ee2dddf472c6456c4fdefb20a33c5f0558e8f178b537aad78faae2e854ecd9a2f8ec24d35eff520d166ae64739a3e197c9ea89e5f9b8f034f484f28b894f8168a0f8fe01816424c66a564228ff90c9569c9ce2560e5a7e6cbdec19487b3dec0b8091bb5f11f124027ee5a6880f68e9387c96d2f158d5b247e9e2f2a8c67c199694e2856b167b79e84bc341de0c7732a995d6c249602ad46be2073fcc54eb3a76face694b72eb08c4a18a47f015afd9b94e1598847289b88e93ab01aa667685ed80504010c664ad7dd76c118c1c55664d4b0c4667eb1b4dd3e277d3ec0b300c0a5a9f1d3652782904052d9e3d7eaaab3d526b8297e211632e0452e889d0deb10b0b18a9a71946cc5e328e3ed434ab45caf351cd19fedad3a84134904e8f105b35bf23d2385e4a506b224c1e918ea3a35e9439c271e661a10af7637233e9bf4b953bbd25b180e7d19b39a688ecc7f778822daa1f10b2f5bd251dbccb86f8fbab4bba35c571e3047e144f37bdb306452999c3dc3e3a395880f19b88b45125ca5436158365a44c146359fb89160a246989711a1fb4fec877dbbc84bf7e3af67c1e13140d0328b54532804e9e1fb13fec0066e1a2fe9a4420a5be646dd2fb137eb4f24e7dc672cc60d13a3a1e601fe77eef6c23453c1855c1b7c2874af66f25d57da7cccb38e98aa2199c97e76823cd12f54cc2bc9608359866d44164eefba4b98f70f720d2772d1804436db3679276e8c7d4c8d7d21070d3fc0d28e345a0633ced641bccca29d1ece71fc48e7120a6ceefa89e83bcccc7d96dded4b521ee3568791cdcf3aef56346c924575dd48d41f9b3c26adcd493f0716150fa5bfbd8cf602ba84ffa9a0bcc4e7b0ee6dc4660637540d7104b6e82cc4a8e6ed13dc60e338be8d5bcdb36bc0b073b18af60026e540181855967283dc0e2ca8069a3cd6a65645edd4616e26ff7914841aee7143433bcb884a12a30c1512a622cc691cdfacab13326c83e22e9aca69e91ae3322a3f65fc8e2b8518f0e","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"3b65e88fb4aad2a4dfb95b4861d2091a"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
