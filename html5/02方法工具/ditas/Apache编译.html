<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="zh-cn"><head><meta charset="UTF-8"><meta name="copyright" content="(C) 版权 2024"><meta name="generator" content="DITA-OT"><meta name="description" content=""><title>Apache编译</title><link rel="stylesheet" type="text/css" href="../../commonltr.css">
<link rel="stylesheet" type="text/css" href="../../common-extended.css"></head><body id="Apache编译-1F478B79"><main role="main"><article role="article" aria-labelledby="ariaid-title1">
<h1 class="title topictitle1" id="ariaid-title1">Apache编译</h1>


<div class="body conbody"><p class="shortdesc"></p>
<p class="p"></p>
<section class="section"><p class="p">编译环境：</p><p class="p">平台:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
windows XP</p><p class="p">编译工具:&nbsp;&nbsp;&nbsp; Microsoft VC6.0</p><p class="p">Apache
版本: 2.2.15</p><p class="p">下载地址:&nbsp;&nbsp;&nbsp; http://labs.renren.com/apache-mirror/httpd/httpd-2.2.15-win32-src-r2.zip</p><p class="p">&nbsp;</p><p class="p">1,下载httpd-2.2.15-win32-src-r2.zip,解压到指定目录.</p><p class="p">2,用VC6.0打开Apache.dsw,设置BuildBin Project为Active Project.</p><p class="p">3,解决编译中出现的错误:</p><p class="p">1)错误提示:</p><p class="p">&nbsp;&nbsp;&nbsp; ./include/apr_ldap.h(136) : fatal
error C1189: #error :&nbsp; Support for LDAP v2.0 toolkits has been
removed from apr-util. Please use an LDAP v3.0 toolkit.</p><p class="p">&nbsp;
解决方法:</p><p class="p">&nbsp;&nbsp;&nbsp; ./include/apr_ldap.h(136),注释error :&nbsp;
Support for LDAP v2.0 toolkits has been removed from apr-util. Please
use an LDAP v3.0 toolkit.</p><p class="p">2)错误提示:</p><p class="p">&nbsp;&nbsp;&nbsp; httpd-2.2.15/srclib/apr-util/dbd/apr_dbd_odbc.c(134)
: error C2061: syntax error : identifier 'SQLLEN'</p><p class="p">&nbsp; 解决方法:</p><p class="p">&nbsp;&nbsp;&nbsp; 在该文件中添加 typedef INT32 SQLLEN;</p><p class="p">3)错误提示:</p><p class="p">&nbsp;&nbsp; /httpd-2.2.15/srclib/apr-util/dbd/apr_dbd_odbc.c(505)
: error C2065: 'SQLULEN' : undeclared identifier</p><p class="p">&nbsp; 解决方法:</p><p class="p">&nbsp;&nbsp;&nbsp; 在该文件中添加 typedef UINT32 SQLULEN;</p><p class="p">4)错误提示:</p><p class="p">&nbsp;&nbsp;&nbsp; /httpd-2.2.15/srclib/apr-util/ldap/apr_ldap_init.c(194)
: error C2146: syntax error : missing ';' before identifier 'LDAP_VENDOR_NAME'</p><p class="p">&nbsp;&nbsp;&nbsp; /httpd-2.2.15/srclib/apr-util/ldap/apr_ldap_init.c(195)
: error C2065: 'LDAP_VENDOR_NAME' : undeclared identifier</p><p class="p">&nbsp;&nbsp;&nbsp;
/httpd-2.2.15/srclib/apr-util/ldap/apr_ldap_init.c(195) : error C2143:
syntax error : missing ';' before 'string'</p><p class="p">&nbsp; 解决方法:</p><p class="p">&nbsp;&nbsp;&nbsp; 注释LDAP_VENDOR_NAME;</p><p class="p">4,安装:</p><p class="p">&nbsp; 1),设置为InstallBin
files为Active Project.</p><p class="p">&nbsp; 2),设置安装路径,否则默认为源码的根目录.</p><p class="p">&nbsp;&nbsp;&nbsp;&nbsp;
INSTDIR="/Apache22"</p><p class="p">&nbsp;&nbsp;&nbsp;&nbsp; /Apache22/bin/httpd.exe</p><p class="p">&nbsp; 3),修改配置文件</p><p class="p">&nbsp;&nbsp;&nbsp;&nbsp; 若80端口已被占用,则设置Listen
80为Listen 8080.</p><p class="p">5,相关指令</p><p class="p">&nbsp; httpd -k install</p><p class="p">&nbsp;
httpd -k install -n "服务名" </p><p class="p">&nbsp; httpd -k install -n "服务名"
-f "c:/files/my.conf"</p><p class="p">&nbsp; httpd -k uninstall </p><p class="p">&nbsp;
httpd -k uninstall -n "服务名"</p><p class="p">&nbsp; httpd -n "服务名" -t </p><p class="p">&nbsp; httpd -k start </p><p class="p">&nbsp; httpd -k stop </p><p class="p">&nbsp; httpd
-k shutdown </p><p class="p">&nbsp; httpd -k restart</p><p class="p">&nbsp;</p></section>
</div>
<nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>父主题：</strong> <a class="link" href="%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80.html">程序语言</a></div></div></nav></article></main></body></html>