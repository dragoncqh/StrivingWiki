<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"7df68bade818de26f32cc132d569a443b716043cd320c13f218f5d4c8ecf1e784efc30b9ce90169dbccacf957036d56fa35777fe94eddda63005c5a288de25f34a41ee48a4228030e99589248678252205b449f417e8f028403eb4e8616a2cf59a34c38b4805b6d7cde3d7c4f4a700f06a3fc43b63881cdc97958cd4e516d0c70cc70e09a9e31e0c73425fc03ce6378b16eeda10c8fc7f4d5da48213861a2c7bc62ec0c63d1342a831cad59324bd58bdca823e95519b5aaf2fa43f5bd810a8058e34abd4e9fbe08ee63068d4b64e704404412019defc94c756724268ed1f7507329b0148af9025bbbfa8ac09297bb40a81bbddc65fab90c03233080612b5116fc57c2ffaf192c0b911aed54d677d3759e30c0a5aba2afeed4810254ab62473661744bc0e9defbe56c931df8a5d5b713a0b364d3dbdf616b8c6600f1ae9614b89f74bb24883754562ee6932b4e0870468d6f83b3faf33b61b7da00641b1eda3fc851750719cd0615fc236917438c0b8bf4c61b22c34e0dafe942a71ca9f8eda06af3c264eea34084e36907dbe506020577aa7c2e5e986c884839960693b80fd1c367bbc80990adafc092a3fd978c822ca4caa7e494d9126b2ba4fe4aa3ae92d5654e83c462077c987de3e1352062faccbec4e2904afb19c55a20b75c391d63fb1918300ba1c8253e69a20677380237d80397259839d1d628b4c7316e7d05dd7c46e55ec60cc716282fc63040b7a762a55abb7a79280457bc36879124dbc903985a55eee23cdb7ec1278dac1fcd8945af9aba7986d02a5daef942709bf484f0b61034a25082d244286eecf13eb774fbc0f06a2e6e82ee7c992f15cb800d4ba1679f7b1fcd60f09510c742bf15003bc6512c36dad308c3afecb9b4b1e6082bd2a88ca383deb0faa77dfbe5efc96787f9985edc0f61a1657e1e5c32b283894e05fecb92e7bd22e2cf95dd252435af5f5bebcc7c2f9ab5b5b4fd22e3ea47d6474d5bcbc13b7c78fa670a4d2273e3067e61211a334aa8e90e5d33143d0fe675b86d99c8feeb4e1473cf29bdcb1b22ddc8dad2659ea90f8392440a668b667c073e492fcf1759f26025bede5e6bc159bf7ee9e607164a76458c5d0510badfb2e88dbad6a6eb3dc6dd15bffde398c1470f88df6868ba06a1066ff785492cf6b3836c6955c54e634dcb67f7222e6a156631d02e1af3c5fceea5fce17c584b0c8b8f07bec58ca803bbd19eaeddc9e6f71825f4d5278152803f8e0c4d27ceec772b064c74d16f823e35d0192ff292ffc015d98f38a3fe9db56f02988bfcf4f072a28afcbb50345c1eec7696a4f19a5e9df0252e7e4ca30a46dd50f23f7591eb13063ace4ca16794d49f9aa4c4d0b2eb6c7fe156dcd5835f0f767772ea36766b4e9d060a27b68cb1d68ef2be81abaf1c96924c8cb863605af63d21f4b90e03bcdc6535abcc531e0386c792fa114cf1ed5005569a32a1e7cc79ed7e4d936acc45e6cad2c4accec87176f321103d8b0157df3047cf178f58d4764e78ad266fe9528259bd3e12a9388f4c0de6936a7706a3b182f3f1e18358411c9b63e708b3e8fbcef2f112047f52b1f8169565dc086b5b08ea705862d75951fb7d639f2bbdcc77627883c6651c49fec0f6f71524a1d2390c5d7a40c39592ffe375a487204a4a80fd9d1a4e3954276de964912e5c88a65afeceb7e87432e9a21a8f73619d2d414625c297d721bfe0b97ff78a0e58034142e20f1b2182031158b312a157815ea72d7d8639352d98680a97a8fd748d7aa2a7667343f389057241625182a6b995fbc1d5af2bec15805dbeb5b932714ef5c2926d1ab16c0bd77346dd02a286f6c94b3fabd58f8d314cb3d2be6bfa74678c4ffa55239a6a3e2c51fd122aef305a40919942efc45b21fde6b5071840dac660e2a43648f5e202e53352419aa31f08c4691093eaf9d72cdc1e9474dc02e9421b59ccb9734f66254d3746b4b50c99ddb668ca324a109542812cc052aa91ab770ca613933d0b9caa1ff10ee70f2cbb4e2f3231cc82a06bcb72024832bda5b61574c213ac710bacbc418b8500ef8525da782105c697c2396f2273068c6631130d7baa91503fe7082065190fc3d77545eaebde126dd2e96cd45bae14e9568f266c5da1700d95353ae8694686b54bbe5020fce033140c735dca7b4cf24a3a29d22d0c9309f4a32f6e98f02dfa30afb76cd938ea5aa880522aa39c667a5f25519ed05520d28a2506f9736a6ffe05163f23a917573cbba45f2888fe639f417d27d9c261ead32b779dc18042ccd44fb135b1117038e802db1cf8e4b91b1cf984ef960a58986ecdb08a4da86e6b43731ffe08af6ffbcffb674177fc2da9998afa040ce881a9753ea349dbc248ecd20ccaf10e3ef1d630d24a554e82da8689efcd1c9d10286d37c6efbf84a7f061428a389b798c6a4f7bcdedfd4d932ac954a5fbb72f65cb3b10e46dac2eea3494fd32f36e7354646e79392985c19d696bd654bae4e8c514ae25dc75493575a7e95b1e75bcb020c0804ca804ba6c65f97d0efd76499b60a18400f1a0782f1c4a7c8ac5ee2fa6b19e881073e94b48a8025e1355c4a659ad6f36fddf65be058758a39243e4ddc684bcacaccfef22cbdd40493d518db7ca2867134671c1ae76aa900fc7b4bd1c4e503c002a04947036ad98b8ae52f9beeed59af15ffb21cdc6c4cd3b50848512589f0863636e6bfb4ac94ecc53957cbcf42afd3d50864413e3c2d9c4f5346760774282ba15e2d66bcc603d94744b201f64576998a1753560f3a71d6bbe8617af16c22be575ab755ae453aefc2ced077d69aeaed08dd909561fcf2c14dbaf1757882d25851cbff16efbaad87a4594d823272db1905ce570b44c306389eafb48b6e9fdda94bb2b2b544bf9e35730316766ee8f378c16ef8d3e00b11758e772a80925ca305c5da410ba0b1768e0f99cc115169a06e2dd89d91558a9af110ffa05ae19ee9990dbee4ab99e9d09f3e6e0776dbe100a7936cda317ec0a9dc2d444f1664fff5c3a3aeb5502cfac7949826b89088b8172eed3d346aeff1a79d08cdf00ca59d63f074fb1b22c63fce724c8f6b12c362486e454ec6c778399bc943d7f0722bfc57289d613ea4ac68ef321109fd6387fc4929eaa9688a5cb66e344ed373a5b8af299f86826962307510b5f3f364a87a8d7010cbfa310d566ca977dc23faa794ad0b88c1d8c27923976c67445062c839497f1b9b1e43dd75974934677ad9a026c099b82c41f08f1ac8da7fa7a838537bb41feefb24ced6d8d6f48b40bc6fb89f7898189cb8f4ac6face642aae98920bbb8aa2eee579e3a8b6ed66284fdec5b644d280bb9f366e3f4af7bfd6ae40206ee0f09b33920fca66718c9895f088809600c9969d06904c7e1f16ed12a440306036cbe744f028951587f65d8c75a7ab996c76c6248e5495cfce3314aef7cc2f29c9fc293d6e37971e43114fb9a21c8411c1d02108d21ad90dff470eb472a3638964dd68bf92574d7ae5bdffe66673ebf6ac8584d284df60a373f08dce378974489ac6e7c21f92e7b607e1cd360f40aa0cede8bdaf247ef7f66245fa1ffdc8963fdf47c0b4d775c28986c02e24cf15ab19ab85d08c37c190207cebb8d54b39b99e692a506fc829e2429059e246220f8217c05a7c2df6f6f1ff5d805150e933ef4619736168181fa06318cd7ec8358ba6be6bd922661dc3fe8b92cb5d4bb390c031b58296a4cef5df85c60ff31ed87a6e1017ff22e6250f51cc9e4b2a70105f5e0ed4daa747ec8151966a27cff8f80450639e7a613118dc60aa35b81ecf017fe1e506dadac493220c8eedf6203c53d21c04811c56316c86b5fd82294faa90d4abb0cb6611fb28e2d01a91191e67fbd2795bb504cbeea5e8ae06977cc55d433e76d39df65bd16c5ad796e11d8c0e43b2f1418bb31d648b50372bedbfea86301b7600aabb0686ee12224a9b9b5c0bbd7740df2b04701b3d7d2442f3190321432947f71523363be9482276380b47cc5a456906ad8ee7ec205eb86c1ea6cfa68716ae450c30bb7e2f4dd73b8f7bd7c34ebb6896300631e49ae8f3c72c14304a0f981f59a1a8b6c5ce2d0f0629398acd08d7859b4ca216a367acd0fc5a0fedf777e0c944d3e8aee797f8759c9782dfe06134733925ff5c0ab2acb93b211d7bf0c946da1971f39a9d19f99ab0daeead2f4af97dafb18ee73700d5beff254e4bd84a63c36e59f78c203e9d7a7cd867558ab6d87445bed2eee412a41503d36e4a559908d531900ea8f982781411b71f1447a5a022bb8387eb96a9903009185d72d4893736aa52941f473265a8eea1e064b8b50f4df8b0983bc79d40e5cf07b63fedb8ba28ca48737edbe0944f4dd395357ce1b8046cac215259d98f94b8ba7f50f8674b3d30f41e6a7ecdc1633836937e8d2eff8c902e1afd04c9a63596790cd23b34615ec14b9b8ac463b4630c28db64871aed62512372e99d647e8bd4f8021a855df476edd73baebf402ce1262c92b91e65c1cdf83570372fdd682f5053264a339af92aa13c9179e00059fc30fdbfd45132d9d7da89c70df18cef7d5e062cb0718d984b67db165b6c630a2bf0d8551860fefe35ba42b947fefe6a00050486a81613bd7f12bb354d705b9ab99c685274a68e3119e91711eeef39a8dad8d98b83c9ba188cc058d15f5bfc4f3c7d54273b00bd7857cb52b13de5ec23a1a00c75da70241686130d8561360159249514eea24e199b7c79cdbafe66fcfc5c5256b7b59f8b42409d438a96d4a2cdbe07da3c2edac6591bfb6e01ed586ee4e87e16c658458a9ecf2c90d08f7a95e1d9335111cb2fb57fef745d62546d993c619e8d948fcb2e91c4e5fbd1718f55be956f20954c7bbcff4830da350dcfe2de3e3e814ddf034d1c8129a4289d9e0b8a1077065dac258dcb1162c302d985b2d55dd8feb6d86c2268ce83fc4d0cc1f3cf1a33770d9563bcc31a62356d91129ef623a289d8e367420f5f78a0547edffb9c9b6e1faf6938996d114728b409ae52b5d9ba53172f80ad34b74c57680ba3e18ff655e5b4da00288bc9b9b8a28b473e938c88012eb9cf84426b8cda1ed4b149f060b6885991c69b714c5ddf39c10b49322c6bdb367a61049457145b803858c4891116fffbf4b26457e6d5f09fde62312ee13b46b2f5ad7eb03d9c30c3a4203811608a943c28145ecac0d8b9add83433f497ae65432036c93e34bf7f14965181c6c5ca6d9850dfca3f7b116dcf140b60105ed99d9f1c52663e1550f233d66a113a06032cd706bfbee61cc0887948c21bc86c6c937d0b505c2c21a10bfe70ec13216753d5ae77d4898bbe42e22a4116c46bcb6e84008ce003bea09a28d9de8eff05b9dab43f342a46ebc7472bda14f9baa5544e1c81fa9bbc1ff9f2dd9ffd11abf17ecf5c3f74025b614f1c433014dff260827ed8a5697f42772efedc1f502ca11cb01aa29fb9902d9c4dcbd8ec6e92ffb4129a20140b9436be024ae0210b887f99e527cfec9efc1b17eacf31e3893438a01802bc0e8d96f8ab231693eb55c067236dec1f246e8c664e54b95eaa2728252c30eb52974494890dfac7e550b5c1dd831ae3ac9367da4cca2495d5496014fdcfacbbbe7ba4f9ec36eea4b2a8838fdf35443b7bd91672b12cdffbc4139b11f8008e471865e81beb8fbbe577db16d7b6a86d68e806552a5958531417f017c7fd3b29f949ba9af1b08ecfab5764b70a4186f2885b8f8c0cc8ed69158860b60d4ddd304156ac7eea6eb971b5f511bf16fbba6a56e23043aee50ae31215a29f17bc1f86f273aac506c786637fa5302fd3835faf2c2c8c1f3db132fa2c865c630521ada3a6811acd2ea82aa4b5760dcbae137f5bda3d15f047607ee655b831654955619a720e6b7ae1fbcd310e6ab403669669f4f8ab3182fff394d1c836ef535b3483dcf96d5db3a424998c19b068a399fce4784c066a64a6987c0395bdf7452c1ca16bf53a29fad70ac81fe7cbe19577492b869809b01cab41d279debe521832e6760a721ac1a4ad60e58cc81b75837c7e2c70a7165a97a283299c37f054294d83435479683efa01b93d2c6084d4ad53b35492b127db089a1d6e44be28c2e7a39a52d3c3fae38988da7bca68c0f37ac254e4e34c6536859a3d6530513feb1275e4984dc41cfe0fd1b0ce499bcadc5f5d03c93c43e99351da633f31b42619d67771ce69b11267927be4093c2211082a561f0d9ea5c7ab2b439c0098efde2b8fe51d9f9fb75c8569687eb639d66a1f8350e6245c1e831a8ccdf0c95a4450776a04878a1f40b19c2fc51c25a6fef63dba53374fc11d693691ae7665d78f14e3f5e8cc3386c4439d5c933154ccfa518e5556dc7304ecf12066003ec1da3cf50e829809df9e00b4f957bbc57e179840c6112327dc966d2e9e42a363a8e8226e2cc7134c3e68ffc6483459e690898a569b703a84245b4faa7a7e14bd38416bcb4cc26058163170e814aaadeb59848cc489484013cab70bf0450606530395c68d3210d2ee29aa604d9af1dae5a9e09ce43188296cab966bcc79bce1e9e6d21b90c0068973637699db93055fbb2e005167188325585ca2992f644262f89cd40e5d3b734f507e0393051e5c24d0cc2dcbf703e00e7e6e86a786cee088a8d2cac66d36c696521fe5266a3e0a9548942daf80b02f74fa8a2b95545bce54c1dc3e391a74bc223960fff3bc01b5e485fd6fc5bf15ac41c455555dd1d9f4996ce066ea0e00c387ab505805747da48fbe014eeede4f4937d305f9c36a623e70b6f6221812a9e9e2778851bd5f5373c1e5a11e65da7b7d79a0c9c62b0a593b83323a49f863cafc774430514b22a5b4e9ee6ae1fab28e32fc9ad64f45666f73a5f142c5a4ca4eea210f37d1744cbd7882483ace845e35d84560a558ed265d93f7094cddbac749f8515840ec833f22a36db773f378ea0d74d288570450b7566efa01e411b6192badf5cda38227ea898fca7bbf8dbf3fa889ab743c2b57862bf07ccd789355551303d95797182f65e9727dfeb7e4e41b6b1955767c03126095e05cc11e191733a6c8f33057e256a767c1857a054628c076c5cad960e90beec8be3343b66ad256e46bc2bffc6c030a6e8557168181086a346318c89237439369fe6eca5e376b5c3cb18cab4bc172dfc00e2dc897d4a3ab92bc1c97b587ddebf9b0cf1619e13de9428d0c62c4daf9329acc6546f26fa084d49be7bffe0b7bd4cb5861b8b4e66a5752b41a512b49b2b328d6e6e0b23d69e9dd8bbde8d3dbd97f5b264679b41e5d2a09d10e93f3cf9178cc6e584aafae70ca7ebe69b524a5f623ce71007512109faf831964e9230caf43bd12076e7141bc44be89ad2c740e383e9ff5788362eaa4f1c3b2ba32baa2ba577e9cf9c068e9dd1b06ea4362ea11c201bbd652fceb6c2df4d2420168cf9e79e0500167d9dd25cdb282e6ca8b538706603935053b18af555091205b533d6a7a53df9d178149c7ddc62d316a2597956d965829f69b84be84da4f0271b4c9e4ea1c0b5e7f1062bcb5f3642544dc148cdbc70144c152fc06b4c410b0091bd94acb8a920aa19963167b8af75b3933a627e90bb663936e64afe6783468139a99517cc4a6817a6aad38511d69351d6e8a03cc8d39ad70517f89d01ab4d7624355039280a8082c8a6a7119e7fd029b0ebb0a2f9a0c6462df0a3815479ce34d460bf33f78271d5e46d1d72786d7b0eb2347036f9599c898784d7ca9776c94c0438b0f8186a12cc29fbafe11a831ea49ec77f10c7ef544c9752d39320b330bebc14a092b6dc21efb2b4f42bc99ba2b74d9213cfb2711da84674c12745a644357064be8feb9019b9bc3c27023390159c1d49df2302fc7ccc8ef2f9169fb889dfd50cc7dfd4e3b50d4e1c071076675236fde60dfe98269a3feaccca21220b7dbb98a1eac6b56110ba403de1a9f3473ee6d9ba14420d8051197dd7a5266fbfb0881a365903f80eb80f87f8e3b1dbcad401af6d095d4a01f0252124cf72414182b771f4822f3be9572d1e6e6d3a00f4e60ea150c730794221c0eab1f8fc5175aeda365d9756ab38908fe7b0bdf9fc71be5656501762adf2e2b2284d6017271784e56bcd8a2f794d8e8234a7eec4bb141575206250cb88d4ffcbf37119c9301975c584861ad90e787df82db8336a807e8907e1687958bae1e128d87ce6ed2b5eceffebe09f3ce15365eb1a131f6202576914f52f73cab5524b3fdde90298183921297e99021d98912aa1f2e629ba3ad6b51e89ee610deb44592cb9a349f41058302353600ea9f6caaf7eebcedd697ccaebf594ee5beb8ff6776d6b63ae42c8377ff08317a37e148d0713865cf9293a437837b80da4de87e4f55a506fe17864be3721210fc073a25709ffc67efa97313af29188993511802b5d8d15a4ecde5b1838a8e25a99c5c5d5f8cd481e49045d5b6258922cfcfdae5094287c06341b7c95eee16267cef281a845900f475b1c0ff232815c240c44bdc3159e6f72782e1833ec41053b412417fd95a3db76a6f50a79464f3db42f6b9fe20f18129d27af90a95de3dd0d2c33cb2eba57a9e32f981d6f30247e9a51f16b5e83de405685a6cf3eae6a6034d4225c5e28a23937ff6ea28eaf57b2ac5bdb268173b42e07ac062816c6cb99c90ac7a783f493357174868e94f24825439e79a9b915cd7c41b0743560e8c5795e8d6ae4219f16f3186465d7a55e4493a08884f21833f0c6410ced0c01d3231266e81ac3d59defe3c9b442c16fe01b97f7df693ff4deac2cb6da99f472afa17753403138a15b99803f7e0785a972e445b026fb9c2c25dbc300312ad432f20c5d220436b9cd691b67340e1b890d6368cb63c1d833d63285e8072c7afda3f0bec90697e3f4f79a8ba018813342836a764f60ed788943e36e08f51be6167a9d33fcb95ef52d9a02941c294a64747eee8a7866a15815776d9b25076719ed8df1b86a5d730b9a9cbe85b2820be21d3014e088b535e68a5139b71e0ed96ca2e09c89bccbe9ab8effae53df69815fdaae9f89c783cb219860129f46f8114e484ccee6eaede9c07f201865e2c93882981922cded16fcafe2a5f04997019130831ec1c7a2e86fffe3db85d6ae39f1f630d8e730e769da0b34c5573eb13bae3cb120abd1f4b71e43299bf68090fd7b98433597dd93aa396b3a6bfd6c5069ea678707a0049f4f4f85ec6a098b1cce117121e9c243fd7eb29a565a0cea5a35ff09ece3ed3232a6e3f1c5c8747c59b687b5c311ce5f36da8e7447f304a1eb57a8831321d1489afc4be827d038875d39052052e75c445e7c61d4d4a43e21c6a1cb73705b74f39c14d60cbc811420e6f06bc82a9f8756eb7d7119ef389d88e48e8381f13c75c4300596f7e833df7f11520e20b962c8d068fbc72bcdb5a1ad9cfdc55dff0ec06bad726d8617fbbf20b30ebfb26ffa661de77f5991276c11005b8dc28e0b1a3d089943c95a7b1ed2c305f05a99c823f703f7d764595364141a8fe5f369ca76eaa3c8b9a09f57a63246384b3d5a91176d856449a66368e374f28b10f3694df75f9eaa9a5e902ecc4270fa5c6bf150dc3a18d9691d41047ac3d2eb62aea43b6862519c7cb8fe2b2c0e34299f7f4887ba9114200a14c2ad822fea5e969144b24bf0dbe9597bddd0ee0427fc7600c7019c6bc3a3090997129c3378a63499c38f8d02f65d288eb2d97cae9a9b5aec6a1c085fe72d7c35344b219dd176e2045b65b6e08930b31bbffe948aa60a9bb50b7355cf5786e023d4411d8a322ae769d2c44c7abc181f5d43a4be6f393a19f6eb48c5679c0c74d028d524462226f2ea348363032c12de657ebd6ea72a8f90bbd739e3657e4bf0b09ca9e03a904bad5803b8e24376e945dd384e15126cbad8e3550aa95ea71b2305bc4ebdd45cde6a8da30725d2df74bec9e8846891e3f087d7e75c080c2bd1ae4b7a5f48ff0b696d50288edf0982f7b221d4a7a04669a3c28b548cd35b9f8ec8743d84a57642ac02d442546f11b3789f740fa7d02c3810d9061efb8f38ab4689dd0793d8daa02e68dc93a484ff0fcd87bec064ef902809ed9fde8387a772932d0139a7dcc35399d86ea38dcf76e34babba922e56fa578ce5ed4d24f165c6175ee7aaa04bff55498c2e381a43716721d5a35a7ae2bef937915b4f7a480268a45e077c882209e4a39483bb58016885311ad09ed08b439cd0fe7fcab24cf6667397e59e567fc94f03e6764201c57cd38e36910f9c30a669af1e8f226407addf22e5b357007724474a71079c366cd0e16640ce602e23f8a72a1c1904897932d35c43cbd82a60892841201fffa8946dcbbaf26df637d3ac0e5b445f820ef0f2acaf71da8d64a12174a18c8da2a19c82db41666e9e773f7930b0df275ff74c85821f5ffdce072813cab7b0820620207e9f033f71108e5e9dae21efe14a72541252c4b479e837825bdc4e311c1e1594be70c598a686b2dc7f4cf8ce4cb0eb9b9c68817e2f653643fa8d83d27745cecab52ded66605cebb5d36c279637c17707b888264bcbd93f386242f1a827f4e721ab12e5df7e05c68d5192e2f0854a2f9b364d4443dd469b79553aa5441fb73779daabd71eb5e5e5dcfb202b1dc4c27eca8c02104567266468a37f6f2645f2a004a1d77c047cc34b11453251dc0d51f650300e15aa0573101eda2030f85f87ab6303b221f54f2b6d74afd673a358540ce7878b0d6560c6f5a13e08a47f155f3a5352ae4245b6a03ea51a4ee4722cabdc47d1658c5b21c88a1e22c5a508842fcf0d1ef34d50bd3aaf092cc88d6e5b079052d995cf7fe67e457493eb6e3c7dc7b2bf363366ba321fac0b560e8fd4d450fd1e9458a8a59dd7dce80684d3423870bf0c9c2a08e43d0013bf994dad97e08d23386b42c726f59ef2410f51eeab3caefd4ec5078bf18cbba8ea889eb30b6057fd6f6d456ff17423a3b54930a49d8cbb2d64548331d22177de2ae63e1f767df6c607bb28849ecb717a8ce6383aacf4d60f8260ca8019abcf996c4742672faa2265265379b17c6a7e02b96b3f8dcb08fabcba4d43fa9add95a9b2df4db72f7ac3245c358d29b8bfe54050ffb5aec9e78d00bc2603d74824fee98e10d66dc332a354ca8db51d15c1c9b0e9e98b415051763c239f40f57eef3bd07d82fd7edfd93814e3be8ba6b186525aa5981bb2a6401a22cfc379cdf1481fd81cad88594652c5eaca4c252fd5122e11d098455eb7ad1ad0f2e0d5d17737080ebaf6692216fcfe33d5c5ad527fb6f01c87db90f333e3ce9bd3910e853592b401627c52d1c82ece58f3ec2b3e7f03d9bf0c564ab02455613f7aea6616c3f24f459f2f35eb91666c83a9dae26ef7200237c11f1962aa7a27d8ecb0c527ccec1992096d036ff13ac7254cb6420c1bac1208f146f0f56d5d39d1edf2956061eb9207b161d1e2f0e09251346f2699e5a3353e1dff5c410b77d7edc6d26f92e7212a54c9ee1434d55341245ffff134f197d19600e96a911b1b426d3f4e395a483c2f92461f4e951dd398e8fc7921c1b3d47aefd8bac0addddc852c220162a0b344786c6826cd7341387c157b4d704ac38f49f2179244696089908eaf697b1023081f44927c7bea9dbd8cefe8d9f6bd15ebc6055cde9843002ab54977cd62dc7a46694cbb68f14b451d9914ea14a798e6f764c884549c1884f94ecde54c4097353a1886b7cd70cf3c30051011518d793f70b0e48aadc64f075ceb696dadccea84e71f854f6c6863bf1c6418440eac0ab3cdd10d9abc50977c1fa58f44d0764222e7509906672c6bb3b227e4553548a7e78fce46da0e7934710347f859fff06895734bfdbda789dfe28769703f2ae7a19c3bb663291112894f805787cd7df30ba7a93c04f69c83f08edc91af57f556a6e5a0dc5b61e37f5c1c32b7c848817a28c6e12ad072dc98205d2ce92bae46af3cd9ca8e7089f9182c81c25c475e03b42994a06b3e210a232c30ec7d802307a9a63e5d58a3beff7cfe6028c3ec0276ccc8f3ee6ef266ff39ca14ccfe4826a6141f76315aa198eab1c64d4863dd08c53cba805a099bbf797d4800e246f9e8656ab1da4f0cf2ac2cb1f686e764bef060df12b945db04c27be8b9dc61578d4395982179ebc5452b9d43b060153ad42c5f21072ae8c02b152b2269e013e21e5b26e2debde7064851b184e12f5f7c37ce6ddd007909ec97e68055c630201b5469b8dd3fc3f61803204ca1a70a26af717e0f20c977d92443cb771a2670fc38b9aa0fa729f7cdff00ac0a34e6c6302c537e761fcefcc936c3df20fb9f69f00453718bd60bb24ef36fa66c6a56dd1a2c9e1aa099e9da8918c0bf3a803b176ba76c70319273052fd541c418b9143781e39fa579335c724f9e66d4a338f589f9bdc31779bdb2f2ce0cbeb32707424c46ab54e1cf5b7049f71344410822e115d96b23da7cdc88c2ad6541f60b774f8c906f02451215cd85b24d00455d206333fbc802efc1e0cc76bc50dd46ea1450ab120b4ddad8b0307789e45634984134121508bf5da0a6d45744ca56845e3c8837e1e0404c95fcea4b799dd026a781028b49242378efc03063af81eaefdf00c2d54e7477072426152b51a260f842d844e6ec9cb78297e5042a115991114dab196afff02d251b32c07091d39e72da845609ca0d9fbba57ef31baf255f8a853129988220c4457ea50e3d4be1bd87c58e6ee75647befa7b46b4376a142b2cf34ea3a6b12389b03952532c03cfcb9362abf6e8c69aab8a09ef08cd73daf3914e0bc0db691e33b038224aee86ed709fc7b0f0b70c86931e7ee72b01c61a778ffb9df1e036d48e70849fe9939ebfcc81dea6641982b691f0a89a8085474de8f77defc9c80d6cc9297d3ab9ff8657fb507c44bc8119ac356576c4e31d828f7869972e8fe7b7eaef2a94a9eaece0382785b2c388eee9e2e3680464a75bc20d2947b7d21b4ea1b0aadabad473de585e9473c90dd389a5b859cf1a1081dc2fa1a21d3a50f50a6f8487d9d3a23917a8e95e763ed1d66d73db03f55bbcfd4947cbaff5fcfdd38496e78027cdb885b5bc0755630759b0f5d3c1d3310bf209cdea996875a8f34c889e7de3aab3bb96c498b3e553e8dfcad6e948f38f95641058593806dcc27dba344bd9a51eed199b59689ba2f05fb7b8be027779196949da140b5624f2027e545d44e71bae5e93d15389b6b42eaf245f38efc19e599274c280ec25fa4392c44eb42909eb70f5abec49e0499c9b92e8a95f3992afd61d62b89183ce8c5d2249758ea912df80bc0fdb0d4da692fe0be2ca83a396db1af3679ecb804c4b33b4cef1958e8cca4bac050dff37d3a56d19ee7707c5554493ddc2ae2f1548551c93e7751b23b3fe95bcf2829f3c74db4460e4b30979d046d05c035e93e4a1beb0fc95e6dc7099ae859352a6ce82a861e591b919353b592fa165cd042a3866115dacc402944cce57c8cb82622c23084176160a451d848a85e0757724689999ee3ed7de9905799930c250fe5d82564c1328c0e5eaef1c047bf69135c16e35b7eaf966b2a4b8f8de8fba544eb88e8d7f20a689e5c7d078f680287d37a590c3832fc2398bf7fcfb924838f5543e1d6352b9961ec61afd7f043ca3a10dd52b1fb397cad258cf237a328607bda8057e3b75eef8cc31c25503b5f945e6a42b4454ccb159506624d96c24f597326c3c8b9189a53a3e41cf822abcde2bf249ef947755a8b3f595215c43371d80040fc34d8817a3414512c92e60e3e72e03cb683a8ba1cf99a75db2a41a26d51e797ab298f5b00d823b950880aecbc43c3a289fa9d907ad5f4a0c79fc088105cdee47141f48d1bbf6b6094b9d3b66726fd73cd3077327a6d2aadf743307ca86b29d904e6ce9b3b4a00e772fc86e129b5bf4673d452620820d1f371d87a9ad04435ef7225d22713da3ea0ce08ba08bb18d4167d6dbc582b458f9d700f61553adca7af1ad9f7f283b658000983774c379cfa39f20dc495756a95b0c04d58f9be3a678407de27f7df086f6ed1550fd438148272334ba57ce5b0d291da8137ecf027b7c061dac1e4a56a1de8726ad19918384e230d7302f69cc0a342cb36eeaafc6725ab1b41273e9ad094a2280d2de39db6f34663fb55e6ab3c94b7eebeac158111c711d3093e9aae99d789683df87f0d961a775d785d8400625801b096827724584559cf075d88a7a279fc76db25ae34d90cc841db1c42ec71263fdd7b38265c29fe925b16c5f364f21bd3ca75ff862e0b0fe8dc73b669d747320a6b2adc1330486c2b8f3b397335a9f701e145783cb36658bfb6db99b624d416c650df0a833717742b487f6cab2684c67ec9a631705b3f1f75b7ac7e80718dd0768198d9d5b5d382f626fe417dd8dccbdcbf64d3c6304bc2dcffe86df7961df7f9667c0fb6ea6eba34dd6d0ef36220ddad1c89ec39a361ebc59884005feae38179637740c91935e1b8750a410712e65ebfd3459bc8cf2434eaf6138e8fd6966e869d070bff69c2a3602a61a3cec48d2c5171169043975baba885a6ec2de9af839bb0c324494eca424b871f0c0c691d18f960108b40e94955fa7ae2f1bffe7180566e64314e80aa98a9b43cc85547604629c22a645c96b49b29fd40c52cc19b375dd3a83b80f456851c6514b69891bed11e40f9569e2b63dbf691cd87f34568e680fad6f39ad4d2d7397411086f86bde91ce959f75357aa5dd5d0ff1323fba9d44b14dda209c4544dc2cf76b05ef6bc515931f3d63761c176d275d1d5b76bb374b5723016259d7d0933afa25d17bdcb1197bb37466ae36cfbdda7ca25da60db1c02cbb160abca015e01371b36321718c4184f523be3528d6eb1a677626c4d5fc55545fe7c785df0b90ac4598b3cb126b9facf2372332f9ceb7947dd315d9af861d406d644f407fa5b1fbc5066b81cc2d5a682ccc5385e53131183e9b0e445e1121ac193f2f8da81ebbd3de0fef12470d806b5d7db0b3c0e8a01db41d559e32f25c782284cd76345bf606eda6a89a860dd563544b4b4b65edfd94aeb12bd86129af9556f363f4e393e9ec4eeb7b2ccc35882953fad5d3f4943cb0e84d3f42ae1f34dffa2babe9b2d1d7406c92f69048f2ece0f4aea5b29c34a648ac2565eca76c3506da7735ea426da9609f83e9c27a76d78dc4a304f97ce358e7ddd4edbed4c1ba9c6e990605d80915bfdd1792c9baf2b29f45ef4a76390eb169c4a30305573f13cbf4b3edc7d2dc657b79fb174a9dc11c753c4d844d865b8f199e9537917c51e7ae243b863dd2ab6a1a9ad3c1611abc4f132901b580ac8d98fa5ca94ddbb1b7d1b5615c326efadb17b0f09b3d981cf5c799ec57b0ff1aa7aadf3560181ce6807400394aa128084e2b61c94846374b2bcb79aaeebfc30d3ba59a57caf60643f3f0c540be6d30cb22c30c3d6627ab3628edf0d183d57c74ef9196e138ca2e21e856da5674c872b226da3ebf2b45e6ff5fa025a5bca74369b3ecd7afa69b743002492e4b2a5bf49324121b653fb2d0f25bdcd5dacad51b691ec1e80c8b127d1e2b84770f11835c1f7995ee98a8dc2d2ba9baed0382cbff234e2be5442337d7505585a8f81ab356ccc733f8f6f6883e55dea3d4f758ecbcf4a20a009256a41c40a4b47e76ffe3b25bf1ffdd637d6221b69cb64810661fb80047a51e5dbb648c9f6da12af2dcaf73e4ab30679d848ceadc69f98a7365e68c9462e210681226ca002704a606865d7c0f7c3c2a6bc6048b9877c2c8455e1773f221208c6b1140ea49cfebfc5ecb351b4190bf2bd877dcc2dd0c34aa3267f58bb9ac8fa0d97dcbfd3243562a20efd86ec50a270949328703e04a087c0356d4f7077d5ce234d62b1f812928df38454cb3a1f24001115ff25e957ac6ba59247b59c84d79ad74a4c105f3c1cae88c42b1732e46e715a27bf91e4cb7989ffef87686012bd89680d12190089bfa2fe53201f75bdae8ba3a86323854c612da8348f7bab1576b96fe6e9c9cc5bdeaf29cb4e4667522adddf3ecd082a57792ed526d75c91500367db2bec0b58d6e5da75cd5c047793bfa0ff0084ac85ba9ed8238b38e59f579eb7d2a761d2c65caf65a9b8ffb7aa7aa3b81ee561b6806995419f520d8684a8e0253ab8d7e9dbecbeaf62676041a1fdbcd89e33a9e3df3856c1ab66e562ccfe6ef3ce419f5b4e7999fb61cde34d80792c36798ba740159b5af1f1b761a637f78beaa9a6845be7016f4f50640bd84103c6f9826201ec51218f702d26688e2a71ec106e7dbb7564e4c1d4f4f7608b8bf56dbd6ae97d2444d35b50a0f999fa6e67f5d8cb677aebde4f88bb00f463bbccab0958c81a9a856ca2531cb20aaa4c312f53e1b6179669688709c43b7777d86f380626997fe4f0155ec5eb083c598144d589b1d00c9a77e5be8b9289503c60515a36ddd1a79e16da13d30caaa39d2676b92a71845af131d54680ae6c875fc14bfe00d680ef7b4291512837ac8a7dfa1ca2f44696f3cb93a90230d9dcba28e5684d43e10764fe20abfc6aa631174875aa6bc73961fa5e90ae4e214c6dc3f6f79da6328a6e9092b3d9e39494423aa9925ea78905c23e14e1c55d7918c1444a43e57f6420f1925f7b5bcc7429080c8b5df1cabc927c0e7c5e8f8e49c3639471e10c1ced152a2fa5daab94296ec8b4ce6dc662e98dc761b167ef0fd680ec38a55ee32a2518f84e33246bda92b055abf505968a7bca6ece6d052672699a3846ae096867b558cc0bd781ce3660594e7ada001e6138cf942e658f2c878c50aa90f448dd5b0955a2026344a4b2c22de89bc60a77a59ad28e52e8c467a62863733c8a9eb72e2704868adbada7440c36423753e49d67fa6daa594f29531130ab10441394c208ebe81b8d7aa09df0339698e0eb6bc29b7b75f0426bc755c89fa51e596047b4efb7905345ffa130f761cf77fb2c730d3ca34b45276b89c4d449cfb0580beb497a0bba8a2194d9c5224368982098fb9bb2690b1444fa0857abf11216b45caa1672fcba363aa148e7504715d0f287686f6cd37ee94bc217cd3e764024c8cb2590ab61d285482a14cc3b6efa4ef424c763328fa65f5e1b1604e57116612379ff6cd11e92240a114cfd993fdabfd9e9357e6590766deb51aba139fcf3be18f7b29901fe3382353c7c66e6b37ef46c28758cb9ef0c48d2438ff1281227ead231a51e49985f73fcdff33dee9c5f6a8b2b75a4a33259a7da786f7bee43db021e9c504a475fe2ff08b2306cad0bab0a0c3b95d9aff9237a03f485c413025c6ea827d9c3fad139a466729ddf6894af70300a0bd0fb6a6dfbb640a88311363453061dd06b79c6a5560d15bd6ebcb756a3a3b1da4cdc7dadc3ffb5ac76c4f4fbff1e0a803f4edc8f40515c139dac81095face02277291edf190395ec40d1fc39d76bf682ccdf0be4a70c237ee623afc66146b9e75d4477376fcc10a493cf0040399fccfd744d7e0628404ae555034e9172649047ad1e192dcc057afab9e7028e470d1a6f9f1ed46070a7e69e7d5f2fe5d1f4962b9e1b1f5665d1a50a9bdd7021464734e1dc0acccc94c5ef672473cee5454082768c93c85b2a19cf28145ed68cf0a3455a754d3467900ac280fd4c412e067d8a8594ceacf8a0d2a1e8938df6062b309944fcbb93ed9d08a6bd0d61b10f98d60fc3895455cf063c6d374a2add5b614fade4876b64662536c8161b85005d0d61f076a71616a47f6067f85171b7997d8ea3de92ba22230ac158351e51c61616201a3dc8d99a459f3f53cf7bc92d3099f64d5e896d3f482a412422abcc1946b495a3e69d4587adb0b32251e96fd8bab2b1d01a63643c0ff435b309a389fc91adae09ac1609858bd678e37b9aee7e727f880ae4e83435aac2ddac854a1061acdac0b02819f45bd3ee302874139eaa964d1eba6abd575c259485371755819ff8624a2507a890f57e34dff52f2a123d57bda0b21f6846c6b56ac8d2fa5482810c10bca0f2de6d10047658b16aa43db1a673135f07d27f2363d63fb6575662e98c626f4f373db8fd94f6cb97513c556d9e9d5a1ec4cc8dea74aab961317d6a0a779ac1ab663a4a88bbce1f965dd1e1b87f57bcfca34eee1a60c9dba01ffb549f6e27dd32f7e7521517193492388e391e11d21f3746605d4a7f708a468855601980157585fa4d493f52697e87e55a15c09ffdb816a3284a7d53bddf68942dd3f15f62872fa0005b47466cee0c0c23363cb7a1404ed415a33ef779d9dd1aa8ecda818590d042d9022f5ee9fd74af17387638ff508d69014eaf6152e06e2526c7f25a24c49d4ce2b2ec54137970fbc2897f8fc744cf6842f0ed9bf9171054acdce846513a3e84f5beb9daa3c93d020fa7d685c84f0824d77efed7ceffe396217c134e4c4dd25ea256806bd6fcb72c2e5bf1285d1b989f98f8cd8c7c5650901439e01cdefd584a9efb192b21d4a6f6249891ba9805b4103510624dd6d6b0c461802bf11b3d5beaef93cb7bbe512a3a9bfa58976384ba30743e2d28c05be64509c5297eab5067a95276ee1b600bbb827bfdb527ddee82f54e1926f8785e7c5430bef762f84dfd2ba7e3f4028a74ecdc7fee249b9dca860d371a6a12664fde0368311d7401e914388a30200da7d0896c6a03c8360c85c387a2b4b5565287cf8f89a4e6d45b6554a9074e803ee5ed94a349c9b1ec38df12d4ede694d6f73de564bc948c9abfba58c9de74e0ca58b317f7650d51614e1e9e9a22ff299f52e56edf404e4f05d54b88f27c3a6a94bf3c2905d5aa84769f24f353554850bceca9790600bafe0f0351b55af8c490b846d9a11064a3c45d3fc08b997b0314b04001348cd7f52dbf6f9f2503c9275ca1024418dd9bc9a7a55707f43753a9f0093ed94ebccf0c8115010978d4eb6757117082b272aa35d3cd18091133754b69fe9ce8d505909b328dfe6fd112bb7ca87c03a4c9597812043fd9c232b3770d798f08b28ed6cfe0001ffd18a50d4ed48e0360c3f991b474ce8001b4c6cdcd66c3ef9361338f8f228c6750d15b3d34788e48860b4ebc2da1b162d19b3c9ded2a911796a2eac1a4d07d301079a2dfcb53dc8ec898e894b8be7168a02445fdde00257fd4538bcc758cf5fa558942d29aa95e2a1a0f43a441cf220115ae97d76331e8d79d0fa26a688b8a16f5be6140e506ff9bdf8b4eabd8fe562b7f9bf2bdd3cc16ce26ff694d6eecf92d98c27298811fed47038b6dc505d74e7c1c234b40c885a91f1f7f4e6002590254d4bca1099c7e6f71b614f6051f2699ecb59ae46a36ee1353df5f46abd48eab999b0e07e43761d4f4a335b9126a2821a91d6ca770563ccc55e6e4ee9c8f095a9c1c2137725622b36f6ef3fc5a3b8b7bad0d27a7760a6a4ccafce45c67b76ef77afc7de5cfb428b11315be10f3c38fa0054440d641071e74b8e9fa92e05fa9900eae3072f93095d78295c276783558776ce58814bc901df5851fada9bb14cdcf373a3d42f7acb2ba6dea0ea97f9227974f6588bd112d1b17f963fc8b7debf99c0cac191049ac5b574035ca406be82f40c6160cd1c949a798f796595b5d812a0260dc9f9a28a850371621c7e4ef744acc245763a8b66cd16343fab1024a06c5c2e44d3ccd65be3850f270b3d520e144ac9aeb45fab421a96530060afcce7e224c13b3e8535d47eb7ebebf3f7b9eeab27a788ddf8e4308fab1b20287495a682601797481c6128e5a5ebb286e0f1b32efa40504569bbd49d7a929792f406dfeef03779c1e92388e71db4e860419a4bfdfc65a172a9be500016f8bbcd4d7a33970989b6395ad4c0be26f8db215b9ce7f0351e4fff8087e72d879aec734977dceaa32fd660966686d4717d73e21fcdf99d55c69182a049b24e2fa3f92e0c135302dcbf3718934de3030fc3c94842603ac435030eec1e0d23c372e5d5452edba3470f95d232a4bc34f6551ca2c72c6b893f7c4fe5958b907833a9b1853b137501c29934ab0b1a2e5a35727d41fc09408c795b5b66ace0bc8ac08feaca4f4be83aeeef854865ebb08239fcc1e5d0ecfb2091671c4a99d6a2d611165af9e12366ea26814c6e6edc4a97a28b8ea66c860161912f1c3d2b7a61ec5e645e9111797838f7c9f344f6df47730b4526146ab9038a8d02bcc5a86d2e58871b99fdbef6a1274791b1fb616d302457fe93727e8ae51c4d6b809be884aa8556eb58a664c2254f77ac70b086aabf94fb3649c5d5f8c369a4eda1ed","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"a04e2aebb4f065114c065b7fbf49759e"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
