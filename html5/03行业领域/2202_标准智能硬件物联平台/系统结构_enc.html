<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"39af654eaa19740180b23bded15269153a9f0476b150147fcd301fe33ffd93e694cf5706a1c3a28542ac0a86e01c5ec98e5b64ff3c4309c78e9367ff5e2bdb37d17a18d7f107ec1f08fc943e7be5a935f7cc609cab194bc4616bd095c9c890b76828621f3e9d421fc824e78a92e720ff6d8ca26ea9bf2df719a887cae73be497b44dc9a911c1fd126291e8e11efd91bd5e334496726c55b6fdbed743424cd00d58cb6c3ce08d02c65caaddd7e759653a20e56c2923570ead1d291f2f9e96113f0d131b30322c613562a7def321907aae4e30e93fbb1543351368a3fcb3235541066ef237004a70c02fc4cd10d144a47f5a0e924d1c22c38ace5cb48340b7645f25a7536d16670ca383a969b8e21059f07455ee92d33092f2f8e6ea207b7ba97a74a5494428ad05c226ab13929096cbb5d965dfb4eb65fdd8e4742f6899422396a6a91ae37f47a80ba0e84a7ff446c6e475682edd5414c124bade81fc663e76f9be3f780770a542fb390a34d708c16d9a0ce5cc15e2ef172daa0452651bab02aaf2950da30bd06b48385b49ec8ed02a0689c400925c0894bb045e550cc6d0ae6a18a316ed86ff040ec5c910b6d154f4fc0bfad8e1a4b6dec29b44c6d5cb71be9b178eb5f0d7901599e4098dc347e33e0f4c1b11267fa2c8d71b82a1f9cbec7eb029e7b3dc3c135c820fe9dc38e447f84a266e0e44b095fd8bea5e463b1096b476bcab65d2efd5d8ed9b0103e3a427310efa9703091bc25bfb62a91644ba5d1d97d2efd7d0906316e8fa10e20f040e11bf333b926ca69ea78aa6c27f6866a7d43144ba17fdf56a10669bff9e9eb2a63f4d8628920abf4f8d8a29c0f60f05d8f0f86f63986a51754218b3a87a827db30021604007dde3551d33d2a10b4bf185347548ac2129871eabbecc5f3f8d56d8d53f11c10f19a166f135bf5dd7a985c92c9f805a4fffab467c20b87193d992824d8d06134f3449a84273b70dd899fd28d58438bb4670a7c7311880682e50ef513d722ed0cdc73eba9a8073d6ac7150ae58503417f941b5d0a3ca664dc11ae8b75054ded1a0507c06768be9c691b1dbc13e70fb57f73f8215889d50366cea7ce1618ba54ce333ad58db1ce9c95ae0dd2235a169b9f89f0eab294924c9e7357636ba27de9425d6f9e438b83b3fd43fec62957b2b994dbb9adbccb61e12b6e91abf87f4462c3349990a8b2b46242a13f5e6284852df5a455108b4c1eb289c73e11132273d42295a3e3677e877b3fe90ebac82acf28e77f391dc849b41a62bb211898ffd88c2739a446de8c27905bcc9e5c1cfcb6eaf00d82bdb1b0253a69e8401a8c3019ac39cf4a162e595a51a83feb4d180d9673da88a1b3334ca50c3e4fd4519d6724cb06a80a836638ada28fd7344fb2ce2d74606fb5ad28a76210d96478fae5ad925ac4d9397402d0807ee8af0cc3ab2fe3f603f6ef5453769a9e4dd8af1b4db3e5186ccd3bc84bcf5a835de29b6ed5ced12cd3ba524b9eef7141228c698637a869f7035d16705b5f52874565e9c6f7b9ee3a47e9d754b72f4fc94fe8933a99e791d384507a039529a05d914723eefe231976591b522df42a6411761df7faaaffd7d9b72b49ed2279fb7b2825fb5b0c6630df93867607755d95aeab067ea4ff80e1b567a4147f24babd76a6325231fc928c77f227e471720792270abfe875d3dc5f6c483151c95b941c801b85e74e7fab5f0fc51be582bc6aac3c9467608fb1d1dd1d09b35a18970b93dc48d635ab903d034506cb7399811e565d3709a2f33d96dc7311bc7c3bdd17517bcabec4d38e09a194d47fe66baf32687ab62bdb88ac20b1cd2d2a318df4b39538f3cd10bfb1118d5d9913e396c5854656dee86c4af7dec244ce6986eb1aa4a7b01d88caaadafc69ae57c84f180a52917d98b360894f893b2cdd0102bf9c71630cb8b3fe676e41f305fa69c7fb980d4ffd4b7bde9789d8e1f5e38ec8f08f593fe2004cc8aa2538c2cbd566e79a9753d3f49cad5ca742753a9dff4cffaded7c2f06e5f645a3617159b287fdb1e0456dd6c0dfe4d7399dc7de21d7749d00374c2b15804d52088de8972340642332376aa8447b48f4650afc7c64d94866c1e026fed03683ee0af732f34e863551af39881dc5f2f4851f917c73cb61f8986141fd2f3544db56a65f7ae8e449d597de601cc7754fda921e9e5da42030a55b267fd79b9e49c980afafc0f6dd43c14e68aca6d23f9aa6b0e874af6c1421a2d51d5527a8770560cf916a558ac3cd7eb8dc3599ac65e54968b6831d97aea1a6144d0de1511c35b4aa766e27af3eabe93c51e357bd1cd8f2eef33ccbf593aec6e0dabf6ef87c0cb9c113d808c22c518b2105c7c5a09d47be29c37d8602228d2f15e225278459dc2327756641d7f7dbb1b97a4e1faaaa42b1c9795556e52f1637cd709f1a54d9a1eeaf9eaf144b3626affbf7ae19783f66cb8d6fd7e921320fd5da4011e0c15e064271d5a7a1a9fd7a99fdd7e8e1659a4adb8e51a7e15b1ed83f70e0e4f5b166783e2948bec51d782432b61b55a6fdfcf67aa97201d2ff785d585e9b6651f3cecfe34834312cc3a772db33302a73d5ac02b8eec49f55ea065276c9d6d3f91af80a7c9a0d3aba2fc5d585eb99e3e9e7d6265880e0a2af40813bcf7e42fd8affdb0e1b123f5fedf4699376bce1d6e58f162fa6f87b0204650566bf49ba63bf9d9b0fdf8e123650b96dddf15121f835320126c9b652538ea1884f4d55fbe5efecf57fa418a378931c23181c70611c68cc0240c315473ecfa754f9a571ea31ee121a253889cb0ca2a7033368f36e1832c6be811606caafd265ac1e072077837edcc507b5ee54535f02207db0d3575d2b1b500e070543038807e57de2cbe91c8c469d2d8dc13a90b16f49c2cb5d015708ee69ae68ee13562421ecc57d21dd8e7eebff854d0500b33a4bf5109a0046d7e9f43f226c96b806290226e99bc3121f1f4e20e182ebe4937b6eeb286bbd19097912c0fbf3bf6c56a45e26e96e846a980b5e5bcbec0e550edaed27e5a1689884058e82e4e898479b0ed6d719da69ba284c3109c4b3bb772243db11b63ef147d7816e8a39ad4e8ce1a7b45367aae62d8b9bae7ffeefb9f21c25a2cc4d4eb0ebb9dd9a82594670657cc44f6dec9590c9e2daa0f8a0156b3f1716f1045f6501cd2d639f33f2300f03ad834888a1e4d6735f1ddc2ec758d86dd0cd6dd8eb9ffef58050e91f67c6b3ca43c8a372b6532e126af3d9383c5cb03d34abbca59f021309465c5a49f8b5857e63de9589adb12f4aff50a059e91808a98b6e3c17454ff07f375b4449b96c9548d11d66c96a751969319d48d768a4594d6270e9b8bf0545a0cb3ef4e6ef8d2a27f2b292fe438beda06812378f309d45611bc00e8745322e4a472e2813560d327efa7c065ae90ef3914d58afd7a90203b000f6b5d3318fe8130b459aff52cafe787e45be68772876ce3da6ab4a3ad0c37aeb44d455cfe0b60adac582de1f2013871f1ff7fb16ca59dd0d52436710b6def5b78dd8828d8b01b56994bbebab1a08a225ef4e361d6fc964e3e748d9f26d2847139b1d46ad517686998d31e2ee46e52c126afdbbf10af955dd2102d07da168ebb80c8a27ad86fb502bc185cb9204039ab1058b71fa7170122609dd98b7bb9d2be712d95125fb1a31229dae221461e5f8f6d306df1cc49544ccb3f57d3027750bf2fdd5bc4c4274c4869603d1b8688ba8434560310307a2d82e5e0424446aefabc5d35b34c6b9ebc6fd670b5f422edf12b0af71c7498c7af33f1536021b814ef897c93798d60c26c82561afcd6f7fb04a32ce0b71a921d0eff96045a0a9e33d266b395e461efde3a699c51b170fdd714a25115a9d46f7fca90d5c4518e6aa00ebdcfc684a44a7d24d7fd3d36b8d0a5d60d0d69702e2757c5f47ab4c9eb28fb808b64801ad46560ab72f6bc8ffe55383651fbc6ddcd8e610482f6b3df7c5492558c4cda0ce87cf323d198f6103548bae92bddeac5c324143ff4ad91ef1d40e23f6d54a746854c4caa83b485ffdcce7ec8726092424ad5c9da4b8b7961ed13cf4743faaeb7d9532477f53e842a3cfb1c3c126253b353f559a6cfc60daa2095ec565e3f014604e5e455eadec36fa044c9cda9fec8bdbaafdb85c9e4f855455cceb48d691a1daff9e1d73dcef41afa9b2f3b05c6998cabf8c90ee64dadb9beececca6b013e4f3ed3557bcfd5cb4dd535ef8e5fbaabbf5235c2d700845ebbb92d64d246d9629b9eb3c73820a68de8770bd76df8e1ede768e69da813fe49a9b4b514120c16bf52a4bbe7ac81d1b496994690f9bb7e96cbb265dae5db58db62b74b7bab870f28e97f860e50297e79bbe88973446dda17fdcd441f83d1af1c55e765cf89f27a3f5c252825fb387c30ed9906d2fc90b8266131960799c6b0b8a849898b80cbfa43b5295f8a2e57433902f04cd614889ea979d04f00b6fff8d068bd1c32aa3a7904144857f3f85751f2468d4dd575c640ddc41a9960ca2d9051bbc74321d0fecf6912175c717186898603cc0cfe37eaf378182ad2d204e5875a7f47e2b41b593ab85cb5a3d57a7efb1cee36f3159e1803fb37d26eff742b3ec44d8f4a22ec0b8c5b5bea2105721730ed121a9e2174c7f7511157b794bc54e4170b343808fd41d64ca114b9976cae580af17e34d5c326005d15d9b3fde358a694242e778f21205c8bb58043ece4d1b98e37b71eabfbdbcdf308436fafd088a8336e7cdc623bd88560a2a7e68fa1c62e0822c9e47cecefc4ebb5ab1086767fbc275de6d0d49e30fdd4ab8de58e4a5d009e56bb07eb61bc6faa8bc166305b63534193e8ced1ae7087412ff0e229231ecd7d18d897d6d9dc60618a2643cb9f1e9714e4b505292052e6cc40833b3251cb24c9c281efd60f47e53bd894a6a3adfb6d1791527fa0c7cd4cc7f570b1d92be6489930cb91bb3821037b4771a27a8f79c875eea6e567654ea395ebf3777874c0dc8f1bac7c4be661beda84342f891f57e04a4be41b7df360e1368aa26302dc2ca41dd29ae00e435472ba9b80521c32bef94dce834ab4b8aef6054b7cea594a5df25b4f708439e791e6cf3111121c49453d812e63d87f98d1432e35b320f403f1e50c6c0911e112eb9e6b931cce0a3fda93abf81431b654c075041e16be4935be9bba54824b83b826278bc20d297f6df258f468f5147aa3df32bf57398094658d06722a1c2117ff165dfcf1c43e1e513ac09a57c797c2e91971a6a2b2cb39cb4b6162515fe7d5366d5e741f8f4411072af43e322d70b4ae2aa6f4d0d91496c28fabcd6b7695d1a827d6270b3a15d94f032fcb02fd675d159ecc631b2427ec9229c66b7f42b921bea3f1dd61b725c0a1c3501c90a602a8119f6537b25fe2043c994113997c08829b73faae320673cdd47b641d919908ee4301066dc6bab9d920b78463ce43a3e83b0cbfe610c443bbeecfe7f63d73ad57d37d634fadb724dcda1c70e6a619d8cc44c7b039cacc5f516886d2b38fc854f3d29ed6b45b744b989cf83533ba33659be2ae8509d8f625a4401b2e6d2feec8bfc82ac32748b5f61cac072e2531ab9ca8c2ac6bded2982d2b6d309736f3cc514812ecbc65be71e2e275e2d4e9b03209058bf48d3e59ce18f538f34c6d1b9c647c250e775c3f74c647032221e7663a100daebbe89f29699bdf2b63c008d0bef77617ae5cda37005e487e234904186a12b9d26fb7f5e46fa5219441d1190a266877e2735451b994f4863f6a645be357e40daf006872b69adbfc76efe81f28a5f9151efa61c53d05c7a9cbd3a2192c0aca9faa099541c1fb65bf9168a0ab548e9c8c2e550f4567289585943465b3e9cf6b7d752bd3d64fbaffe43bc9f656549611d3bb8c9fd6ddb53db538d8ce9ca124f29e9e8386217ecff2c0cc105c4b3730fce4ffcdb156188a23bc833f4698c031a56d60051b7e868f7b204374ae844401cbcbd7aa4035fdf2dac4f0294a32f909cdbb10c403be03b4598a42f990bb3afd971572e9a31452ab0a93d651d6fef3b7219b6852a7c781a59da066cf0bb685447251f4cfb82ab8dc35cf7f0cd25b7ef924b0d1aa509938b8b382c6b1a7604ab199cf8309a138a8795960b38d74c92169274cea6bce4e776892f141f96e7fb1e7cc32cec73f2980e2e2b40bcb3c6051b2dc4c3dddcd8c2f84bdf78c19e8d746167d63e98155785cec17701e08a68f6feff2f984eb1d8a58a2bd53b7348c0889ededc9491640d437426891d1be0126073a96e9a366ca6dd75f18baeef821c64f015a8fe351eb94f087d0dc8ffdd7820e660bfd1794d25deb29e951cea62fb4450bab2e750a1e97059c502bd04ffbb899c8034de48164280ed182cef38df0c2c8946010754887bd9650f18b4eb61d69de94f9265a770d5320be339200167328fc7563188f4bbcba1fcf24b287308dd36fd8d0aad1e4280f187b73d281808cca84b1d78d71e80d1ceb8ba2bcec974ad460981b0e988f6d77f0b7ac5551722e38710987fd77313d30b200fced216fae701bda28c8d3730741eaf4aecab7985d795529b9f5de21a556bdfe98dbe99bd3913fc7df7bc8c63087e00fd47977e22f43d71f9754693dd6e604adf520fad8353f4b6db34db2853ad1e463bd13fcb93fb4f28e03e095a1aa791afedb107db0bca18e39ef26a1e24fb49b99211ecb02e7256353c1a0937acec55b5936c7e45b96c19c433e39206e39d0d50ad39acfb37229b67eea7517057af2544427c8d4e0017055905812aa17051395afbd8f9b8ed7826e56cb7ceb78a5c340d067d0c237da92e0a6b9129fe89a2e959a7987b493681b1aaf2d316c31c45a2f4862a1036c5691d87dbc4bc6c2a5731ec72646cfcccdb5e15e4200e79d4cf0d5609c5f3e20453dea15da7dff7801422082a77c4b154ebb570538c3721bb1541a89aa1d3caecf404e2d8762556c2ddb41c2e14db00771ca990f52a2fab24d5dc47b31868758cac5d52bce5187591fc68500655b42f2308f6af89c916018aaec01f54db5475528a528ed5a0ce4e6bea12b6eaebb4d04f6f70a2e9b507828609bb25080c736baf43e4a4f84aab1c569809b54487550537ea09ed42708a415405114dd756c28b21fdc3ca5908b251674dac8ef700309d5e6db2adf9c7e63d7e563f01b3d4c48aa94793cf5371b408081f1478e9f22e1461604f1ecdef8494a80e53bb45e10b0e72ce3f4406d8383e1954e29e838abe7bf9705442da9ec7ddec1f34bdaee448d310662e3fe6706049bd8859eff8bae427c771e862240a855b93b17bd816c39d507488eb4dc317e0537fee1e8a1a026935bb48ced540f95d3bb74530fe16ce9c776704ac684dacf0c0ba66fa08d4310888b66ae22056ca4054edb1a04de0874c2605fbbc48d21955cf7ad4c6a9cb8d987ed3d599f00e69769dbbd59b128d7dd10bec35b76cd8548d3770159a66bec7881112e565ca31d5e31dd8e8f82cf526717e1639ef739fde4a27a8f9695d60c97b661fa6dafea5810323385ce91f424e429121f995b2f7c9ea30acf292bfc5243213bbba81f58c5b46e8b6b26b8a1a07b6aad9057e1650792291176edb5833b5960f6dbb9e50cdc1c5b244246aa771e512c32dc26dc9930f4609ee4d3829733150a8bc360960b2cffdaa77a3b8de571a37d1d9f1edb1316daa36a60a00125d4e08d9aaa08ec0e28f5d9ee0382e613ae45705858b38cfd39011d904bd8f0aeba07419ad306a8f6d1ea2efe14287e02f1670cb69e95bda179fbd83019ffd6266d549885a14ae573f072d61eb9fb553269e6610135b1aec077fbe30c0500522b7e674451b4a161b4612aefa58a54fff682f38f674178eeebbf53442d72a13cbef8d69848fdf72062a682b6479efe7d2a0cd44f28758c4d7b678046d9d7337b2346eab05f381cc51210719ad97ea3ae76edcfd38136111026e393b2c2c66b5956cf94a65e24ed76cee96463a8a63afae951f2c1d70cd0f82bdce451fe93c31b0d21c3873b046fea63f5cf90e9d7e90489d1337af665aff2c0044397b7ebcda2b8a0b27a765daee5806702fa2609a643b6b2b1ffabbda8d5cc65fa97a7c82cd9be8cab440231eab51ace276586d71ffc492f5f1e556edf2d626c6773e4b8227a24975ebe4d68c20972f7a5dc1d4cc48670f1001e9425b090479f100f12d2a65883ee742fe004fa837248cc6932a7656ed51ed0cf4a39e9aa7f04f1bfdcda1e720508379059f5fda2581655898c33ce7bcf832028471a289fbdc094ed76fc4655d41e2ad53c918477b9a00e1a3b854c2f1b34562f01fdb3d32584ce8611e959c98a90d8c9f82865c245c5bccbd606e2ea3f1e143aa06db82aa8f2d41116a5f3539fa9cda864bb793f16070029bd7c4bc7d1217508c10edb3adfaacbdd17a058e0efa26a87b0fd44c28ca2546d50490163e2a1d68c5c4ed6040609d3af6a0c5afc2d6bd3c6165dee564edd4d211dc444e32ba32226549e538df2226bba5f1418c3bf50535862e6a53a76d684ba7c80674a888a070b5d8b9fc0bc936df411a38ebed4428b1edfcdb2e9dc61b6b328ab3cc54573cb89eb959da9145550daeef1dc5896e35b65a93d4d526a1a90e124447911b9dfc241d0800bcfa5e6e761b9e083b7f79ed3527b2efc715b476a0a9d016065e2c1b8df71d788e4eafef8b4d562053767da9f29080db750bb324cda952cd630c07713060a6416e1aa96d5e97b050247d91ec29c7144a0aa7dc29e6a013249030ae67cedade026da5670fa82749dc7a27060f3773fdd9e93c0e5b1ac745e0c2e567a06ab91156276e012ca9cbb3ddfc1d4400f982eb828039d02d300f27fb0f6b0a28914f9b99442c8bdb3adc9489315a5c23e74325c820945c2feef480e5ab6087ec00c3dbbe2e8e389cbbcf7cfd9311775959add60754f97bcea29d71de418902421220fe8a287a75472f25742ce1ebe937b01cbe6a9f0377d740aa7a1e762f9984a4ad817c01869a32e960d3f6f88737cb05db220f76ca2cdd416878c5d213e3d51e732399e979ed79ac1946a414111db5240830c9009bb7805d66ddc211c8c9a5e2ea3c1e75bd1e4d91e5bc001bbb7dc522a3b2fb97cb9423ebab7b84f27a83522b555d20fbe8902d28a50d14fc9d44bdd5451e5e95e7c718881d0c659ea44109140c3f2b7d7b5666a4361053d0347b09854dcc2893d271bee9ceceef13fb6dcadf4894809e160be0b9c57c5eb98df9f2a4ea8cd8474384d607b19f90bf4b252097849066295ffbd69e3932afd522a165f04cac0ba9632b3270e1180e575bead67903c7f327aa711221de6c633ca63e1b10a0476f77b2478883b8b9a8e60104c7066e90e547570d92225a3d102220e245b80df8b1d64343c0b6b99060da4985b379a0dc0bc934041f67aff52e001f9e748c7eddea6fb67e508022bd036c104522b3c884fac814c7b178338d13c5c1d30875aa925d964bad86ecb193141f04f147f6a90a843b22fcca315326534b1d3e53eb1cea453f295c4b8e218907815dd12d2033d6fd5df7ae1e2aad3b487d8c1642e18b4b2c92d9723fa6574b249b4842aced901b1c88783cebda85a18c8267f7c04f2bcd524532f97d44e5ccc3e5fdd537fd7302ea939fbdc0a00a31b54d63ee5702b54086c54af4c58c4a3f49cfe17ca39a3d2d9cbb24adc92d253f385e19c70ddc1b1d4d898bd775365eb417c5d8e912870889605e086a353bafa388cb1bd6a7e5bcb25a16bda38c166d0c6d1ada2a05b75adc7eb534d7b8a97f9a5a7bb7f19e8a468ec2ae4f25756995b3e9c7bcd98c1cbeeba3915917438dda15b6cd75474b03b6fbfcc29a2fc60fa2b769bbce472dcada8bcfb39d3e10c3779019651880878116c7c8875d18f04490a53ae366dc30d0c97931c4c6bdc436bebba2c6a681920935ffabb034728590c62cf4fbfc74a242b624d78e826c11cccee3db03ad9d5f93516baf59a6851db5b8c5365ab81ea8c27ddc0ed4f89498b528f0755e48ba61fee36ae6c54dc3b9b96af67998404340931dfe271250c3d99ac9d8e9aa90a6d18b965720281f3863615bdd9268e72bfc86433f9bffc81be632a69179c15f40aab9f3ea6eb3c4ceced710ba7084354df2d1cc457e86ee4e0deb6b2aa70b63bf26a2c4a07bfc79f3589ac83fedd47d0a566f371c6ad2a7a0a683e6c93d234b6d92bff68a164e8ed1c37c1114fd6982c2edc496ed3dc81634a54c938b3948b30c1c45860cee64a4d2690c3e90d38302a25bff4dcd722142070c40f2ddab45717e54b6e4bef79d6642b6abef31836968702f451fb0f56dae63a1adf900afdd7ea469a3677b8410c561c9f04af782d458093a7c5323106ac7d84b4caf74f416713ad057998a47c5e2ba7ee8ab9c4ebd086c2ca83297f3a79ee6174ad6c9afb11b9179b1a15c9d1fa84458c656206b3c0f99b64f0a8739e8a2885aba9520d77dd8ab67d962bbc0d8706d8e6562f1e76656f5313a895080a7b3c6aad3684c3738022138bd17d338678695a5c1edbc3f0679efaf90fdd3712f5ccb08b16b83e101d5517a770fc9b1bc79995465cca061bbf0cbbbee7f7161a6f6d747823e447fa832d1e26892785ee58703f4b7b62128e7ea26313af64edfbee84cb18741d351a534985293d99b9e8ab6ae807ce1f9291683a4204737de024662648d063f2e4969ef974f7c50a6cf4e808db2357d8b1783e4e8b887618a77fc309bde1cdb5d7e3a22d45defd0e1c6d925fcc907d5d0909e1b1928825e9147a4c12c801574aed6f140be8e3b500861c6767450d23f2ee25e58385eeb36493f3020f4e87dbc8f4a6718b515b0f3f627d2ac930c305bc992a002dff47f9913e29b36fc19c4b7c68c5cc3764cca365bd032785de13ed34f706c0a9c9758cf22ba1cf6f50087d0b88ca2d523e71d45252364cf876c6c6ba5e9f250387871daab6f1573e3d94c2a1ec7c709d43de437efce941d2b813491a0bdead3c7690bb5bec7a65f6e142b2d1f164e9b32ca305a0d5e05926c1d29e5dcf9317bc3b69f01375056e9053447a02cf0cf79528f8809eac543f87d8212ab98d6d052836a9f6bc1ac341ec05c14c37fe4ce5051ad77947daae7a5eb4d42bdf1ef7fc520c39bf91e903a57a50d7a340b75e2a2ad47af0816b1d3ae7980da83eeed66ee53c8cd969203895e9e12937ea368a06c0832939fed391769d0cbbbdc58338c3a8813b3d42eda1f4ae8e55bae383db73404358fa37031670c7dafa612fbe1905f3784c73eecd12eb10977a58b60680c445ecd38b4780d8a1e7b94603d0b54b5489849619b19e319d4de862e7f4348e9201da30202c595e82bc10e6a794ce118d819b2d7f4c36d01130a3e5f450d181d25ab16ec3215d1b42bae7431f25572140539c59f0f3ed3f06d8ea17020b56b38830a3e1efc74afd4775298733163910bca1d3b13d1903901b3c9de3cfc34ad2e04d31a428f26d150a8cd4589c484fced556ca356187f385d3c05d7d7ec303c0c6986dc5b982ca190acd8c56404cccaba88f822d68381647505bd1415b5a116d6e7b436be6f0d6ca8ec2fc38672ff50e8889ae34037706e18184fda20569b12b9f739b787aedebb2ca9d24fcef0c601964417efc44f9ef99eb3bb15fab575d0e14e58821483df482dd1c63d63b46f99a45f0fea33e6cbdfe24b70fbbf2353cf8ee714be29c25a5ca741c4fdba38f2d7329cbcd4d63daca353a626ab71ea61cbe45d2fd9fa3fd23281d33b07e193e206c9e40b5bd68dce13c7ff0c48fe037fd97d679ac1ce2900eca247d1e61df1f064b9482d14e94b36cdf9b9b730f90cecdd30c02a26c060274dc652c05d833a740aba7e2a3bfbf14b6a3e0261a3a1b9f1d959fe570a2459a299855b18d1a1c0d6c585c32a73f84c645239f627f6c6d8ed49e2bdb4cd95f9e3b9ce154905e0bc5c3b23aca54326692244832d7b194c09857c183d41f6585e7290ff1d9f4362fbdec60937e5036997a0662dd60b2cb2dfaec21f0b90cb33ef488604deae4369fa296483090f67a4a20c8e93a43df3c2e2265133860dc893adbb0f7570b4f6343aa5f3aba9d511dda855b118ddfcf986291aed17d0673c9fab481bb744e9cda47bcf1c89bcd591e8932ee76fee8e83fef358b56da6756de3d89e699272079fe043890fcfefe0b204d543810040211b3176a8ebb5602e9b247cc0db56ed716a412db113feb5b50d7ac141b332b3e940228eecaaa8f2e2b2559b7f51a890dd4aa729a64a863130532004ee55dfba853154196751f22522ac3a1d82ce4e38757926828fbd7c143ccaeb70047f016a745ac748df3fc9650636bd3d622d91df8621371f0f7d086b54fa15e8d156a398d34f7702bb3583ee61ebf0da9728c44bb3d3d2665e3aff9e2b014ed7674314a36d88c507c15c6137918cdeadaf5b94e394b8c9233c3f0c893116301c61fdca019363ec7d1029acace739d21f03425c52d930f96c94e7bdd8b686208a7848bda9f979878296f93ba9878b88e3fd551394100c8a6fb2dae042bb6e5d01b9704e5887bd26f7cdfb10aca204b670357921c444e55baab6969077b5125213040cb15a1f543136e056b8316a5c7a1064adc43f9055b2616083b07fe821c39df44f01b14c7876e3ed21e15862d4620c98acf28961a19c1f1adddbf117c3f6f306a76393444fa9087c39cbbe71a0cad9cdd0aa8f68afbb017a15dbbe379f882192497afdc1fe6f69edde5eea3a64c686448c36d2e9342c8fa3e960480512a580f81edee983ed519241f8ce15cc5e3c91e82ad8aea80c08b733d3a8a0d9c8f5c5a70951d60cfc5f3dd1f2bd915515284883f77303cb625a76d02511d410a2f3965747314472322d23b21adcfc10d34c94f8febcc3e76f40a5a0365b9960ef8cc086e7892d4210efb0bd95fda80fd49544fdb537922cebe09d38e29fae75bf0fca2bdf3d5b1eb1c3a6e0daaefda3899873ff34a45a1c5d5de6e3340fc4565a93365108f06a532c388a2cfec6c469a6e4bf765dbb6617e1f6555214f2da0b5d3a9dc91dc4e64658611efb1a41223425422946bf056ade2aafe44639b29e1d61610092362fae004fda999ec6aaaa4ec30f4a5b53388a827f12c5af6d8a76ebfc2d7d1cca90ecef30424e2d24cdda976e5af31371b0c1b52fe1f480b8d6f1d792a49925d7ac0f55964bd9d35d359efccc23df2e60cc5c518a692824d410b3b12cc9b4d0803de9a1b351663df242ae64ea6b58e48dbc1fba714ce2cfc6a8fb13a855a91532e2c4e604303e70c8edf36d719dd7cfe530f13cfb8864c256f140ec8b5b29b974eda3ce5a4042952b05afb0d64c1176d0a5c9c77c07738db9e9dbd2c3022116655a89ee95b04a5092cac435aac267f78f71b97b9ce32926fe02cec4b19d7545d2d55c1399b1d4f8acdb541f21abfd200092c6c57ef4bb98f3a1a3f316116ff8cac0707c6ba3109d3d0698be7d6ca7338e7f6f5ea8201e4e23c9ed7edce9cf3610ffa62a10a18d009fe4244061a31e30a92690dcb7275e766513a0d6cae71f0343af40bf10df44751d2e39c95de85e6c65d0e19387e2d799abe24222bf0aa42c8b258a1287aa26386ee69c8bb01f0b9377139ebb6fda5095bc1f6ff2e5e536caa91998dc4cbae0f010d20c07f1da744388edd799e244f1fa91b24c401e49b77e458276f32b3e080e8b68126913ba8bc420f91c45f0bf8810669633824a81494ce3eac49672934083fdcf5733b49e21b1e125aa226760a07165510638d98bf26948dfc6fe8e6690ef2f90aaa141ba748d3464531cb53c53236c5bb29274bf9fbb648a20577bf69c3d81f698c2600e7f60d3fa6878592af4892c05c16e81bb8b8096149f036b7d6432779cafd15248911ca79fe763d284d8d946a57eced68cae54c032d3ffe3477da4ff52f9b6e33b6067c0a8d8950aaa56fe91ac0376fb9e832372ce0b7278091b3d39b68b2c58a2927dc533864651cdbcad35dc80f12740f7f02e971f070594ce248aae60eac52e71fa738e1796d50482fc019f7792103252cae0aaa5f3961e9fc74937dd89b270df0c7d029604f180cfb17c1dee1e00bf1915b69851b8d1fb3cd70ac0de97b839895471cb07930d21742beda2510577b543c690a38a2a45db716ae53800098e5df4a1338e4f5a11d8847c6f3523b0d9857230568e044edbd6efdd59681965796fbfd67edd49fe937702ebcac2ecf91f8b849cee2b91aea4c4af29c2d2a32fd2a46183c3b88a9cad2eb06d1391edb07006ea2432266a9489abd6c1437c81c7171f3ff8255772b65170f444ccfd069475d2948ba95094c1805ba397e62f0714aa774fae789ec552f01d280491ddb4f72f05b71f0250229793e403073e26228adb1b45e1a5569017ed4b501d334653171d22c1fd18bb39b6dca4ea41c7762fa2afc8beac4841a6d2ecad7dc5b5f2939727aa90844c3e7a28c830dba5a93218808870ca76a8e3ab9ee25fcfdae9928acf3956455197dd07e8633e011aee310fe57265e82115713f86658dfb9ded46af1063887aefb059ffaaa79404ec0d9e3a5f6a89dfb4a1f0db76b24b43807a46db2faa75f8221218e78d301dccada9e09782dc00a9311a20cd85ff4adc097858eafaf72a0eb144417063fc3775360529e8db9c53d9fbaa698fa7fb1f749d8f18e7b69304b2f431871484bb83ac8ed88c41826e1213043088d50b10064b64264a4dd817de34b05be095ac77d492d613bde125709735f0e722617fce5f99d44649b24650713f31c648e708e1a37e4a7702615e0f211aee16becd8edae35bcfe44fd786e321c5f9c238caebb9a51b082321546ce9a5fa49979e41285a8836e18016fa289717fa72bc68bb7668bcede21f3d8d2d1ca72d9c499ede059909091d97f34eb93cef0f6458efaeb1bb6ac086e9abe8d419494bf692d0c4db29cb238f9815d942e665e3653a9a9c7bf5136dab9875b84a7328a8f8cd80d04c0eed123032f33a62fea2028cf9a0d40750122fbaf4c1b4a463be43af3a57bc574e8c5ec689e73b23907a83113e3d274a912a7839afe0a8f5b0a4ecf4715d46d35b98113f1642ded59353ae13ca94e48d1fadaec2d6b19bdbaf2db3432c0d2b46e83df1ea4ddae6af98a0618957fe7b2ceacff372666b537bcc112d88c07a18a44c3752694e7c58a3b5c9ce9b0eb03fa1de37821e1171d56a3517139c7a5595be1b00abd6ba1d35cfd86dd092de98945053421901e4db863fb64b8004643cfc0bfb8ee9602bd15271f2c42899f4fe98ec5b0f3bfda8d0b906eb36e58ef7001bb7c6fea851c9d94d46748b28bbf307613b53d6277f71c18c94409fd6b56a4d2c713ffb156ef856798024948c4013cd0366698870438df5c2420369c2555471f0bb5b48e4b99e216974eede2b93649c396754e598e139e809a62a90a39099500f0ec3f1a9cc5c47f821f9a4afc19e3db909d8a3fdce31bbc68c7bd3b0b3dbac4fdcbc17cb29e1ad3a6cd388780fbaaf06c019186ac139260ae6fb93584164ba6009ff2d0d636a241f4d543b2f296458720a9b48a67c37acf6701f33414906b6148c68b43e7ff8b94a0fd26aada5e8814ddacd558131bdb554722668ddf7f0e6d18ba936c72731f8793814dd161286685f2df6ed75f4404091fc79873687eee7f59451425675c572e1ad42eb87c25cd00392d4cd0d3a26769293d9b9b1509b01b136bbd41e9978af8f9119d3f5610a4607ca41c8e7c7784983a80ee391212113cc69c20406bf1b1d7bbf6a4acf9e082a2bc4f492dc0f666bebc5ac81e62a45ff3537532b776a3578a2fe93437282c8336666823f4991fa311bfb267e90992aa9ae38855bca3072a0d32fe33c9fe28f5d778717d27db66dad6483d546f9248710d1f1c26590ffa5bfa5a3dcc9ecb88436730969d061c8e0ef51e9053d2c6d9006460f82f0e2448f372fa2cfd89f4ad9c1bcfc9096c119a0b37f8725114a546a00bd9328c7ba7a84d2e9c5dc2952bec2de7814632ce69bf0c34053edf1b7e7ff9453fc5888e1398d3e06329e0bda39fe1e7f659c5a2cb77ce241f5fa66cbf8a2fdd24df26de7a278c95358b1476c297a8cc4255a43ce37034df1522ef7f09c8c915e70b84f0a616d385f63705b0bf6394f2c7bab0cfb7a515556ce263de2573e179e501b4bba95dac62a96fefb46fdbad6674d7931ed20a060668fa26bb87551e2751b99b95039a4a7ab0257692e94d47e7df5f55e55b1dc2bec1e29aa9ac0d591bd508a25d54a9306f2d06994786900d9d83577a46fb2f89df344b1ad663e9a42d0c634fd0b157cb61731b77c597978d4e9e31be3525894ac75ef9930531af032926c2ff671a0c275da9f3eb61be46ee49c15b29a78be8491b413583a33072939f5260caa410c2029c07dfc6eda23ba2a66d836da538366d97b09e4ea95865e6a0b187accc317d65f6cb3bcf452b8c10855df710d872ce62e6e2112032c39c9c2d834256e02122dff621cf341c33a1f9e214cfbd252ed84226b53df4f8b8ac683e845a9b584e748d2b0c6c5679d1934a8ec89c86a8ac3d589857b58fd42574e77ac48ab4701566d485395668f135c3057a22e5ecaa7e13d0cc575258d27e80ce7f6c0fe8f08c140a4a55d43936073ba93d837447996f705762a3f65f9af7bdb155149dd0a97f9db3dc7742dea5562cf9ad5edf895a173802ffd99b88c1227cd5adeebd66785de537fb67e716f1d0a1aaf7631aa307fd4bc9f0881bd377b81b7b713db82e3fc1bb5fbf6acb221eaeffdba0d5a9afccda0f2c812a88d58e1e067f88b959b13a4f741e1dff142f223049217c2d0f41150789004a90fa5fe8b71a4e8ac7b242b22e71f8142b543a70279716ca99f56e1a9f05b800fd3289ee7272c1bb67264b08739dcf4f2a9a05caddc1f2623aa259b9e0f01820223771d348d623225e80481eac97267d77cebde2261be0c3cef4fd5dfdce28bbf4889478ebea52566af30dccc9f599897bad60c220f4fbfbde3792755cbd9af7d76f7f6074a3ceab177e1b9f61d288152eaf43b20398c89a28b5343f82428a06c42f0f0e652c667b0de08628562dacb2c2ff78c417d0dc557f324ae1f8c87d3a61bdc25254bcb0fcd7357919cc791dc86551fc46d0a65ee28f1db84eeed0d19ecdf822e2c04c557360a7452f09694a3de1516bf3f4c5a38372888e0477082be8889936f3e936446f84ec78c3853b67278e98e13c0fc8571998534517317c5bf4b926af61403cdd8df0515a973b042e706a13b8ffee76ff5c6c581fc9a0fa2312340bd6673e0f9d2ab28a6788e63842e676b1d2e226b932e5d58fe2ddadf39073d47877cf0dafa9f8ac3552a444c42ae4924e244fbe83733e3624c99d77c41954e3e90815fe38d81b994364699dfe256db951b292ea8e546ffb45144b0c0fbc1f2152dd37b5e3cd7b7bf08d6950ea78be8bc53157bb70619aa2cd57135eda9630d11dbb39131764c0f0dfb2da98141ced0ff54e6633c342ecf38e93c6a60d6dafc1cf944dc9602d8e9e569ad433a9f65e1ffedc2b708b146e862f3e081451c6a4c9bf095e37a3b9776a8ec7dc4ab524ec9a04be4553f7eb0da112068b9df3c673c2089c3edaa1258074582019a706ce0ba8dd30382a231c5d2eefc47ff8e62d28f86b5bb09d303cd17597f2be849d1e8aa5d3fbd950d2e42ee8cf3b869bd45fb3179db7f98f250580c39f8d82d5fe4c28dcf404c4a03acc2f569387d1df7c54d1f63b70529199fe57319327f307d42b19fd1a6c91bf98bad496a9d3fd7db1acee5094edadb862f19083de3b6c95331408f5d57d43298ba0bb71f4a29190d87aad6d346723ac86793057f22743c789f8783d7e85564c1a0bf0877d2ce88102a4bf42ff9848a6b154e9c03ffa68353b8980a82c9d19db78d2ec84e6ec24cac8d67e473aa12b9ab7f1a45c7e00899a91818c088dc7b852cb797c1607efe0a757a03611b84bcac6388f0127a5de41c04f22b88d69609b17f6e2b75083feefe18e24e0674f42794997cbd0232bd2698bf5925f2fb5c1c1148c6223946fee4d9183da85e85610b9084cf3bf8d43df85dab3302634c04458914427e40aec7b54e70d1d281cfa5d51988702b28f5258f4ff1c8ebce55d64e27dbbb78f4073435d22fe4b1222bb2926ff92cedafeecd786d26a9219124eac6d9a65864e94a4f23acb3508f90994e8ab4b3a897499df20ad582aba6d9e0815bc2d9c3c69cad29d1f9a31fbf54e7f8ce64ee0d629b51d9750bb09f6e9f4af2a9a18d7db71d9a558adbfde31f7efbb9ae92a60e1a792b03d1c18e659ff301c33cc9c80e8682684908a9051f9399ddd84357d0d9f53bdc1736bf20b7484f20d406f8f78dcc25d16601773231d0dc08a73d8ef5c99f0c9ce832849ce70cd151fb5d518bc9661d3db40d47d853a500d74fb7087b57e748d338e4e545875290c10b04b16159237c64837a3b90c6973ac809ce7759fa8c024eb41d79fb05464c568f499c08e5d026bb6fb63a71f15754e1c8f3053e63336558f6898daafed3a6f953e820ea8fdce4f012be77ea682b2f990c2656430f7f6f8b0035be5bd4736df62fadb4c6ac4707a928d4f7bd94cb290dd5aa592df56d256a63cddfd5b4814d3f1863de00d34dea23c9d0f3e480c3a2329c85ee2146e5299e39abbe07596a4ad129cdc675a46ac762071c23f21cb475967d1c1c9561c634edc3c6cb26485f72b8a7db09d9f49318f375103c1732b6e0a86a2f087f15df5a6800e35390b83276c29a9b32deb61c986a38cb67e582cd001098257db32e158f39ef06061d521531b4499efa82a4c6854fb8ea85de077833998260d47d134ceafc9f93e627ae80d48e92b23dcb69e3bb4697a909bf97b4c1184b545d8969817d14c159cf633f94e5875734c0f7b6d5f595ef203c8804bf80e6c0108c28d5d04b5bdd77813116c5e1e4a3791e047789810e52a2541cd30366cd359124091c4b56d53a49fcfd1068a48a79a677d1e3288c5a9342252bf86b63165021b3abd62365d47fdccdc05ba535919abfb2743419eb6f3a1ab57c3e9d4db5e6ab93b48d536fb91d3ef7454664d94f1ab660d3efe9e467de7084846ff4841e7045d891ecd431e06722aea9b7880e727df96981503f5b58f7be36db8847f1e4fd98f573902e74983e3e9c56c2debd8087656c60536c0a1e4e9ed4ad31496fe4c70ff72ff54369bae12d6d4ee7a2026d8e0dd8fc1608b043abd253ad0c64214b2b10a58ac5054dc27565b253740ebf037f0016328c7b379007777f7c13d9750545754bf27a5362a94fb16c2020820f6d76e2812841cf68e15d86c420c8888ac4f821db4969f773313ab077b49c253931f0a62419f7e8d6e15abb4f62474a6ba21d9998ec8e5acb47fe16262c95fd11ef54d2bd686e115e03a2094c442c136ce208b9d0becaf4ce4468dc5af69c2023561ae9ba25f8dac88feb404a24ad1017aa520ee3a2543b1b0b0634a97554ad94f2cbceb975afda82544e45c1cc3e02d6f0a21f1a35eeb66c00cced7dc27de678703df4979e7f739c9fc2937c6695b40c9a4e920e996048725205af96af2c023696963cea2eefcbc84d270e9c06bfe82e46fb028f7ece3f6d5a9196e2c81067f40e27aa5698eece21c7aa8c4792607ec9327f29ddcf53fbd53279acf761579270550379f0f0b868569cc0bb488c336f6f63d05b8e92669fe93279cb51ecd65dad0e02cd0b88e1941ee49da86142a3ff47c37020d5fc9aeb5c83e29717c5e8a93d9c365e41428cd3b91671ccf951d10adcd5109536954a246ebb791027d4e855c786d6c73e9c1ba1e52d67ffff097701e59c934bb282fcfc346858d166ed65d5e1655f7c955e28512fa04ac62992e55aaf4771dd5f9948c139b2c41ca786d0101ac4998016e45ca042fc83f8e766aa2ceb09f56b1745c29394cfd4a6ff502ad1765be6d498e8df209786daac67394ff7db8da7d986a1bbdc30c91db9ffd4cde90434deac3f75d69317f92cdfdbca8eabc13e844bd6a69e962dfecc470292655ee5f290dded83e21e6ce5fe519e7124bc29d46bb5eb72aec3d1ec2a848461175e36e7532d6975d7ba40f4af1d0a274259bdc544d8078a1ada0493005a2ebb77a2bf02d97de32eeda4a6e53a189721576af2f5dbfd65ee8a6dcf3b7a9a1e77275a0bbabaf88b6ad4ad25e2093e7e6d5096db34ea7e8a063b9ddf88e3efbf6a3ef538e724c7cd08bd3afa810226ba9e7ed","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"cb4dac17dd2d3b658155eb3f63bb6c40"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
