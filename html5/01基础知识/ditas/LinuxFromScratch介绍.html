<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="zh-cn"><head><meta charset="UTF-8"><meta name="copyright" content="(C) 版权 2024"><meta name="generator" content="DITA-OT"><meta name="description" content=""><title>LinuxFromScratch介绍</title><link rel="stylesheet" type="text/css" href="../../commonltr.css">
<link rel="stylesheet" type="text/css" href="../../common-extended.css"></head><body id="LinuxFromScratch介绍-97DC3F38"><main role="main"><article role="article" aria-labelledby="ariaid-title1">
<h1 class="title topictitle1" id="ariaid-title1">LinuxFromScratch介绍</h1>


<div class="body conbody"><p class="shortdesc"></p>
<p class="p"></p>
<section class="section"><h2 class="title sectiontitle">简介</h2><p class="p">当我将自己的目标和经验与 Linux 社区的其它成员分享时，引发了大家对这些想法的不断关注。很快人们就清楚地意识到，这样一个定制的
Linux 系统不仅仅可以满足用户的特定需求，还可为程序员和系统管理员提供一个理想的学习机会，以增强他们（原有）的 Linux 技能。出于这个被放大了的兴趣，Linux
From Scratch 项目诞生了。</p> <p class="p">这本 Linux From Scratch 手册是该项目的重中之重。它为你提供了设计和构建自己的系统所需的背景知识和指令。虽然本手册给出了一个模板，一个最后能正常工作的系统，但你可以自由地改变指令以适应自身的需求，从某种程度上说，这是也本项目的一个重要部分。你仍然可以控制一切，我们只是在你起航之前助你一臂之力。</p> <p class="p">说到为什么要读这本书，我想，原因一定有很多。有些人可能会提出这样的疑问：「都已经有现成的 Linux 系统可以下载和安装了，你为什么还要多此一举的从从头构建一个呢？」</p> <p class="p">此项目存在的一个重要原因是帮助你了解 Linux 的内部是如何工作的。通过构建 LFS 系统，你可以更好的理解 Linux
的工作原理，以及程序是如何协同工作和相互依赖的。最棒的是，这个学习经历能给你提供自定义 Linux 系统以满足你自己独特需求的能力。</p> <p class="p">另一个重要的原因是，你对系统本身有更多的控制权，而无需去关心别人的 Linux 是如何实现的。在 LFS 下，你就是主宰，系统的各个方面都需要你亲力亲为。</p> <p class="p">LFS 可以让你创建极其精简的 Linux 系统。在安装那些常规的 Linux 系统时，你往往会迫不得已而安装那些你用不到的（甚至你都不知道它们是干什么用的）程序。这些程序也许会浪费你的硬件资源。或许你可能会说，现在计算机的资源那么丰富，稍微浪费一些又有什么关系呢。但是你依旧要考虑到可引导
CD、U 盘或者是一些嵌入式的环境，它们对资源高度敏感，这也恰恰是 LFS 所擅长的地方。</p> <p class="p">另一个优势便是，自定义的
Linux 系统有着更高的安全性。通过从源码构建一个完整的系统，你有权审核所有的代码以及所打入的安全补丁。也就没必要去在等别人编译修复该安全漏洞的二进制程序了。而且，除非你亲自检查了补丁文件并且做了完整的测试，否则你又怎么能确信，新的二进制程序确实是正确的编译且解决了问题呢？</p> <p class="p">从头构建一个基本可用的 Linux 系统是本书的目标，如果你并不打算这么做，那么，这本书可能对你来说用处并不大。</p> <p class="p">支撑你从头构建属于自己的 LFS 系统的原因实在是太多了。但说到最后，其中最重要的一个原因还是教学。随着你的 LFS 经验愈趋熟稔，这些信息和知识真正给你带来的力量，你也便了然于胸了。</p><p class="p">假如按照本文的默认方式构建，那么你将得到一个「纯」64 位系统——这意味着你仅能够执行 64 位的程序。</p><p class="p">LFS的目标架构:
当前主要支持 AMD/Intel 的 x86（32 位）和 x86_64（64 位）构架的 CPU。另外，本文档也涉及一些更改以允许
LFS 顺利地在 Power PC 和 ARM CPU 上运行。为了顺利构建 LFS，除了后面几页的内容外，你主要需要一个可以在当前
CPU 上正常运行的 Linux 系统，例如：早先版本的 LFS、Ubuntu、Red Hat/Fedora、SuSE 或者是在你的架构上可以运行的其它发行版。另外注意
32 位的发行版是可以在 64 位的 AMD/Intel 处理器上作为宿主机正常安装和运作的。</p></section>
<section class="section"><h2 class="title sectiontitle">标准与软件包</h2><p class="p">LFS 的结构尽可能的遵循 Linux 的标准。主要的标准有：</p><ul class="ul">
<li class="li"><p class="p"><a class="xref" href="http://pubs.opengroup.org/onlinepubs/9699919799/" target="_blank" rel="external noopener">POSIX.1-2008</a>.</p></li>
<li class="li"><p class="p"><a class="xref" href="http://refspecs.linuxfoundation.org/fhs.shtml" target="_blank" rel="external noopener">文件系统层次结构标准（FHS）3.0 版本</a></p></li>
<li class="li"><p class="p"><a class="xref" href="http://refspecs.linuxfoundation.org/lsb.shtml" target="_blank" rel="external noopener">Linux 标准规范（LSB） 5.0 版本</a></p></li>
</ul><p class="p"></p><p class="p">由 LFS 提供，用于满足 LSB 要求的软件包</p><table class="table"><caption></caption><colgroup><col><col></colgroup><tbody class="tbody">
<tr class="row">
<td class="entry" rowspan="1" colspan="1"><p class="p">LSB 核心：</p></td>
<td class="entry" rowspan="1" colspan="1"><p class="p">Bash, Bc,
Binutils, Coreutils, Diffutils, File, Findutils, Gawk, Grep, Gzip,
M4, Man-DB, Ncurses, Procps, Psmisc, Sed, Shadow, Tar, Util-linux,
Zlib</p></td>
</tr>
<tr class="row">
<td class="entry" rowspan="1" colspan="1"><p class="p">LSB 桌面：</p></td>
<td class="entry" rowspan="1" colspan="1"><p class="p">无</p></td>
</tr>
<tr class="row">
<td class="entry" rowspan="1" colspan="1"><p class="p">LSB 运行时语言：</p></td>
<td class="entry" rowspan="1" colspan="1"><p class="p">Perl</p></td>
</tr>
<tr class="row">
<td class="entry" rowspan="1" colspan="1"><p class="p">LSB 成像：</p></td>
<td class="entry" rowspan="1" colspan="1"><p class="p">无</p></td>
</tr>
<tr class="row">
<td class="entry" rowspan="1" colspan="1"><p class="p">LSB Gtk3
和 LSB 图形（试用）：</p></td>
<td class="entry" rowspan="1" colspan="1"><p class="p">无</p></td>
</tr>
</tbody></table><p class="p">由 BLFS 提供，用于满足 LSB 要求的软件包</p><table class="table"><caption></caption><colgroup><col><col></colgroup><tbody class="tbody">
<tr class="row">
<td class="entry" rowspan="1" colspan="1"><p class="p">LSB 核心：</p></td>
<td class="entry" rowspan="1" colspan="1"><p class="p">At, Batch
(At 的一部分), Cpio, Ed, Fcrontab, Initd-tools, Lsb_release, NSPR, NSS,
PAM, Pax, Sendmail (或 Postfix 或 Exim), time</p></td>
</tr>
<tr class="row">
<td class="entry" rowspan="1" colspan="1"><p class="p">LSB 桌面：</p></td>
<td class="entry" rowspan="1" colspan="1"><p class="p">Alsa, ATK,
Cairo, Desktop-file-utils, Freetype, Fontconfig, Gdk-pixbuf, Glib2,
GTK+2, Icon-naming-utils, Libjpeg-turbo, Libpng, Libtiff, Libxml2,
MesaLib, Pango, Qt4, Xdg-utils, Xorg</p></td>
</tr>
<tr class="row">
<td class="entry" rowspan="1" colspan="1"><p class="p">LSB 运行时语言：</p></td>
<td class="entry" rowspan="1" colspan="1"><p class="p">Python,
Libxml2, Libxslt</p></td>
</tr>
<tr class="row">
<td class="entry" rowspan="1" colspan="1"><p class="p">LSB 成像：</p></td>
<td class="entry" rowspan="1" colspan="1"><p class="p">CUPS, Cups-filters,
Ghostscript, SANE</p></td>
</tr>
<tr class="row">
<td class="entry" rowspan="1" colspan="1"><p class="p">LSB Gtk3
和 LSB 图形（试用）：</p></td>
<td class="entry" rowspan="1" colspan="1"><p class="p">GTK+3</p></td>
</tr>
</tbody></table><p class="p">LFS 和 BLFS 没有提供，用于满足 LSB 要求的软件包，目前暂时为空。</p></section>
<section class="section"><h2 class="title sectiontitle">软件包</h2><ol class="ol">
<li class="li"><p class="p"><strong class="ph b">Acl</strong></p><p class="p">这个软件包中，包含管理访问控制列表（ACL）的工具，用于定义文件和目录更细粒度的自主访问权。</p></li>
<li class="li"><p class="p"><strong class="ph b">Attr</strong></p><p class="p">这个软件包中包含的程序，用于管理文件系统对象的扩展属性。</p></li>
<li class="li"><p class="p">Autoconf</p><p class="p">这个软件包中包含的程序，能根据开发者的模板自动生成配置源代码的 shell 脚本。通常需要在更新构建过程之后重新构建一个软件包。</p></li>
<li class="li"><p class="p">Automake</p><p class="p">这个软件包中，包含了通过模板生成 Make 文件的程序。通常需要在更新构建过程之后重新构建一个软件包。</p></li>
<li class="li"><p class="p">Bash</p><p class="p">这个软件包用于能满足 LSB 核心的需求，为系统提供 Bourne Shell 接口。选择它而非其它
shell 软件包的理由，是因为它的通用性以及在基本 shell 功能上的扩展能力。</p></li>
<li class="li"><p class="p">Bc</p><p class="p">这个软件包提供了一种任意精度的数值处理语言。在构建 Linux 内核时需要它。</p></li>
<li class="li"><p class="p">Binutils</p><p class="p">这个软件包中，包含了一个链接器、一个汇编器和其它处理对象文件的工具。编译 LFS 以及
BLFS 系统中的大部分软件包，包需要该软件包中的程序。</p></li>
<li class="li"><p class="p">Bison</p><p class="p">这个软件包中有 GNU 版的 yacc（Yet Another Compiler Compiler），用于构建一些其它的
LFS 程序。</p></li>
<li class="li"><p class="p">Bzip2</p><p class="p">这个软件包中，包含用来压缩和解压缩文件的程序。在解压缩很多 LFS 软件包的时候需要它。</p></li>
<li class="li"><p class="p">Check</p><p class="p">这个软件包中，包含一个用于测试其它程序的工具。仅安装在临时工具链中。</p></li>
<li class="li"><p class="p">Coreutils</p><p class="p">这个软件包，包含了一些查看和管理文件及目录的重要程序。在命令行里管理文件时和每个 LFS
软件包的安装过程中需要它。</p></li>
<li class="li"><p class="p">D-Bus</p><p class="p">这个软件包中，包含了一个用于提供消息总线的程序，消息总线是一种应用程序间通信的简单方式。</p></li>
<li class="li"><p class="p">DejaGNU</p><p class="p">这个软件包中，包含一个测试其它程序的框架。仅安装在临时工具链中。</p></li>
<li class="li"><p class="p">Diffutils</p><p class="p">这个软件包中，包含了一些显示文件和目录差异的程序。这些程序可以用来创建补丁，也用于很多软件包的构建过程。</p></li>
<li class="li"><p class="p">E2fsprogs</p><p class="p">这个软件包中，包含了一些处理 ext2、ext3 和 ext4 文件系统的工具。这些是
Linux 上支持的最常用而且完全经过考验的文件系统。</p></li>
<li class="li"><p class="p">Expat</p><p class="p">这个软件包中，包含了一个相对小的 XML 解析库。Perl 模块 XML::Parser 需求该软件包。</p></li>
<li class="li"><p class="p">Expect</p><p class="p">这个软件包中，包含的了一个生成与其它程序交互的脚本对话框的程序。通常用来测试其它软件包。仅安装在临时工具链中。</p></li>
<li class="li"><p class="p">File</p><p class="p">这个软件包中，包含一个能判断给定文件的类型的工具。一些软件包需要用它来构建。</p></li>
<li class="li"><p class="p">Findutils</p><p class="p">这个软件包中，包含了一些在文件系统中查找文件的程序。在很多软件包构建脚本中会用到。</p></li>
<li class="li"><p class="p">Flex</p><p class="p">这个软件包中，包含了一个能生成识别文本模式程序的工具。是 lex（lexical analyzer）程序的
GNU 版本。构建很多 LFS 软件包需要用到。</p></li>
<li class="li"><p class="p">Gawk</p><p class="p">这个软件包中，包含了一些操作文本文件的程序。是 awk（Aho-Weinberg-Kernighan）的
GNU 版本。在很多软件包的构建脚本中会用到。</p></li>
<li class="li"><p class="p">Gcc</p><p class="p">这个软件包是 GNU 编译器工具集。它包括 C 和 C++ 的编译器以及其它构建 LFS 时用不到的软件包。</p></li>
<li class="li"><p class="p">GDBM</p><p class="p">这个软件包中，包含 GNU 数据库管理库。LFS 的另一个软件包 Man-DB 会用到。</p></li>
<li class="li"><p class="p">Gettext</p><p class="p">这个软件包中，包含了很多软件包国际化和本地化需要用到的工具和库。</p></li>
<li class="li"><p class="p">Glibc</p><p class="p">这个软件包中，包含了主要的 C 语言库。缺少它 Linux 的程序便无法运行了。</p></li>
<li class="li"><p class="p">GMP</p><p class="p">这个软件包中，包含了能提供任意精度数值运算的数学库。编译 Gcc 时会用到。</p></li>
<li class="li"><p class="p">Gperf</p><p class="p">这个软件包中，包含了一个能从一个键集生成完美哈希函数的程序。Eudev 会用到。</p></li>
<li class="li"><p class="p">Grep</p><p class="p">这个软件包中，包含了一些在文件中搜索的程序。大部分软件包的构建脚本会用到。</p></li>
<li class="li"><p class="p">Groff</p><p class="p">这个软件包中，包含了处理和格式化文本的程序。其中一个重要的功能是格式化 man 页面。</p></li>
<li class="li"><p class="p">GRUB</p><p class="p">这个软件包是 Grand Unified Boot Loader。是诸多可用的引导加载器中的一个，但是最灵活。</p></li>
<li class="li"><p class="p">Gzip</p><p class="p">这个软件包中，包含了一些压缩和解压缩文件的程序。解压很多 LFS 以及 BLFS 的软件包时需要用到。</p></li>
<li class="li"><p class="p">Iana-etc</p><p class="p">这个软件包中，包含提供了网络服务和协议的数据。启用合适的网络功能时会用到。</p></li>
<li class="li"><p class="p">Inetutils</p><p class="p">这个软件包中，包含基本网络管理的程序。</p></li>
<li class="li"><p class="p">Intltool</p><p class="p">这个软件包中，包含能从源文件中抽取可翻译字符串的工具。</p></li>
<li class="li"><p class="p">IProute2</p><p class="p">这个软件包中，包含了一些基本和高级的 IPv4 和 IPv6 网络的程序。由于它的 IPv6
功能，所以选择它来取代其它的常见网络工具包（net-tools）。</p></li>
<li class="li"><p class="p">Kbd</p><p class="p">这个软件包中，包含一些键盘映射文件，用于非 US 键盘的键盘工具以及一些控制台字体。</p></li>
<li class="li"><p class="p">Kmod</p><p class="p">这个软件包中，包含一些用于管理 Linux 内核模块的程序。</p></li>
<li class="li"><p class="p">Less</p><p class="p">这个软件包中，包含了一个很好的文本文件查看器，允许查看文件的时候向上或向下滚动。Man-DB 用它来查看
man 页面。</p></li>
<li class="li"><p class="p">Libcap</p><p class="p">这个软件包中，包含实现了可以用于 Linux 内核的，从用户空间到 POSIX 1003.1e
的接口。</p></li>
<li class="li"><p class="p">Libpipeline</p><p class="p">这个软件包中，包含一个以灵活和便捷的方式操作子进程流水线的库。Man-DB 软件包会用到。</p></li>
<li class="li"><p class="p">Libtool</p><p class="p">这个软件包中，包含了一些 GNU 通用库支持脚本。它降低了在一致、可移植的接口上使用共享库的复杂度。在其他
LFS 软件包的测试套件里需要它。</p></li>
<li class="li"><p class="p">Linux 内核</p><p class="p">这个软件包就是操作系统。即我们常说的「GNU/Linux」中的「Linux」。</p></li>
<li class="li"><p class="p">M4</p><p class="p">这个软件包中，包含一个普通的文本宏处理器，作为其它程序的构建工具使用。</p></li>
<li class="li"><p class="p">Make</p><p class="p">这个软件包中，包含了一个指导软件包构建的程序。LFS 中的几乎每个包都需要它。</p></li>
<li class="li"><p class="p">Man-DB</p><p class="p">这个软件包中，包含了一些查找和查看 man 页面的程序。由于其更好的国际化功能，用来代替&nbsp;man&nbsp;软件包。它提供了
man 程序。</p></li>
<li class="li"><p class="p">Man-pages</p><p class="p">这个软件包中，包含基本的 Linux man 页面的真正内容。</p></li>
<li class="li"><p class="p">MPC</p><p class="p">这个软件包中，包含复数运算的函数。Gcc 需要它。</p></li>
<li class="li"><p class="p">MPFR</p><p class="p">这个软件包中，包含多精度运算的函数。Gcc 需要它。</p></li>
<li class="li"><p class="p">Ncurses</p><p class="p">这个软件包中，包含了一些处理字符界面的不依赖特定终端的库。通常用来为菜单系统提供光标控制。一些
LFS 的软件包会用到。</p></li>
<li class="li"><p class="p">Patch</p><p class="p">这个软件包中，包含了一个通过&nbsp;patch&nbsp;文件来修改或新建文件的程序，patch&nbsp;文件通常是由&nbsp;diff&nbsp;程序创建的。一些
LFS 软件包的构建过程会需要它。</p></li>
<li class="li"><p class="p">Perl</p><p class="p">这个软件包中，包含了一个运行时语言 PERL 的解析器。一些 LFS 软件包的安装和测试套件会需要它。</p></li>
<li class="li"><p class="p">Pkg-config</p><p class="p">这个软件包提供了一个返回已安装库或软件包的元数据的程序。</p></li>
<li class="li"><p class="p">Procps-NG</p><p class="p">这个软件包中，包含了一些监视进程的程序。这些程序对系统管理非常有用，也被用于 LFS
的启动脚本。</p></li>
<li class="li"><p class="p">Psmisc</p><p class="p">这个软件包中，包含了一些显示运行中进程信息的程序。这些程序对系统管理非常有用。</p></li>
<li class="li"><p class="p">Readline</p><p class="p">这个软件包提供了一些命令行编辑和历史功能的库。Bash 会使用它。</p></li>
<li class="li"><p class="p">Sed</p><p class="p">这个软件包提供了不通过文本编辑器而直接编辑文本的功能。大部分 LFS 软件包的配置脚本需要它。</p></li>
<li class="li"><p class="p">Shadow</p><p class="p">这个软件包中，包含了一些以安全方式处理密码的程序。</p></li>
<li class="li"><p class="p">systemd</p><p class="p">作为 Sysvinit 的替代品，这个包提供了&nbsp;init&nbsp;程序，以及一些其它的启动和系统控制的功能。很多
Linux 商业发行版都用它。</p></li>
<li class="li"><p class="p">Tar</p><p class="p">这个软件包提供了归档和提取 LFS 中的几乎所有软件包的能力。</p></li>
<li class="li"><p class="p">Tcl</p><p class="p">这个软件包中，包含了在很多 LFS 软件包测试套件中使用的工具命令语言。仅安装在临时工具链中。</p></li>
<li class="li"><p class="p">Texinfo</p><p class="p">这个软件包中，包含了一些读、写以及转换信息页面的程序。在很多 LFS 软件包的安装过程中会使用它。</p></li>
<li class="li"><p class="p">Util-linux</p><p class="p">该软件包中，包含了许多工具。其中有处理文件系统、控制台、分区和消息的工具。</p></li>
<li class="li"><p class="p">Vim</p><p class="p">这个软件包中，包含一个编辑器。由于 vi 编辑器的经典以及大量的强大功能而选择它。对很多用户来说一个编辑器是一个非常个人的选择，如果需要的话也可以选择其它编辑器。</p></li>
<li class="li"><p class="p">XML::Parser</p><p class="p">这个软件包是和 Expat 交互的 Perl 模块。</p></li>
<li class="li"><p class="p">XZ Utils</p><p class="p">这个软件包中，包含了一些压缩和解压缩文件的程序。通常它的压缩率最高，在解压 XZ 或者
LZMA 格式的软件包时非常有用。</p></li>
<li class="li"><p class="p">Zlib</p><p class="p">这个软件包中，包含了一些程序所使用的压缩和解压缩功能。</p></li>
</ol></section>
<section class="section"><h2 class="title sectiontitle">编译和安装</h2><p class="p"></p><p class="p">前提条件</p> <p class="p">构建一个 LFS 系统并不是一个简单的任务。它要求对
Unix 系统管理有一定水平的了解，以便可以解决问题并正确地执行所列出的命令。特别是，至少你应该拥有使用命令行（shell），复制或移动文件和目录、列出目录和文件内容、切换当前目录的能力。同时也希望你拥有使用和安装
Linux 软件的基本知识。</p> <p class="p">因为 LFS 书中假设你至少有这些基本的技能，所以众多的 LFS 提供的论坛看起来在这方面也给你提供不了太多的帮助。你会发现对于这些基本知识的问题并不会得到解答，或者会简单的建议你去看一下
LFS 主要的提前阅读列表。</p> <p class="p">构建 LFS 系统之前，我们建议阅读以下内容：</p><div class="p"><ol class="ol">
<li class="li"><p class="p">构建软件 HOWTO http://www.tldp.org/HOWTO/Software-Building-HOWTO.html。这是一个在
Linux 上编译和安装「通用」Unix 软件包的综合指南。尽管成文已有一段时间，但其对于编译和安装软件中所需的基本技能，还算一个不错的总结。</p></li>
<li class="li"><p class="p">初学者源码安装指南 http://moi.vonos.net/linux/beginners-installing-from-source/该指南很好的总结了从源码构建软件时所需要的基础技能和技巧。</p></li>
</ol></div></section>
</div>
<nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>父主题：</strong> <a class="link" href="%E5%88%B6%E4%BD%9CLinuxFromScratch.html">制作LinuxFromScratch</a></div></div></nav></article></main></body></html>