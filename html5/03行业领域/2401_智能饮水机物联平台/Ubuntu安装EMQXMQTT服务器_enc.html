<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"a8e1b3ad0688e444f9be2ad6b6b9696e1a9f23ca6516e45bd269e6105f82917245344590dcf872a41ffbd9102dd77dca8887c5921b34088a1403a014e2029ecb61e8bb52b7019f441a7b326f495717be236ee14a13e3fc2b5051419322f6bdc14eccda70fa59871c35362b4b01802c73e19e358c9b12877009cb065ff11db0ce661309583ed898be50b047b332e92a29534e2c95d69f57fd9b5e958fab1dc23134aae8c5472dfbd6698836b596bfe92bc2830e999f28cf88d7703463a2238b1f09583dada29bef10b55d6e8f0c042258c17b97d5f331666505c0381c4ee875c27b726d2de21d379327109462fa25bbdc33caef43181be99df936856ec228de49fc8b9b9f262f4909462d203b06ec8dd921668b9d783d12bb094dce847aeb855f593ddf0afc0e276afe359830e8eef33594d627e428c772cdd561b6e94d7b3ed8f0a74cb2808b3d8c913569951ec0c708bb04649a08f939e556249d82a1cdce5a4e6d0329017ddf50fcca5abd34e6cca5fd3c5ee10dbed828054f00d02e53a0e7b8cf133106ad7e914b31d6b008299c8a159e83fbad56d5e7bae4a92e7faf07738c3b5ed8c7015e134fdca1aa733fa09c7ce837ee6afc7d64eab2843c72849bdfb9b0dace2ae59f6e5396127a91f9faf9b8f20b0b40b5c141e52a3914b95c75d213f34c0ca5caf36d424f5e24d10af43e5ba41656101d18821e54c2d1f98d99ad08b39bf77e7d224b738d4db928f1df0f71123011a0044ed5a1fda7885b49f6205cafc52418a65ed507f75b40f51eaa017cd108099f385ec7b1854e3088559431992e434521afd263e99b0ea750b57d36b5bde3329c74bfc97914d4a2bb1392bdef1cd9ab496bff3f8844f99c1fc4c610e30b0cb777f8103a7a18b30b7119455361a2f45b4e392c1940e17c12ee6a16bc91de92e2f96fc1a706087c8867302b739f19aabf2ba1c052aca5e6bd5602544bc3bace964c75287cada5489d0b4ec973e539a1b6d7d3fc537b0057819111554a94063bd82c9aa1f305cc39ee3f2d71f218bb64f436f7c81ce48f6a9993d796d09486fcf875f29301797b5e2d3b128721ad33f7545f0b57851657b7cf2615367e378f826ca5492011f66c26a78120bb89663d435e36d6d67f04320692ccc92d93f311f07cae65fc523a068020359438ff5d0e6349cf93905b7486784e31095cdf7578e13e772b7f5a79e68d0e766dbf224f8d8c5ac4c6ebe9d0372b55bf11d91da980d30589cbb8db81f7d92ed7680b73c12ad9b01b9a939a2c39cedc77851dbd5d1a25e7b73b0a756561ffd91e149882d198dd19990d582b4924070c7843a735a45b3da7621a0d07dd4b5370de7eb2ea9bd5c59158b2e7d3e748dad37f2cb45685022b8fc3692b1ff33ce1a35fff61daed2945151120c9bded0191797a08450b8546bcaca1e688a751ec3f9a691afe0e1696f62238fc635be335ae7773f592a7e46ca85a9503e43dff55fea6247d4cae628b4ddc315ca4a3d39f7c8734f68e93ca5e924ca4a6a58681de47ce671d932e3def4ae44f7176663f3d4d8b1c794436858e19f2cdae8772e990007198fdf86bbafcaea25beac934b16a6e64939624271446adce56bf0e6a7aebfb6754a5dec76f0e357369f08727de8184759af5e0b9e444271693723d31dcc87651e5388427ec973efc690fc1b47051535e5246d67de3863a1d8a68884d57ed98d8166fc33ebdac85505c9882a5c9fd64c9aaa0b02545cf9918735ed220bcad8e093b511ab651138a94647c0c50b388092ad010ddabefe199b031369e4a39c43d0b76906e2903be37475bd49aeb346b114ecf1a821425e95a41226777f3690c9c2d1c6fac83c0e18d6017ea0c36a99c79a4d721b4e14638668c2920b33447e58376ffc63e884cbb34d4cfcb9db7795a1fe84e71172afcef068fc5f7f19678756b7b9e4b9b62636e763f92bf9a6bf5c544818cc0b3c81f5d3a3d3227112b844952ab14cd885f172609a0f795dc791ee880473b35df30d71c07891a40b7a23c9c7b37d1972bfc6f691a9251821dd05a7d699f2090387122f290c84dc8a2600bdd9cf5473a226e773ebf1c79cb529ffd0836e15b0ecddbc4e274c0300248dc9a9587dc2d1f9a0be2e9824f23741d166761f4a8b335d114ce5adfbce4a267bdad82bfcd330e2dd5a671046b274237e3cd5889bdb32bffaf4b6e4cc08e877c301d76b6b70f1dd326f55df96e8eeee258bd1d77fbcfc529b31016aa0220f41673f796301b2321c67b5f7f11b4f8818cb4d1c9c81f4c68d2c6e4ed51e0a7bc4ba02604a193e75b72394665abe4f17c728bfdb11b418bdfad025b2751ad214b4f231a4033ecf79b516e2f1f644a4125a67b1720ff9da57dfe7e12e773458b5d4596a20b60c8e582c84c1e52a6306859ae60e077fe12e597a421ee7658e7c924d36f711e10184c0093fce3b32c03ae29c86937ea587a13680541f62e22b0b00bad792ba8b9affbf2b710b6df86e425c605fc9c04a53b0a3af7c7c6fc10c41a46e72595a9685ec3f42a2f03e2ee4cfe8ba5a077a6ba43597252dab104e2767726080a1387f38cd4cf5aaafe862f7f68b45a778393a18e43e2be5ed445ffccdead19d53e1e6dfed1608d44c1f9aaedd23c4b077c0243c3b94b37a90463f43784633fd96c82627b8bb9dd15a735dd01602eff097c07c76a2e2fcef5901b053329ed1c442fb15d3f2283e4ee4103283ccd48d1bebe423fd5e10df34508720f593a65b54b52826b1f5785d9262cfce40c70b56e1c862e0e46f86966f2d6c4f72d46d613f64550149672491d0074792b2401f42d1d4f12bff3923cdb1eebc44c1ef35249b3c0eb40bbb213480714c0b62898105d53cb9701e7a48449ecdff09b2948c88302e2d7d29dd8b292ed23d4698e32288d2b7b4a68b675ec87d820b31f4137c54641045a2c3d594dfd265577d93c32f6fda06648bb40746ea632e8f3a8b2a5fe3dbebedc2027d9a5c32e12f48d9d71e906050e4078e2271af6d1302538309da567b64bed002702fd85853e141a9d5ebd36b1eaae28f981d70bbaf57efd749dfd8d8587af19eeefa945c6a2c42466f9192387161dc9002420c19a160965666aeca3ab0cd896bb23457b99ea5ba35182bc7bbbee3be47a43baca07315fc69a3f8fc684484561bd7a2168c48c253441a4aebdd2ebdc1f520409dca4c1780f1df6a35d36179a8a5511610b1b9dae7c0e23df1ed3a4aadbfc57be492238e829ca8cdfea6f1c84fd81a5e9536732fb9793282540b9f20435bf897142636b9033da6fac0988bd059c791b39ea501b4433848b62c34af5eb270c1a94424fd6e5d440ee6d16894b78317c16ede6f9442702c8be7b3f75a5ddd1dd0b9ba095c68e044e254429741519a753f27a852c6886791ca3d1d70c81c00291918a6aaae85944fcd1112c6efefde2fdb7dfd0c721e060d47bc3f382c21b57e8061c7311d6b030a19c306b43a1ce9a1c86705c87fed9d4fc782dbf8a660c64ad8c39a6d34f5679682463aa56f762c224f0adc52814605693290691ebb62f47431b743444e1d28e723ed9ab2ffc25ff55820bd60d12407fc54f4d90f60dbe59080a3fd213a39473279ad018716230e10917c64a3492815d9e03a6e19cca713e2a8246fc12e458b58c048be204ea33f837e6380ca2202ade3029d46f8341f339f8620e1d0b5ff59bfc3c694f602926e14cf91c222991aec8f2b2d5698b8b334852249002efe57312ecef38f28bf567a18fd655bd3851d184e01a52117e7cfefe79ca60fd9e7c504a334b54146d2eb38b65b755974acfd7fbb5647503587ed9e0bb818414780b22ff4a246ede7d095c4f9205a1e7b4ef1ea8aa8ea1209fe49c79fbde265a1013cc82840f9d54c24a83116f768adeab57aa9d27ee54b87cb511807b481d679c296548f279c6303c56b3416dc486e25a684af0db751db5a4213940c87bf9864a5c4ca25b8051e38620722a486793f649fa0843146c2cd59a048b5e110d036b06c916f3ba16bb05cf516de38aca52be7dcbb2baad9c724882e2a7db4a799d7cc026e8247af351542b02f77cdded13350c13c8573b1a5f150b93b55ad6f12d1406895cbddaa52aed8617297bf6335d6dc132f60f6781f3e72d8d72d0fa9e56dd3f30d26ce420aa0d2fe659cce8b3dbdfe59a19f5922f4d9c2fb41adbe94dd4c675bc5d3e83f6e3a87a693b99ddb9158f67d46c22996873399e4263a4f45ea5dea6a8dd033e21da973c9e14cc17f1b24574dac863440bd0d04877b6aec1b9f3f93a50728a01b0f02e53014a106f418f729faf39ec3f2de4744372eafb6967003ecb20b82675ef53e4e0e0b4421af3a47941ea43238499d9e70fc1d72e870f6d08d222558de2376bc25d484aeecd3eac38cad13ea2d961e5437baaff665af9d785ec9d99ec43b4feb7639ce57ebea68679543a6a7180ff955503364e6ff3f0392bd8113acce46d8809bddfe23a3fe3fd428cdf148f8dd59a58aa10a32c2434ad3d4c596aa8c234ef84593c89d35710ae8ee162a8e7fb34d84e552cfcd177ecb1211777094a2a324f3235a067a275cdd409affa14c27c4c805b57c7105f2255e2a57480fd5827d5c380bb0a045621b51c8e7e765a07bedd94515edf994f8de46157fac8b5298ac024169aab72669fc21bd2e7846f334368001e659814d98ae4a9104ec53ed5192a319c07e7a9137a9afa8969d35a5632413f6b78b797af94c4f1d03c4f25379527a280401adc38bc933fc5b6d65c734091b1d2a820d9018609f3e5feb61cf24ccc6880a32bc3162d32119280032b0fd9a04f695b4a49a4426d25eb6ed6e5ce6ac501bce78a31f5a9f58f28572e50463aff4ad393cc4df69b946a290ff44cf9c6f4ae509ae830f2216bcb70c74fd78344101aa41f8222e06b1b121954ca3b296be733cca50eab8b019f38c7ba2ef30870b84ecf35b85a9eb12258e745d5e03c782479ded2e00e45e38ca0d03d2550efb2fe5ecc33b9fc75d168b0ac4c2d06d093c1b8575826140c23f9675e38e73fe6f4ac4b7e01156a08f16a81638045a68d6b047f87325c6bffa429929edb774705506f22b08ef5ff4a4cb5c8cd4d723a8301d7b08f5cca40f1a0e9f292156bbc05dcfeaca6914e0c1a0276396c93eaa166c28081c5e81151063be2e06c8e2e5c0676b8477000d18b3a344e65ed19eecafe6eb5e07c2a6012bde7b610f0625799a994a3f2a5619b51aef057e8cd54532bc0d48191f90bf80129a85936fbd56c86a193ce566784605b60ad75f95ab71fb56bf693d91cbe82ae02db7a8ea7f67c7b3ecf362e7618ce741d0c586f11c5e21b39d1cf5cc1489fedd7d545b007bee7e2d6e35f932179f1c4c2c089cbbaa00ceaf2b3843e60fb3025861210dc588c642128c1b2c8b5a894dfe2aaae6e918bacdcd2135fd134e77b4ea8366f07b123968ee1813461c37fbd7e3e61173cdc48d5736a46780d097e0b9c5dd60d2847cfe7a5f50b94b46f10fa8efed75205d5544dabaf0034cfba8ce9a11f9b5df8854e2b918e4f8b6e2f1b6f055133f5d99b7d320a9d9e5d33396f5fbd5c4b91d11ed045e09a7fd0da11365c1c712e2404eac2e5223af3cb103e5698a94fb0b3920cb97230ea9681d00f67e8b6a1deb85d6e8bf6d9a7e2f73738cdcd9ecc871dcd72d8a7d77503c9e71437c765f84b7ee537e63e6efc966540b6113fcc5f707010662356f90253e638990d301d788004656edd46e4e2d9649759e2f9d7833b89d257b81f574609322515f4e8dae94a8be74225f5cbf62f92627ebe0562feec3442bd0ad1f30eaa85b657d9631d8b64d551a40539070f6be93338129e82526ccc00e74bb0203ac92f23078bd74c4ebf53b4325b471cfecd0dee209d690d2053e331d7b6e650d1ac4361adb26ab6881f26eef2527a24ae44bd366628e25e842d34d50b9835a056f8b3f5bf0e46f42e83092755d91fab1dfe5cff2e74838453e2df36d067570c480665bad41fa498a78c813ef5ae150ef0c6eae50b481bcf74d6233af73ac4893bdea0455e261c848aa4f5dea641bc1f43bfcb90ef067b95d050f004a3423ea8906ee4513ff7853a10c7adfbd71851f568619271249e0977836d9b705174c6f5e5f0a1f4f9af16c1e0365fc0b801951c43dca0a4ea2ea0d3041cee5149a4223d9f2b8a765538724f8a0936fcc3c583f5f5fa95efc4034479594735ec62a692e05ee9b9aef0f131a83e52e9eff7d02402e3021fd69c06c3f08748b6d1bd45de16dfa2da595dd2a818c1f83e4b00e5b1f2abeb908bf4afc56c7d94b9b17cd67bd5fbd238ad09103a834e3bffa063430ab89c803647b20043fc69fdebeb0df02bdf304ced13aca6850fdbfb64332c9e280257302b84090df1437ba0bb79bdf6a2db99a079bf735c825a752368f0aaf2f07b60280eb86ecad0c50015dd19816b942f333f3fcdabad1806d8ec68eecc0a31c2a670077dd450f598e6e5039275c077481b2050738051b56ca64db2b5537a60713927b3558aa9e347b81d971fdd11c487031c96639d30bf8b0aad66b135707d775e01851bd92498e41eb26c0cb5b352484da0792eaab902546fde64e3118d6e8406adc43b527d1e2394b9696676773acb680b3e6c011f51b2a2be4374d34c3c611392da97cdc794e81108ef4d87e2c7dda21530f72342667bc652198e599ed183f7123ae9453fec60d4fa739fa0b72cddcead191a3beb8c1ee6c894a2d725ddf1fd118a972ef98df8eef0fe544c8801aa4aa0a2a220f79c00bd823fcea6b9bb3245e0d7feec602ec02f67dddc838180ba9c33e2d62a27fd6aaf8639f4bae830f0fcfee64c41938b0844db782582ef2288ad62be6b97c3d400c88eb9084d234b765fd2f23776e8f8e223531e290db364ab576d8ebf2314937d0c15fa498617c97ef892a2d363018cdc8d85ba461279fcb30e48fde97517c757252ca852b7d1ca51e82527049f9470aed7d44434ceb87ccf338ce887c1c484f8951f396839a7ab41af3bd1fb8a562c0fe848acbcd8454de6a5a88453c0b249340eb288c70d50a47a4b95e2ea6545b4ce0eef21d5ccb6d52f86e87934f6b670f5ada8d3c40e8c7135924e37e901d95209fb9e526ea93140d918756c3a9fc8024a42d98befa81d9104588118d429942a1ef8ad745b77a35bfb2a13f76f3c11932f1074c23a2b798b3ba689594e2caf2d93894d4237d7b63b1681d6e7e06ae27a04cc1b49b93793504d8611ccebdc51319d3bdb5da170d8a3fe9d0ca5bba707112d592d86af2bc4126a169b4d89668b03932ab21e7cf2b14323d1feb57388d02cb5d306e0f0ecdcda68ee458b4529b98cb795f934e3fae0897070bcaca52489669a233f4bc567f9dd733c6096e73bff5fc989de438151f81d50546fcc91031389505cdefb4f5c3f9940d620d35925df3208170738cef74cb3a3770f5787bc4e0fdcc7136c24fee0a0cb00be243808ee3bd4c24ceeff57576edc2c93ae01e9b37ead6fa292a6a55d2f694037c88d85bfe7980e78c2f458b3c3e6e282c1d7f076ec4d729b100407e02d00ee7c74454a770b9e6b2eeaa80ada8c93d61bf974c8a2d2f7e8d66d7b52bd03e2f64943508b04397eba2d8ceaad4e3bd05b04c5bfcbe23ba3811236ad9787ed939679638ae092458190f0529ff01f0ba7637fa44c2429cf9fc68df2807794df122b770618085a9030de33b7179047e87e436dca4c6dd75110c62bcdcb26f4c66e0597ca60f6b4afd8037f86c996da7e0ad5eada33bec40bc9523f06f9e5ad7ceda9ca5c3eaa59db9d44ef6023f18789c9469d6985801dc8c10dc92d0cbd65c14fbefdcc60b42e3025f23e63191cae1bc6c065f90bddc5d4a4864e91c0e9297c0573a65231383635e104eede1b0f436bb7e9573a5d782e0928021e03a4d63330026b58af9a29308b2bff3fe94a0a15b4ccaa3402e58a3a6266f89b30c4f596c92ab94e25338f33a40a656f003897a310a98355d45caa18d22ea004483b7fe6ac71f9b17fde28d34e2a12979ceaa42b5459694035d16af906bf88c59a340bee458e1bd6fa4f27fc3b1b21222d3c53904d82a0f7c7b97c435ddc41e4a9c97e34d230f1014240085e47a944d8c571904eafba447787bd34738e0b0b509c706e66015fe4f735da4563f804bfc0304b0f818047a1623a63633874e71c7c1d9bf85cbd5d5523e06000878e6118fbe7063046b771f1c72ce3562d19e02c2dff8b6c0be7f514d38a23a5f71402198fb902d9d3e19aae50ce7a5eca5f9e0a49e59cf40a167777ce27be01988f644a3a69c4e9d87fbdfe4eb63deb21db71ab6aa2f321773ae69c2e97b282d9fbcf2c9e56b7c218436a242ff64880b0bc8a63daa69dc909e125f68217a6b169858228c6e1c77d01384ff527d16357f549d18674f9f05912d89fe252efce2f5862db57c3bf4667cc7bbda03d33be4ee07a8b9185096b5c211475bb114967ac48f770abdc60cc7087a31483de7a75aaede95551f0ebb557f5ecfa809832234c252b2a4563a620b4ae26f01d98d2c513abff9e34222fb811450b8d289541dd661924686a8075ea1279f3411ca65cd770b1a52fb4bd2cde67a0eb6a835981e72b215cb225d58e91b443a2e8bbb58f095beb4535dd8a7dd603143fddc2f4bab9a647730b888cebaff8bd1cd2a538a8cac85bc35b75c755d8f984eb92bf621ae1499f0d1217b487c10537fee46c8563d24d7e9974bd59dae8468806aa0d7306f25fc8e9ac9605387936b40009c94e4dbe1201d45862d22ead0ca7629b72fd95ee3420b1740ce5402e47019c87c33645da5316f2cd20ea607af0c64e001c07394e166deca122af2030d485c7997a338da1f8f18679450b7a7d38fa10e589dcbfe6879fd5059ef8e3054c1c89e124b9e900d566d0e20720bcd970f2b4455787d2e3d3c93b4e5fbf2ee878e7263730712ca410d69c7abb57c07c43257fe579319ca2bdaf0fb32047f7a9e9e757c6b00ca706c3eb090e5a6e58304e204b65660f513b3794d1bf869e86ffcd6af0d8155bf51a6beb05c5b33e5aa011964259564cb4271bc6ad5114a1db67f93d56fb0f6ebc39772ff19d8916d657f0315cdf100933561a5870cc84d80ab8ed504c0f4d3eaef644628d7a69838fe625302834a85b9e68a1da1d6df974f6d66ee3a9679d6c92d35b9fbd4607bfb62be6f12bb21ae12817b5130c4d34445051b4cc2b77716528dc938bbeef19a80e3598b94751757ca0c52de4d0efa48523f3391479b8e8668294ff5eeabfbf9fb258dbe10978b8e2d4a224bd362f44e4967c7e019866069d9fff77ca13064ba75b29c554fe8d85d9eb096cfde76065ac676155b183e9519c4674b07d998c6f48fd93626ae2907bfa88ba1c05dad8ca1d9cd87ee0e1a16165c7080cf01d5ffcc5d136fec62e37d89beb5b92b47562aecb1a5e862092c98c27297b58e25ab5b519789d4ce4270ccf670af16b1777e91e7252de0cc89483eeb1742b79591f9d8453ce821dc0f57ef44adaa8ba5d3ac1cfd893ca64104b5a9118144ac192a55fe04338598af2ceda13d0411e19159f3d6810a067f10be168a636d33ef5d10d36a71fc576c7cb9a505a172e7894f8e7a99c976db67aebeb63b71b465d1611c1ae72e620577e28479401ec7ded4bedf5de95afa7e61079aa372c8f003988b2d67893ea582f70bc991eeb1be14fa6b4be5c5a5592b94b135e0fd14dec1980547ea0b8b563f0e67db1157aa0b72c20aa88cc94a443b8537cb7ca7b36b06d9653f3acb0bd7df1dacdc2016569e26782157f24864d1da6cc2993d1af7041bb35049de2b32428dab5d77cb73a6ffe51f9d27d8cd1a92c15e3b352b6b25558ebbb3083f3adc2b3dcaf39c9050e70f6fdc3bdd8572d746db91ea70f2ece5242b3eda11f2ef6ede77d1b1a64c6a4b7be47deb9f0be1a54e1d33be894e2c28f4de7cbd66f24a344a65461e062b8fb00ff60ef27ed6838c96656a63523c9f8bbfbf2df717e4c870c38ac905d8d211e1f5aa9a267a5c25df21e22ecaa3ffddfca43ff072a305fdda038d6af76399bcfce16c817fd099e4fed1c800310c29dfe4d8942911460f92d1842b8e9933ce48ea1b514dff59fdc4c2c45b86d9b8e82b5ef163a1529c70b6b8ce7b65178b3cd5c9cf949f50f988f239fb8a1ba1c29c4b25a128bf8194ec2c10827fb9613f5a99c1c834093461b8f6e53aa6d94163c8e2dce392dc84e5c1edbd7a111ead3375f0ebc685f282a61e4e8b2846e358a2795bdc662a06777778d3063ec27a5740262f3f7a3d78b25678f1c2461e9585ea2e64efd76f058b841db693c618f13acebf4c91a346aa53758fa792a44e6e8b780f3dccc542887d209e380c63818f54988dea9f0ce6af6efaf486438f03ad1c6765b01bde35a2108d75493ecee390f4e32483de4954c552ff257ae5ebf2f0bc6b1568a513ef2c3b03e2a947ad11f3141e7f117d5c64641a428ef96512ad5dcd87ad7c524f4779de6b697715f041d8214109388ae2591cb0c4dafa117ff1abe974715b753923a37ffc92ca889355cf27b9ed716135014b00dfd67eda44036a5972882a7ccee7111786529ec7e4b6a3f8a679fae13c1307808affba3358804735fdd176a943ee6c2c3f0b75d5b24b2d3291c113a213de834a40e4be852f5353598cb69055622692899877417e44ee8f4240f4e03f2a5aabcd9744557006dc43c46ed3e10c429c2feb27c2f73b10155025d392df971d1c9a531ac656ed220740e60007cc8312e3132a4c362a4aab2ef9b9ce9aa8bf5c7dc087bbc1d36cd01a64146e25dbf5ffb4ef6aeb2e7bf41e667fce914b91c798a4a5cdc42fee5672e3579c81c8632491f9e3dac3db98af6853c7739b1d2f8b674c7ee064a369ab3d728943537e83afc3072f1b0904028dc59670057c8e1be3f87739ade029ee04cef6fc3ff337d562dc0b33a9291c93e7e6386bbb3c00a28b259eab54416a6768a2b101174d7bd448658db0219108bfa20a21fe581c5f9dad277a55a59888edc49519c63c5698df0040a8a9c2045e6ce196a179df69edb9432803f3b2453bb1f7e8fdbc1925b11e08261e6852453737e26c5d6f13035f692804cad855991a72d4b42456289e3276234681d70a100bc30c7de24be649599fca8b2b68fffbace6022573c559ec3c0045d5f3b3a0bc758f4d53c60c9257ccd6480f7f69159c624904b164a0363de1036446226d48542183ba8eab5a022f7a1a506775a150a90b9b1784bd8f3fd0fd680919a719e6e05f39cde575ddcc8e620695a0344429446649928c7d592d7a7da784da704fb77a3a843d0f7a0aaa5952d70ee02fc3fc9f411db15b8f4478dc556a468b801c4473c3b811c36adff5fe891eb5e5a24ab14761b32d740cc023a79e08e78d2cef1b6049500f4dc11c2742a85a740f7f72aa36a98dac7a2bf8e633c350217a4a7d28c72b13e0fd3f34dab0f047883347ce3d505961d86f1235e8b013bd3becdf4f1354f5f1277dd70e1e9195751ae559af912ced13937a24dfbc3250d3f077bf8c0da446cc7a171defb7523ee1f00183020cb68d8e2886b44b58ab9701dab8647c68a741c49747c87b086a82cca460e4f823df889d65fc3fdf411c9da42f58017a8a44d3ddd9f6e9a1042b5cd666b620ad63f187ad14a1c431c4b029757fc5768394fa566a044d7f4c0899e9518dca0fb82674f2929914b954c533cef513bd91b7f3b6a97e211670dff360cdf113690901d5ee1fb0fa7173194f680269280ad01903b19493cc5fa40fd39ba14fce42a564a60725a3af3bcbbf9e5afaabc0c30e3880e14dbf312bef24d8b5655a168a04287731baf010ea83b3faf90c1278dfe8ff5d63f2f227f1f442e2c3f3502a8a0dbd08aa81b7fc9d2b482c61c5eea2fd8af6ff99efd496ece37860d45d00b5c08d745914d0787ccdb2985038b23d240734dd2c642621155d7217fb2d01e2e4b321a96f6c0fbe76ce4b3bfc65ff89a47927770eeb65d13079eaa59c5590b0b96efcff49b0e5ee36b39d8de8787e905e936c786bf0cbc365cbd6e713eefdeb4b25cde17b4f8a1535c24bc456110ade49b376c16fe3f539bcc051e81b7ab804534ae7604859267affbaf5e3bb0408b026f2854e97116d579766cf1c9008c579b7301d7c6677ecb044c95a4a2ddf4ddfe92483c0a327ccb10496db12cb89312a711770cc238380c97f728fd0ca291365fa405620e3dd8c1e05b8c250e1b1078c49627c9b559fcd824f27924149da438c3ce50d3f8e6093774214ea2a5f05845ad75fbf475ead686ee9455dea6fb23b129dbed847088f1aa5a7841fa919708b6ef80f30dd825df3ce40c52644c08d0ba1af7b40487d520eb098043c8c0c7edf12dba54ad07ff3736e9c14187b0b2c394ce5bc7996e1887239730433d9f1db832317f50d933c148fbec7d0d6556af42001790d2cce233435a1fa562135ec29c627fa53f639fa3cf5b17fe4e65c310c76b25fe6a41aa4c01731e27d1e3bc32deb9a2ddb2faa03fdec3a0e1f132913d52effdcd9ec25498cc17e8bed2cfa751a3789fe59070547f00c5bcca4c40b3449d3eff75bea4767ebce55389ec1248d176a9c598c9e5cae14cb08c2773dc2280b3edf8b044f629f81457dbf4c3ff9878b71e35c21f08fe08893f4adb32d7892a0dd5c72f8cc698978407f47435fcfdfee0f57fe196d2f1b8762eb4e08c6cb899f5fbe4c785c43cf3997a58c1c02f1006594912c6102041d5f2b844c7a85beeece74cd54b245ab5667b6572c0c50b58c720547b9576e21b11233e4111a18d5292e4247b1b84eff7b854df92046df32ef30f5d2642a94f4e22fbfcd1cc067a7ce5b466360f8e8dff4b133635978d2f6f967d57b36e51476643a3f43ea59f3b42939db6fbadb8f73cd66e7ea873038a09b3aab6591431aee982205313a5300ebb2b37de8c847ce29403994cee6c69e7907b26ae560b2104498ac1c26598d67ade76e90407efbb65785bad1e611a5d683a77e1063c7bfe3819005ed16f56b49ca3aa445e71ad7daa2596129f2b31b6f8aed115cd8fe84225c3b9d9044885ee854496c306c90968ba192dc61f2cb100164e7aed155f7731f91279e963a509c6c0d168d057123a48fb2894775d5bab0a8b8aed6a7f68971df5033aceaf3b2d19f5a2b32942a129afc71358b37c69e701a316d3385907a02855224dcaa510e100b097e862e5c12f64617011b61d682f0b89b4ebca64e47a32930515560eb564a59f9b854d039154d2fec61a2353351a46d834b329dc01988c112f67601e00783d22e0c8fe618c5d071120b7caa217b44f9240f7cb8ab91ffe23b0fbd53b3ed25fccb121db94bc1f1f40af4f758f624546866ee8d0474babba07de9cebb6f82b6bcdb5ba7c189c07e875ac3a9115ece4c2f26304148772ee457a40fa89315fb72e92acccf6c0402e75ebb1a4c18c95de11c02ef8229593721dfaae8ebe7a0bbcf2a76b3f796c56f3c95acab717069f25611912cb52ff2080bb54cccfd7c94796783edfd4256f303dad455cde3fd9dd70bc3c8a23dc6ccd7226422ab475b04ddf738bcccf8bbfe7f7e0eb05440f3dd1aaa6bf597662064dc786200162f222558ae9b8318f687fc31d8b3f975e7232c356452b48a0852a03f5e99c5a3936f79a623f02c22685f077343dca9862abcb143d977e33cd118873e19cce48ed0a777cd59f4c66ece99a5a712a4e517b2cb4f1d538415bea88903724e190c49a0e33c91f5e40215657957599b8a1b97506eca430c8aad3ada44afd029db94e89271c7a75bd7d59022a1d9af4f2130641abc55e961bdd31f82dcbb866a3664dbc088366b2541ed0704ce44599d68c34b50f080a8064ec89461084397ccbef4a150ca85af2b78c4631e1ff559eda77f957b1fae32d85627f3e0e868e3ccfb0c3fea2678a6082440e0bd613cedb6b576db4700124c964b8814dd60f6d9721d767ad5708f340500a4fad718cecbb65d167ad37674820ee29119681cd09715825ad321cd1447aea33c2fa6b3e8a557f5b01417e1ef0edac4d5748bc6e7c9dfc4edafdd286e1ab791387e78a776483448ceed6f700e079ae3a914151563dfe0ecf4adf2ddac4d77ba0d465c40468cf745fcbda754e63e6a1fc9a1607f2c9a72d12803e4ecf4c7983ba5c55c37d2c60b995820bcdda80c8b6a7f35c557892bb90395e72554afd19afb8e269a103c77e966a5442ce4ca4bfb7f1af02471f100af55797180ef3f0620a7e86f20d4201e7536b738570703c64e13a2ad35743c4279a58f360bdf2ecdd11d9ee6587f9aecddb84f777469f29bfd5d9a6879a93fb9d8b335076d44fb3ae24d11389c00fe59324c94a714cfe431514ee85468e5dd5add8618efa3dec3d4f82957c7eb70ace8574a8772b0edd1d6043c2536fa1cb2025ca1495bf36e1720cf9808b6884fa5b955d901ef5a882039f4105ef31621bf60d44f347033d1333873a573476d8a5337a0ed585074055baddc6edcba2fbbd58a78828cdc3556de7a427feb3ba640dd4cf3a5e88036f9912f8d07e705ff6b48b89aabfee3b1a5b55bdfc2809b924a05e623578130b51a4c8bd4c24f5e49d7e3adb88e6f56d98b71ab6ca0393fa6f928efe7aabd0dcf88fb5a67ca8847d71ecaca5d86d3be1f66fa132fd48d2533d882de369b61677aeeda92f3181c5c004c646f71d217782e7ce12a174f5d950992405fe8bd40e3e2de2d79ab0c079991e66c7f625c3698594816f04acb36693e30832721fe2322731b2c81736b55a50f12dabd43675d5100f1864e4ab237daa77a4eed0f4ce7f6c25028181631fa51e1781cd0f8e074d93feb249bd53a22b0b8f9839c1c441605c2c00bc2ba4bf418dcd6d8a6118e389821f1f6bd7ae0551041908acc55a89538d130bc27ade04f347624645cbecef23b8ce28e49d8e7ebffd5f3537bf45de29edc1a3ee51b537f0ee92f62d651cd064d4342ede80345ae15d81451274764c795da7812b8a667b591704b55531ddc3356aba6af16e3f83774daeee5a5fa6d473eb25c3d21f46616dbd5f84fd63b833981b970d7163f2ea41938844497f8c799601b1f1cd07ae28989806ae15f4173fae6bee1815eac8eb56d3885ecefdd9ce40003440904d5f08e3afd80da52e3de384d9c5e0aadbfa59056462e199d79092f6ca6c41fb964d64f9d4edb616721c70b73373c4e27c8ee19a5c400b575c945c9670de01c12d10070d8a37b1104bc91f7ae1a14487bf311bacfa1cdd3a25faa6baa801c4bb4fbdc777b2af7dd0c0e9d8dec07221f7c730badd5bb974b4ce5933e507feac3b4bf0b2983814bd4b6642df831c68ac1be22fbf211f8e48d20b74d9052201d6882d5c0571685e9559cfab88d778415e3055f11e5c73e8b488f8d376153c71dad825bd3084a2211cc32da2c7fd9119219e2fc0ec71069b59dbde8ab92cfc718d30a0d1caf8ce43504c0b7edd5262ec0c28c35d511588f5e2dc4ebb8beb0cf1391d8f3f006d1e68da5ce7808931e4f42be1b1231cf5473c371e6ecab79dbd4d622cfa1171e0d16dd4b9147b3744ddb0d080ce12c345def1548bb076eb22b549cae3c01f229ef0da85d09a28daff62dc4152dce78aa10fa7ddfa06debf42acf64e09b0b7c662c7d0a1b9cb85766b5c81165d88bcb9a2d8abef513b44d117f9bd4104d50c2d50919f22d6f92f912406bfcf46730402ea4c9df732d6b852f6c8ac8219ac454ad38b7c9231a6d943019b6f9c811cf979fff67db77bf55cfd33abc207a5fa6b859355e317713905955dcc276f08ace89e1eb792fb9874942b54f646458d43558e6951fb1b752a5e50e667bb5600aaf9e8d06559cbc301df59e76614467c293cf221668f72a36df36f5f9c4b07ab921d312e3260f4d39b71be297a1de29a01660c5a32931df7a85b65a485f05d0b14703d2f38457114f1e9ef9e62588e86f72502e1bc2704864241517eed2922b6107d37df374d35944259277bec79aeb310a1a307706099cafa54fa86ac05aa0717eac5f243c2c56822086cb093fee3f3edfebbebd827badfe572a8944ceef0ab0a22eb48549110de7bd94cef112a905e5a712e0890c6e321af720fc634795d18e67dc673ba93e20627723b44d65a2833b8e5bf4f6da3e5398aebcae54451d9bc440e59bf74594efdf68111ef7720cf2c7b5ba912c7eb91bcb1273b4112e73214cd605235cc61b541e16c425dd13f7d31b2f5479d8da843178949b2ce1b59f9d61f1522421249e17738c91fe3aeafd498317dbd154bb2aead30f90ee2d91df03fcdec0fa888075e4fc4cfdff32fc2015ba70f1e876d921300aa42600ebd3e06d217fed273ddde0495b5e4e7a3a475784d2d28b8d3485da4253952ae43b5c7b579ab1bc8f3197b0bd22660ac3888c5eb777963bde82e857d2df1997675d0164432de38e3b3cd123d49f48a495410c2b8df660c4521fa44c965ddd6090cb2eba611b985df57020f8a0037f112d236b56ec379dccc0b185fb89da75db74aee66f6a5e28dbbf5f1fc2458b4b4ec9e0ff24bd7576410105fce69adb89a7839c945effecdba91ed1b21b2cd7c8e8ab577f4ed5a30c158a7a31d0ba8c8249dea396b541151db6f702baf875a7c7663b422515709e8a90b5435f0647d3594ca9e8ef035972ad9fd452d84f767ab0159bfae88940fe850f8459c21cd0b05bb77261c339ec2a2b4c9dd3df0c74c65638bebd4625090d9651e81721d61693d103a87ded77b829b6f14fcd565e0b2276a2a49f27feb156fe8bee6eabe7afabe1c1dc23b6ea5d85e8d158326020250e35da752296483896c573530a946d8d18270790cfb3d2d72528cc4d89cb8c28e19a29bfcfdd819c05a01f841363a29796e4722ef9fce3619ce5e6155ba34243888569a184eec63f2408f33f463b9be53ee62479ce95da60c8d64bd7366410f23fd8f6ba46b1dd9f1e614fe6af3e2d1e6af074f097325f1fe405343f17eebd5e03803f567efe71ae18dabd3effa4c07ab59e056cf287a26f6831574abff7d9e33c28ca4a4f6f3e54b01eb93cc4a58b8645a18442b60b7994e0922ebdefda1d03918eccedf053cdd680b1402ce55e843e5c1cc060b99b65bc224e44edf074775b5e0ca15a75ec7f9b0c5ce34d09b03379d8dfd1be02b1fc83ad44664c014f3167a01cf4212eb1615d3afff7d1fb88f429bd817ddc745ab7432f46e6c6db8449e28765ad7c6700f88a34eb10f542b4b6c158f0ba80664cc24db13c907ca2bd2a0ed293bd4852b30b111c52329b68627b3cdf172992d877ba618837df5f4273c5e2e2865e5dcb3a385e9bcf0bb278537a7ace766b3f5290a7f691d1d7dd9bb198971900824109887bbdd8fcc694e24cc751a0c2966616109c0eb2485ed5d0c90a6e7bf7104ef87bd324197d630027522669efba6e0196212fcc895a34274883031a888daff0fdb4b5b1ed0d39a79bdf54eccc4c5c0ce418391ccd2411c6bedc512a537ca333059379a13a6212ce250fb84280ed631a0296411aa2e8b93adcd8a5bf271bc50d4156b733c6862a297f4721ac31676e2c777dd1e708ee1870e7f60817e7c4bb35b784e2f707b9fc50e3c14872e23823b447e2765af046ec629146bf3093b62ded6502f304759f85f5870d2f37c0092027744d1979fb20018508020ff863fe06b5061f27757cf54ef5726d5ffadda911f8d3a97da467505d8cd7b9b0926a7ecf29533559b33afcd738c1aea67ec00277acf3e815314d33fbebae474b971c525001bb27ad672f70b81127e94824e553c88051c7964b92d6afd19299fb1c4efa8e3c500f659ff0b5d924b35de390f2f522b79d99b253a6e7abe3f1d71c906536308891ef54455e18e6d238e7376454ea67df6a539e53307680461d9b07e9f93414f386d05b52d55acf7a4d019b11e7d8e18e67d85da16c9a74b998333a17936b3dd2bbf105a4c4e67a1fbcfc08b57d60aadc0d3f4bc4e449e61ba7dd4a009d59d4dbe239db9141c1fd5c9ea5db20be9bae3f968de3dab10b6d804e26562b282df73236169e873de5f0a133fcf2f984caff5aa3354d696dab4592be8b65ab63986675124957906b2e197828008f6d3ff656b88758684cc4ddc69c55700af3689ba524d8603fb1d79911cdc081079d8d29188dd8535f8827a8fa05bf59450fe2f312a18705bdb1948dd7551672a5617a9b5d4ccf063aa896843ddd1d72b17ebc49265765bfd06ca186fb8de5052de85948738e55f52fe1c4d8128ae89cb415ce52aab6bbf192f84f9e9dda10c9c85c5f14299598a90eea46e3c8a21153900f4459eec15e0b05c559e755eb6203384d18ac71bfc31ab436fb7c4b660c114f1d233e191775ec08a06a6d3587d6d7027d91b65acce5930d3dbcc6c94dc0eb9debfb1f167d3df8d4d33dd84bc078d1797afda60b6d18e3ac4fba68a849540bd4897f351740733b53608d14a965785b318335631bae623b81bc20432452b0ba6fc302e37111f79bb906218f124c4c0c8742980e30db1773f9c103e48b2e534b589106cc0790d922a6fca498806469b911bfff74c58361d4cdb593edb4e5598fe1357de60b0431c7025e56266c55ccb0b8c2d09c0252b6703f2a750619ab123e8d1852f196f6dd877e504ec69731f058a2dcd40e2367b7847f0c19943ee2c587ce91cc118ae96b9c368197efac32a2e721e597bd4586c411f9bc37dd7738b6d3eba0e3a40680f8e8d8dd571ae33029c859b09283809f2cc97a34e5826c49f8a69582917016ef99ce258191469a99e521199282070b5ebbb7a2939b487476208f31133ec32e5f2b5eeccadb9dd54093a5501f0c615b2d1cb7c14d4ca5bca944074b4c162faf4ebd5bbc4ac0b49e0c94a29a6439236deacb900f1896f05f3c7db14e7e301400c505f1054b19e52190db839b3578fd0a5b27ec1d3765c808b97a0d6f71e7571631eaec9d037767f19271bbfac0f0b1b2956c475fc13dbf6da62c7b072c2fb877a1b73c742ca43a3d28ac6473589e0d93c84f70b965e31fd844fd817dd2490023e31523430d89551486780a91261e3400315bba7b37c06e8aa1543f0007fce622cbe5325bf485ef408f43911e91c8bbd6b7e8611a98badbe15fbdb94f24b2c6ca1b00a35ecb27e6552906210daeed8337d79c2a8b6f9684cd7b34ea4a3b4a0642bb1d3ba88ac37d1978d61f16577e6ac6b031ffd376c096a320d140f4cbd59821abe42937098719e662e7cff51ec3232021303580b0003d92168a208f454d68ec726ef7313602ab39587b3f121103252a9cdb3daf3e61d7da688b80b3ad6c9e6d2bdcc346f857032b9bfbd3855e3369fb2a50308eca6b8494adaad3cbb9affa58eaa3c74963f0a3e710de034bd42074200458189ec7062d8016bd1512e8db106a2b1c3d19561fe66e3cafd2d1eee82e63d6b38cea28e0eb158676fcd2cedc62ca877918731b9dba2513b3f8dac41ff6dfda6f50d8c25a359470241fba93c3bdb76d6a160f668fb7f0ae1a60e631102c722b4f24e35df719cc9ff745ac0f577e1fa06fb19967da705be14a9319d6c05e5dc23b343dbbe9ef3b799322c8b762d6b1df182676ae8396d96628c6768a103da2dd81ccb83d85a3a3553e8d1a290500173a45f46879f4bb3cb308378eb089bb0ad25e438839300c2ec9d64c355b445e41d509fde050b43efcb3360c41a622b7de53ca2773884e4596ead4c84fb3d8be7401a0f7f9a5f8ba53fdb4a3c669d7746fffb4a361e309a9818d695018f71de721e63a4aa519e4269b08d5bab18b11cabc61eca98bdd8d01240354e2b8d710663c251fe6fcb9979611a5f00072cd38fc9969af88f10fccbfc68250011af9b0ca2ceca99d235b3a07777fe402ade051a46e8254441d8fa3489842273","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"fe727b3ec2446f3e9140a7a09442f679"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
